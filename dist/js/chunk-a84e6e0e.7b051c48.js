(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a84e6e0e"],{"0384":function(e,t,i){"use strict";i("c5aa")},"3ba9b":function(e,t,i){"use strict";i("a59c")},5548:function(e,t,i){"use strict";i("ca41")},"5c64":function(e,t,i){"use strict";i("fafb")},"78dc":function(e,t,i){"use strict";var c=i("7a23"),a=Object(c["J"])("data-v-129ab776"),s=a((function(e,t,i,a,s,o){return s.ifShowToast?(Object(c["q"])(),Object(c["e"])("div",{key:0,class:"toast-wrapper",onMouseenter:t[1]||(t[1]=function(){return o.toastOn&&o.toastOn.apply(o,arguments)}),onMouseleave:t[2]||(t[2]=function(){return o.toastOff&&o.toastOff.apply(o,arguments)})},[Object(c["g"])("div",{class:"toast-text",innerHTML:i.text},null,8,["innerHTML"])],32)):Object(c["f"])("",!0)})),o=i("e8ec"),n={data:function(){return{ifShowToast:!1,animationTime:1e3,task:-1}},props:{text:{type:String,default:"温馨提示"},MouseEnterFocus:{type:Boolean,default:!0},MouseLeaveOff:{type:Boolean,default:!0},ifPersistence:{type:Boolean,default:!1}},methods:{toastOn:function(){this.MouseEnterFocus&&(this.ifShowToast=!0,clearTimeout(this.task),this.ifShowToast=!0)},toastOff:function(){var e=this;this.MouseLeaveOff&&(this.task=setTimeout((function(){e.ifShowToast=!1}),this.animationTime/6))}},mounted:function(){var e=this,t=Object(o["h"])();console.log(this.ifPersistence),this.ifPersistence&&!t?(this.ifShowToast=!0,this.task=setTimeout((function(){e.ifShowToast=!1,Object(o["q"])(!0)}),this.animationTime)):this.ifPersistence||(this.ifShowToast=!0,this.task=setTimeout((function(){e.ifShowToast=!1}),this.animationTime))}};i("bc19");n.render=s,n.__scopeId="data-v-129ab776";t["a"]=n},8959:function(e,t,i){"use strict";i("ecec")},a59c:function(e,t,i){},b9bd:function(e,t,i){"use strict";i.r(t);var c=i("7a23"),a=Object(c["J"])("data-v-9bccea32");Object(c["t"])("data-v-9bccea32");var s={class:"store-detail"},o={class:"book-info"},n={class:"book-info-left"},r={class:"book-cover"},l={class:"book-info-right"},d={class:"book-name"},f={class:"book-author"},b={class:"book-read"},u=Object(c["g"])("div",{class:"line-wrapper"},[Object(c["g"])("div",{class:"line"})],-1),h={class:"publish-info"},O={class:"row"},j=Object(c["g"])("div",{class:"label"},"出版社",-1),v={class:"publisher"},k={class:"row"},g=Object(c["g"])("div",{class:"label"},"语言",-1),p={class:"language"},y={class:"row"},m=Object(c["g"])("div",{class:"label"},"分类",-1),w={class:"category"},T=Object(c["g"])("div",{class:"line-wrapper"},[Object(c["g"])("div",{class:"line"})],-1);Object(c["r"])();var B=a((function(e,t,i,a,B,S){var I=Object(c["y"])("detail-title"),x=Object(c["y"])("detail-footer"),C=Object(c["y"])("tick");return Object(c["q"])(),Object(c["e"])("div",s,[Object(c["g"])(I),Object(c["g"])("div",o,[Object(c["g"])("div",n,[Object(c["g"])("div",r,[Object(c["g"])("img",{src:B.bkdetail.cover,class:"cover"},null,8,["src"])])]),Object(c["g"])("div",l,[Object(c["g"])("div",d,Object(c["B"])(B.bkdetail.title),1),Object(c["g"])("div",f,Object(c["B"])(B.bkdetail.author),1),Object(c["g"])("div",b,"已读："+Object(c["B"])(S.readTimes)+" 分钟",1)])]),u,Object(c["g"])("div",h,[Object(c["g"])("div",O,[j,Object(c["g"])("div",v,Object(c["B"])(S.shrink(B.bkdetail.publisher)),1)]),Object(c["g"])("div",k,[g,Object(c["g"])("div",p,Object(c["B"])(e.lang(B.bkdetail.language)),1)]),Object(c["g"])("div",y,[m,Object(c["g"])("div",w,Object(c["B"])(e.categoryToChinese(B.bkdetail.category)),1)])]),T,Object(c["g"])(x,{bkdetail:B.bkdetail},null,8,["bkdetail"]),Object(c["g"])(C,{class:"tick",dialog:S.dialog},null,8,["dialog"])])})),S=(i("99af"),i("365c")),I=i("e8ec"),x=Object(c["J"])("data-v-62f21ed9");Object(c["t"])("data-v-62f21ed9");var C={class:"detail-title"},q=Object(c["g"])("span",{class:"icon-back icon"},null,-1),L={class:"title-right-wrapper"};Object(c["r"])();var P=x((function(e,t,i,a,s,o){return Object(c["q"])(),Object(c["e"])("div",C,[Object(c["g"])("div",{class:"title-left-wrapper",onClick:t[1]||(t[1]=function(){return e.back&&e.back.apply(e,arguments)})},[q]),Object(c["g"])("div",L,[Object(c["g"])("span",{class:"icon-shelf icon",onClick:t[2]||(t[2]=function(){return o.showBookShelf&&o.showBookShelf.apply(o,arguments)})})])])})),_={methods:{showBookShelf:function(){this.$router.push({path:"/store/shelf"})}}};i("3ba9b");_.render=P,_.__scopeId="data-v-62f21ed9";var D=_,J=Object(c["J"])("data-v-2703e3e6");Object(c["t"])("data-v-2703e3e6");var M={class:"detail-foot-wrapper"},E={key:0,class:"line-progress-wrapper"};Object(c["r"])();var $=J((function(e,t,i,a,s,o){var n=Object(c["y"])("line-progress"),r=Object(c["y"])("toast");return Object(c["q"])(),Object(c["e"])("div",M,[Object(c["g"])("div",{class:["detail-footer",{"show-shadow":!s.ifDownloadProgress}]},[Object(c["g"])("div",{class:"read",onClick:t[1]||(t[1]=function(){return o.read&&o.read.apply(o,arguments)})},"阅读"),o.ifCache?(Object(c["q"])(),Object(c["e"])("div",{key:1,class:"cache",onClick:t[3]||(t[3]=function(){return o.delCache&&o.delCache.apply(o,arguments)})},"删除缓存")):(Object(c["q"])(),Object(c["e"])("div",{key:0,class:"cache",onClick:t[2]||(t[2]=function(){return o.saveCache&&o.saveCache.apply(o,arguments)})},"缓存书籍")),o.ifBookAddToShelf?(Object(c["q"])(),Object(c["e"])("div",{key:2,class:"shelf",onClick:t[4]||(t[4]=function(){return o.remove&&o.remove.apply(o,arguments)})}," 已加入书架 ")):(Object(c["q"])(),Object(c["e"])("div",{key:3,class:"shelf",onClick:t[5]||(t[5]=function(){return o.add&&o.add.apply(o,arguments)})},"加入书架"))],2),s.ifDownloadProgress?(Object(c["q"])(),Object(c["e"])("div",E,[Object(c["g"])(n,{width:s.percent,color2:s.color2},null,8,["width","color2"])])):Object(c["f"])("",!0),Object(c["g"])(c["b"],{name:"toast"},{default:J((function(){return[s.ifToast?(Object(c["q"])(),Object(c["e"])(r,{key:0,text:s.text,ifPersistence:!1},null,8,["text"])):Object(c["f"])("",!0)]})),_:1})])})),V=Object(c["J"])("data-v-2cf1cdfa");Object(c["t"])("data-v-2cf1cdfa");var A={class:"line-progress"};Object(c["r"])();var F=V((function(e,t,i,a,s,o){return Object(c["q"])(),Object(c["e"])("div",A,[Object(c["g"])("div",{class:"outside-line",style:{"background-color":i.color1}},[Object(c["g"])("div",{class:"inside-line",style:{"background-color":i.color2,width:i.width+"%"}},null,4)],4)])})),N=(i("a9e3"),{props:{color1:{type:String,default:"transparent"},color2:{type:String,default:"red"},width:{type:Number,default:1}}});i("5c64");N.render=F,N.__scopeId="data-v-2cf1cdfa";var H=N,U=i("101f"),z=i("78dc"),G={props:["bkdetail"],data:function(){return{ifDownloadProgress:!1,percent:0,animateTime:2500,color2:"#DC1B42",flatBookIndex:-1,ifToast:!1,text:"<p>请先加入到书架</p>"}},computed:{ifBookAddToShelf:function(){this.refreshBookShelf();for(var e=0;e<this.shelfList.length;e++)if(this.shelfList[e].bookId==this.bkdetail.bookId)return this.setShelfBkIndex(e),!0;return!1},ifCache:function(){if(this.shelfBkIndex<0)return!1;try{var e=this.shelfList[this.shelfBkIndex].cache;return 1==e}catch(t){return!1}}},components:{LineProgress:H,Toast:z["a"]},methods:{add:function(){var e=JSON.parse(JSON.stringify(this.bkdetail));e.type=1,this.addToBookShelf(e)},remove:function(){var e=this.bkdetail.title;this.removeFromBookShelf(e)},read:function(){var e=this.$route.query.category,t=this.$route.query.filename;this.showEbook(t,e)},saveCache:function(){var e=this;if(console.log(this.shelfBkIndex),this.shelfBkIndex<0)return this.ifToast=!0,void setTimeout((function(){e.ifToast=!1}),2e3);this.ifDownloadProgress=!0,Object(S["b"])(this.bkdetail,(function(t){e.ifDownloadProgress=!1,e.shelfList[e.shelfBkIndex].cache=!0,e.refreshLocalStorage(e.shelfList),e.setIfTickVisible(!0),setTimeout((function(){e.setIfTickVisible(!1),e.percent=0}),e.animateTime)}),(function(t){e.percent=Math.ceil(t.loaded/t.total*100)}),(function(e){console.log("err:",e)}))},delCache:function(){var e=this;this.ifDownloadProgress=!0,this.setIfTickVisible(!0),this.shelfList[this.shelfBkIndex].cache=!1,setTimeout((function(){e.ifDownloadProgress=!1,Object(U["b"])(e.shelfList[e.shelfBkIndex].fileName),e.refreshLocalStorage(e.shelfList),e.setIfTickVisible(!1)}),this.animateTime)}},created:function(){var e="ifBookAddToShelf: ".concat(this.ifBookAddToShelf," ; shelfBkIndex : ").concat(this.shelfBkIndex);console.log(e)}};i("0384");G.render=$,G.__scopeId="data-v-2703e3e6";var K=G,Q=Object(c["J"])("data-v-2c1bb299");Object(c["t"])("data-v-2c1bb299");var R={key:0,class:"tick-wrapper"},W=Object(c["g"])("svg",{width:"400",height:"400"},[Object(c["g"])("circle",{fill:"none",stroke:"#68E534","stroke-width":"20",cx:"200",cy:"200",r:"190",class:"circle","stroke-linecap":"round",transform:"rotate(-90 200 200) "}),Object(c["g"])("polyline",{fill:"none",stroke:"#68E534","stroke-width":"24",points:"88,214 173,284 304,138","stroke-linecap":"round","stroke-linejoin":"round",class:"tick"})],-1);Object(c["r"])();var X=Q((function(e,t,i,a,s,o){return e.ifTickVisible?(Object(c["q"])(),Object(c["e"])("div",R,[W,Object(c["g"])("h2",null,Object(c["B"])(i.dialog),1)])):Object(c["f"])("",!0)})),Y={props:["dialog"]};i("5548");Y.render=X,Y.__scopeId="data-v-2c1bb299";var Z=Y,ee={data:function(){return{bkdetail:-1}},components:{detailTitle:D,detailFooter:K,Tick:Z},computed:{readTimes:function(){var e=this.$route.query.filename,t=this.$route.query.category,i="".concat("http://121.36.70.55/Style","/").concat(t,"/").concat(e,".epub"),c=Object(I["g"])(i);return c?Math.ceil(c/60):0},dialog:function(){if(this.shelfBkIndex<0)return"不在书架当中";try{var e=this.shelfList[this.shelfBkIndex].cache;return!1===e?"删除缓存成功":"缓存成功"}catch(t){return"SUCCESS"}return"SUCCESS"}},methods:{getData:function(){var e=this,t=this.$route.query.filename;Object(S["a"])(t).then((function(t){e.bkdetail=t.data.data}))},shrink:function(e){return e&&e.length>=20?e.substring(0,20):e},init:function(){this.getData()}},mounted:function(){this.init()}};i("8959");ee.render=B,ee.__scopeId="data-v-9bccea32";t["default"]=ee},bac1:function(e,t,i){},bc19:function(e,t,i){"use strict";i("bac1")},c5aa:function(e,t,i){},ca41:function(e,t,i){},ecec:function(e,t,i){},fafb:function(e,t,i){}}]);
//# sourceMappingURL=chunk-a84e6e0e.7b051c48.js.map