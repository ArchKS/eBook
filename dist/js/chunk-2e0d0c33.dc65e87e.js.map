{"version":3,"sources":["webpack:///./node_modules/lodash/_getRawTag.js","webpack:///./node_modules/epubjs/src/utils/constants.js","webpack:///./node_modules/epubjs/src/utils/core.js","webpack:///./node_modules/lodash/throttle.js","webpack:///./node_modules/core-js/modules/es.string.split.js","webpack:///./node_modules/epubjs/src/utils/url.js","webpack:///./node_modules/lodash/isObjectLike.js","webpack:///./node_modules/es5-ext/object/assign/is-implemented.js","webpack:///./node_modules/type/plain-function/is.js","webpack:///./node_modules/epubjs/src/utils/replacements.js","webpack:///./node_modules/es5-ext/string/#/contains/is-implemented.js","webpack:///./node_modules/lodash/isObject.js","webpack:///./node_modules/es5-ext/object/valid-callable.js","webpack:///./node_modules/base64-js/index.js","webpack:///./node_modules/es5-ext/object/assign/index.js","webpack:///./node_modules/xmldom/dom-parser.js","webpack:///./node_modules/lodash/_objectToString.js","webpack:///./node_modules/lodash/_root.js","webpack:///./node_modules/epubjs/src/mapping.js","webpack:///./node_modules/epubjs/src/epub.js","webpack:///./node_modules/lodash/_baseGetTag.js","webpack:///./node_modules/path-webpack/path.js","webpack:///./node_modules/lodash/now.js","webpack:///./node_modules/core-js/internals/is-regexp.js","webpack:///./node_modules/epubjs/src/utils/hook.js","webpack:///./src/components/ebook/EbookReader.vue","webpack:///./node_modules/epubjs/src/index.js","webpack:///./src/components/ebook/EbookReader.vue?05bb","webpack:///./node_modules/epubjs/src/contents.js","webpack:///./node_modules/lodash/_freeGlobal.js","webpack:///./node_modules/epubjs/src/utils/path.js","webpack:///./node_modules/epubjs/src/utils/request.js","webpack:///./node_modules/type/object/is.js","webpack:///./node_modules/es5-ext/object/is-value.js","webpack:///./node_modules/type/function/is.js","webpack:///./node_modules/es5-ext/object/keys/shim.js","webpack:///./node_modules/xmldom/dom.js","webpack:///./src/components/ebook/EbookReader.vue?674f","webpack:///./node_modules/es5-ext/object/keys/index.js","webpack:///./node_modules/marks-pane/lib/svg.js","webpack:///./node_modules/epubjs/src/layout.js","webpack:///./node_modules/epubjs/src/managers/continuous/index.js","webpack:///./node_modules/epubjs/src/epubcfi.js","webpack:///./node_modules/type/prototype/is.js","webpack:///./node_modules/ieee754/index.js","webpack:///./node_modules/type/value/is.js","webpack:///./node_modules/epubjs/src/utils/queue.js","webpack:///./node_modules/es5-ext/object/valid-value.js","webpack:///./node_modules/epubjs/src/themes.js","webpack:///./node_modules/epubjs/src/annotations.js","webpack:///./node_modules/epubjs/src/rendition.js","webpack:///./node_modules/epubjs/libs/url/url-polyfill.js","webpack:///./node_modules/lodash/_Symbol.js","webpack:///./node_modules/core-js/modules/es.array.join.js","webpack:///./node_modules/epubjs/libs/mime/mime.js","webpack:///./node_modules/epubjs/src/section.js","webpack:///./node_modules/epubjs/src/spine.js","webpack:///./node_modules/epubjs/src/locations.js","webpack:///./node_modules/epubjs/src/container.js","webpack:///./node_modules/epubjs/src/packaging.js","webpack:///./node_modules/epubjs/src/navigation.js","webpack:///./node_modules/epubjs/src/resources.js","webpack:///./node_modules/epubjs/src/pagelist.js","webpack:///./node_modules/epubjs/src/archive.js","webpack:///./node_modules/epubjs/src/book.js","webpack:///./node_modules/marks-pane/lib/marks.js","webpack:///./node_modules/lodash/debounce.js","webpack:///./node_modules/lodash/toNumber.js","webpack:///./node_modules/buffer/index.js","webpack:///./node_modules/jszip/dist/jszip.min.js","webpack:///./node_modules/event-emitter/index.js","webpack:///./node_modules/marks-pane/lib/events.js","webpack:///./node_modules/xmldom/sax.js","webpack:///./node_modules/epubjs/src/managers/views/iframe.js","webpack:///./node_modules/isarray/index.js","webpack:///./node_modules/epubjs/src/managers/helpers/stage.js","webpack:///./node_modules/epubjs/src/managers/helpers/views.js","webpack:///./node_modules/epubjs/src/managers/default/index.js","webpack:///./node_modules/es5-ext/function/noop.js","webpack:///./node_modules/es5-ext/object/keys/is-implemented.js","webpack:///./node_modules/es5-ext/object/normalize-options.js","webpack:///./node_modules/d/index.js","webpack:///./node_modules/es5-ext/object/assign/shim.js","webpack:///./node_modules/es5-ext/string/#/contains/shim.js","webpack:///./node_modules/es5-ext/string/#/contains/index.js","webpack:///./node_modules/lodash/isSymbol.js"],"names":["Symbol","objectProto","Object","prototype","hasOwnProperty","nativeObjectToString","toString","symToStringTag","toStringTag","undefined","getRawTag","value","isOwn","call","tag","unmasked","e","result","module","exports","EPUBJS_VERSION","DOM_EVENTS","EVENTS","BOOK","OPEN_FAILED","CONTENTS","EXPAND","RESIZE","SELECTED","SELECTED_RANGE","LINK_CLICKED","LOCATIONS","CHANGED","MANAGERS","RESIZED","ORIENTATION_CHANGE","ADDED","SCROLL","SCROLLED","VIEWS","AXIS","LOAD_ERROR","RENDERED","DISPLAYED","SHOWN","HIDDEN","MARK_CLICKED","RENDITION","STARTED","ATTACHED","DISPLAY_ERROR","REMOVED","LOCATION_CHANGED","RELOCATED","LAYOUT","UPDATED","requestAnimationFrame","window","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","ELEMENT_NODE","TEXT_NODE","_URL","URL","webkitURL","mozURL","uuid","d","Date","getTime","replace","c","r","Math","random","floor","documentHeight","max","document","documentElement","clientHeight","body","scrollHeight","offsetHeight","isElement","obj","nodeType","isNumber","n","isNaN","parseFloat","isFinite","isFloat","f","indexOf","prefixed","unprefixed","vendors","prefixes","upper","toUpperCase","slice","length","style","i","defaults","arguments","source","prop","extend","target","sources","forEach","getOwnPropertyNames","propName","defineProperty","getOwnPropertyDescriptor","insert","item","array","compareFunction","location","locationOf","splice","_start","_end","compared","start","end","pivot","parseInt","a","b","indexOfSorted","bounds","el","getComputedStyle","widthProps","heightProps","width","height","borders","nodeBounds","node","elPos","doc","ownerDocument","Node","elRange","createRange","selectNodeContents","getBoundingClientRect","windowBounds","innerWidth","innerHeight","top","left","right","bottom","indexOfNode","typeId","sib","parent","parentNode","children","childNodes","index","indexOfTextNode","textNode","indexOfElementNode","elementNode","isXml","ext","createBlob","content","mime","Blob","type","createBlobUrl","tempUrl","blob","createObjectURL","revokeBlobUrl","url","revokeObjectURL","createBase64Url","data","datauri","btoa","encodeURIComponent","parse","markup","forceXMLDom","Parser","DOMParser","charCodeAt","parseFromString","qs","sel","elements","Error","querySelector","getElementsByTagName","qsa","querySelectorAll","qsp","props","q","filtered","Array","filter","getAttribute","sprint","root","func","treeWalker","NodeFilter","SHOW_TEXT","walk","createTreeWalker","nextNode","callback","firstChild","walked","nextSibling","blob2base64","Promise","resolve","reject","reader","FileReader","readAsDataURL","onloadend","defer","this","id","promise","freeze","querySelectorByType","html","element","query","getAttributeNS","findChildren","push","parents","nodes","unshift","filterChildren","nodeName","single","toLowerCase","getParentByTagName","tagname","tagName","RangeObject","collapsed","commonAncestorContainer","endContainer","endOffset","startContainer","startOffset","startNode","_commonAncestorContainer","collapse","_checkCollapsed","endNode","toStart","referenceNode","setStart","setEnd","endIndex","textContent","startParents","endParents","debounce","isObject","FUNC_ERROR_TEXT","throttle","wait","options","leading","trailing","TypeError","fixRegExpWellKnownSymbolLogic","isRegExp","anObject","requireObjectCoercible","speciesConstructor","advanceStringIndex","toLength","callRegExpExec","regexpExec","fails","arrayPush","min","MAX_UINT32","SUPPORTS_Y","RegExp","SPLIT","nativeSplit","maybeCallNative","internalSplit","split","separator","limit","string","String","lim","match","lastIndex","lastLength","output","flags","ignoreCase","multiline","unicode","sticky","lastLastIndex","separatorCopy","apply","test","O","splitter","regexp","res","done","rx","S","C","unicodeMatching","p","A","z","Url","urlString","baseString","basePath","absolute","pathname","href","protocol","origin","hash","search","base","Path","directory","filename","extension","what","fullpath","isAbsolute","relative","isObjectLike","assign","foo","bar","trzy","isFunction","classRe","functionToString","Function","replaceBase","section","head","createElement","insertBefore","setAttribute","replaceCanonical","link","canonical","appendChild","replaceMeta","meta","idref","replaceLinks","contents","fn","links","replaceLink","linkUrl","onclick","path","bind","substitute","urls","replacements","str","contains","byteLength","toByteArray","fromByteArray","lookup","revLookup","Arr","Uint8Array","code","len","getLens","b64","validLen","placeHoldersLen","lens","_byteLength","tmp","arr","curByte","tripletToBase64","num","encodeChunk","uint8","join","extraBytes","parts","maxChunkLength","len2","locator","buildErrorHandler","errorImpl","domBuilder","DOMHandler","errorHandler","isCallback","build","key","msg","_locator","cdata","position","lineNumber","columnNumber","l","systemId","_toString","chars","substr","java","lang","appendElement","hander","currentElement","mimeType","sax","XMLReader","defaultNSMap","xmlns","entityMap","setDocumentLocator","nbsp","copy","xml","error","startDocument","DOMImplementation","createDocument","documentURI","startElement","namespaceURI","localName","qName","attrs","createElementNS","getURI","getValue","attr","getQName","createAttributeNS","getLocator","nodeValue","setAttributeNode","endElement","current","startPrefixMapping","prefix","uri","endPrefixMapping","processingInstruction","ins","createProcessingInstruction","ignorableWhitespace","ch","characters","charNode","createCDATASection","createTextNode","skippedEntity","name","endDocument","normalize","comment","comm","createComment","startCDATA","endCDATA","startDTD","publicId","impl","implementation","createDocumentType","dt","warning","console","warn","fatalError","XMLSerializer","objectToString","freeGlobal","freeSelf","self","Mapping","layout","direction","axis","dev","horizontal","_dev","view","ranges","findRanges","map","rangeListToCfiList","cfiBase","rangePairToCfiPair","findStart","findEnd","startRange","toRange","endRange","selection","defaultView","getSelection","removeAllRanges","addRange","acceptNode","trim","FILTER_ACCEPT","FILTER_REJECT","safeFilter","columns","scrollWidth","spreads","ceil","spreadWidth","count","divisor","columnWidth","gap","pages","$el","found","stack","$prev","shift","findTextStartRange","round","findTextEndRange","range","pos","splitTextNodeIntoRanges","prev","_splitter","text","rangePair","startCfi","endCfi","cifPair","ePub","VERSION","global","Book","Rendition","Contents","CFI","utils","nullTag","undefinedTag","baseGetTag","process","assertPath","normalizeStringPosix","allowAboveRoot","lastSlash","dots","j","_format","sep","pathObject","dir","posix","cwd","resolvedPath","resolvedAbsolute","trailingSeparator","joined","arg","from","to","fromStart","fromEnd","fromLen","toEnd","toLen","lastCommonSep","fromCode","toCode","out","_makeLong","dirname","hasRoot","matchedSlash","basename","extIdx","firstNonSlashEnd","extname","startDot","startPart","preDotState","format","ret","delimiter","now","classof","wellKnownSymbol","MATCH","it","Hook","context","hooks","args","promises","task","executing","all","class","onMaskClick","move","moveEnd","onMouseEnter","onMouseMove","onMouseUp","rendtion","offsetX","timestamp","firstOffsetY","mouseState","mouseStartTime","methods","timeStamp","preventDefault","stopPropagation","offsetY","clientY","SET_OFFSETY","time","bookmarkHeight","htmlFontSize","y","changedTouches","prePage","nextPage","toggleMenuAndTitle","getFileUrl","fileName","$route","params","fileUrl","err","SET_FILENAME","initEpub","TOGGLE_TITLEANDMENUVISIABLE","refreshLocation","next","initLocalStorage","register","addStylesheet","then","_","displays","font","size","theme","themeList","book","rendition","themes","SET_DEFAULTFONTFAMILY","defaultFontFamily","fontSize","SET_DEFAULTFONTSIZE","defaultFontSize","select","SET_DEFAULTTHEME","defaultTheme","initGlobalCss","SET_BOOKAVAIABLE","initPages","ready","locations","generate","parseBook","loaded","cover","archive","createUrl","SET_COVER","metadata","SET_METADATA","navigation","nav","navItem","toc","find","level","parentItem","SET_NAVIGATION","ebook","SET_BOOK","renderTo","method","mounted","render","__scopeId","hasNavigator","isChrome","navigator","userAgent","isWebkit","sectionIndex","epubcfi","_size","epubReadingSystem","listeners","w","frame","h","rect","border","overflow","overflowX","overflowY","property","priority","setProperty","$viewport","parsed","newContent","settings","hasAttribute","_width","_height","_scale","_minimum","_maximum","_scalable","scale","minimum","maximum","scalable","scrollTo","emit","imageLoadListeners","mediaQueryListeners","addEventListeners","addSelectionListeners","resizeListeners","linksHandler","removeEventListeners","removeSelectionListeners","clearTimeout","expanding","textWidth","textHeight","onResize","resizeCheck","setTimeout","addEventListener","sheets","styleSheets","mediaChangeHandler","m","matches","_expanding","expand","rules","cssRules","media","mql","matchMedia","mediaText","addListener","observer","MutationObserver","mutations","config","attributes","childList","characterData","subtree","observe","img","images","naturalWidth","onload","fonts","ignoreClass","targetPos","isCfiString","container","newRange","Range","substring","getElementById","src","$stylesheet","rel","onreadystatechange","readyState","styleEl","styleSheet","sheet","rl","rule","selector","propStr","pl","insertRule","selectors","keys","definition","isArray","_rules","$script","async","className","classList","add","remove","eventName","triggerEvent","removeEventListener","onSelectionChange","selectionEndTimeout","triggerSelectedEvent","cfirange","rangeCount","getRangeAt","_cfi","cfi","viewport","layoutStyle","css","COLUMN_AXIS","COLUMN_GAP","COLUMN_WIDTH","COLUMN_FILL","writingMode","scaleStr","translateStr","widthScale","heightScale","scaler","mapping","page","mode","WRITING_MODE","_layoutStyle","version","hasFeature","feature","disconnect","removeListeners","pathString","isDirectory","charAt","splitPathRe","exec","request","withCredentials","headers","header","supportsURL","BLOB_RESPONSE","deferred","xhr","XMLHttpRequest","xhrPrototype","handler","onerror","open","setRequestHeader","DONE","responseXML","responseType","status","response","message","JSON","overrideMimeType","send","isValue","possibleTypes","_undefined","val","isPrototype","object","dest","_extends","Class","Super","pt","create","ppt","__proto__","t","constructor","htmlns","NodeType","ATTRIBUTE_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","ExceptionCode","ExceptionMessage","HIERARCHY_REQUEST_ERR","INDEX_SIZE_ERR","DOMSTRING_SIZE_ERR","NOT_FOUND_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR","NO_DATA_ALLOWED_ERR","NO_MODIFICATION_ALLOWED_ERR","INUSE_ATTRIBUTE_ERR","NOT_SUPPORTED_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR","DOMException","captureStackTrace","NodeList","LiveNodeList","refresh","_node","_refresh","_updateLiveList","list","inc","_inc","ls","__set__","NamedNodeMap","_findNodeIndex","_addNamedNode","newAttr","oldAttr","ownerElement","_onRemoveAttribute","_onAddAttribute","_removeNamedNode","features","_features","_xmlEncoder","_visitNode","Document","ns","_nsMap","_onUpdateChild","newChild","cs","child","_removeChild","previous","previousSibling","lastChild","_insertBefore","nextChild","cp","removeChild","newFirst","newLast","pre","_appendSingleChild","Element","Attr","CharacterData","Text","Comment","CDATASection","DocumentType","Notation","Entity","EntityReference","DocumentFragment","ProcessingInstruction","nodeSerializeToString","isHtml","nodeFilter","buf","refNode","lookupPrefix","visibleNamespaces","namespace","serializeToString","needNamespaceDefine","isHTML","pubid","sysid","sub","internalSubset","importNode","deep","node2","cloneNode","v","attrs2","_ownerElement","getNamedItem","setNamedItem","setNamedItemNS","getNamedItemNS","removeNamedItem","removeNamedItemNS","versions","qualifiedName","doctype","refChild","replaceChild","oldChild","hasChildNodes","appendData","isSupported","hasAttributes","lookupNamespaceURI","isDefaultNamespace","importedNode","rtv","createDocumentFragment","createAttribute","specified","createEntityReference","getAttributeNode","removeAttribute","removeAttributeNode","setAttributeNodeNS","removeAttributeNS","old","getAttributeNodeNS","hasAttributeNS","setAttributeNS","getElementsByTagNameNS","substringData","offset","insertData","replaceData","deleteData","splitText","newText","newNode","getTextContent","get","$$length","set","default","Layout","_spread","spread","_minSpreadWidth","minSpreadWidth","_evenSpreads","evenSpreads","flow","_flow","delta","update","_gap","pageWidth","formating","fit","totalLength","pageLength","newProps","ContinuousViewManager","super","infinite","offsetDelta","viewSettings","forceEvenPages","scrollTop","scrollLeft","display","fill","_full","full","enqueue","check","distX","distY","isPaginated","scrollBy","onDisplayed","createView","views","append","on","expanded","updateAxis","afterDisplayed","afterResized","counter","prepend","heightDelta","widthDelta","_offset","isVisible","viewsLength","visible","updating","displayed","show","hide","destroy","trimTimeout","catch","_offsetLeft","_offsetTop","checking","newViews","_bounds","rtl","visibleLength","contentLength","first","last","firstIndex","above","below","erase","prevTop","prevLeft","fullsize","scrollY","scrollX","stage","ignore","addScrollListeners","scroller","tick","prevScrollTop","prevScrollLeft","scrollDeltaVert","scrollDeltaHorz","onScroll","_scrolled","scrolled","didScroll","abs","scrollTimeout","afterScrolled","forceUpdate","EpubCFI","cfiFrom","spinePos","parseComponent","steps","checkType","fromRange","fromNode","cfiStr","baseComponent","pathComponent","getChapterComponent","getPathComponent","getRange","componentStr","terminal","component","assertion","parseTerminal","step","parseStep","stepStr","has_brackets","termialStr","characterOffset","textLocationAssertion","indirection","splitStr","part","segment","segmentString","joinSteps","cfiString","cfiOne","cfiTwo","stepsA","stepsB","terminalA","terminalB","concat","filteredNode","filteredPosition","currentNode","filteredStep","stepA","stepB","needsIgnoring","patchOffset","pathTo","equalStep","anchor","sibling","isText","curr","totalOffset","currNodeType","prevNodeType","prevIndex","textNodes","normalizedMap","xpath","_doc","evaluate","walkToNode","stepsToXpath","XPathResult","FIRST_ORDERED_NODE_TYPE","singleNodeValue","findNode","lastStepIndex","childIndex","startSteps","endSteps","missed","log","fixMiss","_spineNodeIndex","_pos","spineNodeIndex","read","buffer","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","s","NaN","Infinity","pow","write","rt","LN2","Queue","_q","running","paused","queued","run","inwait","dequeue","defered","flush","_themes","_overrides","_current","_injected","inject","overrides","registerThemes","registerUrl","registerRules","input","getContents","removeClass","addClass","serialized","addStylesheetRules","injected","override","highlights","underlines","marks","_annotations","_annotationsBySectionIndex","unloaded","clear","cfiRange","cb","styles","encodeURI","annotation","Annotation","attach","_removeFromAnnotationBySectionIndex","detach","_annotationsAt","annotations","mark","highlight","underline","unhighlight","ununderline","unmark","manager","stylesheet","resizeOnOrientationChange","script","serialize","handleLinks","passEvents","adjustImages","spine","injectIdentifier","injectStylesheet","injectScript","opened","starting","started","viewManager","View","ViewManager","requireManager","requireView","queue","load","package","globalLayoutProperties","determineLayoutProperties","afterRemoved","onResized","onOrientationChange","reportLocation","displaying","_display","cfiFromPercentage","triggerMarkEvent","trigger","orientation","moveTo","resize","properties","_layout","applyLayout","updateFlow","isRendered","changed","updateLayout","currentLocation","located","percentage","total","totalPages","locationStart","locationFromCfi","locationEnd","percentageFromLocation","pageStart","pageList","pageFromCfi","pageEnd","atEnd","atStart","listenedEvents","ev","triggerViewEvent","computed","paddingTop","paddingBottom","ident","identifier","factory","scope","hasWorkingUrl","forceJURL","u","relativePathDotMapping","isRelativeScheme","scheme","invalid","_isInvalid","IDNAToASCII","percentEscape","percentEscapeQuery","EOF","ALPHA","ALPHANUMERIC","stateOverride","errors","state","cursor","seenAt","seenBracket","loop","_scheme","_isRelative","_query","_fragment","_schemeData","_host","_port","_path","_username","_password","nextC","nextNextC","pop","tempC","temp","jURL","_url","authority","host","hostname","port","OriginalURL","$","IndexedObject","toIndexedObject","arrayMethodIsStrict","nativeJoin","ES3_STRINGS","STRICT_METHOD","proto","forced","table","mimeTypes","subtype","defaultValue","linear","_request","loading","rendering","rendered","Serializer","isIE","serializer","excerpt","cfiFromRange","globalLayout","_range","unload","spineItems","spineByHref","spineById","items","manifest","baseUrl","_package","resolver","spineItem","manifestItem","generateChapterComponent","nextIndex","decodeURI","each","pause","_locations","break","_currentCfi","processingTimeout","completed","_break","parser","dist","loc","compare","cfiFromLocation","stringify","setCurrent","stop","containerDocument","packagePath","encoding","rootfile","xmlEncoding","packageDocument","navPath","ncxPath","coverPath","metadataNode","manifestNode","spineNode","parseManifest","findNavPath","findNcxPath","findCoverPath","parseSpine","parseMetadata","title","getElementText","creator","description","pubdate","publisher","language","rights","modified_date","getPropertyText","media_active_class","manifestXml","selected","overlay","spineXml","propArray","itemref","tocId","packageXml","pkg","epubVersion","metaCover","coverId","json","resources","label","tocByHref","tocById","landmarks","landmarksByType","ncx","parseNav","parseLandmarks","parseNcx","unpack","subitems","navHtml","navElement","navItems","landmarkItem","tocXml","navPoints","ncxItem","navLabel","replacementUrls","assets","cssUrls","splitUrls","parsedUrl","replaced","replacement","createCssFile","replacementUrl","indexInUrls","newUrl","textResponse","getText","relUrls","assetHref","resolved","relativeTo","firstPage","lastPage","packageUrl","isCfi","pg","percent","percentageFromPage","zip","urlCache","checkRequirements","JSZip","isBase64","loadAsync","zipUrl","getBlob","handleResponse","decodededUrl","decodeURIComponent","entry","file","uint8array","useBase64","base64","getBase64","fromCache","CONTAINER_PATH","INPUT_TYPE","BINARY","BASE64","EPUB","OPF","MANIFEST","DIRECTORY","requestMethod","requestCredentials","requestHeaders","openAs","opening","isOpen","archived","packaging","determineType","openEpub","openPackaging","openManifest","openContainer","unarchive","opf","loadNavigation","attachTo","credentials","retrieved","replaceCss","Underline","Highlight","Mark","Pane","_get","receiver","desc","getPrototypeOf","getter","_createClass","defineProperties","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_svg","_svg2","_interopRequireDefault","_events","_events2","__esModule","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","setPrototypeOf","_classCallCheck","instance","proxyMouse","g","idx","unbind","setCoords","coords","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","iterator","return","dispatchEvent","rects","getClientRects","box","contained","_Mark","_this","dataset","docFrag","filteredRanges","_Highlight","line","rect1","rect2","toNumber","nativeMax","nativeMin","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","maxing","invokeFunc","thisArg","leadingEdge","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","cancel","debounced","isInvoking","isSymbol","NAN","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","other","valueOf","isBinary","ieee754","typedArraySupport","subarray","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","encodingOrOffset","allocUnsafe","ArrayBuffer","fromArrayBuffer","fromString","fromObject","assertSize","alloc","checked","isEncoding","actual","fromArrayLike","byteOffset","isBuffer","isnan","SlowBuffer","isView","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","readUInt16BE","foundIndex","hexWrite","Number","remaining","strLen","utf8Write","blitBuffer","asciiWrite","asciiToBytes","latin1Write","base64Write","ucs2Write","utf16leToBytes","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","decodeCodePointsArray","INSPECT_MAX_BYTES","poolSize","_augment","species","allocUnsafeSlow","_isBuffer","x","swap16","swap32","swap64","equals","inspect","thisStart","thisEnd","thisCopy","targetCopy","includes","toJSON","_arr","MAX_ARGUMENTS_LENGTH","codePoints","fromCharCode","toHex","bytes","checkOffset","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","maxBytes","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","base64clean","stringtrim","units","leadSurrogate","byteArray","hi","lo","dst","o","require","1","encode","getTypeOf","decode","2","compressedSize","uncompressedSize","crc32","compression","compressedContent","getContentWorker","pipe","uncompressWorker","streamInfo","data_length","getCompressedWorker","withStreamInfo","createWorkerFrom","compressWorker","3","STORE","magic","DEFLATE","4","5","binary","createFolders","date","compressionOptions","unixPermissions","dosPermissions","6","lie","7","Uint16Array","Uint32Array","_pako","_pakoAction","_pakoOptions","inherits","processChunk","_createPako","transformTo","cleanUp","raw","onData","pako","8","utf8encode","I","k","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCFullYear","getUTCMonth","getUTCDate","B","E","fileRecord","R","LOCAL_FILE_HEADER","dirRecord","CENTRAL_FILE_HEADER","bytesWritten","zipComment","zipPlatform","encodeFileName","streamFiles","accumulate","contentBuffer","dirRecords","currentSourceOffset","entriesCount","currentFile","_sources","openedSource","closedSource","DATA_DESCRIPTOR","CENTRAL_DIRECTORY_END","prepareNextSource","isPaused","resume","registerPrevious","generatedError","lock","9","generateWorker","platform","_compressWorker","10","files","clone","support","external","11","decompressed","checkCRC32","optimizedBinaryString","decodeFileName","utf8decode","isNode","isStream","prepareContent","fileNameStr","fileCommentStr","12","_upstreamEnded","_bindStream","_stream","13","Readable","_helper","_read","14","newBufferFrom","allocBuffer","15","folder","generateInternalStream","checkSupport","generateAsync","generateNodeStream","toNodejsStream","16","stream","17","byteAt","zero","lastIndexOfSignature","readAndCheckSignature","readData","18","checkIndex","setIndex","skip","readInt","readString","readDate","UTC","19","20","21","22","23","ZIP64_CENTRAL_DIRECTORY_LOCATOR","ZIP64_CENTRAL_DIRECTORY_END","24","destType","25","26","27","dataIsReady","_tickScheduled","_tickAndRepeat","delay","isFinished","_tick","28","extraStreamInfo","isLocked","_listeners","mergeStreamInfo","29","nodestream","_internalType","_outputType","_mimeType","newBlob","_worker","objectMode","30","arraybuffer","nodebuffer","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","31","leftOver","applyFromCharCode","Utf8DecodeWorker","Utf8EncodeWorker","32","stringifyByChunk","stringifyByChar","applyCanBeUsed","MAX_VALUE_16BITS","MAX_VALUE_32BITS","pretty","readAsArrayBuffer","33","loadOptions","checkSignature","isSignature","readBlockEndOfCentral","diskNumber","diskWithCentralDirStart","centralDirRecordsOnThisDisk","centralDirRecords","centralDirSize","centralDirOffset","zipCommentLength","readBlockZip64EndOfCentral","zip64EndOfCentralSize","zip64ExtensibleData","readBlockZip64EndOfCentralLocator","diskWithZip64CentralDirStart","relativeOffsetEndOfZip64CentralDir","disksCount","readLocalFiles","localHeaderOffset","readLocalPart","handleUTF8","processAttributes","readCentralDir","zip64","readCentralPart","readEndOfCentral","prepareReader","34","isEncrypted","bitFlag","useUTF8","fileNameLength","compressionMethod","versionMadeBy","extraFieldsLength","fileCommentLength","diskNumberStart","internalFileAttributes","externalFileAttributes","readExtraFields","parseZIP64ExtraField","fileComment","extraFields","findExtraFieldUnicodePath","findExtraFieldUnicodeComment","35","_data","_dataBinary","internalStream","_decompressWorker","nodeStream","36","WebKitMutationObserver","setImmediate","MessageChannel","port1","onmessage","port2","postMessage","37","outcome","onFulfilled","callFulfilled","otherCallFulfilled","onRejected","callRejected","otherCallRejected","finally","race","immediate","38","39","chunkSize","windowBits","memLevel","strategy","gzip","ended","chunks","strm","avail_out","deflateInit2","deflateSetHeader","dictionary","string2buf","deflateSetDictionary","_dict_set","next_in","avail_in","Buf8","next_out","deflate","onEnd","buf2binstring","shrinkBuf","deflateEnd","flattenChunks","Deflate","deflateRaw","40","inflateInit2","Z_OK","inflateGetHeader","Z_FINISH","Z_NO_FLUSH","binstring2buf","inflate","Z_NEED_DICT","inflateSetDictionary","Z_BUF_ERROR","Z_STREAM_END","Z_SYNC_FLUSH","utf8border","buf2string","arraySet","inflateEnd","Inflate","inflateRaw","ungzip","41","Int32Array","setTyped","Buf16","Buf32","42","43","44","Z_PARTIAL_FLUSH","Z_FULL_FLUSH","Z_BLOCK","Z_TREES","Z_ERRNO","Z_STREAM_ERROR","Z_DATA_ERROR","Z_NO_COMPRESSION","Z_BEST_SPEED","Z_BEST_COMPRESSION","Z_DEFAULT_COMPRESSION","Z_FILTERED","Z_HUFFMAN_ONLY","Z_RLE","Z_FIXED","Z_DEFAULT_STRATEGY","Z_BINARY","Z_TEXT","Z_UNKNOWN","Z_DEFLATED","45","46","T","D","F","pending","pending_buf","pending_out","total_out","N","_tr_flush_block","block_start","strstart","U","P","L","max_chain_length","prev_length","nice_match","w_size","w_mask","good_match","lookahead","match_start","window_size","hash_size","wrap","adler","total_in","ins_h","hash_shift","hash_mask","Z","match_length","_tr_tally","max_lazy_match","last_lit","W","prev_match","match_available","M","good_length","max_lazy","nice_length","max_chain","H","pending_buf_size","gzhead","gzindex","last_flush","w_bits","hash_bits","dyn_ltree","dyn_dtree","bl_tree","l_desc","d_desc","bl_desc","bl_count","heap","heap_len","heap_max","depth","l_buf","lit_bufsize","d_buf","opt_len","static_len","bi_buf","bi_valid","G","data_type","_tr_init","K","Y","deflateInit","deflateReset","deflateResetKeep","hcrc","extra","os","_tr_align","_tr_stored_block","deflateInfo","47","xflags","extra_len","48","dmax","wsize","whave","wnext","hold","bits","lencode","distcode","lenbits","distbits","sane","49","havedict","wbits","ncode","nlen","ndist","have","work","lendyn","distdyn","back","was","inflateReset","inflateReset2","inflateResetKeep","inflateInit","inflateInfo","50","51","0","52","static_tree","extra_bits","extra_base","elems","max_length","has_stree","dyn_tree","max_code","stat_desc","X","V","J","53","54","once","off","descriptors","callable","listener","__ee__","__eeOnceListener__","candidate","tracked","dispatch","clientX","touches","contentDocument","_i","opts","bubbles","MouseEvent","createEvent","initMouseEvent","cancelable","detail","screenX","screenY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","rectContains","nameStartChar","nameChar","tagNamePattern","S_TAG","S_ATTR","S_ATTR_SPACE","S_EQ","S_ATTR_NOQUOT_VALUE","S_ATTR_END","S_TAG_SPACE","S_TAG_CLOSE","defaultNSMapCopy","fixedFromCharCode","surrogate1","surrogate2","entityReplacer","appendText","xt","lineEnd","linePattern","lineStart","parseStack","currentNSMap","closeMap","tagStart","localNSMap","endMatch","endIgnoreCaseMach","parseInstruction","parseDCC","ElementAttributes","parseElementStartPart","closed","fixSelfClosed","locator2","copyLocator","parseHtmlSpecialContent","attrName","setTagName","nsp","nsPrefix","_copy","elStartEnd","elEndStart","matchs","lastMatch","endDTD","_set_proto_","thiz","reg","getLocalName","IframeView","added","fixedWidth","fixedHeight","pane","flex","iframe","createContainer","scrolling","seamless","resizing","visibility","elementBounds","supportsSrcdoc","sectionRender","setAxis","addListeners","_textWidth","_contentWidth","_textHeight","_contentHeight","_needsReframe","iframeBorders","elBorders","lockedWidth","lockedHeight","force","reframe","prevBounds","event","onLoad","blobUrl","srcdoc","close","contentWindow","layoutFunc","transform","offsetWidth","stopExpanding","offsetTop","offsetLeft","emitter","addMark","removeMark","_options","hidden","wrapper","wordSpacing","lineHeight","verticalAlign","flexDirection","flexWrap","_element","getElement","resizeFunc","orientationChangeFunc","containerStyles","containerPadding","_windowBounds","bodyStyles","bodyPadding","rulesArray","getSheet","Views","_views","optsSettings","renditionQueue","getContainer","_stageSize","orientationTimeout","resizeTimeout","stageSize","winBounds","scrolledLocation","paginatedLocation","pageHeight","used","sections","startPos","endPos","currPage","endPage","startPage","tempStartPage","offsetPrev","offsetNext","_container","silent","calculate","setLayout","viewContents","opts1","isPlainFunction","normalizeOpts","dscr","gs","searchString","symbolTag"],"mappings":"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","file":"js/chunk-2e0d0c33.dc65e87e.js","sourcesContent":["var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","export const EPUBJS_VERSION = \"0.3\";\n\n// Dom events to listen for\nexport const DOM_EVENTS = [\"keydown\", \"keyup\", \"keypressed\", \"mouseup\", \"mousedown\", \"click\", \"touchend\", \"touchstart\"];\n\nexport const EVENTS = {\n  BOOK : {\n    OPEN_FAILED : \"openFailed\"\n  },\n  CONTENTS : {\n    EXPAND : \"expand\",\n    RESIZE : \"resize\",\n    SELECTED : \"selected\",\n    SELECTED_RANGE : \"selectedRange\",\n    LINK_CLICKED : \"linkClicked\"\n  },\n  LOCATIONS : {\n    CHANGED : \"changed\"\n  },\n  MANAGERS : {\n    RESIZE : \"resize\",\n    RESIZED : \"resized\",\n    ORIENTATION_CHANGE : \"orientationchange\",\n    ADDED : \"added\",\n    SCROLL : \"scroll\",\n    SCROLLED : \"scrolled\"\n  },\n  VIEWS : {\n    AXIS : \"axis\",\n    LOAD_ERROR : \"loaderror\",\n    RENDERED : \"rendered\",\n    RESIZED : \"resized\",\n    DISPLAYED : \"displayed\",\n    SHOWN : \"shown\",\n    HIDDEN : \"hidden\",\n    MARK_CLICKED : \"markClicked\"\n  },\n  RENDITION : {\n    STARTED : \"started\",\n    ATTACHED : \"attached\",\n    DISPLAYED : \"displayed\",\n    DISPLAY_ERROR : \"displayerror\",\n    RENDERED : \"rendered\",\n    REMOVED : \"removed\",\n    RESIZED : \"resized\",\n    ORIENTATION_CHANGE : \"orientationchange\",\n    LOCATION_CHANGED : \"locationChanged\",\n    RELOCATED : \"relocated\",\n    MARK_CLICKED : \"markClicked\",\n    SELECTED : \"selected\",\n    LAYOUT: \"layout\"\n  },\n  LAYOUT : {\n    UPDATED : \"updated\"\n  }\n}\n","/**\n * Core Utilities and Helpers\n * @module Core\n*/\n\n/**\n * Vendor prefixed requestAnimationFrame\n * @returns {function} requestAnimationFrame\n * @memberof Core\n */\nexport const requestAnimationFrame = (typeof window != \"undefined\") ? (window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame) : false;\nconst ELEMENT_NODE = 1;\nconst TEXT_NODE = 3;\nconst COMMENT_NODE = 8;\nconst DOCUMENT_NODE = 9;\nconst _URL = typeof URL != \"undefined\" ? URL : (typeof window != \"undefined\" ? (window.URL || window.webkitURL || window.mozURL) : undefined);\n\n/**\n * Generates a UUID\n * based on: http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript\n * @returns {string} uuid\n * @memberof Core\n */\nexport function uuid() {\n\tvar d = new Date().getTime();\n\tvar uuid = \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function(c) {\n\t\tvar r = (d + Math.random()*16)%16 | 0;\n\t\td = Math.floor(d/16);\n\t\treturn (c==\"x\" ? r : (r&0x7|0x8)).toString(16);\n\t});\n\treturn uuid;\n}\n\n/**\n * Gets the height of a document\n * @returns {number} height\n * @memberof Core\n */\nexport function documentHeight() {\n\treturn Math.max(\n\t\t\tdocument.documentElement.clientHeight,\n\t\t\tdocument.body.scrollHeight,\n\t\t\tdocument.documentElement.scrollHeight,\n\t\t\tdocument.body.offsetHeight,\n\t\t\tdocument.documentElement.offsetHeight\n\t);\n}\n\n/**\n * Checks if a node is an element\n * @param {object} obj\n * @returns {boolean}\n * @memberof Core\n */\nexport function isElement(obj) {\n\treturn !!(obj && obj.nodeType == 1);\n}\n\n/**\n * @param {any} n\n * @returns {boolean}\n * @memberof Core\n */\nexport function isNumber(n) {\n\treturn !isNaN(parseFloat(n)) && isFinite(n);\n}\n\n/**\n * @param {any} n\n * @returns {boolean}\n * @memberof Core\n */\nexport function isFloat(n) {\n\tlet f = parseFloat(n);\n\n\tif (isNumber(n) === false) {\n\t\treturn false;\n\t}\n\n\tif (typeof n === \"string\" && n.indexOf(\".\") > -1) {\n\t\treturn true;\n\t}\n\n\treturn Math.floor(f) !== f;\n}\n\n/**\n * Get a prefixed css property\n * @param {string} unprefixed\n * @returns {string}\n * @memberof Core\n */\nexport function prefixed(unprefixed) {\n\tvar vendors = [\"Webkit\", \"webkit\", \"Moz\", \"O\", \"ms\" ];\n\tvar prefixes = [\"-webkit-\", \"-webkit-\", \"-moz-\", \"-o-\", \"-ms-\"];\n\tvar upper = unprefixed[0].toUpperCase() + unprefixed.slice(1);\n\tvar length = vendors.length;\n\n\tif (typeof(document) === \"undefined\" || typeof(document.body.style[unprefixed]) != \"undefined\") {\n\t\treturn unprefixed;\n\t}\n\n\tfor ( var i=0; i < length; i++ ) {\n\t\tif (typeof(document.body.style[vendors[i] + upper]) != \"undefined\") {\n\t\t\treturn prefixes[i] + unprefixed;\n\t\t}\n\t}\n\n\treturn unprefixed;\n}\n\n/**\n * Apply defaults to an object\n * @param {object} obj\n * @returns {object}\n * @memberof Core\n */\nexport function defaults(obj) {\n\tfor (var i = 1, length = arguments.length; i < length; i++) {\n\t\tvar source = arguments[i];\n\t\tfor (var prop in source) {\n\t\t\tif (obj[prop] === void 0) obj[prop] = source[prop];\n\t\t}\n\t}\n\treturn obj;\n}\n\n/**\n * Extend properties of an object\n * @param {object} target\n * @returns {object}\n * @memberof Core\n */\nexport function extend(target) {\n\tvar sources = [].slice.call(arguments, 1);\n\tsources.forEach(function (source) {\n\t\tif(!source) return;\n\t\tObject.getOwnPropertyNames(source).forEach(function(propName) {\n\t\t\tObject.defineProperty(target, propName, Object.getOwnPropertyDescriptor(source, propName));\n\t\t});\n\t});\n\treturn target;\n}\n\n/**\n * Fast quicksort insert for sorted array -- based on:\n *  http://stackoverflow.com/questions/1344500/efficient-way-to-insert-a-number-into-a-sorted-array-of-numbers\n * @param {any} item\n * @param {array} array\n * @param {function} [compareFunction]\n * @returns {number} location (in array)\n * @memberof Core\n */\nexport function insert(item, array, compareFunction) {\n\tvar location = locationOf(item, array, compareFunction);\n\tarray.splice(location, 0, item);\n\n\treturn location;\n}\n\n/**\n * Finds where something would fit into a sorted array\n * @param {any} item\n * @param {array} array\n * @param {function} [compareFunction]\n * @param {function} [_start]\n * @param {function} [_end]\n * @returns {number} location (in array)\n * @memberof Core\n */\nexport function locationOf(item, array, compareFunction, _start, _end) {\n\tvar start = _start || 0;\n\tvar end = _end || array.length;\n\tvar pivot = parseInt(start + (end - start) / 2);\n\tvar compared;\n\tif(!compareFunction){\n\t\tcompareFunction = function(a, b) {\n\t\t\tif(a > b) return 1;\n\t\t\tif(a < b) return -1;\n\t\t\tif(a == b) return 0;\n\t\t};\n\t}\n\tif(end-start <= 0) {\n\t\treturn pivot;\n\t}\n\n\tcompared = compareFunction(array[pivot], item);\n\tif(end-start === 1) {\n\t\treturn compared >= 0 ? pivot : pivot + 1;\n\t}\n\tif(compared === 0) {\n\t\treturn pivot;\n\t}\n\tif(compared === -1) {\n\t\treturn locationOf(item, array, compareFunction, pivot, end);\n\t} else{\n\t\treturn locationOf(item, array, compareFunction, start, pivot);\n\t}\n}\n\n/**\n * Finds index of something in a sorted array\n * Returns -1 if not found\n * @param {any} item\n * @param {array} array\n * @param {function} [compareFunction]\n * @param {function} [_start]\n * @param {function} [_end]\n * @returns {number} index (in array) or -1\n * @memberof Core\n */\nexport function indexOfSorted(item, array, compareFunction, _start, _end) {\n\tvar start = _start || 0;\n\tvar end = _end || array.length;\n\tvar pivot = parseInt(start + (end - start) / 2);\n\tvar compared;\n\tif(!compareFunction){\n\t\tcompareFunction = function(a, b) {\n\t\t\tif(a > b) return 1;\n\t\t\tif(a < b) return -1;\n\t\t\tif(a == b) return 0;\n\t\t};\n\t}\n\tif(end-start <= 0) {\n\t\treturn -1; // Not found\n\t}\n\n\tcompared = compareFunction(array[pivot], item);\n\tif(end-start === 1) {\n\t\treturn compared === 0 ? pivot : -1;\n\t}\n\tif(compared === 0) {\n\t\treturn pivot; // Found\n\t}\n\tif(compared === -1) {\n\t\treturn indexOfSorted(item, array, compareFunction, pivot, end);\n\t} else{\n\t\treturn indexOfSorted(item, array, compareFunction, start, pivot);\n\t}\n}\n/**\n * Find the bounds of an element\n * taking padding and margin into account\n * @param {element} el\n * @returns {{ width: Number, height: Number}}\n * @memberof Core\n */\nexport function bounds(el) {\n\n\tvar style = window.getComputedStyle(el);\n\tvar widthProps = [\"width\", \"paddingRight\", \"paddingLeft\", \"marginRight\", \"marginLeft\", \"borderRightWidth\", \"borderLeftWidth\"];\n\tvar heightProps = [\"height\", \"paddingTop\", \"paddingBottom\", \"marginTop\", \"marginBottom\", \"borderTopWidth\", \"borderBottomWidth\"];\n\n\tvar width = 0;\n\tvar height = 0;\n\n\twidthProps.forEach(function(prop){\n\t\twidth += parseFloat(style[prop]) || 0;\n\t});\n\n\theightProps.forEach(function(prop){\n\t\theight += parseFloat(style[prop]) || 0;\n\t});\n\n\treturn {\n\t\theight: height,\n\t\twidth: width\n\t};\n\n}\n\n/**\n * Find the bounds of an element\n * taking padding, margin and borders into account\n * @param {element} el\n * @returns {{ width: Number, height: Number}}\n * @memberof Core\n */\nexport function borders(el) {\n\n\tvar style = window.getComputedStyle(el);\n\tvar widthProps = [\"paddingRight\", \"paddingLeft\", \"marginRight\", \"marginLeft\", \"borderRightWidth\", \"borderLeftWidth\"];\n\tvar heightProps = [\"paddingTop\", \"paddingBottom\", \"marginTop\", \"marginBottom\", \"borderTopWidth\", \"borderBottomWidth\"];\n\n\tvar width = 0;\n\tvar height = 0;\n\n\twidthProps.forEach(function(prop){\n\t\twidth += parseFloat(style[prop]) || 0;\n\t});\n\n\theightProps.forEach(function(prop){\n\t\theight += parseFloat(style[prop]) || 0;\n\t});\n\n\treturn {\n\t\theight: height,\n\t\twidth: width\n\t};\n\n}\n\n/**\n * Find the bounds of any node\n * allows for getting bounds of text nodes by wrapping them in a range\n * @param {node} node\n * @returns {BoundingClientRect}\n * @memberof Core\n */\nexport function nodeBounds(node) {\n\tlet elPos;\n\tlet doc = node.ownerDocument;\n\tif(node.nodeType == Node.TEXT_NODE){\n\t\tlet elRange = doc.createRange();\n\t\telRange.selectNodeContents(node);\n\t\telPos = elRange.getBoundingClientRect();\n\t} else {\n\t\telPos = node.getBoundingClientRect();\n\t}\n\treturn elPos;\n}\n\n/**\n * Find the equivelent of getBoundingClientRect of a browser window\n * @returns {{ width: Number, height: Number, top: Number, left: Number, right: Number, bottom: Number }}\n * @memberof Core\n */\nexport function windowBounds() {\n\n\tvar width = window.innerWidth;\n\tvar height = window.innerHeight;\n\n\treturn {\n\t\ttop: 0,\n\t\tleft: 0,\n\t\tright: width,\n\t\tbottom: height,\n\t\twidth: width,\n\t\theight: height\n\t};\n\n}\n\n/**\n * Gets the index of a node in its parent\n * @param {Node} node\n * @param {string} typeId\n * @return {number} index\n * @memberof Core\n */\nexport function indexOfNode(node, typeId) {\n\tvar parent = node.parentNode;\n\tvar children = parent.childNodes;\n\tvar sib;\n\tvar index = -1;\n\tfor (var i = 0; i < children.length; i++) {\n\t\tsib = children[i];\n\t\tif (sib.nodeType === typeId) {\n\t\t\tindex++;\n\t\t}\n\t\tif (sib == node) break;\n\t}\n\n\treturn index;\n}\n\n/**\n * Gets the index of a text node in its parent\n * @param {node} textNode\n * @returns {number} index\n * @memberof Core\n */\nexport function indexOfTextNode(textNode) {\n\treturn indexOfNode(textNode, TEXT_NODE);\n}\n\n/**\n * Gets the index of an element node in its parent\n * @param {element} elementNode\n * @returns {number} index\n * @memberof Core\n */\nexport function indexOfElementNode(elementNode) {\n\treturn indexOfNode(elementNode, ELEMENT_NODE);\n}\n\n/**\n * Check if extension is xml\n * @param {string} ext\n * @returns {boolean}\n * @memberof Core\n */\nexport function isXml(ext) {\n\treturn [\"xml\", \"opf\", \"ncx\"].indexOf(ext) > -1;\n}\n\n/**\n * Create a new blob\n * @param {any} content\n * @param {string} mime\n * @returns {Blob}\n * @memberof Core\n */\nexport function createBlob(content, mime){\n\treturn new Blob([content], {type : mime });\n}\n\n/**\n * Create a new blob url\n * @param {any} content\n * @param {string} mime\n * @returns {string} url\n * @memberof Core\n */\nexport function createBlobUrl(content, mime){\n\tvar tempUrl;\n\tvar blob = createBlob(content, mime);\n\n\ttempUrl = _URL.createObjectURL(blob);\n\n\treturn tempUrl;\n}\n\n/**\n * Remove a blob url\n * @param {string} url\n * @memberof Core\n */\nexport function revokeBlobUrl(url){\n\treturn _URL.revokeObjectURL(url);\n}\n\n/**\n * Create a new base64 encoded url\n * @param {any} content\n * @param {string} mime\n * @returns {string} url\n * @memberof Core\n */\nexport function createBase64Url(content, mime){\n\tvar data;\n\tvar datauri;\n\n\tif (typeof(content) !== \"string\") {\n\t\t// Only handles strings\n\t\treturn;\n\t}\n\n\tdata = btoa(encodeURIComponent(content));\n\n\tdatauri = \"data:\" + mime + \";base64,\" + data;\n\n\treturn datauri;\n}\n\n/**\n * Get type of an object\n * @param {object} obj\n * @returns {string} type\n * @memberof Core\n */\nexport function type(obj){\n\treturn Object.prototype.toString.call(obj).slice(8, -1);\n}\n\n/**\n * Parse xml (or html) markup\n * @param {string} markup\n * @param {string} mime\n * @param {boolean} forceXMLDom force using xmlDom to parse instead of native parser\n * @returns {document} document\n * @memberof Core\n */\nexport function parse(markup, mime, forceXMLDom) {\n\tvar doc;\n\tvar Parser;\n\n\tif (typeof DOMParser === \"undefined\" || forceXMLDom) {\n\t\tParser = require(\"xmldom\").DOMParser;\n\t} else {\n\t\tParser = DOMParser;\n\t}\n\n\t// Remove byte order mark before parsing\n\t// https://www.w3.org/International/questions/qa-byte-order-mark\n\tif(markup.charCodeAt(0) === 0xFEFF) {\n\t\tmarkup = markup.slice(1);\n\t}\n\n\tdoc = new Parser().parseFromString(markup, mime);\n\n\treturn doc;\n}\n\n/**\n * querySelector polyfill\n * @param {element} el\n * @param {string} sel selector string\n * @returns {element} element\n * @memberof Core\n */\nexport function qs(el, sel) {\n\tvar elements;\n\tif (!el) {\n\t\tthrow new Error(\"No Element Provided\");\n\t}\n\n\tif (typeof el.querySelector != \"undefined\") {\n\t\treturn el.querySelector(sel);\n\t} else {\n\t\telements = el.getElementsByTagName(sel);\n\t\tif (elements.length) {\n\t\t\treturn elements[0];\n\t\t}\n\t}\n}\n\n/**\n * querySelectorAll polyfill\n * @param {element} el\n * @param {string} sel selector string\n * @returns {element[]} elements\n * @memberof Core\n */\nexport function qsa(el, sel) {\n\n\tif (typeof el.querySelector != \"undefined\") {\n\t\treturn el.querySelectorAll(sel);\n\t} else {\n\t\treturn el.getElementsByTagName(sel);\n\t}\n}\n\n/**\n * querySelector by property\n * @param {element} el\n * @param {string} sel selector string\n * @param {object[]} props\n * @returns {element[]} elements\n * @memberof Core\n */\nexport function qsp(el, sel, props) {\n\tvar q, filtered;\n\tif (typeof el.querySelector != \"undefined\") {\n\t\tsel += \"[\";\n\t\tfor (var prop in props) {\n\t\t\tsel += prop + \"~='\" + props[prop] + \"'\";\n\t\t}\n\t\tsel += \"]\";\n\t\treturn el.querySelector(sel);\n\t} else {\n\t\tq = el.getElementsByTagName(sel);\n\t\tfiltered = Array.prototype.slice.call(q, 0).filter(function(el) {\n\t\t\tfor (var prop in props) {\n\t\t\t\tif(el.getAttribute(prop) === props[prop]){\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\n\t\tif (filtered) {\n\t\t\treturn filtered[0];\n\t\t}\n\t}\n}\n\n/**\n * Sprint through all text nodes in a document\n * @memberof Core\n * @param  {element} root element to start with\n * @param  {function} func function to run on each element\n */\nexport function sprint(root, func) {\n\tvar doc = root.ownerDocument || root;\n\tif (typeof(doc.createTreeWalker) !== \"undefined\") {\n\t\ttreeWalker(root, func, NodeFilter.SHOW_TEXT);\n\t} else {\n\t\twalk(root, function(node) {\n\t\t\tif (node && node.nodeType === 3) { // Node.TEXT_NODE\n\t\t\t\tfunc(node);\n\t\t\t}\n\t\t}, true);\n\t}\n}\n\n/**\n * Create a treeWalker\n * @memberof Core\n * @param  {element} root element to start with\n * @param  {function} func function to run on each element\n * @param  {function | object} filter funtion or object to filter with\n */\nexport function treeWalker(root, func, filter) {\n\tvar treeWalker = document.createTreeWalker(root, filter, null, false);\n\tlet node;\n\twhile ((node = treeWalker.nextNode())) {\n\t\tfunc(node);\n\t}\n}\n\n/**\n * @memberof Core\n * @param {node} node\n * @param {callback} return false for continue,true for break inside callback\n */\nexport function walk(node,callback){\n\tif(callback(node)){\n\t\treturn true;\n\t}\n\tnode = node.firstChild;\n\tif(node){\n\t\tdo{\n\t\t\tlet walked = walk(node,callback);\n\t\t\tif(walked){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tnode = node.nextSibling;\n\t\t} while(node);\n\t}\n}\n\n/**\n * Convert a blob to a base64 encoded string\n * @param {Blog} blob\n * @returns {string}\n * @memberof Core\n */\nexport function blob2base64(blob) {\n\treturn new Promise(function(resolve, reject) {\n\t\tvar reader = new FileReader();\n\t\treader.readAsDataURL(blob);\n\t\treader.onloadend = function() {\n\t\t\tresolve(reader.result);\n\t\t};\n\t});\n}\n\n\n/**\n * Creates a new pending promise and provides methods to resolve or reject it.\n * From: https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Deferred#backwards_forwards_compatible\n * @memberof Core\n */\nexport function defer() {\n\t/* A method to resolve the associated Promise with the value passed.\n\t * If the promise is already settled it does nothing.\n\t *\n\t * @param {anything} value : This value is used to resolve the promise\n\t * If the value is a Promise then the associated promise assumes the state\n\t * of Promise passed as value.\n\t */\n\tthis.resolve = null;\n\n\t/* A method to reject the assocaited Promise with the value passed.\n\t * If the promise is already settled it does nothing.\n\t *\n\t * @param {anything} reason: The reason for the rejection of the Promise.\n\t * Generally its an Error object. If however a Promise is passed, then the Promise\n\t * itself will be the reason for rejection no matter the state of the Promise.\n\t */\n\tthis.reject = null;\n\n\tthis.id = uuid();\n\n\t/* A newly created Pomise object.\n\t * Initially in pending state.\n\t */\n\tthis.promise = new Promise((resolve, reject) => {\n\t\tthis.resolve = resolve;\n\t\tthis.reject = reject;\n\t});\n\tObject.freeze(this);\n}\n\n/**\n * querySelector with filter by epub type\n * @param {element} html\n * @param {string} element element type to find\n * @param {string} type epub type to find\n * @returns {element[]} elements\n * @memberof Core\n */\nexport function querySelectorByType(html, element, type){\n\tvar query;\n\tif (typeof html.querySelector != \"undefined\") {\n\t\tquery = html.querySelector(`${element}[*|type=\"${type}\"]`);\n\t}\n\t// Handle IE not supporting namespaced epub:type in querySelector\n\tif(!query || query.length === 0) {\n\t\tquery = qsa(html, element);\n\t\tfor (var i = 0; i < query.length; i++) {\n\t\t\tif(query[i].getAttributeNS(\"http://www.idpf.org/2007/ops\", \"type\") === type ||\n\t\t\t\t query[i].getAttribute(\"epub:type\") === type) {\n\t\t\t\treturn query[i];\n\t\t\t}\n\t\t}\n\t} else {\n\t\treturn query;\n\t}\n}\n\n/**\n * Find direct decendents of an element\n * @param {element} el\n * @returns {element[]} children\n * @memberof Core\n */\nexport function findChildren(el) {\n\tvar result = [];\n\tvar childNodes = el.childNodes;\n\tfor (var i = 0; i < childNodes.length; i++) {\n\t\tlet node = childNodes[i];\n\t\tif (node.nodeType === 1) {\n\t\t\tresult.push(node);\n\t\t}\n\t}\n\treturn result;\n}\n\n/**\n * Find all parents (ancestors) of an element\n * @param {element} node\n * @returns {element[]} parents\n * @memberof Core\n */\nexport function parents(node) {\n\tvar nodes = [node];\n\tfor (; node; node = node.parentNode) {\n\t\tnodes.unshift(node);\n\t}\n\treturn nodes\n}\n\n/**\n * Find all direct decendents of a specific type\n * @param {element} el\n * @param {string} nodeName\n * @param {boolean} [single]\n * @returns {element[]} children\n * @memberof Core\n */\nexport function filterChildren(el, nodeName, single) {\n\tvar result = [];\n\tvar childNodes = el.childNodes;\n\tfor (var i = 0; i < childNodes.length; i++) {\n\t\tlet node = childNodes[i];\n\t\tif (node.nodeType === 1 && node.nodeName.toLowerCase() === nodeName) {\n\t\t\tif (single) {\n\t\t\t\treturn node;\n\t\t\t} else {\n\t\t\t\tresult.push(node);\n\t\t\t}\n\t\t}\n\t}\n\tif (!single) {\n\t\treturn result;\n\t}\n}\n\n/**\n * Filter all parents (ancestors) with tag name\n * @param {element} node\n * @param {string} tagname\n * @returns {element[]} parents\n * @memberof Core\n */\nexport function getParentByTagName(node, tagname) {\n\tlet parent;\n\tif (node === null || tagname === '') return;\n\tparent = node.parentNode;\n\twhile (parent.nodeType === 1) {\n\t\tif (parent.tagName.toLowerCase() === tagname) {\n\t\t\treturn parent;\n\t\t}\n\t\tparent = parent.parentNode;\n\t}\n}\n\n/**\n * Lightweight Polyfill for DOM Range\n * @class\n * @memberof Core\n */\nexport class RangeObject {\n\tconstructor() {\n\t\tthis.collapsed = false;\n\t\tthis.commonAncestorContainer = undefined;\n\t\tthis.endContainer = undefined;\n\t\tthis.endOffset = undefined;\n\t\tthis.startContainer = undefined;\n\t\tthis.startOffset = undefined;\n\t}\n\n\tsetStart(startNode, startOffset) {\n\t\tthis.startContainer = startNode;\n\t\tthis.startOffset = startOffset;\n\n\t\tif (!this.endContainer) {\n\t\t\tthis.collapse(true);\n\t\t} else {\n\t\t\tthis.commonAncestorContainer = this._commonAncestorContainer();\n\t\t}\n\n\t\tthis._checkCollapsed();\n\t}\n\n\tsetEnd(endNode, endOffset) {\n\t\tthis.endContainer = endNode;\n\t\tthis.endOffset = endOffset;\n\n\t\tif (!this.startContainer) {\n\t\t\tthis.collapse(false);\n\t\t} else {\n\t\t\tthis.collapsed = false;\n\t\t\tthis.commonAncestorContainer = this._commonAncestorContainer();\n\t\t}\n\n\t\tthis._checkCollapsed();\n\t}\n\n\tcollapse(toStart) {\n\t\tthis.collapsed = true;\n\t\tif (toStart) {\n\t\t\tthis.endContainer = this.startContainer;\n\t\t\tthis.endOffset = this.startOffset;\n\t\t\tthis.commonAncestorContainer = this.startContainer.parentNode;\n\t\t} else {\n\t\t\tthis.startContainer = this.endContainer;\n\t\t\tthis.startOffset = this.endOffset;\n\t\t\tthis.commonAncestorContainer = this.endOffset.parentNode;\n\t\t}\n\t}\n\n\tselectNode(referenceNode) {\n\t\tlet parent = referenceNode.parentNode;\n\t\tlet index = Array.prototype.indexOf.call(parent.childNodes, referenceNode);\n\t\tthis.setStart(parent, index);\n\t\tthis.setEnd(parent, index + 1);\n\t}\n\n\tselectNodeContents(referenceNode) {\n\t\tlet end = referenceNode.childNodes[referenceNode.childNodes - 1];\n\t\tlet endIndex = (referenceNode.nodeType === 3) ?\n\t\t\t\treferenceNode.textContent.length : parent.childNodes.length;\n\t\tthis.setStart(referenceNode, 0);\n\t\tthis.setEnd(referenceNode, endIndex);\n\t}\n\n\t_commonAncestorContainer(startContainer, endContainer) {\n\t\tvar startParents = parents(startContainer || this.startContainer);\n\t\tvar endParents = parents(endContainer || this.endContainer);\n\n\t\tif (startParents[0] != endParents[0]) return undefined;\n\n\t\tfor (var i = 0; i < startParents.length; i++) {\n\t\t\tif (startParents[i] != endParents[i]) {\n\t\t\t\treturn startParents[i - 1];\n\t\t\t}\n\t\t}\n\t}\n\n\t_checkCollapsed() {\n\t\tif (this.startContainer === this.endContainer &&\n\t\t\t\tthis.startOffset === this.endOffset) {\n\t\t\tthis.collapsed = true;\n\t\t} else {\n\t\t\tthis.collapsed = false;\n\t\t}\n\t}\n\n\ttoString() {\n\t\t// TODO: implement walking between start and end to find text\n\t}\n}\n","var debounce = require('./debounce'),\n    isObject = require('./isObject');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;\n","'use strict';\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar isRegExp = require('../internals/is-regexp');\nvar anObject = require('../internals/an-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar speciesConstructor = require('../internals/species-constructor');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar toLength = require('../internals/to-length');\nvar callRegExpExec = require('../internals/regexp-exec-abstract');\nvar regexpExec = require('../internals/regexp-exec');\nvar fails = require('../internals/fails');\n\nvar arrayPush = [].push;\nvar min = Math.min;\nvar MAX_UINT32 = 0xFFFFFFFF;\n\n// babel-minify transpiles RegExp('x', 'y') -> /x/y and it causes SyntaxError\nvar SUPPORTS_Y = !fails(function () { return !RegExp(MAX_UINT32, 'y'); });\n\n// @@split logic\nfixRegExpWellKnownSymbolLogic('split', 2, function (SPLIT, nativeSplit, maybeCallNative) {\n  var internalSplit;\n  if (\n    'abbc'.split(/(b)*/)[1] == 'c' ||\n    'test'.split(/(?:)/, -1).length != 4 ||\n    'ab'.split(/(?:ab)*/).length != 2 ||\n    '.'.split(/(.?)(.?)/).length != 4 ||\n    '.'.split(/()()/).length > 1 ||\n    ''.split(/.?/).length\n  ) {\n    // based on es5-shim implementation, need to rework it\n    internalSplit = function (separator, limit) {\n      var string = String(requireObjectCoercible(this));\n      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;\n      if (lim === 0) return [];\n      if (separator === undefined) return [string];\n      // If `separator` is not a regex, use native split\n      if (!isRegExp(separator)) {\n        return nativeSplit.call(string, separator, lim);\n      }\n      var output = [];\n      var flags = (separator.ignoreCase ? 'i' : '') +\n                  (separator.multiline ? 'm' : '') +\n                  (separator.unicode ? 'u' : '') +\n                  (separator.sticky ? 'y' : '');\n      var lastLastIndex = 0;\n      // Make `global` and avoid `lastIndex` issues by working with a copy\n      var separatorCopy = new RegExp(separator.source, flags + 'g');\n      var match, lastIndex, lastLength;\n      while (match = regexpExec.call(separatorCopy, string)) {\n        lastIndex = separatorCopy.lastIndex;\n        if (lastIndex > lastLastIndex) {\n          output.push(string.slice(lastLastIndex, match.index));\n          if (match.length > 1 && match.index < string.length) arrayPush.apply(output, match.slice(1));\n          lastLength = match[0].length;\n          lastLastIndex = lastIndex;\n          if (output.length >= lim) break;\n        }\n        if (separatorCopy.lastIndex === match.index) separatorCopy.lastIndex++; // Avoid an infinite loop\n      }\n      if (lastLastIndex === string.length) {\n        if (lastLength || !separatorCopy.test('')) output.push('');\n      } else output.push(string.slice(lastLastIndex));\n      return output.length > lim ? output.slice(0, lim) : output;\n    };\n  // Chakra, V8\n  } else if ('0'.split(undefined, 0).length) {\n    internalSplit = function (separator, limit) {\n      return separator === undefined && limit === 0 ? [] : nativeSplit.call(this, separator, limit);\n    };\n  } else internalSplit = nativeSplit;\n\n  return [\n    // `String.prototype.split` method\n    // https://tc39.github.io/ecma262/#sec-string.prototype.split\n    function split(separator, limit) {\n      var O = requireObjectCoercible(this);\n      var splitter = separator == undefined ? undefined : separator[SPLIT];\n      return splitter !== undefined\n        ? splitter.call(separator, O, limit)\n        : internalSplit.call(String(O), separator, limit);\n    },\n    // `RegExp.prototype[@@split]` method\n    // https://tc39.github.io/ecma262/#sec-regexp.prototype-@@split\n    //\n    // NOTE: This cannot be properly polyfilled in engines that don't support\n    // the 'y' flag.\n    function (regexp, limit) {\n      var res = maybeCallNative(internalSplit, regexp, this, limit, internalSplit !== nativeSplit);\n      if (res.done) return res.value;\n\n      var rx = anObject(regexp);\n      var S = String(this);\n      var C = speciesConstructor(rx, RegExp);\n\n      var unicodeMatching = rx.unicode;\n      var flags = (rx.ignoreCase ? 'i' : '') +\n                  (rx.multiline ? 'm' : '') +\n                  (rx.unicode ? 'u' : '') +\n                  (SUPPORTS_Y ? 'y' : 'g');\n\n      // ^(? + rx + ) is needed, in combination with some S slicing, to\n      // simulate the 'y' flag.\n      var splitter = new C(SUPPORTS_Y ? rx : '^(?:' + rx.source + ')', flags);\n      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;\n      if (lim === 0) return [];\n      if (S.length === 0) return callRegExpExec(splitter, S) === null ? [S] : [];\n      var p = 0;\n      var q = 0;\n      var A = [];\n      while (q < S.length) {\n        splitter.lastIndex = SUPPORTS_Y ? q : 0;\n        var z = callRegExpExec(splitter, SUPPORTS_Y ? S : S.slice(q));\n        var e;\n        if (\n          z === null ||\n          (e = min(toLength(splitter.lastIndex + (SUPPORTS_Y ? 0 : q)), S.length)) === p\n        ) {\n          q = advanceStringIndex(S, q, unicodeMatching);\n        } else {\n          A.push(S.slice(p, q));\n          if (A.length === lim) return A;\n          for (var i = 1; i <= z.length - 1; i++) {\n            A.push(z[i]);\n            if (A.length === lim) return A;\n          }\n          q = p = e;\n        }\n      }\n      A.push(S.slice(p));\n      return A;\n    }\n  ];\n}, !SUPPORTS_Y);\n","import Path from \"./path\";\nimport path from \"path-webpack\";\n\n/**\n * creates a Url object for parsing and manipulation of a url string\n * @param\t{string} urlString\ta url string (relative or absolute)\n * @param\t{string} [baseString] optional base for the url,\n * default to window.location.href\n */\nclass Url {\n\tconstructor(urlString, baseString) {\n\t\tvar absolute = (urlString.indexOf(\"://\") > -1);\n\t\tvar pathname = urlString;\n\t\tvar basePath;\n\n\t\tthis.Url = undefined;\n\t\tthis.href = urlString;\n\t\tthis.protocol = \"\";\n\t\tthis.origin = \"\";\n\t\tthis.hash = \"\";\n\t\tthis.hash = \"\";\n\t\tthis.search = \"\";\n\t\tthis.base = baseString;\n\n\t\tif (!absolute &&\n\t\t\t\tbaseString !== false &&\n\t\t\t\ttypeof(baseString) !== \"string\" &&\n\t\t\t\twindow && window.location) {\n\t\t\tthis.base = window.location.href;\n\t\t}\n\n\t\t// URL Polyfill doesn't throw an error if base is empty\n\t\tif (absolute || this.base) {\n\t\t\ttry {\n\t\t\t\tif (this.base) { // Safari doesn't like an undefined base\n\t\t\t\t\tthis.Url = new URL(urlString, this.base);\n\t\t\t\t} else {\n\t\t\t\t\tthis.Url = new URL(urlString);\n\t\t\t\t}\n\t\t\t\tthis.href = this.Url.href;\n\n\t\t\t\tthis.protocol = this.Url.protocol;\n\t\t\t\tthis.origin = this.Url.origin;\n\t\t\t\tthis.hash = this.Url.hash;\n\t\t\t\tthis.search = this.Url.search;\n\n\t\t\t\tpathname = this.Url.pathname;\n\t\t\t} catch (e) {\n\t\t\t\t// Skip URL parsing\n\t\t\t\tthis.Url = undefined;\n\t\t\t\t// resolve the pathname from the base\n\t\t\t\tif (this.base) {\n\t\t\t\t\tbasePath = new Path(this.base);\n\t\t\t\t\tpathname = basePath.resolve(pathname);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.Path = new Path(pathname);\n\n\t\tthis.directory = this.Path.directory;\n\t\tthis.filename = this.Path.filename;\n\t\tthis.extension = this.Path.extension;\n\n\t}\n\n\t/**\n\t * @returns {Path}\n\t */\n\tpath () {\n\t\treturn this.Path;\n\t}\n\n\t/**\n\t * Resolves a relative path to a absolute url\n\t * @param {string} what\n\t * @returns {string} url\n\t */\n\tresolve (what) {\n\t\tvar isAbsolute = (what.indexOf(\"://\") > -1);\n\t\tvar fullpath;\n\n\t\tif (isAbsolute) {\n\t\t\treturn what;\n\t\t}\n\n\t\tfullpath = path.resolve(this.directory, what);\n\t\treturn this.origin + fullpath;\n\t}\n\n\t/**\n\t * Resolve a path relative to the url\n\t * @param {string} what\n\t * @returns {string} path\n\t */\n\trelative (what) {\n\t\treturn path.relative(what, this.directory);\n\t}\n\n\t/**\n\t * @returns {string}\n\t */\n\ttoString () {\n\t\treturn this.href;\n\t}\n}\n\nexport default Url;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","\"use strict\";\n\nmodule.exports = function () {\n\tvar assign = Object.assign, obj;\n\tif (typeof assign !== \"function\") return false;\n\tobj = { foo: \"raz\" };\n\tassign(obj, { bar: \"dwa\" }, { trzy: \"trzy\" });\n\treturn obj.foo + obj.bar + obj.trzy === \"razdwatrzy\";\n};\n","\"use strict\";\n\nvar isFunction = require(\"../function/is\");\n\nvar classRe = /^\\s*class[\\s{/}]/, functionToString = Function.prototype.toString;\n\nmodule.exports = function (value) {\n\tif (!isFunction(value)) return false;\n\tif (classRe.test(functionToString.call(value))) return false;\n\treturn true;\n};\n","import { qs, qsa } from \"./core\";\nimport Url from \"./url\";\nimport Path from \"./path\";\n\nexport function replaceBase(doc, section){\n\tvar base;\n\tvar head;\n\tvar url = section.url;\n\tvar absolute = (url.indexOf(\"://\") > -1);\n\n\tif(!doc){\n\t\treturn;\n\t}\n\n\thead = qs(doc, \"head\");\n\tbase = qs(head, \"base\");\n\n\tif(!base) {\n\t\tbase = doc.createElement(\"base\");\n\t\thead.insertBefore(base, head.firstChild);\n\t}\n\n\t// Fix for Safari crashing if the url doesn't have an origin\n\tif (!absolute && window && window.location) {\n\t\turl = window.location.origin + url;\n\t}\n\n\tbase.setAttribute(\"href\", url);\n}\n\nexport function replaceCanonical(doc, section){\n\tvar head;\n\tvar link;\n\tvar url = section.canonical;\n\n\tif(!doc){\n\t\treturn;\n\t}\n\n\thead = qs(doc, \"head\");\n\tlink = qs(head, \"link[rel='canonical']\");\n\n\tif (link) {\n\t\tlink.setAttribute(\"href\", url);\n\t} else {\n\t\tlink = doc.createElement(\"link\");\n\t\tlink.setAttribute(\"rel\", \"canonical\");\n\t\tlink.setAttribute(\"href\", url);\n\t\thead.appendChild(link);\n\t}\n}\n\nexport function replaceMeta(doc, section){\n\tvar head;\n\tvar meta;\n\tvar id = section.idref;\n\tif(!doc){\n\t\treturn;\n\t}\n\n\thead = qs(doc, \"head\");\n\tmeta = qs(head, \"link[property='dc.identifier']\");\n\n\tif (meta) {\n\t\tmeta.setAttribute(\"content\", id);\n\t} else {\n\t\tmeta = doc.createElement(\"meta\");\n\t\tmeta.setAttribute(\"name\", \"dc.identifier\");\n\t\tmeta.setAttribute(\"content\", id);\n\t\thead.appendChild(meta);\n\t}\n}\n\n// TODO: move me to Contents\nexport function replaceLinks(contents, fn) {\n\n\tvar links = contents.querySelectorAll(\"a[href]\");\n\n\tif (!links.length) {\n\t\treturn;\n\t}\n\n\tvar base = qs(contents.ownerDocument, \"base\");\n\tvar location = base ? base.getAttribute(\"href\") : undefined;\n\tvar replaceLink = function(link){\n\t\tvar href = link.getAttribute(\"href\");\n\n\t\tif(href.indexOf(\"mailto:\") === 0){\n\t\t\treturn;\n\t\t}\n\n\t\tvar absolute = (href.indexOf(\"://\") > -1);\n\t\tvar linkUrl = new Url(href, location);\n\n\t\tif(absolute){\n\n\t\t\tlink.setAttribute(\"target\", \"_blank\");\n\n\t\t}else{\n\t\t\tlink.onclick = function(){\n\n\t\t\t\tif(linkUrl && linkUrl.hash) {\n\t\t\t\t\tfn(linkUrl.Path.path + linkUrl.hash);\n\t\t\t\t} else if(linkUrl){\n\t\t\t\t\tfn(linkUrl.Path.path);\n\t\t\t\t} else {\n\t\t\t\t\tfn(href);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t};\n\t\t}\n\t}.bind(this);\n\n\tfor (var i = 0; i < links.length; i++) {\n\t\treplaceLink(links[i]);\n\t}\n\n\n}\n\nexport function substitute(content, urls, replacements) {\n\turls.forEach(function(url, i){\n\t\tif (url && replacements[i]) {\n\t\t\tcontent = content.replace(new RegExp(url, \"g\"), replacements[i]);\n\t\t}\n\t});\n\treturn content;\n}\n","\"use strict\";\n\nvar str = \"razdwatrzy\";\n\nmodule.exports = function () {\n\tif (typeof str.contains !== \"function\") return false;\n\treturn str.contains(\"dwa\") === true && str.contains(\"foo\") === false;\n};\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","\"use strict\";\n\nmodule.exports = function (fn) {\n\tif (typeof fn !== \"function\") throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.assign : require(\"./shim\");\n","function DOMParser(options){\r\n\tthis.options = options ||{locator:{}};\r\n\t\r\n}\r\nDOMParser.prototype.parseFromString = function(source,mimeType){\r\n\tvar options = this.options;\r\n\tvar sax =  new XMLReader();\r\n\tvar domBuilder = options.domBuilder || new DOMHandler();//contentHandler and LexicalHandler\r\n\tvar errorHandler = options.errorHandler;\r\n\tvar locator = options.locator;\r\n\tvar defaultNSMap = options.xmlns||{};\r\n\tvar entityMap = {'lt':'<','gt':'>','amp':'&','quot':'\"','apos':\"'\"}\r\n\tif(locator){\r\n\t\tdomBuilder.setDocumentLocator(locator)\r\n\t}\r\n\t\r\n\tsax.errorHandler = buildErrorHandler(errorHandler,domBuilder,locator);\r\n\tsax.domBuilder = options.domBuilder || domBuilder;\r\n\tif(/\\/x?html?$/.test(mimeType)){\r\n\t\tentityMap.nbsp = '\\xa0';\r\n\t\tentityMap.copy = '\\xa9';\r\n\t\tdefaultNSMap['']= 'http://www.w3.org/1999/xhtml';\r\n\t}\r\n\tdefaultNSMap.xml = defaultNSMap.xml || 'http://www.w3.org/XML/1998/namespace';\r\n\tif(source){\r\n\t\tsax.parse(source,defaultNSMap,entityMap);\r\n\t}else{\r\n\t\tsax.errorHandler.error(\"invalid doc source\");\r\n\t}\r\n\treturn domBuilder.doc;\r\n}\r\nfunction buildErrorHandler(errorImpl,domBuilder,locator){\r\n\tif(!errorImpl){\r\n\t\tif(domBuilder instanceof DOMHandler){\r\n\t\t\treturn domBuilder;\r\n\t\t}\r\n\t\terrorImpl = domBuilder ;\r\n\t}\r\n\tvar errorHandler = {}\r\n\tvar isCallback = errorImpl instanceof Function;\r\n\tlocator = locator||{}\r\n\tfunction build(key){\r\n\t\tvar fn = errorImpl[key];\r\n\t\tif(!fn && isCallback){\r\n\t\t\tfn = errorImpl.length == 2?function(msg){errorImpl(key,msg)}:errorImpl;\r\n\t\t}\r\n\t\terrorHandler[key] = fn && function(msg){\r\n\t\t\tfn('[xmldom '+key+']\\t'+msg+_locator(locator));\r\n\t\t}||function(){};\r\n\t}\r\n\tbuild('warning');\r\n\tbuild('error');\r\n\tbuild('fatalError');\r\n\treturn errorHandler;\r\n}\r\n\r\n//console.log('#\\n\\n\\n\\n\\n\\n\\n####')\r\n/**\r\n * +ContentHandler+ErrorHandler\r\n * +LexicalHandler+EntityResolver2\r\n * -DeclHandler-DTDHandler \r\n * \r\n * DefaultHandler:EntityResolver, DTDHandler, ContentHandler, ErrorHandler\r\n * DefaultHandler2:DefaultHandler,LexicalHandler, DeclHandler, EntityResolver2\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/helpers/DefaultHandler.html\r\n */\r\nfunction DOMHandler() {\r\n    this.cdata = false;\r\n}\r\nfunction position(locator,node){\r\n\tnode.lineNumber = locator.lineNumber;\r\n\tnode.columnNumber = locator.columnNumber;\r\n}\r\n/**\r\n * @see org.xml.sax.ContentHandler#startDocument\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html\r\n */ \r\nDOMHandler.prototype = {\r\n\tstartDocument : function() {\r\n    \tthis.doc = new DOMImplementation().createDocument(null, null, null);\r\n    \tif (this.locator) {\r\n        \tthis.doc.documentURI = this.locator.systemId;\r\n    \t}\r\n\t},\r\n\tstartElement:function(namespaceURI, localName, qName, attrs) {\r\n\t\tvar doc = this.doc;\r\n\t    var el = doc.createElementNS(namespaceURI, qName||localName);\r\n\t    var len = attrs.length;\r\n\t    appendElement(this, el);\r\n\t    this.currentElement = el;\r\n\t    \r\n\t\tthis.locator && position(this.locator,el)\r\n\t    for (var i = 0 ; i < len; i++) {\r\n\t        var namespaceURI = attrs.getURI(i);\r\n\t        var value = attrs.getValue(i);\r\n\t        var qName = attrs.getQName(i);\r\n\t\t\tvar attr = doc.createAttributeNS(namespaceURI, qName);\r\n\t\t\tthis.locator &&position(attrs.getLocator(i),attr);\r\n\t\t\tattr.value = attr.nodeValue = value;\r\n\t\t\tel.setAttributeNode(attr)\r\n\t    }\r\n\t},\r\n\tendElement:function(namespaceURI, localName, qName) {\r\n\t\tvar current = this.currentElement\r\n\t\tvar tagName = current.tagName;\r\n\t\tthis.currentElement = current.parentNode;\r\n\t},\r\n\tstartPrefixMapping:function(prefix, uri) {\r\n\t},\r\n\tendPrefixMapping:function(prefix) {\r\n\t},\r\n\tprocessingInstruction:function(target, data) {\r\n\t    var ins = this.doc.createProcessingInstruction(target, data);\r\n\t    this.locator && position(this.locator,ins)\r\n\t    appendElement(this, ins);\r\n\t},\r\n\tignorableWhitespace:function(ch, start, length) {\r\n\t},\r\n\tcharacters:function(chars, start, length) {\r\n\t\tchars = _toString.apply(this,arguments)\r\n\t\t//console.log(chars)\r\n\t\tif(chars){\r\n\t\t\tif (this.cdata) {\r\n\t\t\t\tvar charNode = this.doc.createCDATASection(chars);\r\n\t\t\t} else {\r\n\t\t\t\tvar charNode = this.doc.createTextNode(chars);\r\n\t\t\t}\r\n\t\t\tif(this.currentElement){\r\n\t\t\t\tthis.currentElement.appendChild(charNode);\r\n\t\t\t}else if(/^\\s*$/.test(chars)){\r\n\t\t\t\tthis.doc.appendChild(charNode);\r\n\t\t\t\t//process xml\r\n\t\t\t}\r\n\t\t\tthis.locator && position(this.locator,charNode)\r\n\t\t}\r\n\t},\r\n\tskippedEntity:function(name) {\r\n\t},\r\n\tendDocument:function() {\r\n\t\tthis.doc.normalize();\r\n\t},\r\n\tsetDocumentLocator:function (locator) {\r\n\t    if(this.locator = locator){// && !('lineNumber' in locator)){\r\n\t    \tlocator.lineNumber = 0;\r\n\t    }\r\n\t},\r\n\t//LexicalHandler\r\n\tcomment:function(chars, start, length) {\r\n\t\tchars = _toString.apply(this,arguments)\r\n\t    var comm = this.doc.createComment(chars);\r\n\t    this.locator && position(this.locator,comm)\r\n\t    appendElement(this, comm);\r\n\t},\r\n\t\r\n\tstartCDATA:function() {\r\n\t    //used in characters() methods\r\n\t    this.cdata = true;\r\n\t},\r\n\tendCDATA:function() {\r\n\t    this.cdata = false;\r\n\t},\r\n\t\r\n\tstartDTD:function(name, publicId, systemId) {\r\n\t\tvar impl = this.doc.implementation;\r\n\t    if (impl && impl.createDocumentType) {\r\n\t        var dt = impl.createDocumentType(name, publicId, systemId);\r\n\t        this.locator && position(this.locator,dt)\r\n\t        appendElement(this, dt);\r\n\t    }\r\n\t},\r\n\t/**\r\n\t * @see org.xml.sax.ErrorHandler\r\n\t * @link http://www.saxproject.org/apidoc/org/xml/sax/ErrorHandler.html\r\n\t */\r\n\twarning:function(error) {\r\n\t\tconsole.warn('[xmldom warning]\\t'+error,_locator(this.locator));\r\n\t},\r\n\terror:function(error) {\r\n\t\tconsole.error('[xmldom error]\\t'+error,_locator(this.locator));\r\n\t},\r\n\tfatalError:function(error) {\r\n\t\tconsole.error('[xmldom fatalError]\\t'+error,_locator(this.locator));\r\n\t    throw error;\r\n\t}\r\n}\r\nfunction _locator(l){\r\n\tif(l){\r\n\t\treturn '\\n@'+(l.systemId ||'')+'#[line:'+l.lineNumber+',col:'+l.columnNumber+']'\r\n\t}\r\n}\r\nfunction _toString(chars,start,length){\r\n\tif(typeof chars == 'string'){\r\n\t\treturn chars.substr(start,length)\r\n\t}else{//java sax connect width xmldom on rhino(what about: \"? && !(chars instanceof String)\")\r\n\t\tif(chars.length >= start+length || start){\r\n\t\t\treturn new java.lang.String(chars,start,length)+'';\r\n\t\t}\r\n\t\treturn chars;\r\n\t}\r\n}\r\n\r\n/*\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/LexicalHandler.html\r\n * used method of org.xml.sax.ext.LexicalHandler:\r\n *  #comment(chars, start, length)\r\n *  #startCDATA()\r\n *  #endCDATA()\r\n *  #startDTD(name, publicId, systemId)\r\n *\r\n *\r\n * IGNORED method of org.xml.sax.ext.LexicalHandler:\r\n *  #endDTD()\r\n *  #startEntity(name)\r\n *  #endEntity(name)\r\n *\r\n *\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/DeclHandler.html\r\n * IGNORED method of org.xml.sax.ext.DeclHandler\r\n * \t#attributeDecl(eName, aName, type, mode, value)\r\n *  #elementDecl(name, model)\r\n *  #externalEntityDecl(name, publicId, systemId)\r\n *  #internalEntityDecl(name, value)\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/EntityResolver2.html\r\n * IGNORED method of org.xml.sax.EntityResolver2\r\n *  #resolveEntity(String name,String publicId,String baseURI,String systemId)\r\n *  #resolveEntity(publicId, systemId)\r\n *  #getExternalSubset(name, baseURI)\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/DTDHandler.html\r\n * IGNORED method of org.xml.sax.DTDHandler\r\n *  #notationDecl(name, publicId, systemId) {};\r\n *  #unparsedEntityDecl(name, publicId, systemId, notationName) {};\r\n */\r\n\"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl\".replace(/\\w+/g,function(key){\r\n\tDOMHandler.prototype[key] = function(){return null}\r\n})\r\n\r\n/* Private static helpers treated below as private instance methods, so don't need to add these to the public API; we might use a Relator to also get rid of non-standard public properties */\r\nfunction appendElement (hander,node) {\r\n    if (!hander.currentElement) {\r\n        hander.doc.appendChild(node);\r\n    } else {\r\n        hander.currentElement.appendChild(node);\r\n    }\r\n}//appendChild and setAttributeNS are preformance key\r\n\r\n//if(typeof require == 'function'){\r\n\tvar XMLReader = require('./sax').XMLReader;\r\n\tvar DOMImplementation = exports.DOMImplementation = require('./dom').DOMImplementation;\r\n\texports.XMLSerializer = require('./dom').XMLSerializer ;\r\n\texports.DOMParser = DOMParser;\r\n//}\r\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","import EpubCFI from \"./epubcfi\";\nimport { nodeBounds } from \"./utils/core\";\n\n/**\n * Map text locations to CFI ranges\n * @class\n * @param {Layout} layout Layout to apply\n * @param {string} [direction=\"ltr\"] Text direction\n * @param {string} [axis=\"horizontal\"] vertical or horizontal axis\n * @param {boolean} [dev] toggle developer highlighting\n */\nclass Mapping {\n\tconstructor(layout, direction, axis, dev) {\n\t\tthis.layout = layout;\n\t\tthis.horizontal = (axis === \"horizontal\") ? true : false;\n\t\tthis.direction = direction || \"ltr\";\n\t\tthis._dev = dev;\n\t}\n\n\t/**\n\t * Find CFI pairs for entire section at once\n\t */\n\tsection(view) {\n\t\tvar ranges = this.findRanges(view);\n\t\tvar map = this.rangeListToCfiList(view.section.cfiBase, ranges);\n\n\t\treturn map;\n\t}\n\n\t/**\n\t * Find CFI pairs for a page\n\t * @param {Contents} contents Contents from view\n\t * @param {string} cfiBase string of the base for a cfi\n\t * @param {number} start position to start at\n\t * @param {number} end position to end at\n\t */\n\tpage(contents, cfiBase, start, end) {\n\t\tvar root = contents && contents.document ? contents.document.body : false;\n\t\tvar result;\n\n\t\tif (!root) {\n\t\t\treturn;\n\t\t}\n\n\t\tresult = this.rangePairToCfiPair(cfiBase, {\n\t\t\tstart: this.findStart(root, start, end),\n\t\t\tend: this.findEnd(root, start, end)\n\t\t});\n\n\t\tif (this._dev === true) {\n\t\t\tlet doc = contents.document;\n\t\t\tlet startRange = new EpubCFI(result.start).toRange(doc);\n\t\t\tlet endRange = new EpubCFI(result.end).toRange(doc);\n\n\t\t\tlet selection = doc.defaultView.getSelection();\n\t\t\tlet r = doc.createRange();\n\t\t\tselection.removeAllRanges();\n\t\t\tr.setStart(startRange.startContainer, startRange.startOffset);\n\t\t\tr.setEnd(endRange.endContainer, endRange.endOffset);\n\t\t\tselection.addRange(r);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Walk a node, preforming a function on each node it finds\n\t * @private\n\t * @param {Node} root Node to walkToNode\n\t * @param {function} func walk function\n\t * @return {*} returns the result of the walk function\n\t */\n\twalk(root, func) {\n\t\t// IE11 has strange issue, if root is text node IE throws exception on\n\t\t// calling treeWalker.nextNode(), saying\n\t\t// Unexpected call to method or property access instead of returing null value\n\t\tif(root && root.nodeType === Node.TEXT_NODE) {\n\t\t\treturn;\n\t\t}\n\t\t// safeFilter is required so that it can work in IE as filter is a function for IE\n\t\t// and for other browser filter is an object.\n\t\tvar filter = {\n\t\t\tacceptNode: function(node) {\n\t\t\t\tif (node.data.trim().length > 0) {\n\t\t\t\t\treturn NodeFilter.FILTER_ACCEPT;\n\t\t\t\t} else {\n\t\t\t\t\treturn NodeFilter.FILTER_REJECT;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tvar safeFilter = filter.acceptNode;\n\t\tsafeFilter.acceptNode = filter.acceptNode;\n\n\t\tvar treeWalker = document.createTreeWalker(root, NodeFilter.SHOW_TEXT, safeFilter, false);\n\t\tvar node;\n\t\tvar result;\n\t\twhile ((node = treeWalker.nextNode())) {\n\t\t\tresult = func(node);\n\t\t\tif(result) break;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tfindRanges(view){\n\t\tvar columns = [];\n\t\tvar scrollWidth = view.contents.scrollWidth();\n\t\tvar spreads = Math.ceil( scrollWidth / this.layout.spreadWidth);\n\t\tvar count = spreads * this.layout.divisor;\n\t\tvar columnWidth = this.layout.columnWidth;\n\t\tvar gap = this.layout.gap;\n\t\tvar start, end;\n\n\t\tfor (var i = 0; i < count.pages; i++) {\n\t\t\tstart = (columnWidth + gap) * i;\n\t\t\tend = (columnWidth * (i+1)) + (gap * i);\n\t\t\tcolumns.push({\n\t\t\t\tstart: this.findStart(view.document.body, start, end),\n\t\t\t\tend: this.findEnd(view.document.body, start, end)\n\t\t\t});\n\t\t}\n\n\t\treturn columns;\n\t}\n\n\t/**\n\t * Find Start Range\n\t * @private\n\t * @param {Node} root root node\n\t * @param {number} start position to start at\n\t * @param {number} end position to end at\n\t * @return {Range}\n\t */\n\tfindStart(root, start, end){\n\t\tvar stack = [root];\n\t\tvar $el;\n\t\tvar found;\n\t\tvar $prev = root;\n\n\t\twhile (stack.length) {\n\n\t\t\t$el = stack.shift();\n\n\t\t\tfound = this.walk($el, (node) => {\n\t\t\t\tvar left, right, top, bottom;\n\t\t\t\tvar elPos;\n\t\t\t\tvar elRange;\n\n\n\t\t\t\telPos = nodeBounds(node);\n\n\t\t\t\tif (this.horizontal && this.direction === \"ltr\") {\n\n\t\t\t\t\tleft = this.horizontal ? elPos.left : elPos.top;\n\t\t\t\t\tright = this.horizontal ? elPos.right : elPos.bottom;\n\n\t\t\t\t\tif( left >= start && left <= end ) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else if (right > start) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$prev = node;\n\t\t\t\t\t\tstack.push(node);\n\t\t\t\t\t}\n\n\t\t\t\t} else if (this.horizontal && this.direction === \"rtl\") {\n\n\t\t\t\t\tleft = elPos.left;\n\t\t\t\t\tright = elPos.right;\n\n\t\t\t\t\tif( right <= end && right >= start ) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else if (left < end) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$prev = node;\n\t\t\t\t\t\tstack.push(node);\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttop = elPos.top;\n\t\t\t\t\tbottom = elPos.bottom;\n\n\t\t\t\t\tif( top >= start && top <= end ) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else if (bottom > start) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$prev = node;\n\t\t\t\t\t\tstack.push(node);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t});\n\n\t\t\tif(found) {\n\t\t\t\treturn this.findTextStartRange(found, start, end);\n\t\t\t}\n\n\t\t}\n\n\t\t// Return last element\n\t\treturn this.findTextStartRange($prev, start, end);\n\t}\n\n\t/**\n\t * Find End Range\n\t * @private\n\t * @param {Node} root root node\n\t * @param {number} start position to start at\n\t * @param {number} end position to end at\n\t * @return {Range}\n\t */\n\tfindEnd(root, start, end){\n\t\tvar stack = [root];\n\t\tvar $el;\n\t\tvar $prev = root;\n\t\tvar found;\n\n\t\twhile (stack.length) {\n\n\t\t\t$el = stack.shift();\n\n\t\t\tfound = this.walk($el, (node) => {\n\n\t\t\t\tvar left, right, top, bottom;\n\t\t\t\tvar elPos;\n\t\t\t\tvar elRange;\n\n\t\t\t\telPos = nodeBounds(node);\n\n\t\t\t\tif (this.horizontal && this.direction === \"ltr\") {\n\n\t\t\t\t\tleft = Math.round(elPos.left);\n\t\t\t\t\tright = Math.round(elPos.right);\n\n\t\t\t\t\tif(left > end && $prev) {\n\t\t\t\t\t\treturn $prev;\n\t\t\t\t\t} else if(right > end) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$prev = node;\n\t\t\t\t\t\tstack.push(node);\n\t\t\t\t\t}\n\n\t\t\t\t} else if (this.horizontal && this.direction === \"rtl\") {\n\n\t\t\t\t\tleft = Math.round(this.horizontal ? elPos.left : elPos.top);\n\t\t\t\t\tright = Math.round(this.horizontal ? elPos.right : elPos.bottom);\n\n\t\t\t\t\tif(right < start && $prev) {\n\t\t\t\t\t\treturn $prev;\n\t\t\t\t\t} else if(left < start) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$prev = node;\n\t\t\t\t\t\tstack.push(node);\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttop = Math.round(elPos.top);\n\t\t\t\t\tbottom = Math.round(elPos.bottom);\n\n\t\t\t\t\tif(top > end && $prev) {\n\t\t\t\t\t\treturn $prev;\n\t\t\t\t\t} else if(bottom > end) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$prev = node;\n\t\t\t\t\t\tstack.push(node);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t});\n\n\n\t\t\tif(found){\n\t\t\t\treturn this.findTextEndRange(found, start, end);\n\t\t\t}\n\n\t\t}\n\n\t\t// end of chapter\n\t\treturn this.findTextEndRange($prev, start, end);\n\t}\n\n\t/**\n\t * Find Text Start Range\n\t * @private\n\t * @param {Node} root root node\n\t * @param {number} start position to start at\n\t * @param {number} end position to end at\n\t * @return {Range}\n\t */\n\tfindTextStartRange(node, start, end){\n\t\tvar ranges = this.splitTextNodeIntoRanges(node);\n\t\tvar range;\n\t\tvar pos;\n\t\tvar left, top, right;\n\n\t\tfor (var i = 0; i < ranges.length; i++) {\n\t\t\trange = ranges[i];\n\n\t\t\tpos = range.getBoundingClientRect();\n\n\t\t\tif (this.horizontal && this.direction === \"ltr\") {\n\n\t\t\t\tleft = pos.left;\n\t\t\t\tif( left >= start ) {\n\t\t\t\t\treturn range;\n\t\t\t\t}\n\n\t\t\t} else if (this.horizontal && this.direction === \"rtl\") {\n\n\t\t\t\tright = pos.right;\n\t\t\t\tif( right <= end ) {\n\t\t\t\t\treturn range;\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\ttop = pos.top;\n\t\t\t\tif( top >= start ) {\n\t\t\t\t\treturn range;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// prev = range;\n\n\t\t}\n\n\t\treturn ranges[0];\n\t}\n\n\t/**\n\t * Find Text End Range\n\t * @private\n\t * @param {Node} root root node\n\t * @param {number} start position to start at\n\t * @param {number} end position to end at\n\t * @return {Range}\n\t */\n\tfindTextEndRange(node, start, end){\n\t\tvar ranges = this.splitTextNodeIntoRanges(node);\n\t\tvar prev;\n\t\tvar range;\n\t\tvar pos;\n\t\tvar left, right, top, bottom;\n\n\t\tfor (var i = 0; i < ranges.length; i++) {\n\t\t\trange = ranges[i];\n\n\t\t\tpos = range.getBoundingClientRect();\n\n\t\t\tif (this.horizontal && this.direction === \"ltr\") {\n\n\t\t\t\tleft = pos.left;\n\t\t\t\tright = pos.right;\n\n\t\t\t\tif(left > end && prev) {\n\t\t\t\t\treturn prev;\n\t\t\t\t} else if(right > end) {\n\t\t\t\t\treturn range;\n\t\t\t\t}\n\n\t\t\t} else if (this.horizontal && this.direction === \"rtl\") {\n\n\t\t\t\tleft = pos.left\n\t\t\t\tright = pos.right;\n\n\t\t\t\tif(right < start && prev) {\n\t\t\t\t\treturn prev;\n\t\t\t\t} else if(left < start) {\n\t\t\t\t\treturn range;\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\ttop = pos.top;\n\t\t\t\tbottom = pos.bottom;\n\n\t\t\t\tif(top > end && prev) {\n\t\t\t\t\treturn prev;\n\t\t\t\t} else if(bottom > end) {\n\t\t\t\t\treturn range;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tprev = range;\n\n\t\t}\n\n\t\t// Ends before limit\n\t\treturn ranges[ranges.length-1];\n\n\t}\n\n\t/**\n\t * Split up a text node into ranges for each word\n\t * @private\n\t * @param {Node} root root node\n\t * @param {string} [_splitter] what to split on\n\t * @return {Range[]}\n\t */\n\tsplitTextNodeIntoRanges(node, _splitter){\n\t\tvar ranges = [];\n\t\tvar textContent = node.textContent || \"\";\n\t\tvar text = textContent.trim();\n\t\tvar range;\n\t\tvar doc = node.ownerDocument;\n\t\tvar splitter = _splitter || \" \";\n\n\t\tvar pos = text.indexOf(splitter);\n\n\t\tif(pos === -1 || node.nodeType != Node.TEXT_NODE) {\n\t\t\trange = doc.createRange();\n\t\t\trange.selectNodeContents(node);\n\t\t\treturn [range];\n\t\t}\n\n\t\trange = doc.createRange();\n\t\trange.setStart(node, 0);\n\t\trange.setEnd(node, pos);\n\t\tranges.push(range);\n\t\trange = false;\n\n\t\twhile ( pos != -1 ) {\n\n\t\t\tpos = text.indexOf(splitter, pos + 1);\n\t\t\tif(pos > 0) {\n\n\t\t\t\tif(range) {\n\t\t\t\t\trange.setEnd(node, pos);\n\t\t\t\t\tranges.push(range);\n\t\t\t\t}\n\n\t\t\t\trange = doc.createRange();\n\t\t\t\trange.setStart(node, pos+1);\n\t\t\t}\n\t\t}\n\n\t\tif(range) {\n\t\t\trange.setEnd(node, text.length);\n\t\t\tranges.push(range);\n\t\t}\n\n\t\treturn ranges;\n\t}\n\n\n\t/**\n\t * Turn a pair of ranges into a pair of CFIs\n\t * @private\n\t * @param {string} cfiBase base string for an EpubCFI\n\t * @param {object} rangePair { start: Range, end: Range }\n\t * @return {object} { start: \"epubcfi(...)\", end: \"epubcfi(...)\" }\n\t */\n\trangePairToCfiPair(cfiBase, rangePair){\n\n\t\tvar startRange = rangePair.start;\n\t\tvar endRange = rangePair.end;\n\n\t\tstartRange.collapse(true);\n\t\tendRange.collapse(false);\n\n\t\tlet startCfi = new EpubCFI(startRange, cfiBase).toString();\n\t\tlet endCfi = new EpubCFI(endRange, cfiBase).toString();\n\n\t\treturn {\n\t\t\tstart: startCfi,\n\t\t\tend: endCfi\n\t\t};\n\n\t}\n\n\trangeListToCfiList(cfiBase, columns){\n\t\tvar map = [];\n\t\tvar cifPair;\n\n\t\tfor (var i = 0; i < columns.length; i++) {\n\t\t\tcifPair = this.rangePairToCfiPair(cfiBase, columns[i]);\n\n\t\t\tmap.push(cifPair);\n\n\t\t}\n\n\t\treturn map;\n\t}\n\n\t/**\n\t * Set the axis for mapping\n\t * @param {string} axis horizontal | vertical\n\t * @return {boolean} is it horizontal?\n\t */\n\taxis(axis) {\n\t\tif (axis) {\n\t\t\tthis.horizontal = (axis === \"horizontal\") ? true : false;\n\t\t}\n\t\treturn this.horizontal;\n\t}\n}\n\nexport default Mapping;\n","import Book from \"./book\";\nimport Rendition from \"./rendition\";\nimport CFI from \"./epubcfi\";\nimport Contents from \"./contents\";\nimport * as utils from \"./utils/core\";\nimport { EPUBJS_VERSION } from \"./utils/constants\";\nimport '../libs/url/url-polyfill'\n\nimport IframeView from \"./managers/views/iframe\";\nimport DefaultViewManager from \"./managers/default\";\nimport ContinuousViewManager from \"./managers/continuous\";\n\n/**\n * Creates a new Book\n * @param {string|ArrayBuffer} url URL, Path or ArrayBuffer\n * @param {object} options to pass to the book\n * @returns {Book} a new Book object\n * @example ePub(\"/path/to/book.epub\", {})\n */\nfunction ePub(url, options) {\n\treturn new Book(url, options);\n}\n\nePub.VERSION = EPUBJS_VERSION;\n\nif (typeof(global) !== \"undefined\") {\n\tglobal.EPUBJS_VERSION = EPUBJS_VERSION;\n}\n\nePub.Book = Book;\nePub.Rendition = Rendition;\nePub.Contents = Contents;\nePub.CFI = CFI;\nePub.utils = utils;\n\nexport default ePub;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","'use strict';\n\nif (!process) {\n  var process = {\n    \"cwd\" : function () { return '/' }\n  };\n}\n\nfunction assertPath(path) {\n  if (typeof path !== 'string') {\n    throw new TypeError('Path must be a string. Received ' + path);\n  }\n}\n\n// Resolves . and .. elements in a path with directory names\nfunction normalizeStringPosix(path, allowAboveRoot) {\n  var res = '';\n  var lastSlash = -1;\n  var dots = 0;\n  var code;\n  for (var i = 0; i <= path.length; ++i) {\n    if (i < path.length)\n      code = path.charCodeAt(i);\n    else if (code === 47/*/*/)\n      break;\n    else\n      code = 47/*/*/;\n    if (code === 47/*/*/) {\n      if (lastSlash === i - 1 || dots === 1) {\n        // NOOP\n      } else if (lastSlash !== i - 1 && dots === 2) {\n        if (res.length < 2 ||\n            res.charCodeAt(res.length - 1) !== 46/*.*/ ||\n            res.charCodeAt(res.length - 2) !== 46/*.*/) {\n          if (res.length > 2) {\n            var start = res.length - 1;\n            var j = start;\n            for (; j >= 0; --j) {\n              if (res.charCodeAt(j) === 47/*/*/)\n                break;\n            }\n            if (j !== start) {\n              if (j === -1)\n                res = '';\n              else\n                res = res.slice(0, j);\n              lastSlash = i;\n              dots = 0;\n              continue;\n            }\n          } else if (res.length === 2 || res.length === 1) {\n            res = '';\n            lastSlash = i;\n            dots = 0;\n            continue;\n          }\n        }\n        if (allowAboveRoot) {\n          if (res.length > 0)\n            res += '/..';\n          else\n            res = '..';\n        }\n      } else {\n        if (res.length > 0)\n          res += '/' + path.slice(lastSlash + 1, i);\n        else\n          res = path.slice(lastSlash + 1, i);\n      }\n      lastSlash = i;\n      dots = 0;\n    } else if (code === 46/*.*/ && dots !== -1) {\n      ++dots;\n    } else {\n      dots = -1;\n    }\n  }\n  return res;\n}\n\nfunction _format(sep, pathObject) {\n  var dir = pathObject.dir || pathObject.root;\n  var base = pathObject.base ||\n    ((pathObject.name || '') + (pathObject.ext || ''));\n  if (!dir) {\n    return base;\n  }\n  if (dir === pathObject.root) {\n    return dir + base;\n  }\n  return dir + sep + base;\n}\n\nvar posix = {\n  // path.resolve([from ...], to)\n  resolve: function resolve() {\n    var resolvedPath = '';\n    var resolvedAbsolute = false;\n    var cwd;\n\n    for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n      var path;\n      if (i >= 0)\n        path = arguments[i];\n      else {\n        if (cwd === undefined)\n          cwd = process.cwd();\n        path = cwd;\n      }\n\n      assertPath(path);\n\n      // Skip empty entries\n      if (path.length === 0) {\n        continue;\n      }\n\n      resolvedPath = path + '/' + resolvedPath;\n      resolvedAbsolute = path.charCodeAt(0) === 47/*/*/;\n    }\n\n    // At this point the path should be resolved to a full absolute path, but\n    // handle relative paths to be safe (might happen when process.cwd() fails)\n\n    // Normalize the path\n    resolvedPath = normalizeStringPosix(resolvedPath, !resolvedAbsolute);\n\n    if (resolvedAbsolute) {\n      if (resolvedPath.length > 0)\n        return '/' + resolvedPath;\n      else\n        return '/';\n    } else if (resolvedPath.length > 0) {\n      return resolvedPath;\n    } else {\n      return '.';\n    }\n  },\n\n\n  normalize: function normalize(path) {\n    assertPath(path);\n\n    if (path.length === 0)\n      return '.';\n\n    var isAbsolute = path.charCodeAt(0) === 47/*/*/;\n    var trailingSeparator = path.charCodeAt(path.length - 1) === 47/*/*/;\n\n    // Normalize the path\n    path = normalizeStringPosix(path, !isAbsolute);\n\n    if (path.length === 0 && !isAbsolute)\n      path = '.';\n    if (path.length > 0 && trailingSeparator)\n      path += '/';\n\n    if (isAbsolute)\n      return '/' + path;\n    return path;\n  },\n\n\n  isAbsolute: function isAbsolute(path) {\n    assertPath(path);\n    return path.length > 0 && path.charCodeAt(0) === 47/*/*/;\n  },\n\n\n  join: function join() {\n    if (arguments.length === 0)\n      return '.';\n    var joined;\n    for (var i = 0; i < arguments.length; ++i) {\n      var arg = arguments[i];\n      assertPath(arg);\n      if (arg.length > 0) {\n        if (joined === undefined)\n          joined = arg;\n        else\n          joined += '/' + arg;\n      }\n    }\n    if (joined === undefined)\n      return '.';\n    return posix.normalize(joined);\n  },\n\n\n  relative: function relative(from, to) {\n    assertPath(from);\n    assertPath(to);\n\n    if (from === to)\n      return '';\n\n    from = posix.resolve(from);\n    to = posix.resolve(to);\n\n    if (from === to)\n      return '';\n\n    // Trim any leading backslashes\n    var fromStart = 1;\n    for (; fromStart < from.length; ++fromStart) {\n      if (from.charCodeAt(fromStart) !== 47/*/*/)\n        break;\n    }\n    var fromEnd = from.length;\n    var fromLen = (fromEnd - fromStart);\n\n    // Trim any leading backslashes\n    var toStart = 1;\n    for (; toStart < to.length; ++toStart) {\n      if (to.charCodeAt(toStart) !== 47/*/*/)\n        break;\n    }\n    var toEnd = to.length;\n    var toLen = (toEnd - toStart);\n\n    // Compare paths to find the longest common path from root\n    var length = (fromLen < toLen ? fromLen : toLen);\n    var lastCommonSep = -1;\n    var i = 0;\n    for (; i <= length; ++i) {\n      if (i === length) {\n        if (toLen > length) {\n          if (to.charCodeAt(toStart + i) === 47/*/*/) {\n            // We get here if `from` is the exact base path for `to`.\n            // For example: from='/foo/bar'; to='/foo/bar/baz'\n            return to.slice(toStart + i + 1);\n          } else if (i === 0) {\n            // We get here if `from` is the root\n            // For example: from='/'; to='/foo'\n            return to.slice(toStart + i);\n          }\n        } else if (fromLen > length) {\n          if (from.charCodeAt(fromStart + i) === 47/*/*/) {\n            // We get here if `to` is the exact base path for `from`.\n            // For example: from='/foo/bar/baz'; to='/foo/bar'\n            lastCommonSep = i;\n          } else if (i === 0) {\n            // We get here if `to` is the root.\n            // For example: from='/foo'; to='/'\n            lastCommonSep = 0;\n          }\n        }\n        break;\n      }\n      var fromCode = from.charCodeAt(fromStart + i);\n      var toCode = to.charCodeAt(toStart + i);\n      if (fromCode !== toCode)\n        break;\n      else if (fromCode === 47/*/*/)\n        lastCommonSep = i;\n    }\n\n    var out = '';\n    // Generate the relative path based on the path difference between `to`\n    // and `from`\n    for (i = fromStart + lastCommonSep + 1; i <= fromEnd; ++i) {\n      if (i === fromEnd || from.charCodeAt(i) === 47/*/*/) {\n        if (out.length === 0)\n          out += '..';\n        else\n          out += '/..';\n      }\n    }\n\n    // Lastly, append the rest of the destination (`to`) path that comes after\n    // the common path parts\n    if (out.length > 0)\n      return out + to.slice(toStart + lastCommonSep);\n    else {\n      toStart += lastCommonSep;\n      if (to.charCodeAt(toStart) === 47/*/*/)\n        ++toStart;\n      return to.slice(toStart);\n    }\n  },\n\n\n  _makeLong: function _makeLong(path) {\n    return path;\n  },\n\n\n  dirname: function dirname(path) {\n    assertPath(path);\n    if (path.length === 0)\n      return '.';\n    var code = path.charCodeAt(0);\n    var hasRoot = (code === 47/*/*/);\n    var end = -1;\n    var matchedSlash = true;\n    for (var i = path.length - 1; i >= 1; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47/*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n        // We saw the first non-path separator\n        matchedSlash = false;\n      }\n    }\n\n    if (end === -1)\n      return hasRoot ? '/' : '.';\n    if (hasRoot && end === 1)\n      return '//';\n    return path.slice(0, end);\n  },\n\n\n  basename: function basename(path, ext) {\n    if (ext !== undefined && typeof ext !== 'string')\n      throw new TypeError('\"ext\" argument must be a string');\n    assertPath(path);\n\n    var start = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i;\n\n    if (ext !== undefined && ext.length > 0 && ext.length <= path.length) {\n      if (ext.length === path.length && ext === path)\n        return '';\n      var extIdx = ext.length - 1;\n      var firstNonSlashEnd = -1;\n      for (i = path.length - 1; i >= 0; --i) {\n        var code = path.charCodeAt(i);\n        if (code === 47/*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            start = i + 1;\n            break;\n          }\n        } else {\n          if (firstNonSlashEnd === -1) {\n            // We saw the first non-path separator, remember this index in case\n            // we need it if the extension ends up not matching\n            matchedSlash = false;\n            firstNonSlashEnd = i + 1;\n          }\n          if (extIdx >= 0) {\n            // Try to match the explicit extension\n            if (code === ext.charCodeAt(extIdx)) {\n              if (--extIdx === -1) {\n                // We matched the extension, so mark this as the end of our path\n                // component\n                end = i;\n              }\n            } else {\n              // Extension does not match, so our result is the entire path\n              // component\n              extIdx = -1;\n              end = firstNonSlashEnd;\n            }\n          }\n        }\n      }\n\n      if (start === end)\n        end = firstNonSlashEnd;\n      else if (end === -1)\n        end = path.length;\n      return path.slice(start, end);\n    } else {\n      for (i = path.length - 1; i >= 0; --i) {\n        if (path.charCodeAt(i) === 47/*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            start = i + 1;\n            break;\n          }\n        } else if (end === -1) {\n          // We saw the first non-path separator, mark this as the end of our\n          // path component\n          matchedSlash = false;\n          end = i + 1;\n        }\n      }\n\n      if (end === -1)\n        return '';\n      return path.slice(start, end);\n    }\n  },\n\n\n  extname: function extname(path) {\n    assertPath(path);\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n    for (var i = path.length - 1; i >= 0; --i) {\n      var code = path.charCodeAt(i);\n      if (code === 47/*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46/*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 ||\n        end === -1 ||\n        // We saw a non-dot character immediately before the dot\n        preDotState === 0 ||\n        // The (right-most) trimmed path component is exactly '..'\n        (preDotState === 1 &&\n         startDot === end - 1 &&\n         startDot === startPart + 1)) {\n      return '';\n    }\n    return path.slice(startDot, end);\n  },\n\n\n  format: function format(pathObject) {\n    if (pathObject === null || typeof pathObject !== 'object') {\n      throw new TypeError(\n        'Parameter \"pathObject\" must be an object, not ' + typeof(pathObject)\n      );\n    }\n    return _format('/', pathObject);\n  },\n\n\n  parse: function parse(path) {\n    assertPath(path);\n\n    var ret = { root: '', dir: '', base: '', ext: '', name: '' };\n    if (path.length === 0)\n      return ret;\n    var code = path.charCodeAt(0);\n    var isAbsolute = (code === 47/*/*/);\n    var start;\n    if (isAbsolute) {\n      ret.root = '/';\n      start = 1;\n    } else {\n      start = 0;\n    }\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i = path.length - 1;\n\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n\n    // Get non-dir info\n    for (; i >= start; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47/*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46/*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 ||\n        end === -1 ||\n        // We saw a non-dot character immediately before the dot\n        preDotState === 0 ||\n        // The (right-most) trimmed path component is exactly '..'\n        (preDotState === 1 &&\n         startDot === end - 1 &&\n         startDot === startPart + 1)) {\n      if (end !== -1) {\n        if (startPart === 0 && isAbsolute)\n          ret.base = ret.name = path.slice(1, end);\n        else\n          ret.base = ret.name = path.slice(startPart, end);\n      }\n    } else {\n      if (startPart === 0 && isAbsolute) {\n        ret.name = path.slice(1, startDot);\n        ret.base = path.slice(1, end);\n      } else {\n        ret.name = path.slice(startPart, startDot);\n        ret.base = path.slice(startPart, end);\n      }\n      ret.ext = path.slice(startDot, end);\n    }\n\n    if (startPart > 0)\n      ret.dir = path.slice(0, startPart - 1);\n    else if (isAbsolute)\n      ret.dir = '/';\n\n    return ret;\n  },\n\n\n  sep: '/',\n  delimiter: ':',\n  posix: null\n};\n\n\nmodule.exports = posix;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var isObject = require('../internals/is-object');\nvar classof = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\n// `IsRegExp` abstract operation\n// https://tc39.github.io/ecma262/#sec-isregexp\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) == 'RegExp');\n};\n","/**\n * Hooks allow for injecting functions that must all complete in order before finishing\n * They will execute in parallel but all must finish before continuing\n * Functions may return a promise if they are asycn.\n * @param {any} context scope of this\n * @example this.content = new EPUBJS.Hook(this);\n */\nclass Hook {\n\tconstructor(context){\n\t\tthis.context = context || this;\n\t\tthis.hooks = [];\n\t}\n\n\t/**\n\t * Adds a function to be run before a hook completes\n\t * @example this.content.register(function(){...});\n\t */\n\tregister(){\n\t\tfor(var i = 0; i < arguments.length; ++i) {\n\t\t\tif (typeof arguments[i]  === \"function\") {\n\t\t\t\tthis.hooks.push(arguments[i]);\n\t\t\t} else {\n\t\t\t\t// unpack array\n\t\t\t\tfor(var j = 0; j < arguments[i].length; ++j) {\n\t\t\t\t\tthis.hooks.push(arguments[i][j]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Triggers a hook to run all functions\n\t * @example this.content.trigger(args).then(function(){...});\n\t */\n\ttrigger(){\n\t\tvar args = arguments;\n\t\tvar context = this.context;\n\t\tvar promises = [];\n\n\t\tthis.hooks.forEach(function(task) {\n\t\t\tvar executing = task.apply(context, args);\n\n\t\t\tif(executing && typeof executing[\"then\"] === \"function\") {\n\t\t\t\t// Task is a function that returns a promise\n\t\t\t\tpromises.push(executing);\n\t\t\t}\n\t\t\t// Otherwise Task resolves immediately, continue\n\t\t});\n\n\n\t\treturn Promise.all(promises);\n\t}\n\n\t// Adds a function to be run before a hook completes\n\tlist(){\n\t\treturn this.hooks;\n\t}\n\n\tclear(){\n\t\treturn this.hooks = [];\n\t}\n}\nexport default Hook;\n","<template>\r\n  <!-- http://localhost:8080/#/ebook/story|pride-and-prejudice -->\r\n  <div class=\"ebook-reader\">\r\n    <div id=\"area\"></div>\r\n    <div\r\n      class=\"ebook-mask\"\r\n      @click=\"onMaskClick\"\r\n      @touchmove=\"move\"\r\n      @touchend=\"moveEnd\"\r\n      @mousedown.left=\"onMouseEnter\"\r\n      @mousemove.left=\"onMouseMove\"\r\n      @mouseup.left=\"onMouseUp\"\r\n    ></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ePub from \"epubjs\";\r\nimport {getLocalForage} from '@/utils/localForage'\r\nimport {\r\n  getFontFamily,\r\n  saveFontFamily,\r\n  getFontSize,\r\n  saveFontSize,\r\n  getTheme,\r\n  saveTheme,\r\n  getLocation,\r\n} from \"@/utils/localStorage\";\r\nimport { flatten } from \"@/utils/book.js\";\r\nimport { themeList, addCss } from \"@/utils/book\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      rendtion: null,\r\n      offsetX: -1,\r\n      timestamp: -1,\r\n      firstOffsetY: null,\r\n      mouseState: null,\r\n      mouseStartTime: null,\r\n      URL: null,\r\n    };\r\n  },\r\n  methods: {\r\n    // 1- \r\n    // 2- \r\n    // 3- \r\n    // 4- \r\n    onMouseEnter(e) {\r\n      this.mouseState = 1;\r\n      this.mouseStartTime = e.timeStamp;\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    },\r\n    onMouseMove(e) {\r\n      if (this.mouseState === 1) {\r\n        this.mouseState = 2;\r\n      } else if (this.mouseState === 2) {\r\n        let offsetY = 0;\r\n        if (this.firstOffsetY) {\r\n          offsetY = e.clientY - this.firstOffsetY;\r\n          this.SET_OFFSETY(offsetY);\r\n        } else {\r\n          this.firstOffsetY = e.clientY;\r\n        }\r\n      }\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    },\r\n    onMouseUp(e) {\r\n      if (this.mouseState === 2) {\r\n        this.SET_OFFSETY(0);\r\n        this.firstOffsetY = null;\r\n        this.mouseState = 3;\r\n        // console.log(\"change the m:\", this.mouseState);\r\n      } else {\r\n        this.mouseState = 4;\r\n        // console.log(\"change the mx:\", this.mouseState);\r\n      }\r\n      const time = e.timeStamp - this.mouseStartTime;\r\n      if (time < 100) {\r\n        this.mouseState = 4;\r\n      }\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    },\r\n\r\n    move(e) {\r\n      let bookmarkHeight = parseInt(this.htmlFontSize) * 6;\r\n      let y = 0;\r\n      if (this.firstOffsetY) {\r\n        y = e.changedTouches[0].clientY - this.firstOffsetY;\r\n        y >= bookmarkHeight ? (y = bookmarkHeight) : null;\r\n        this.SET_OFFSETY(y);\r\n      } else {\r\n        this.firstOffsetY = e.changedTouches[0].clientY;\r\n      }\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    },\r\n    moveEnd(e) {\r\n      this.SET_OFFSETY(0);\r\n      this.firstOffsetY = null;\r\n    },\r\n    onMaskClick(e) {\r\n      if (this.mouseState && (this.mouseState === 2 || this.mouseState === 3)) {\r\n        return;\r\n      }\r\n      let offsetX = e.offsetX;\r\n      let width = window.innerWidth;\r\n      if (offsetX > 0 && offsetX < 0.3 * width) {\r\n        this.prePage();\r\n      } else if (offsetX > 0 && offsetX > 0.7 * width) {\r\n        this.nextPage();\r\n      } else {\r\n        this.toggleMenuAndTitle();\r\n      }\r\n      // console.log(e);\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    },\r\n    // \r\n    getFileUrl() {\r\n      const fileName = this.$route.params.fileName.split(\"|\")[1];\r\n      const fileUrl = this.$route.params.fileName.split(\"|\").join(\"/\");\r\n      const Url = `${process.env.VUE_APP_BASE_URL}/${fileUrl}.epub`\r\n\r\n      // indexDB\r\n      // \r\n      const data = getLocalForage(fileName, (err, blob) => {\r\n        if (!err && blob) {\r\n          this.URL =  blob\r\n        } else {\r\n          this.SET_FILENAME(Url);\r\n          this.URL =  Url;\r\n        }\r\n        this.initEpub(this.URL);\r\n      });\r\n    },\r\n    toggleMenuAndTitle() {\r\n      this.TOGGLE_TITLEANDMENUVISIABLE();\r\n    },\r\n    prePage() {\r\n      this.rendtion.prev();\r\n      this.TOGGLE_TITLEANDMENUVISIABLE(true);\r\n      this.refreshLocation();\r\n    },\r\n    nextPage() {\r\n      this.rendtion.next();\r\n      this.TOGGLE_TITLEANDMENUVISIABLE(true);\r\n      this.refreshLocation();\r\n    },\r\n\r\n    // localStorage\r\n    initLocalStorage() {\r\n      // localStorage\r\n      this.rendtion.hooks.content.register((contents) => {\r\n        Promise.all([\r\n          contents.addStylesheet(\r\n            `${process.env.VUE_APP_RES_URL}/fonts/daysOne.css`\r\n          ),\r\n          contents.addStylesheet(\r\n            `${process.env.VUE_APP_RES_URL}/fonts/cabin.css`\r\n          ),\r\n          contents.addStylesheet(\r\n            `${process.env.VUE_APP_RES_URL}/fonts/montserrat.css`\r\n          ),\r\n          contents.addStylesheet(\r\n            `${process.env.VUE_APP_RES_URL}/fonts/tangerine.css`\r\n          ),\r\n        ]).then((_) => {});\r\n      });\r\n\r\n      const location = getLocation(this.fileName);\r\n      this.displays(location, () => {\r\n        let font = getFontFamily(this.fileName);\r\n        let size = getFontSize(this.fileName);\r\n        let theme = getTheme(this.fileName);\r\n\r\n        this.themeList.forEach((theme) => {\r\n          this.book.rendition.themes.register(theme.name, theme.style);\r\n        }); // \r\n        //    \r\n        font\r\n          ? (this.book.rendition.themes.font(font),\r\n            this.SET_DEFAULTFONTFAMILY(font))\r\n          : saveFontFamily(this.fileName, this.defaultFontFamily);\r\n        size\r\n          ? (this.book.rendition.themes.fontSize(size),\r\n            this.SET_DEFAULTFONTSIZE(size))\r\n          : saveFontSize(this.fileName, this.defaultFontSize);\r\n        theme\r\n          ? (this.book.rendition.themes.select(theme),\r\n            this.SET_DEFAULTTHEME(theme))\r\n          : saveTheme(this.fileName, this.defaultTheme);\r\n        this.initGlobalCss();\r\n        this.refreshLocation();\r\n      });\r\n\r\n      this.SET_BOOKAVAIABLE(true);\r\n    },\r\n    // \r\n    initPages() {\r\n      this.book.ready.then(() => {\r\n        return this.book.locations\r\n          .generate(\r\n            750 * (window.innerWidth / 375) * (getFontSize(this.fileName) / 16)\r\n          )\r\n          .then((locations) => {\r\n            this.refreshLocation();\r\n            this.SET_BOOKAVAIABLE(true);\r\n          });\r\n      });\r\n    },\r\n    parseBook() {\r\n      this.book.loaded.cover.then((cover) => {\r\n        // \r\n        this.book.archive.createUrl(cover).then((url) => {\r\n          this.SET_COVER(url);\r\n          // console.log('Cover: ',url);\r\n        });\r\n        // \r\n        this.book.loaded.metadata.then((metadata) => {\r\n          this.SET_METADATA(metadata);\r\n          // console.log('Metadata:',metadata);\r\n        });\r\n        // \r\n        this.book.loaded.navigation.then((nav) => {\r\n          // \r\n          const navItem = flatten(nav.toc);\r\n\r\n          // \r\n          function find(item, level = 0) {\r\n            return !item.parent\r\n              ? level\r\n              : find(\r\n                  navItem.filter(\r\n                    (parentItem) => parentItem.id === item.parent\r\n                  )[0],\r\n                  ++level\r\n                );\r\n          }\r\n\r\n          navItem.forEach((item) => {\r\n            item.level = find(item);\r\n          });\r\n          this.SET_NAVIGATION(navItem);\r\n          // console.log('Inavgations:',this.navItems)\r\n        });\r\n      });\r\n    },\r\n    initEpub(url) {\r\n      // \r\n      // var ebook = ePub(this.fileName);\r\n      var ebook = ePub(url);\r\n      this.SET_BOOK(ebook);\r\n      this.rendtion = this.book.renderTo(\"area\", {\r\n        width: window.innerWidth,\r\n        height: window.innerHeight,\r\n        method: \"default\", // \r\n        // flow: 'scrolled' // \r\n      });\r\n      this.initLocalStorage();\r\n      this.parseBook();\r\n      this.initPages();\r\n    },\r\n  },\r\n  mounted() {\r\n    this.getFileUrl();\r\n  },\r\n};\r\n</script>\r\n<style lang='scss' scoped>\r\n.ebook-reader {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n  #area {\r\n    z-index: 0;\r\n  }\r\n  .ebook-mask {\r\n    width: 100%;\r\n    height: 100%;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    z-index: 2;\r\n    background: transparent;\r\n  }\r\n}\r\n</style>\r\n\r\n","import Book from \"./book\";\nimport EpubCFI from \"./epubcfi\";\nimport Rendition from \"./rendition\";\nimport Contents from \"./contents\";\nimport Layout from \"./layout\";\nimport ePub from \"./epub\";\n\nexport default ePub;\nexport {\n\tBook,\n\tEpubCFI,\n\tRendition,\n\tContents,\n\tLayout\n};\n","import { render } from \"./EbookReader.vue?vue&type=template&id=3fa7579b&scoped=true\"\nimport script from \"./EbookReader.vue?vue&type=script&lang=js\"\nexport * from \"./EbookReader.vue?vue&type=script&lang=js\"\n\nimport \"./EbookReader.vue?vue&type=style&index=0&id=3fa7579b&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-3fa7579b\"\n\nexport default script","import EventEmitter from \"event-emitter\";\nimport {isNumber, prefixed, borders, defaults} from \"./utils/core\";\nimport EpubCFI from \"./epubcfi\";\nimport Mapping from \"./mapping\";\nimport {replaceLinks} from \"./utils/replacements\";\nimport { EPUBJS_VERSION, EVENTS, DOM_EVENTS } from \"./utils/constants\";\n\nconst hasNavigator = typeof (navigator) !== \"undefined\";\n\nconst isChrome = hasNavigator && /Chrome/.test(navigator.userAgent);\nconst isWebkit = hasNavigator && !isChrome && /AppleWebKit/.test(navigator.userAgent);\n\nconst ELEMENT_NODE = 1;\nconst TEXT_NODE = 3;\n\n/**\n\t* Handles DOM manipulation, queries and events for View contents\n\t* @class\n\t* @param {document} doc Document\n\t* @param {element} content Parent Element (typically Body)\n\t* @param {string} cfiBase Section component of CFIs\n\t* @param {number} sectionIndex Index in Spine of Conntent's Section\n\t*/\nclass Contents {\n\tconstructor(doc, content, cfiBase, sectionIndex) {\n\t\t// Blank Cfi for Parsing\n\t\tthis.epubcfi = new EpubCFI();\n\n\t\tthis.document = doc;\n\t\tthis.documentElement =  this.document.documentElement;\n\t\tthis.content = content || this.document.body;\n\t\tthis.window = this.document.defaultView;\n\n\t\tthis._size = {\n\t\t\twidth: 0,\n\t\t\theight: 0\n\t\t};\n\n\t\tthis.sectionIndex = sectionIndex || 0;\n\t\tthis.cfiBase = cfiBase || \"\";\n\n\t\tthis.epubReadingSystem(\"epub.js\", EPUBJS_VERSION);\n\n\t\tthis.listeners();\n\t}\n\n\t/**\n\t\t* Get DOM events that are listened for and passed along\n\t\t*/\n\tstatic get listenedEvents() {\n\t\treturn DOM_EVENTS;\n\t}\n\n\t/**\n\t\t* Get or Set width\n\t\t* @param {number} [w]\n\t\t* @returns {number} width\n\t\t*/\n\twidth(w) {\n\t\t// var frame = this.documentElement;\n\t\tvar frame = this.content;\n\n\t\tif (w && isNumber(w)) {\n\t\t\tw = w + \"px\";\n\t\t}\n\n\t\tif (w) {\n\t\t\tframe.style.width = w;\n\t\t\t// this.content.style.width = w;\n\t\t}\n\n\t\treturn this.window.getComputedStyle(frame)[\"width\"];\n\n\n\t}\n\n\t/**\n\t\t* Get or Set height\n\t\t* @param {number} [h]\n\t\t* @returns {number} height\n\t\t*/\n\theight(h) {\n\t\t// var frame = this.documentElement;\n\t\tvar frame = this.content;\n\n\t\tif (h && isNumber(h)) {\n\t\t\th = h + \"px\";\n\t\t}\n\n\t\tif (h) {\n\t\t\tframe.style.height = h;\n\t\t\t// this.content.style.height = h;\n\t\t}\n\n\t\treturn this.window.getComputedStyle(frame)[\"height\"];\n\n\t}\n\n\t/**\n\t\t* Get or Set width of the contents\n\t\t* @param {number} [w]\n\t\t* @returns {number} width\n\t\t*/\n\tcontentWidth(w) {\n\n\t\tvar content = this.content || this.document.body;\n\n\t\tif (w && isNumber(w)) {\n\t\t\tw = w + \"px\";\n\t\t}\n\n\t\tif (w) {\n\t\t\tcontent.style.width = w;\n\t\t}\n\n\t\treturn this.window.getComputedStyle(content)[\"width\"];\n\n\n\t}\n\n\t/**\n\t\t* Get or Set height of the contents\n\t\t* @param {number} [h]\n\t\t* @returns {number} height\n\t\t*/\n\tcontentHeight(h) {\n\n\t\tvar content = this.content || this.document.body;\n\n\t\tif (h && isNumber(h)) {\n\t\t\th = h + \"px\";\n\t\t}\n\n\t\tif (h) {\n\t\t\tcontent.style.height = h;\n\t\t}\n\n\t\treturn this.window.getComputedStyle(content)[\"height\"];\n\n\t}\n\n\t/**\n\t\t* Get the width of the text using Range\n\t\t* @returns {number} width\n\t\t*/\n\ttextWidth() {\n\t\tlet rect;\n\t\tlet width;\n\t\tlet range = this.document.createRange();\n\t\tlet content = this.content || this.document.body;\n\t\tlet border = borders(content);\n\n\t\t// Select the contents of frame\n\t\trange.selectNodeContents(content);\n\n\t\t// get the width of the text content\n\t\trect = range.getBoundingClientRect();\n\t\twidth = rect.width;\n\n\t\tif (this.content === this.document.body && rect.left) {\n\t\t\twidth += rect.left;\n\t\t}\n\n\t\tif (border && border.width) {\n\t\t\twidth += border.width;\n\t\t}\n\n\t\treturn Math.round(width);\n\t}\n\n\t/**\n\t\t* Get the height of the text using Range\n\t\t* @returns {number} height\n\t\t*/\n\ttextHeight() {\n\t\tlet rect;\n\t\tlet height;\n\t\tlet range = this.document.createRange();\n\t\tlet content = this.content || this.document.body;\n\t\tlet border = borders(content);\n\n\t\trange.selectNodeContents(content);\n\n\t\trect = range.getBoundingClientRect();\n\t\theight = rect.height;\n\n\t\tif (this.content === this.document.body && rect.top) {\n\t\t\theight += rect.top;\n\t\t}\n\n\t\tif (height && border.height) {\n\t\t\theight += border.height;\n\t\t}\n\n\t\treturn Math.round(height);\n\t}\n\n\t/**\n\t\t* Get documentElement scrollWidth\n\t\t* @returns {number} width\n\t\t*/\n\tscrollWidth() {\n\t\tvar width = this.documentElement.scrollWidth;\n\n\t\treturn width;\n\t}\n\n\t/**\n\t\t* Get documentElement scrollHeight\n\t\t* @returns {number} height\n\t\t*/\n\tscrollHeight() {\n\t\tvar height = this.documentElement.scrollHeight;\n\n\t\treturn height;\n\t}\n\n\t/**\n\t\t* Set overflow css style of the contents\n\t\t* @param {string} [overflow]\n\t\t*/\n\toverflow(overflow) {\n\n\t\tif (overflow) {\n\t\t\tthis.documentElement.style.overflow = overflow;\n\t\t}\n\n\t\treturn this.window.getComputedStyle(this.documentElement)[\"overflow\"];\n\t}\n\n\t/**\n\t\t* Set overflowX css style of the documentElement\n\t\t* @param {string} [overflow]\n\t\t*/\n\toverflowX(overflow) {\n\n\t\tif (overflow) {\n\t\t\tthis.documentElement.style.overflowX = overflow;\n\t\t}\n\n\t\treturn this.window.getComputedStyle(this.documentElement)[\"overflowX\"];\n\t}\n\n\t/**\n\t\t* Set overflowY css style of the documentElement\n\t\t* @param {string} [overflow]\n\t\t*/\n\toverflowY(overflow) {\n\n\t\tif (overflow) {\n\t\t\tthis.documentElement.style.overflowY = overflow;\n\t\t}\n\n\t\treturn this.window.getComputedStyle(this.documentElement)[\"overflowY\"];\n\t}\n\n\t/**\n\t\t* Set Css styles on the contents element (typically Body)\n\t\t* @param {string} property\n\t\t* @param {string} value\n\t\t* @param {boolean} [priority] set as \"important\"\n\t\t*/\n\tcss(property, value, priority) {\n\t\tvar content = this.content || this.document.body;\n\n\t\tif (value) {\n\t\t\tcontent.style.setProperty(property, value, priority ? \"important\" : \"\");\n\t\t}\n\n\t\treturn this.window.getComputedStyle(content)[property];\n\t}\n\n\t/**\n\t\t* Get or Set the viewport element\n\t\t* @param {object} [options]\n\t\t* @param {string} [options.width]\n\t\t* @param {string} [options.height]\n\t\t* @param {string} [options.scale]\n\t\t* @param {string} [options.minimum]\n\t\t* @param {string} [options.maximum]\n\t\t* @param {string} [options.scalable]\n\t\t*/\n\tviewport(options) {\n\t\tvar _width, _height, _scale, _minimum, _maximum, _scalable;\n\t\t// var width, height, scale, minimum, maximum, scalable;\n\t\tvar $viewport = this.document.querySelector(\"meta[name='viewport']\");\n\t\tvar parsed = {\n\t\t\t\"width\": undefined,\n\t\t\t\"height\": undefined,\n\t\t\t\"scale\": undefined,\n\t\t\t\"minimum\": undefined,\n\t\t\t\"maximum\": undefined,\n\t\t\t\"scalable\": undefined\n\t\t};\n\t\tvar newContent = [];\n\t\tvar settings = {};\n\n\t\t/*\n\t\t* check for the viewport size\n\t\t* <meta name=\"viewport\" content=\"width=1024,height=697\" />\n\t\t*/\n\t\tif($viewport && $viewport.hasAttribute(\"content\")) {\n\t\t\tlet content = $viewport.getAttribute(\"content\");\n\t\t\tlet _width = content.match(/width\\s*=\\s*([^,]*)/);\n\t\t\tlet _height = content.match(/height\\s*=\\s*([^,]*)/);\n\t\t\tlet _scale = content.match(/initial-scale\\s*=\\s*([^,]*)/);\n\t\t\tlet _minimum = content.match(/minimum-scale\\s*=\\s*([^,]*)/);\n\t\t\tlet _maximum = content.match(/maximum-scale\\s*=\\s*([^,]*)/);\n\t\t\tlet _scalable = content.match(/user-scalable\\s*=\\s*([^,]*)/);\n\n\t\t\tif(_width && _width.length && typeof _width[1] !== \"undefined\"){\n\t\t\t\tparsed.width = _width[1];\n\t\t\t}\n\t\t\tif(_height && _height.length && typeof _height[1] !== \"undefined\"){\n\t\t\t\tparsed.height = _height[1];\n\t\t\t}\n\t\t\tif(_scale && _scale.length && typeof _scale[1] !== \"undefined\"){\n\t\t\t\tparsed.scale = _scale[1];\n\t\t\t}\n\t\t\tif(_minimum && _minimum.length && typeof _minimum[1] !== \"undefined\"){\n\t\t\t\tparsed.minimum = _minimum[1];\n\t\t\t}\n\t\t\tif(_maximum && _maximum.length && typeof _maximum[1] !== \"undefined\"){\n\t\t\t\tparsed.maximum = _maximum[1];\n\t\t\t}\n\t\t\tif(_scalable && _scalable.length && typeof _scalable[1] !== \"undefined\"){\n\t\t\t\tparsed.scalable = _scalable[1];\n\t\t\t}\n\t\t}\n\n\t\tsettings = defaults(options || {}, parsed);\n\n\t\tif (options) {\n\t\t\tif (settings.width) {\n\t\t\t\tnewContent.push(\"width=\" + settings.width);\n\t\t\t}\n\n\t\t\tif (settings.height) {\n\t\t\t\tnewContent.push(\"height=\" + settings.height);\n\t\t\t}\n\n\t\t\tif (settings.scale) {\n\t\t\t\tnewContent.push(\"initial-scale=\" + settings.scale);\n\t\t\t}\n\n\t\t\tif (settings.scalable === \"no\") {\n\t\t\t\tnewContent.push(\"minimum-scale=\" + settings.scale);\n\t\t\t\tnewContent.push(\"maximum-scale=\" + settings.scale);\n\t\t\t\tnewContent.push(\"user-scalable=\" + settings.scalable);\n\t\t\t} else {\n\n\t\t\t\tif (settings.scalable) {\n\t\t\t\t\tnewContent.push(\"user-scalable=\" + settings.scalable);\n\t\t\t\t}\n\n\t\t\t\tif (settings.minimum) {\n\t\t\t\t\tnewContent.push(\"minimum-scale=\" + settings.minimum);\n\t\t\t\t}\n\n\t\t\t\tif (settings.maximum) {\n\t\t\t\t\tnewContent.push(\"minimum-scale=\" + settings.maximum);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!$viewport) {\n\t\t\t\t$viewport = this.document.createElement(\"meta\");\n\t\t\t\t$viewport.setAttribute(\"name\", \"viewport\");\n\t\t\t\tthis.document.querySelector(\"head\").appendChild($viewport);\n\t\t\t}\n\n\t\t\t$viewport.setAttribute(\"content\", newContent.join(\", \"));\n\n\t\t\tthis.window.scrollTo(0, 0);\n\t\t}\n\n\n\t\treturn settings;\n\t}\n\n\t/**\n\t * Event emitter for when the contents has expanded\n\t * @private\n\t */\n\texpand() {\n\t\tthis.emit(EVENTS.CONTENTS.EXPAND);\n\t}\n\n\t/**\n\t * Add DOM listeners\n\t * @private\n\t */\n\tlisteners() {\n\n\t\tthis.imageLoadListeners();\n\n\t\tthis.mediaQueryListeners();\n\n\t\t// this.fontLoadListeners();\n\n\t\tthis.addEventListeners();\n\n\t\tthis.addSelectionListeners();\n\n\t\t// this.transitionListeners();\n\n\t\tthis.resizeListeners();\n\n\t\t// this.resizeObservers();\n\n\t\tthis.linksHandler();\n\t}\n\n\t/**\n\t * Remove DOM listeners\n\t * @private\n\t */\n\tremoveListeners() {\n\n\t\tthis.removeEventListeners();\n\n\t\tthis.removeSelectionListeners();\n\n\t\tclearTimeout(this.expanding);\n\t}\n\n\t/**\n\t * Check if size of contents has changed and\n\t * emit 'resize' event if it has.\n\t * @private\n\t */\n\tresizeCheck() {\n\t\tlet width = this.textWidth();\n\t\tlet height = this.textHeight();\n\n\t\tif (width != this._size.width || height != this._size.height) {\n\n\t\t\tthis._size = {\n\t\t\t\twidth: width,\n\t\t\t\theight: height\n\t\t\t};\n\n\t\t\tthis.onResize && this.onResize(this._size);\n\t\t\tthis.emit(EVENTS.CONTENTS.RESIZE, this._size);\n\t\t}\n\t}\n\n\t/**\n\t * Poll for resize detection\n\t * @private\n\t */\n\tresizeListeners() {\n\t\tvar width, height;\n\t\t// Test size again\n\t\tclearTimeout(this.expanding);\n\n\t\trequestAnimationFrame(this.resizeCheck.bind(this));\n\n\t\tthis.expanding = setTimeout(this.resizeListeners.bind(this), 350);\n\t}\n\n\t/**\n\t * Use css transitions to detect resize\n\t * @private\n\t */\n\ttransitionListeners() {\n\t\tlet body = this.content;\n\n\t\tbody.style['transitionProperty'] = \"font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height\";\n\t\tbody.style['transitionDuration'] = \"0.001ms\";\n\t\tbody.style['transitionTimingFunction'] = \"linear\";\n\t\tbody.style['transitionDelay'] = \"0\";\n\n\t\tthis.document.addEventListener('transitionend', this.resizeCheck.bind(this));\n\t}\n\n\t/**\n\t * Listen for media query changes and emit 'expand' event\n\t * Adapted from: https://github.com/tylergaw/media-query-events/blob/master/js/mq-events.js\n\t * @private\n\t */\n\tmediaQueryListeners() {\n\t\tvar sheets = this.document.styleSheets;\n\t\tvar mediaChangeHandler = function(m){\n\t\t\tif(m.matches && !this._expanding) {\n\t\t\t\tsetTimeout(this.expand.bind(this), 1);\n\t\t\t}\n\t\t}.bind(this);\n\n\t\tfor (var i = 0; i < sheets.length; i += 1) {\n\t\t\tvar rules;\n\t\t\t// Firefox errors if we access cssRules cross-domain\n\t\t\ttry {\n\t\t\t\trules = sheets[i].cssRules;\n\t\t\t} catch (e) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(!rules) return; // Stylesheets changed\n\t\t\tfor (var j = 0; j < rules.length; j += 1) {\n\t\t\t\t//if (rules[j].constructor === CSSMediaRule) {\n\t\t\t\tif(rules[j].media){\n\t\t\t\t\tvar mql = this.window.matchMedia(rules[j].media.mediaText);\n\t\t\t\t\tmql.addListener(mediaChangeHandler);\n\t\t\t\t\t//mql.onchange = mediaChangeHandler;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Use MutationObserver to listen for changes in the DOM and check for resize\n\t * @private\n\t */\n\tresizeObservers() {\n\t\t// create an observer instance\n\t\tthis.observer = new MutationObserver((mutations) => {\n\t\t\tthis.resizeCheck();\n\t\t});\n\n\t\t// configuration of the observer:\n\t\tlet config = { attributes: true, childList: true, characterData: true, subtree: true };\n\n\t\t// pass in the target node, as well as the observer options\n\t\tthis.observer.observe(this.document, config);\n\t}\n\n\t/**\n\t * Test if images are loaded or add listener for when they load\n\t * @private\n\t */\n\timageLoadListeners() {\n\t\tvar images = this.document.querySelectorAll(\"img\");\n\t\tvar img;\n\t\tfor (var i = 0; i < images.length; i++) {\n\t\t\timg = images[i];\n\n\t\t\tif (typeof img.naturalWidth !== \"undefined\" &&\n\t\t\t\t\timg.naturalWidth === 0) {\n\t\t\t\timg.onload = this.expand.bind(this);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Listen for font load and check for resize when loaded\n\t * @private\n\t */\n\tfontLoadListeners() {\n\t\tif (!this.document || !this.document.fonts) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.document.fonts.ready.then(function () {\n\t\t\tthis.resizeCheck();\n\t\t}.bind(this));\n\n\t}\n\n\t/**\n\t * Get the documentElement\n\t * @returns {element} documentElement\n\t */\n\troot() {\n\t\tif(!this.document) return null;\n\t\treturn this.document.documentElement;\n\t}\n\n\t/**\n\t * Get the location offset of a EpubCFI or an #id\n\t * @param {string | EpubCFI} target\n\t * @param {string} [ignoreClass] for the cfi\n\t * @returns { {left: Number, top: Number }\n\t */\n\tlocationOf(target, ignoreClass) {\n\t\tvar position;\n\t\tvar targetPos = {\"left\": 0, \"top\": 0};\n\n\t\tif(!this.document) return targetPos;\n\n\t\tif(this.epubcfi.isCfiString(target)) {\n\t\t\tlet range = new EpubCFI(target).toRange(this.document, ignoreClass);\n\n\t\t\tif(range) {\n\t\t\t\tif (range.startContainer.nodeType === Node.ELEMENT_NODE) {\n\t\t\t\t\tposition = range.startContainer.getBoundingClientRect();\n\t\t\t\t\ttargetPos.left = position.left;\n\t\t\t\t\ttargetPos.top = position.top;\n\t\t\t\t} else {\n\t\t\t\t\t// Webkit does not handle collapsed range bounds correctly\n\t\t\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=138949\n\n\t\t\t\t\t// Construct a new non-collapsed range\n\t\t\t\t\tif (isWebkit) {\n\t\t\t\t\t\tlet container = range.startContainer;\n\t\t\t\t\t\tlet newRange = new Range();\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (container.nodeType === ELEMENT_NODE) {\n\t\t\t\t\t\t\t\tposition = container.getBoundingClientRect();\n\t\t\t\t\t\t\t} else if (range.startOffset + 2 < container.length) {\n\t\t\t\t\t\t\t\tnewRange.setStart(container, range.startOffset);\n\t\t\t\t\t\t\t\tnewRange.setEnd(container, range.startOffset + 2);\n\t\t\t\t\t\t\t\tposition = newRange.getBoundingClientRect();\n\t\t\t\t\t\t\t} else if (range.startOffset - 2 > 0) {\n\t\t\t\t\t\t\t\tnewRange.setStart(container, range.startOffset - 2);\n\t\t\t\t\t\t\t\tnewRange.setEnd(container, range.startOffset);\n\t\t\t\t\t\t\t\tposition = newRange.getBoundingClientRect();\n\t\t\t\t\t\t\t} else { // empty, return the parent element\n\t\t\t\t\t\t\t\tposition = container.parentNode.getBoundingClientRect();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tconsole.error(e, e.stack);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tposition = range.getBoundingClientRect();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else if(typeof target === \"string\" &&\n\t\t\ttarget.indexOf(\"#\") > -1) {\n\n\t\t\tlet id = target.substring(target.indexOf(\"#\")+1);\n\t\t\tlet el = this.document.getElementById(id);\n\n\t\t\tif(el) {\n\t\t\t\tposition = el.getBoundingClientRect();\n\t\t\t}\n\t\t}\n\n\t\tif (position) {\n\t\t\ttargetPos.left = position.left;\n\t\t\ttargetPos.top = position.top;\n\t\t}\n\n\t\treturn targetPos;\n\t}\n\n\t/**\n\t * Append a stylesheet link to the document head\n\t * @param {string} src url\n\t */\n\taddStylesheet(src) {\n\t\treturn new Promise(function(resolve, reject){\n\t\t\tvar $stylesheet;\n\t\t\tvar ready = false;\n\n\t\t\tif(!this.document) {\n\t\t\t\tresolve(false);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Check if link already exists\n\t\t\t$stylesheet = this.document.querySelector(\"link[href='\"+src+\"']\");\n\t\t\tif ($stylesheet) {\n\t\t\t\tresolve(true);\n\t\t\t\treturn; // already present\n\t\t\t}\n\n\t\t\t$stylesheet = this.document.createElement(\"link\");\n\t\t\t$stylesheet.type = \"text/css\";\n\t\t\t$stylesheet.rel = \"stylesheet\";\n\t\t\t$stylesheet.href = src;\n\t\t\t$stylesheet.onload = $stylesheet.onreadystatechange = function() {\n\t\t\t\tif ( !ready && (!this.readyState || this.readyState == \"complete\") ) {\n\t\t\t\t\tready = true;\n\t\t\t\t\t// Let apply\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tresolve(true);\n\t\t\t\t\t}, 1);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.document.head.appendChild($stylesheet);\n\n\t\t}.bind(this));\n\t}\n\n\t/**\n\t * Append stylesheet rules to a generate stylesheet\n\t * Array: https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleSheet/insertRule\n\t * Object: https://github.com/desirable-objects/json-to-css\n\t * @param {array | object} rules\n\t */\n\taddStylesheetRules(rules) {\n\t\tvar styleEl;\n\t\tvar styleSheet;\n\t\tvar key = \"epubjs-inserted-css\";\n\n\t\tif(!this.document || !rules || rules.length === 0) return;\n\n\t\t// Check if link already exists\n\t\tstyleEl = this.document.getElementById(\"#\"+key);\n\t\tif (!styleEl) {\n\t\t\tstyleEl = this.document.createElement(\"style\");\n\t\t\tstyleEl.id = key;\n\t\t}\n\n\t\t// Append style element to head\n\t\tthis.document.head.appendChild(styleEl);\n\n\t\t// Grab style sheet\n\t\tstyleSheet = styleEl.sheet;\n\n\t\tif (Object.prototype.toString.call(rules) === \"[object Array]\") {\n\t\t\tfor (var i = 0, rl = rules.length; i < rl; i++) {\n\t\t\t\tvar j = 1, rule = rules[i], selector = rules[i][0], propStr = \"\";\n\t\t\t\t// If the second argument of a rule is an array of arrays, correct our variables.\n\t\t\t\tif (Object.prototype.toString.call(rule[1][0]) === \"[object Array]\") {\n\t\t\t\t\trule = rule[1];\n\t\t\t\t\tj = 0;\n\t\t\t\t}\n\n\t\t\t\tfor (var pl = rule.length; j < pl; j++) {\n\t\t\t\t\tvar prop = rule[j];\n\t\t\t\t\tpropStr += prop[0] + \":\" + prop[1] + (prop[2] ? \" !important\" : \"\") + \";\\n\";\n\t\t\t\t}\n\n\t\t\t\t// Insert CSS Rule\n\t\t\t\tstyleSheet.insertRule(selector + \"{\" + propStr + \"}\", styleSheet.cssRules.length);\n\t\t\t}\n\t\t} else {\n\t\t\tconst selectors = Object.keys(rules);\n\t\t\tselectors.forEach((selector) => {\n\t\t\t\tconst definition = rules[selector];\n\t\t\t\tif (Array.isArray(definition)) {\n\t\t\t\t\tdefinition.forEach((item) => {\n\t\t\t\t\t\tconst _rules = Object.keys(item);\n\t\t\t\t\t\tconst result = _rules.map((rule) => {\n\t\t\t\t\t\t\treturn `${rule}:${item[rule]}`;\n\t\t\t\t\t\t}).join(';');\n\t\t\t\t\t\tstyleSheet.insertRule(`${selector}{${result}}`, styleSheet.cssRules.length);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconst _rules = Object.keys(definition);\n\t\t\t\t\tconst result = _rules.map((rule) => {\n\t\t\t\t\t\treturn `${rule}:${definition[rule]}`;\n\t\t\t\t\t}).join(';');\n\t\t\t\t\tstyleSheet.insertRule(`${selector}{${result}}`, styleSheet.cssRules.length);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Append a script tag to the document head\n\t * @param {string} src url\n\t * @returns {Promise} loaded\n\t */\n\taddScript(src) {\n\n\t\treturn new Promise(function(resolve, reject){\n\t\t\tvar $script;\n\t\t\tvar ready = false;\n\n\t\t\tif(!this.document) {\n\t\t\t\tresolve(false);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$script = this.document.createElement(\"script\");\n\t\t\t$script.type = \"text/javascript\";\n\t\t\t$script.async = true;\n\t\t\t$script.src = src;\n\t\t\t$script.onload = $script.onreadystatechange = function() {\n\t\t\t\tif ( !ready && (!this.readyState || this.readyState == \"complete\") ) {\n\t\t\t\t\tready = true;\n\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\tresolve(true);\n\t\t\t\t\t}, 1);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.document.head.appendChild($script);\n\n\t\t}.bind(this));\n\t}\n\n\t/**\n\t * Add a class to the contents container\n\t * @param {string} className\n\t */\n\taddClass(className) {\n\t\tvar content;\n\n\t\tif(!this.document) return;\n\n\t\tcontent = this.content || this.document.body;\n\n\t\tif (content) {\n\t\t\tcontent.classList.add(className);\n\t\t}\n\n\t}\n\n\t/**\n\t * Remove a class from the contents container\n\t * @param {string} removeClass\n\t */\n\tremoveClass(className) {\n\t\tvar content;\n\n\t\tif(!this.document) return;\n\n\t\tcontent = this.content || this.document.body;\n\n\t\tif (content) {\n\t\t\tcontent.classList.remove(className);\n\t\t}\n\n\t}\n\n\t/**\n\t * Add DOM event listeners\n\t * @private\n\t */\n\taddEventListeners(){\n\t\tif(!this.document) {\n\t\t\treturn;\n\t\t}\n\n\t\tDOM_EVENTS.forEach(function(eventName){\n\t\t\tthis.document.addEventListener(eventName, this.triggerEvent.bind(this), false);\n\t\t}, this);\n\n\t}\n\n\t/**\n\t * Remove DOM event listeners\n\t * @private\n\t */\n\tremoveEventListeners(){\n\t\tif(!this.document) {\n\t\t\treturn;\n\t\t}\n\t\tDOM_EVENTS.forEach(function(eventName){\n\t\t\tthis.document.removeEventListener(eventName, this.triggerEvent, false);\n\t\t}, this);\n\n\t}\n\n\t/**\n\t * Emit passed browser events\n\t * @private\n\t */\n\ttriggerEvent(e){\n\t\tthis.emit(e.type, e);\n\t}\n\n\t/**\n\t * Add listener for text selection\n\t * @private\n\t */\n\taddSelectionListeners(){\n\t\tif(!this.document) {\n\t\t\treturn;\n\t\t}\n\t\tthis.document.addEventListener(\"selectionchange\", this.onSelectionChange.bind(this), false);\n\t}\n\n\t/**\n\t * Remove listener for text selection\n\t * @private\n\t */\n\tremoveSelectionListeners(){\n\t\tif(!this.document) {\n\t\t\treturn;\n\t\t}\n\t\tthis.document.removeEventListener(\"selectionchange\", this.onSelectionChange, false);\n\t}\n\n\t/**\n\t * Handle getting text on selection\n\t * @private\n\t */\n\tonSelectionChange(e){\n\t\tif (this.selectionEndTimeout) {\n\t\t\tclearTimeout(this.selectionEndTimeout);\n\t\t}\n\t\tthis.selectionEndTimeout = setTimeout(function() {\n\t\t\tvar selection = this.window.getSelection();\n\t\t\tthis.triggerSelectedEvent(selection);\n\t\t}.bind(this), 250);\n\t}\n\n\t/**\n\t * Emit event on text selection\n\t * @private\n\t */\n\ttriggerSelectedEvent(selection){\n\t\tvar range, cfirange;\n\n\t\tif (selection && selection.rangeCount > 0) {\n\t\t\trange = selection.getRangeAt(0);\n\t\t\tif(!range.collapsed) {\n\t\t\t\t// cfirange = this.section.cfiFromRange(range);\n\t\t\t\tcfirange = new EpubCFI(range, this.cfiBase).toString();\n\t\t\t\tthis.emit(EVENTS.CONTENTS.SELECTED, cfirange);\n\t\t\t\tthis.emit(EVENTS.CONTENTS.SELECTED_RANGE, range);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Get a Dom Range from EpubCFI\n\t * @param {EpubCFI} _cfi\n\t * @param {string} [ignoreClass]\n\t * @returns {Range} range\n\t */\n\trange(_cfi, ignoreClass){\n\t\tvar cfi = new EpubCFI(_cfi);\n\t\treturn cfi.toRange(this.document, ignoreClass);\n\t}\n\n\t/**\n\t * Get an EpubCFI from a Dom Range\n\t * @param {Range} range\n\t * @param {string} [ignoreClass]\n\t * @returns {EpubCFI} cfi\n\t */\n\tcfiFromRange(range, ignoreClass){\n\t\treturn new EpubCFI(range, this.cfiBase, ignoreClass).toString();\n\t}\n\n\t/**\n\t * Get an EpubCFI from a Dom node\n\t * @param {node} node\n\t * @param {string} [ignoreClass]\n\t * @returns {EpubCFI} cfi\n\t */\n\tcfiFromNode(node, ignoreClass){\n\t\treturn new EpubCFI(node, this.cfiBase, ignoreClass).toString();\n\t}\n\n\t// TODO: find where this is used - remove?\n\tmap(layout){\n\t\tvar map = new Mapping(layout);\n\t\treturn map.section();\n\t}\n\n\t/**\n\t * Size the contents to a given width and height\n\t * @param {number} [width]\n\t * @param {number} [height]\n\t */\n\tsize(width, height){\n\t\tvar viewport = { scale: 1.0, scalable: \"no\" };\n\n\t\tthis.layoutStyle(\"scrolling\");\n\n\t\tif (width >= 0) {\n\t\t\tthis.width(width);\n\t\t\tviewport.width = width;\n\t\t\tthis.css(\"padding\", \"0 \"+(width/12)+\"px\");\n\t\t}\n\n\t\tif (height >= 0) {\n\t\t\tthis.height(height);\n\t\t\tviewport.height = height;\n\t\t}\n\n\t\tthis.css(\"margin\", \"0\");\n\t\tthis.css(\"box-sizing\", \"border-box\");\n\n\n\t\tthis.viewport(viewport);\n\t}\n\n\t/**\n\t * Apply columns to the contents for pagination\n\t * @param {number} width\n\t * @param {number} height\n\t * @param {number} columnWidth\n\t * @param {number} gap\n\t */\n\tcolumns(width, height, columnWidth, gap){\n\t\tlet COLUMN_AXIS = prefixed(\"column-axis\");\n\t\tlet COLUMN_GAP = prefixed(\"column-gap\");\n\t\tlet COLUMN_WIDTH = prefixed(\"column-width\");\n\t\tlet COLUMN_FILL = prefixed(\"column-fill\");\n\n\t\tlet writingMode = this.writingMode();\n\t\tlet axis = (writingMode.indexOf(\"vertical\") === 0) ? \"vertical\" : \"horizontal\";\n\n\t\tthis.layoutStyle(\"paginated\");\n\n\t\t// Fix body width issues if rtl is only set on body element\n\t\tif (this.content.dir === \"rtl\") {\n\t\t\tthis.direction(\"rtl\");\n\t\t}\n\n\t\tthis.width(width);\n\t\tthis.height(height);\n\n\t\t// Deal with Mobile trying to scale to viewport\n\t\tthis.viewport({ width: width, height: height, scale: 1.0, scalable: \"no\" });\n\n\t\t// TODO: inline-block needs more testing\n\t\t// Fixes Safari column cut offs, but causes RTL issues\n\t\t// this.css(\"display\", \"inline-block\");\n\n\t\tthis.css(\"overflow-y\", \"hidden\");\n\t\tthis.css(\"margin\", \"0\", true);\n\n\t\tif (axis === \"vertical\") {\n\t\t\tthis.css(\"padding-top\", (gap / 2) + \"px\", true);\n\t\t\tthis.css(\"padding-bottom\", (gap / 2) + \"px\", true);\n\t\t\tthis.css(\"padding-left\", \"20px\");\n\t\t\tthis.css(\"padding-right\", \"20px\");\n\t\t} else {\n\t\t\tthis.css(\"padding-top\", \"20px\");\n\t\t\tthis.css(\"padding-bottom\", \"20px\");\n\t\t\tthis.css(\"padding-left\", (gap / 2) + \"px\", true);\n\t\t\tthis.css(\"padding-right\", (gap / 2) + \"px\", true);\n\t\t}\n\n\t\tthis.css(\"box-sizing\", \"border-box\");\n\t\tthis.css(\"max-width\", \"inherit\");\n\n\t\tthis.css(COLUMN_AXIS, \"horizontal\");\n\t\tthis.css(COLUMN_FILL, \"auto\");\n\n\t\tthis.css(COLUMN_GAP, gap+\"px\");\n\t\tthis.css(COLUMN_WIDTH, columnWidth+\"px\");\n\t}\n\n\t/**\n\t * Scale contents from center\n\t * @param {number} scale\n\t * @param {number} offsetX\n\t * @param {number} offsetY\n\t */\n\tscaler(scale, offsetX, offsetY){\n\t\tvar scaleStr = \"scale(\" + scale + \")\";\n\t\tvar translateStr = \"\";\n\t\t// this.css(\"position\", \"absolute\"));\n\t\tthis.css(\"transform-origin\", \"top left\");\n\n\t\tif (offsetX >= 0 || offsetY >= 0) {\n\t\t\ttranslateStr = \" translate(\" + (offsetX || 0 )+ \"px, \" + (offsetY || 0 )+ \"px )\";\n\t\t}\n\n\t\tthis.css(\"transform\", scaleStr + translateStr);\n\t}\n\n\t/**\n\t * Fit contents into a fixed width and height\n\t * @param {number} width\n\t * @param {number} height\n\t */\n\tfit(width, height){\n\t\tvar viewport = this.viewport();\n\t\tvar widthScale = width / parseInt(viewport.width);\n\t\tvar heightScale = height / parseInt(viewport.height);\n\t\tvar scale = widthScale < heightScale ? widthScale : heightScale;\n\n\t\tvar offsetY = (height - (viewport.height * scale)) / 2;\n\n\t\tthis.layoutStyle(\"paginated\");\n\n\t\tthis.width(width);\n\t\tthis.height(height);\n\t\tthis.overflow(\"hidden\");\n\n\t\t// Scale to the correct size\n\t\tthis.scaler(scale, 0, offsetY);\n\n\t\tthis.css(\"background-color\", \"transparent\");\n\t}\n\n\t/**\n\t * Set the direction of the text\n\t * @param {string} [dir=\"ltr\"] \"rtl\" | \"ltr\"\n\t */\n\tdirection(dir) {\n\t\tif (this.documentElement) {\n\t\t\tthis.documentElement.style[\"direction\"] = dir;\n\t\t}\n\t}\n\n\tmapPage(cfiBase, layout, start, end, dev) {\n\t\tvar mapping = new Mapping(layout, dev);\n\n\t\treturn mapping.page(this, cfiBase, start, end);\n\t}\n\n\t/**\n\t * Emit event when link in content is clicked\n\t * @private\n\t */\n\tlinksHandler() {\n\t\treplaceLinks(this.content, (href) => {\n\t\t\tthis.emit(EVENTS.CONTENTS.LINK_CLICKED, href);\n\t\t});\n\t}\n\n\t/**\n\t * Set the writingMode of the text\n\t * @param {string} [mode=\"horizontal-tb\"] \"horizontal-tb\" | \"vertical-rl\" | \"vertical-lr\"\n\t */\n\twritingMode(mode) {\n\t\tlet WRITING_MODE = prefixed(\"writing-mode\");\n\n\t\tif (mode && this.documentElement) {\n\t\t\tthis.documentElement.style[WRITING_MODE] = mode;\n\t\t}\n\n\t\treturn this.window.getComputedStyle(this.documentElement)[WRITING_MODE] || '';\n\t}\n\n\t/**\n\t * Set the layoutStyle of the content\n\t * @param {string} [style=\"paginated\"] \"scrolling\" | \"paginated\"\n\t * @private\n\t */\n\tlayoutStyle(style) {\n\n\t\tif (style) {\n\t\t\tthis._layoutStyle = style;\n\t\t\tnavigator.epubReadingSystem.layoutStyle = this._layoutStyle;\n\t\t}\n\n\t\treturn this._layoutStyle || \"paginated\";\n\t}\n\n\t/**\n\t * Add the epubReadingSystem object to the navigator\n\t * @param {string} name\n\t * @param {string} version\n\t * @private\n\t */\n\tepubReadingSystem(name, version) {\n\t\tnavigator.epubReadingSystem = {\n\t\t\tname: name,\n\t\t\tversion: version,\n\t\t\tlayoutStyle: this.layoutStyle(),\n\t\t\thasFeature: function (feature) {\n\t\t\t\tswitch (feature) {\n\t\t\t\t\tcase \"dom-manipulation\":\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tcase \"layout-changes\":\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tcase \"touch-events\":\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tcase \"mouse-events\":\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tcase \"keyboard-events\":\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tcase \"spine-scripting\":\n\t\t\t\t\t\treturn false;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\treturn navigator.epubReadingSystem;\n\t}\n\n\tdestroy() {\n\t\t// Stop observing\n\t\tif(this.observer) {\n\t\t\tthis.observer.disconnect();\n\t\t}\n\n\t\tthis.document.removeEventListener('transitionend', this.resizeCheck);\n\n\t\tthis.removeListeners();\n\n\t}\n}\n\nEventEmitter(Contents.prototype);\n\nexport default Contents;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","import path from \"path-webpack\";\n\n/**\n * Creates a Path object for parsing and manipulation of a path strings\n *\n * Uses a polyfill for Nodejs path: https://nodejs.org/api/path.html\n * @param\t{string} pathString\ta url string (relative or absolute)\n * @class\n */\nclass Path {\n\tconstructor(pathString) {\n\t\tvar protocol;\n\t\tvar parsed;\n\n\t\tprotocol = pathString.indexOf(\"://\");\n\t\tif (protocol > -1) {\n\t\t\tpathString = new URL(pathString).pathname;\n\t\t}\n\n\t\tparsed = this.parse(pathString);\n\n\t\tthis.path = pathString;\n\n\t\tif (this.isDirectory(pathString)) {\n\t\t\tthis.directory = pathString;\n\t\t} else {\n\t\t\tthis.directory = parsed.dir + \"/\";\n\t\t}\n\n\t\tthis.filename = parsed.base;\n\t\tthis.extension = parsed.ext.slice(1);\n\n\t}\n\n\t/**\n\t * Parse the path: https://nodejs.org/api/path.html#path_path_parse_path\n\t * @param\t{string} what\n\t * @returns {object}\n\t */\n\tparse (what) {\n\t\treturn path.parse(what);\n\t}\n\n\t/**\n\t * @param\t{string} what\n\t * @returns {boolean}\n\t */\n\tisAbsolute (what) {\n\t\treturn path.isAbsolute(what || this.path);\n\t}\n\n\t/**\n\t * Check if path ends with a directory\n\t * @param\t{string} what\n\t * @returns {boolean}\n\t */\n\tisDirectory (what) {\n\t\treturn (what.charAt(what.length-1) === \"/\");\n\t}\n\n\t/**\n\t * Resolve a path against the directory of the Path\n\t *\n\t * https://nodejs.org/api/path.html#path_path_resolve_paths\n\t * @param\t{string} what\n\t * @returns {string} resolved\n\t */\n\tresolve (what) {\n\t\treturn path.resolve(this.directory, what);\n\t}\n\n\t/**\n\t * Resolve a path relative to the directory of the Path\n\t *\n\t * https://nodejs.org/api/path.html#path_path_relative_from_to\n\t * @param\t{string} what\n\t * @returns {string} relative\n\t */\n\trelative (what) {\n\t\treturn path.relative(this.directory, what);\n\t}\n\n\tsplitPath(filename) {\n\t\treturn this.splitPathRe.exec(filename).slice(1);\n\t}\n\n\t/**\n\t * Return the path string\n\t * @returns {string} path\n\t */\n\ttoString () {\n\t\treturn this.path;\n\t}\n}\n\nexport default Path;\n","import {defer, isXml, parse} from \"./core\";\nimport Path from \"./path\";\n\nfunction request(url, type, withCredentials, headers) {\n\tvar supportsURL = (typeof window != \"undefined\") ? window.URL : false; // TODO: fallback for url if window isn't defined\n\tvar BLOB_RESPONSE = supportsURL ? \"blob\" : \"arraybuffer\";\n\n\tvar deferred = new defer();\n\n\tvar xhr = new XMLHttpRequest();\n\n\t//-- Check from PDF.js:\n\t//   https://github.com/mozilla/pdf.js/blob/master/web/compatibility.js\n\tvar xhrPrototype = XMLHttpRequest.prototype;\n\n\tvar header;\n\n\tif (!(\"overrideMimeType\" in xhrPrototype)) {\n\t\t// IE10 might have response, but not overrideMimeType\n\t\tObject.defineProperty(xhrPrototype, \"overrideMimeType\", {\n\t\t\tvalue: function xmlHttpRequestOverrideMimeType() {}\n\t\t});\n\t}\n\n\tif(withCredentials) {\n\t\txhr.withCredentials = true;\n\t}\n\n\txhr.onreadystatechange = handler;\n\txhr.onerror = err;\n\n\txhr.open(\"GET\", url, true);\n\n\tfor(header in headers) {\n\t\txhr.setRequestHeader(header, headers[header]);\n\t}\n\n\tif(type == \"json\") {\n\t\txhr.setRequestHeader(\"Accept\", \"application/json\");\n\t}\n\n\t// If type isn\"t set, determine it from the file extension\n\tif(!type) {\n\t\ttype = new Path(url).extension;\n\t}\n\n\tif(type == \"blob\"){\n\t\txhr.responseType = BLOB_RESPONSE;\n\t}\n\n\n\tif(isXml(type)) {\n\t\t// xhr.responseType = \"document\";\n\t\txhr.overrideMimeType(\"text/xml\"); // for OPF parsing\n\t}\n\n\tif(type == \"xhtml\") {\n\t\t// xhr.responseType = \"document\";\n\t}\n\n\tif(type == \"html\" || type == \"htm\") {\n\t\t// xhr.responseType = \"document\";\n\t}\n\n\tif(type == \"binary\") {\n\t\txhr.responseType = \"arraybuffer\";\n\t}\n\n\txhr.send();\n\n\tfunction err(e) {\n\t\tdeferred.reject(e);\n\t}\n\n\tfunction handler() {\n\t\tif (this.readyState === XMLHttpRequest.DONE) {\n\t\t\tvar responseXML = false;\n\n\t\t\tif(this.responseType === \"\" || this.responseType === \"document\") {\n\t\t\t\tresponseXML = this.responseXML;\n\t\t\t}\n\n\t\t\tif (this.status === 200 || this.status === 0 || responseXML) { //-- Firefox is reporting 0 for blob urls\n\t\t\t\tvar r;\n\n\t\t\t\tif (!this.response && !responseXML) {\n\t\t\t\t\tdeferred.reject({\n\t\t\t\t\t\tstatus: this.status,\n\t\t\t\t\t\tmessage : \"Empty Response\",\n\t\t\t\t\t\tstack : new Error().stack\n\t\t\t\t\t});\n\t\t\t\t\treturn deferred.promise;\n\t\t\t\t}\n\n\t\t\t\tif (this.status === 403) {\n\t\t\t\t\tdeferred.reject({\n\t\t\t\t\t\tstatus: this.status,\n\t\t\t\t\t\tresponse: this.response,\n\t\t\t\t\t\tmessage : \"Forbidden\",\n\t\t\t\t\t\tstack : new Error().stack\n\t\t\t\t\t});\n\t\t\t\t\treturn deferred.promise;\n\t\t\t\t}\n\t\t\t\tif(responseXML){\n\t\t\t\t\tr = this.responseXML;\n\t\t\t\t} else\n\t\t\t\tif(isXml(type)){\n\t\t\t\t\t// xhr.overrideMimeType(\"text/xml\"); // for OPF parsing\n\t\t\t\t\t// If this.responseXML wasn't set, try to parse using a DOMParser from text\n\t\t\t\t\tr = parse(this.response, \"text/xml\");\n\t\t\t\t}else\n\t\t\t\tif(type == \"xhtml\"){\n\t\t\t\t\tr = parse(this.response, \"application/xhtml+xml\");\n\t\t\t\t}else\n\t\t\t\tif(type == \"html\" || type == \"htm\"){\n\t\t\t\t\tr = parse(this.response, \"text/html\");\n\t\t\t\t}else\n\t\t\t\tif(type == \"json\"){\n\t\t\t\t\tr = JSON.parse(this.response);\n\t\t\t\t}else\n\t\t\t\tif(type == \"blob\"){\n\n\t\t\t\t\tif(supportsURL) {\n\t\t\t\t\t\tr = this.response;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//-- Safari doesn't support responseType blob, so create a blob from arraybuffer\n\t\t\t\t\t\tr = new Blob([this.response]);\n\t\t\t\t\t}\n\n\t\t\t\t}else{\n\t\t\t\t\tr = this.response;\n\t\t\t\t}\n\n\t\t\t\tdeferred.resolve(r);\n\t\t\t} else {\n\n\t\t\t\tdeferred.reject({\n\t\t\t\t\tstatus: this.status,\n\t\t\t\t\tmessage : this.response,\n\t\t\t\t\tstack : new Error().stack\n\t\t\t\t});\n\n\t\t\t}\n\t\t}\n\t}\n\n\treturn deferred.promise;\n}\n\nexport default request;\n","\"use strict\";\n\nvar isValue = require(\"../value/is\");\n\n// prettier-ignore\nvar possibleTypes = { \"object\": true, \"function\": true, \"undefined\": true /* document.all */ };\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) return false;\n\treturn hasOwnProperty.call(possibleTypes, typeof value);\n};\n","\"use strict\";\n\nvar _undefined = require(\"../function/noop\")(); // Support ES3 engines\n\nmodule.exports = function (val) { return val !== _undefined && val !== null; };\n","\"use strict\";\n\nvar isPrototype = require(\"../prototype/is\");\n\nmodule.exports = function (value) {\n\tif (typeof value !== \"function\") return false;\n\n\tif (!hasOwnProperty.call(value, \"length\")) return false;\n\n\ttry {\n\t\tif (typeof value.length !== \"number\") return false;\n\t\tif (typeof value.call !== \"function\") return false;\n\t\tif (typeof value.apply !== \"function\") return false;\n\t} catch (error) {\n\t\treturn false;\n\t}\n\n\treturn !isPrototype(value);\n};\n","\"use strict\";\n\nvar isValue = require(\"../is-value\");\n\nvar keys = Object.keys;\n\nmodule.exports = function (object) { return keys(isValue(object) ? Object(object) : object); };\n","/*\n * DOM Level 2\n * Object DOMException\n * @see http://www.w3.org/TR/REC-DOM-Level-1/ecma-script-language-binding.html\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/ecma-script-binding.html\n */\n\nfunction copy(src,dest){\n\tfor(var p in src){\n\t\tdest[p] = src[p];\n\t}\n}\n/**\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*((?:.*\\{\\s*?[\\r\\n][\\s\\S]*?^})|\\S.*?(?=[;\\r\\n]));?\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*(\\S.*?(?=[;\\r\\n]));?\n */\nfunction _extends(Class,Super){\n\tvar pt = Class.prototype;\n\tif(Object.create){\n\t\tvar ppt = Object.create(Super.prototype)\n\t\tpt.__proto__ = ppt;\n\t}\n\tif(!(pt instanceof Super)){\n\t\tfunction t(){};\n\t\tt.prototype = Super.prototype;\n\t\tt = new t();\n\t\tcopy(pt,t);\n\t\tClass.prototype = pt = t;\n\t}\n\tif(pt.constructor != Class){\n\t\tif(typeof Class != 'function'){\n\t\t\tconsole.error(\"unknow Class:\"+Class)\n\t\t}\n\t\tpt.constructor = Class\n\t}\n}\nvar htmlns = 'http://www.w3.org/1999/xhtml' ;\n// Node Types\nvar NodeType = {}\nvar ELEMENT_NODE                = NodeType.ELEMENT_NODE                = 1;\nvar ATTRIBUTE_NODE              = NodeType.ATTRIBUTE_NODE              = 2;\nvar TEXT_NODE                   = NodeType.TEXT_NODE                   = 3;\nvar CDATA_SECTION_NODE          = NodeType.CDATA_SECTION_NODE          = 4;\nvar ENTITY_REFERENCE_NODE       = NodeType.ENTITY_REFERENCE_NODE       = 5;\nvar ENTITY_NODE                 = NodeType.ENTITY_NODE                 = 6;\nvar PROCESSING_INSTRUCTION_NODE = NodeType.PROCESSING_INSTRUCTION_NODE = 7;\nvar COMMENT_NODE                = NodeType.COMMENT_NODE                = 8;\nvar DOCUMENT_NODE               = NodeType.DOCUMENT_NODE               = 9;\nvar DOCUMENT_TYPE_NODE          = NodeType.DOCUMENT_TYPE_NODE          = 10;\nvar DOCUMENT_FRAGMENT_NODE      = NodeType.DOCUMENT_FRAGMENT_NODE      = 11;\nvar NOTATION_NODE               = NodeType.NOTATION_NODE               = 12;\n\n// ExceptionCode\nvar ExceptionCode = {}\nvar ExceptionMessage = {};\nvar INDEX_SIZE_ERR              = ExceptionCode.INDEX_SIZE_ERR              = ((ExceptionMessage[1]=\"Index size error\"),1);\nvar DOMSTRING_SIZE_ERR          = ExceptionCode.DOMSTRING_SIZE_ERR          = ((ExceptionMessage[2]=\"DOMString size error\"),2);\nvar HIERARCHY_REQUEST_ERR       = ExceptionCode.HIERARCHY_REQUEST_ERR       = ((ExceptionMessage[3]=\"Hierarchy request error\"),3);\nvar WRONG_DOCUMENT_ERR          = ExceptionCode.WRONG_DOCUMENT_ERR          = ((ExceptionMessage[4]=\"Wrong document\"),4);\nvar INVALID_CHARACTER_ERR       = ExceptionCode.INVALID_CHARACTER_ERR       = ((ExceptionMessage[5]=\"Invalid character\"),5);\nvar NO_DATA_ALLOWED_ERR         = ExceptionCode.NO_DATA_ALLOWED_ERR         = ((ExceptionMessage[6]=\"No data allowed\"),6);\nvar NO_MODIFICATION_ALLOWED_ERR = ExceptionCode.NO_MODIFICATION_ALLOWED_ERR = ((ExceptionMessage[7]=\"No modification allowed\"),7);\nvar NOT_FOUND_ERR               = ExceptionCode.NOT_FOUND_ERR               = ((ExceptionMessage[8]=\"Not found\"),8);\nvar NOT_SUPPORTED_ERR           = ExceptionCode.NOT_SUPPORTED_ERR           = ((ExceptionMessage[9]=\"Not supported\"),9);\nvar INUSE_ATTRIBUTE_ERR         = ExceptionCode.INUSE_ATTRIBUTE_ERR         = ((ExceptionMessage[10]=\"Attribute in use\"),10);\n//level2\nvar INVALID_STATE_ERR        \t= ExceptionCode.INVALID_STATE_ERR        \t= ((ExceptionMessage[11]=\"Invalid state\"),11);\nvar SYNTAX_ERR               \t= ExceptionCode.SYNTAX_ERR               \t= ((ExceptionMessage[12]=\"Syntax error\"),12);\nvar INVALID_MODIFICATION_ERR \t= ExceptionCode.INVALID_MODIFICATION_ERR \t= ((ExceptionMessage[13]=\"Invalid modification\"),13);\nvar NAMESPACE_ERR            \t= ExceptionCode.NAMESPACE_ERR           \t= ((ExceptionMessage[14]=\"Invalid namespace\"),14);\nvar INVALID_ACCESS_ERR       \t= ExceptionCode.INVALID_ACCESS_ERR      \t= ((ExceptionMessage[15]=\"Invalid access\"),15);\n\n\nfunction DOMException(code, message) {\n\tif(message instanceof Error){\n\t\tvar error = message;\n\t}else{\n\t\terror = this;\n\t\tError.call(this, ExceptionMessage[code]);\n\t\tthis.message = ExceptionMessage[code];\n\t\tif(Error.captureStackTrace) Error.captureStackTrace(this, DOMException);\n\t}\n\terror.code = code;\n\tif(message) this.message = this.message + \": \" + message;\n\treturn error;\n};\nDOMException.prototype = Error.prototype;\ncopy(ExceptionCode,DOMException)\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-536297177\n * The NodeList interface provides the abstraction of an ordered collection of nodes, without defining or constraining how this collection is implemented. NodeList objects in the DOM are live.\n * The items in the NodeList are accessible via an integral index, starting from 0.\n */\nfunction NodeList() {\n};\nNodeList.prototype = {\n\t/**\n\t * The number of nodes in the list. The range of valid child node indices is 0 to length-1 inclusive.\n\t * @standard level1\n\t */\n\tlength:0, \n\t/**\n\t * Returns the indexth item in the collection. If index is greater than or equal to the number of nodes in the list, this returns null.\n\t * @standard level1\n\t * @param index  unsigned long \n\t *   Index into the collection.\n\t * @return Node\n\t * \tThe node at the indexth position in the NodeList, or null if that is not a valid index. \n\t */\n\titem: function(index) {\n\t\treturn this[index] || null;\n\t},\n\ttoString:function(isHTML,nodeFilter){\n\t\tfor(var buf = [], i = 0;i<this.length;i++){\n\t\t\tserializeToString(this[i],buf,isHTML,nodeFilter);\n\t\t}\n\t\treturn buf.join('');\n\t}\n};\nfunction LiveNodeList(node,refresh){\n\tthis._node = node;\n\tthis._refresh = refresh\n\t_updateLiveList(this);\n}\nfunction _updateLiveList(list){\n\tvar inc = list._node._inc || list._node.ownerDocument._inc;\n\tif(list._inc != inc){\n\t\tvar ls = list._refresh(list._node);\n\t\t//console.log(ls.length)\n\t\t__set__(list,'length',ls.length);\n\t\tcopy(ls,list);\n\t\tlist._inc = inc;\n\t}\n}\nLiveNodeList.prototype.item = function(i){\n\t_updateLiveList(this);\n\treturn this[i];\n}\n\n_extends(LiveNodeList,NodeList);\n/**\n * \n * Objects implementing the NamedNodeMap interface are used to represent collections of nodes that can be accessed by name. Note that NamedNodeMap does not inherit from NodeList; NamedNodeMaps are not maintained in any particular order. Objects contained in an object implementing NamedNodeMap may also be accessed by an ordinal index, but this is simply to allow convenient enumeration of the contents of a NamedNodeMap, and does not imply that the DOM specifies an order to these Nodes.\n * NamedNodeMap objects in the DOM are live.\n * used for attributes or DocumentType entities \n */\nfunction NamedNodeMap() {\n};\n\nfunction _findNodeIndex(list,node){\n\tvar i = list.length;\n\twhile(i--){\n\t\tif(list[i] === node){return i}\n\t}\n}\n\nfunction _addNamedNode(el,list,newAttr,oldAttr){\n\tif(oldAttr){\n\t\tlist[_findNodeIndex(list,oldAttr)] = newAttr;\n\t}else{\n\t\tlist[list.length++] = newAttr;\n\t}\n\tif(el){\n\t\tnewAttr.ownerElement = el;\n\t\tvar doc = el.ownerDocument;\n\t\tif(doc){\n\t\t\toldAttr && _onRemoveAttribute(doc,el,oldAttr);\n\t\t\t_onAddAttribute(doc,el,newAttr);\n\t\t}\n\t}\n}\nfunction _removeNamedNode(el,list,attr){\n\t//console.log('remove attr:'+attr)\n\tvar i = _findNodeIndex(list,attr);\n\tif(i>=0){\n\t\tvar lastIndex = list.length-1\n\t\twhile(i<lastIndex){\n\t\t\tlist[i] = list[++i]\n\t\t}\n\t\tlist.length = lastIndex;\n\t\tif(el){\n\t\t\tvar doc = el.ownerDocument;\n\t\t\tif(doc){\n\t\t\t\t_onRemoveAttribute(doc,el,attr);\n\t\t\t\tattr.ownerElement = null;\n\t\t\t}\n\t\t}\n\t}else{\n\t\tthrow DOMException(NOT_FOUND_ERR,new Error(el.tagName+'@'+attr))\n\t}\n}\nNamedNodeMap.prototype = {\n\tlength:0,\n\titem:NodeList.prototype.item,\n\tgetNamedItem: function(key) {\n//\t\tif(key.indexOf(':')>0 || key == 'xmlns'){\n//\t\t\treturn null;\n//\t\t}\n\t\t//console.log()\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar attr = this[i];\n\t\t\t//console.log(attr.nodeName,key)\n\t\t\tif(attr.nodeName == key){\n\t\t\t\treturn attr;\n\t\t\t}\n\t\t}\n\t},\n\tsetNamedItem: function(attr) {\n\t\tvar el = attr.ownerElement;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\tvar oldAttr = this.getNamedItem(attr.nodeName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\t/* returns Node */\n\tsetNamedItemNS: function(attr) {// raises: WRONG_DOCUMENT_ERR,NO_MODIFICATION_ALLOWED_ERR,INUSE_ATTRIBUTE_ERR\n\t\tvar el = attr.ownerElement, oldAttr;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\toldAttr = this.getNamedItemNS(attr.namespaceURI,attr.localName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\n\t/* returns Node */\n\tremoveNamedItem: function(key) {\n\t\tvar attr = this.getNamedItem(key);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\t\t\n\t\t\n\t},// raises: NOT_FOUND_ERR,NO_MODIFICATION_ALLOWED_ERR\n\t\n\t//for level2\n\tremoveNamedItemNS:function(namespaceURI,localName){\n\t\tvar attr = this.getNamedItemNS(namespaceURI,localName);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\t},\n\tgetNamedItemNS: function(namespaceURI, localName) {\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar node = this[i];\n\t\t\tif(node.localName == localName && node.namespaceURI == namespaceURI){\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n};\n/**\n * @see http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-102161490\n */\nfunction DOMImplementation(/* Object */ features) {\n\tthis._features = {};\n\tif (features) {\n\t\tfor (var feature in features) {\n\t\t\t this._features = features[feature];\n\t\t}\n\t}\n};\n\nDOMImplementation.prototype = {\n\thasFeature: function(/* string */ feature, /* string */ version) {\n\t\tvar versions = this._features[feature.toLowerCase()];\n\t\tif (versions && (!version || version in versions)) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateDocument:function(namespaceURI,  qualifiedName, doctype){// raises:INVALID_CHARACTER_ERR,NAMESPACE_ERR,WRONG_DOCUMENT_ERR\n\t\tvar doc = new Document();\n\t\tdoc.implementation = this;\n\t\tdoc.childNodes = new NodeList();\n\t\tdoc.doctype = doctype;\n\t\tif(doctype){\n\t\t\tdoc.appendChild(doctype);\n\t\t}\n\t\tif(qualifiedName){\n\t\t\tvar root = doc.createElementNS(namespaceURI,qualifiedName);\n\t\t\tdoc.appendChild(root);\n\t\t}\n\t\treturn doc;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateDocumentType:function(qualifiedName, publicId, systemId){// raises:INVALID_CHARACTER_ERR,NAMESPACE_ERR\n\t\tvar node = new DocumentType();\n\t\tnode.name = qualifiedName;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.publicId = publicId;\n\t\tnode.systemId = systemId;\n\t\t// Introduced in DOM Level 2:\n\t\t//readonly attribute DOMString        internalSubset;\n\t\t\n\t\t//TODO:..\n\t\t//  readonly attribute NamedNodeMap     entities;\n\t\t//  readonly attribute NamedNodeMap     notations;\n\t\treturn node;\n\t}\n};\n\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-1950641247\n */\n\nfunction Node() {\n};\n\nNode.prototype = {\n\tfirstChild : null,\n\tlastChild : null,\n\tpreviousSibling : null,\n\tnextSibling : null,\n\tattributes : null,\n\tparentNode : null,\n\tchildNodes : null,\n\townerDocument : null,\n\tnodeValue : null,\n\tnamespaceURI : null,\n\tprefix : null,\n\tlocalName : null,\n\t// Modified in DOM Level 2:\n\tinsertBefore:function(newChild, refChild){//raises \n\t\treturn _insertBefore(this,newChild,refChild);\n\t},\n\treplaceChild:function(newChild, oldChild){//raises \n\t\tthis.insertBefore(newChild,oldChild);\n\t\tif(oldChild){\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t},\n\tremoveChild:function(oldChild){\n\t\treturn _removeChild(this,oldChild);\n\t},\n\tappendChild:function(newChild){\n\t\treturn this.insertBefore(newChild,null);\n\t},\n\thasChildNodes:function(){\n\t\treturn this.firstChild != null;\n\t},\n\tcloneNode:function(deep){\n\t\treturn cloneNode(this.ownerDocument||this,this,deep);\n\t},\n\t// Modified in DOM Level 2:\n\tnormalize:function(){\n\t\tvar child = this.firstChild;\n\t\twhile(child){\n\t\t\tvar next = child.nextSibling;\n\t\t\tif(next && next.nodeType == TEXT_NODE && child.nodeType == TEXT_NODE){\n\t\t\t\tthis.removeChild(next);\n\t\t\t\tchild.appendData(next.data);\n\t\t\t}else{\n\t\t\t\tchild.normalize();\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t}\n\t},\n  \t// Introduced in DOM Level 2:\n\tisSupported:function(feature, version){\n\t\treturn this.ownerDocument.implementation.hasFeature(feature,version);\n\t},\n    // Introduced in DOM Level 2:\n    hasAttributes:function(){\n    \treturn this.attributes.length>0;\n    },\n    lookupPrefix:function(namespaceURI){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tfor(var n in map){\n    \t\t\t\tif(map[n] == namespaceURI){\n    \t\t\t\t\treturn n;\n    \t\t\t\t}\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    lookupNamespaceURI:function(prefix){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tif(prefix in map){\n    \t\t\t\treturn map[prefix] ;\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    isDefaultNamespace:function(namespaceURI){\n    \tvar prefix = this.lookupPrefix(namespaceURI);\n    \treturn prefix == null;\n    }\n};\n\n\nfunction _xmlEncoder(c){\n\treturn c == '<' && '&lt;' ||\n         c == '>' && '&gt;' ||\n         c == '&' && '&amp;' ||\n         c == '\"' && '&quot;' ||\n         '&#'+c.charCodeAt()+';'\n}\n\n\ncopy(NodeType,Node);\ncopy(NodeType,Node.prototype);\n\n/**\n * @param callback return true for continue,false for break\n * @return boolean true: break visit;\n */\nfunction _visitNode(node,callback){\n\tif(callback(node)){\n\t\treturn true;\n\t}\n\tif(node = node.firstChild){\n\t\tdo{\n\t\t\tif(_visitNode(node,callback)){return true}\n        }while(node=node.nextSibling)\n    }\n}\n\n\n\nfunction Document(){\n}\nfunction _onAddAttribute(doc,el,newAttr){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns == 'http://www.w3.org/2000/xmlns/'){\n\t\t//update namespace\n\t\tel._nsMap[newAttr.prefix?newAttr.localName:''] = newAttr.value\n\t}\n}\nfunction _onRemoveAttribute(doc,el,newAttr,remove){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns == 'http://www.w3.org/2000/xmlns/'){\n\t\t//update namespace\n\t\tdelete el._nsMap[newAttr.prefix?newAttr.localName:'']\n\t}\n}\nfunction _onUpdateChild(doc,el,newChild){\n\tif(doc && doc._inc){\n\t\tdoc._inc++;\n\t\t//update childNodes\n\t\tvar cs = el.childNodes;\n\t\tif(newChild){\n\t\t\tcs[cs.length++] = newChild;\n\t\t}else{\n\t\t\t//console.log(1)\n\t\t\tvar child = el.firstChild;\n\t\t\tvar i = 0;\n\t\t\twhile(child){\n\t\t\t\tcs[i++] = child;\n\t\t\t\tchild =child.nextSibling;\n\t\t\t}\n\t\t\tcs.length = i;\n\t\t}\n\t}\n}\n\n/**\n * attributes;\n * children;\n * \n * writeable properties:\n * nodeValue,Attr:value,CharacterData:data\n * prefix\n */\nfunction _removeChild(parentNode,child){\n\tvar previous = child.previousSibling;\n\tvar next = child.nextSibling;\n\tif(previous){\n\t\tprevious.nextSibling = next;\n\t}else{\n\t\tparentNode.firstChild = next\n\t}\n\tif(next){\n\t\tnext.previousSibling = previous;\n\t}else{\n\t\tparentNode.lastChild = previous;\n\t}\n\t_onUpdateChild(parentNode.ownerDocument,parentNode);\n\treturn child;\n}\n/**\n * preformance key(refChild == null)\n */\nfunction _insertBefore(parentNode,newChild,nextChild){\n\tvar cp = newChild.parentNode;\n\tif(cp){\n\t\tcp.removeChild(newChild);//remove and update\n\t}\n\tif(newChild.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\tvar newFirst = newChild.firstChild;\n\t\tif (newFirst == null) {\n\t\t\treturn newChild;\n\t\t}\n\t\tvar newLast = newChild.lastChild;\n\t}else{\n\t\tnewFirst = newLast = newChild;\n\t}\n\tvar pre = nextChild ? nextChild.previousSibling : parentNode.lastChild;\n\n\tnewFirst.previousSibling = pre;\n\tnewLast.nextSibling = nextChild;\n\t\n\t\n\tif(pre){\n\t\tpre.nextSibling = newFirst;\n\t}else{\n\t\tparentNode.firstChild = newFirst;\n\t}\n\tif(nextChild == null){\n\t\tparentNode.lastChild = newLast;\n\t}else{\n\t\tnextChild.previousSibling = newLast;\n\t}\n\tdo{\n\t\tnewFirst.parentNode = parentNode;\n\t}while(newFirst !== newLast && (newFirst= newFirst.nextSibling))\n\t_onUpdateChild(parentNode.ownerDocument||parentNode,parentNode);\n\t//console.log(parentNode.lastChild.nextSibling == null)\n\tif (newChild.nodeType == DOCUMENT_FRAGMENT_NODE) {\n\t\tnewChild.firstChild = newChild.lastChild = null;\n\t}\n\treturn newChild;\n}\nfunction _appendSingleChild(parentNode,newChild){\n\tvar cp = newChild.parentNode;\n\tif(cp){\n\t\tvar pre = parentNode.lastChild;\n\t\tcp.removeChild(newChild);//remove and update\n\t\tvar pre = parentNode.lastChild;\n\t}\n\tvar pre = parentNode.lastChild;\n\tnewChild.parentNode = parentNode;\n\tnewChild.previousSibling = pre;\n\tnewChild.nextSibling = null;\n\tif(pre){\n\t\tpre.nextSibling = newChild;\n\t}else{\n\t\tparentNode.firstChild = newChild;\n\t}\n\tparentNode.lastChild = newChild;\n\t_onUpdateChild(parentNode.ownerDocument,parentNode,newChild);\n\treturn newChild;\n\t//console.log(\"__aa\",parentNode.lastChild.nextSibling == null)\n}\nDocument.prototype = {\n\t//implementation : null,\n\tnodeName :  '#document',\n\tnodeType :  DOCUMENT_NODE,\n\tdoctype :  null,\n\tdocumentElement :  null,\n\t_inc : 1,\n\t\n\tinsertBefore :  function(newChild, refChild){//raises \n\t\tif(newChild.nodeType == DOCUMENT_FRAGMENT_NODE){\n\t\t\tvar child = newChild.firstChild;\n\t\t\twhile(child){\n\t\t\t\tvar next = child.nextSibling;\n\t\t\t\tthis.insertBefore(child,refChild);\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t\treturn newChild;\n\t\t}\n\t\tif(this.documentElement == null && newChild.nodeType == ELEMENT_NODE){\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\t\t\n\t\treturn _insertBefore(this,newChild,refChild),(newChild.ownerDocument = this),newChild;\n\t},\n\tremoveChild :  function(oldChild){\n\t\tif(this.documentElement == oldChild){\n\t\t\tthis.documentElement = null;\n\t\t}\n\t\treturn _removeChild(this,oldChild);\n\t},\n\t// Introduced in DOM Level 2:\n\timportNode : function(importedNode,deep){\n\t\treturn importNode(this,importedNode,deep);\n\t},\n\t// Introduced in DOM Level 2:\n\tgetElementById :\tfunction(id){\n\t\tvar rtv = null;\n\t\t_visitNode(this.documentElement,function(node){\n\t\t\tif(node.nodeType == ELEMENT_NODE){\n\t\t\t\tif(node.getAttribute('id') == id){\n\t\t\t\t\trtv = node;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\treturn rtv;\n\t},\n\t\n\t//document factory method:\n\tcreateElement :\tfunction(tagName){\n\t\tvar node = new Element();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = tagName;\n\t\tnode.tagName = tagName;\n\t\tnode.childNodes = new NodeList();\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\tcreateDocumentFragment :\tfunction(){\n\t\tvar node = new DocumentFragment();\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\treturn node;\n\t},\n\tcreateTextNode :\tfunction(data){\n\t\tvar node = new Text();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateComment :\tfunction(data){\n\t\tvar node = new Comment();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateCDATASection :\tfunction(data){\n\t\tvar node = new CDATASection();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateProcessingInstruction :\tfunction(target,data){\n\t\tvar node = new ProcessingInstruction();\n\t\tnode.ownerDocument = this;\n\t\tnode.tagName = node.target = target;\n\t\tnode.nodeValue= node.data = data;\n\t\treturn node;\n\t},\n\tcreateAttribute :\tfunction(name){\n\t\tvar node = new Attr();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.name = name;\n\t\tnode.nodeName\t= name;\n\t\tnode.localName = name;\n\t\tnode.specified = true;\n\t\treturn node;\n\t},\n\tcreateEntityReference :\tfunction(name){\n\t\tvar node = new EntityReference();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.nodeName\t= name;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateElementNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Element();\n\t\tvar pl = qualifiedName.split(':');\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tnode.childNodes = new NodeList();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.tagName = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateAttributeNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Attr();\n\t\tvar pl = qualifiedName.split(':');\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.name = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tnode.specified = true;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\treturn node;\n\t}\n};\n_extends(Document,Node);\n\n\nfunction Element() {\n\tthis._nsMap = {};\n};\nElement.prototype = {\n\tnodeType : ELEMENT_NODE,\n\thasAttribute : function(name){\n\t\treturn this.getAttributeNode(name)!=null;\n\t},\n\tgetAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name);\n\t\treturn attr && attr.value || '';\n\t},\n\tgetAttributeNode : function(name){\n\t\treturn this.attributes.getNamedItem(name);\n\t},\n\tsetAttribute : function(name, value){\n\t\tvar attr = this.ownerDocument.createAttribute(name);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tremoveAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name)\n\t\tattr && this.removeAttributeNode(attr);\n\t},\n\t\n\t//four real opeartion method\n\tappendChild:function(newChild){\n\t\tif(newChild.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\t\treturn this.insertBefore(newChild,null);\n\t\t}else{\n\t\t\treturn _appendSingleChild(this,newChild);\n\t\t}\n\t},\n\tsetAttributeNode : function(newAttr){\n\t\treturn this.attributes.setNamedItem(newAttr);\n\t},\n\tsetAttributeNodeNS : function(newAttr){\n\t\treturn this.attributes.setNamedItemNS(newAttr);\n\t},\n\tremoveAttributeNode : function(oldAttr){\n\t\t//console.log(this == oldAttr.ownerElement)\n\t\treturn this.attributes.removeNamedItem(oldAttr.nodeName);\n\t},\n\t//get real attribute name,and remove it by removeAttributeNode\n\tremoveAttributeNS : function(namespaceURI, localName){\n\t\tvar old = this.getAttributeNodeNS(namespaceURI, localName);\n\t\told && this.removeAttributeNode(old);\n\t},\n\t\n\thasAttributeNS : function(namespaceURI, localName){\n\t\treturn this.getAttributeNodeNS(namespaceURI, localName)!=null;\n\t},\n\tgetAttributeNS : function(namespaceURI, localName){\n\t\tvar attr = this.getAttributeNodeNS(namespaceURI, localName);\n\t\treturn attr && attr.value || '';\n\t},\n\tsetAttributeNS : function(namespaceURI, qualifiedName, value){\n\t\tvar attr = this.ownerDocument.createAttributeNS(namespaceURI, qualifiedName);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tgetAttributeNodeNS : function(namespaceURI, localName){\n\t\treturn this.attributes.getNamedItemNS(namespaceURI, localName);\n\t},\n\t\n\tgetElementsByTagName : function(tagName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType == ELEMENT_NODE && (tagName === '*' || node.tagName == tagName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t});\n\t},\n\tgetElementsByTagNameNS : function(namespaceURI, localName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType === ELEMENT_NODE && (namespaceURI === '*' || node.namespaceURI === namespaceURI) && (localName === '*' || node.localName == localName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t\t\n\t\t});\n\t}\n};\nDocument.prototype.getElementsByTagName = Element.prototype.getElementsByTagName;\nDocument.prototype.getElementsByTagNameNS = Element.prototype.getElementsByTagNameNS;\n\n\n_extends(Element,Node);\nfunction Attr() {\n};\nAttr.prototype.nodeType = ATTRIBUTE_NODE;\n_extends(Attr,Node);\n\n\nfunction CharacterData() {\n};\nCharacterData.prototype = {\n\tdata : '',\n\tsubstringData : function(offset, count) {\n\t\treturn this.data.substring(offset, offset+count);\n\t},\n\tappendData: function(text) {\n\t\ttext = this.data+text;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t},\n\tinsertData: function(offset,text) {\n\t\tthis.replaceData(offset,0,text);\n\t\n\t},\n\tappendChild:function(newChild){\n\t\tthrow new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])\n\t},\n\tdeleteData: function(offset, count) {\n\t\tthis.replaceData(offset,count,\"\");\n\t},\n\treplaceData: function(offset, count, text) {\n\t\tvar start = this.data.substring(0,offset);\n\t\tvar end = this.data.substring(offset+count);\n\t\ttext = start + text + end;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t}\n}\n_extends(CharacterData,Node);\nfunction Text() {\n};\nText.prototype = {\n\tnodeName : \"#text\",\n\tnodeType : TEXT_NODE,\n\tsplitText : function(offset) {\n\t\tvar text = this.data;\n\t\tvar newText = text.substring(offset);\n\t\ttext = text.substring(0, offset);\n\t\tthis.data = this.nodeValue = text;\n\t\tthis.length = text.length;\n\t\tvar newNode = this.ownerDocument.createTextNode(newText);\n\t\tif(this.parentNode){\n\t\t\tthis.parentNode.insertBefore(newNode, this.nextSibling);\n\t\t}\n\t\treturn newNode;\n\t}\n}\n_extends(Text,CharacterData);\nfunction Comment() {\n};\nComment.prototype = {\n\tnodeName : \"#comment\",\n\tnodeType : COMMENT_NODE\n}\n_extends(Comment,CharacterData);\n\nfunction CDATASection() {\n};\nCDATASection.prototype = {\n\tnodeName : \"#cdata-section\",\n\tnodeType : CDATA_SECTION_NODE\n}\n_extends(CDATASection,CharacterData);\n\n\nfunction DocumentType() {\n};\nDocumentType.prototype.nodeType = DOCUMENT_TYPE_NODE;\n_extends(DocumentType,Node);\n\nfunction Notation() {\n};\nNotation.prototype.nodeType = NOTATION_NODE;\n_extends(Notation,Node);\n\nfunction Entity() {\n};\nEntity.prototype.nodeType = ENTITY_NODE;\n_extends(Entity,Node);\n\nfunction EntityReference() {\n};\nEntityReference.prototype.nodeType = ENTITY_REFERENCE_NODE;\n_extends(EntityReference,Node);\n\nfunction DocumentFragment() {\n};\nDocumentFragment.prototype.nodeName =\t\"#document-fragment\";\nDocumentFragment.prototype.nodeType =\tDOCUMENT_FRAGMENT_NODE;\n_extends(DocumentFragment,Node);\n\n\nfunction ProcessingInstruction() {\n}\nProcessingInstruction.prototype.nodeType = PROCESSING_INSTRUCTION_NODE;\n_extends(ProcessingInstruction,Node);\nfunction XMLSerializer(){}\nXMLSerializer.prototype.serializeToString = function(node,isHtml,nodeFilter){\n\treturn nodeSerializeToString.call(node,isHtml,nodeFilter);\n}\nNode.prototype.toString = nodeSerializeToString;\nfunction nodeSerializeToString(isHtml,nodeFilter){\n\tvar buf = [];\n\tvar refNode = this.nodeType == 9?this.documentElement:this;\n\tvar prefix = refNode.prefix;\n\tvar uri = refNode.namespaceURI;\n\t\n\tif(uri && prefix == null){\n\t\t//console.log(prefix)\n\t\tvar prefix = refNode.lookupPrefix(uri);\n\t\tif(prefix == null){\n\t\t\t//isHTML = true;\n\t\t\tvar visibleNamespaces=[\n\t\t\t{namespace:uri,prefix:null}\n\t\t\t//{namespace:uri,prefix:''}\n\t\t\t]\n\t\t}\n\t}\n\tserializeToString(this,buf,isHtml,nodeFilter,visibleNamespaces);\n\t//console.log('###',this.nodeType,uri,prefix,buf.join(''))\n\treturn buf.join('');\n}\nfunction needNamespaceDefine(node,isHTML, visibleNamespaces) {\n\tvar prefix = node.prefix||'';\n\tvar uri = node.namespaceURI;\n\tif (!prefix && !uri){\n\t\treturn false;\n\t}\n\tif (prefix === \"xml\" && uri === \"http://www.w3.org/XML/1998/namespace\" \n\t\t|| uri == 'http://www.w3.org/2000/xmlns/'){\n\t\treturn false;\n\t}\n\t\n\tvar i = visibleNamespaces.length \n\t//console.log('@@@@',node.tagName,prefix,uri,visibleNamespaces)\n\twhile (i--) {\n\t\tvar ns = visibleNamespaces[i];\n\t\t// get namespace prefix\n\t\t//console.log(node.nodeType,node.tagName,ns.prefix,prefix)\n\t\tif (ns.prefix == prefix){\n\t\t\treturn ns.namespace != uri;\n\t\t}\n\t}\n\t//console.log(isHTML,uri,prefix=='')\n\t//if(isHTML && prefix ==null && uri == 'http://www.w3.org/1999/xhtml'){\n\t//\treturn false;\n\t//}\n\t//node.flag = '11111'\n\t//console.error(3,true,node.flag,node.prefix,node.namespaceURI)\n\treturn true;\n}\nfunction serializeToString(node,buf,isHTML,nodeFilter,visibleNamespaces){\n\tif(nodeFilter){\n\t\tnode = nodeFilter(node);\n\t\tif(node){\n\t\t\tif(typeof node == 'string'){\n\t\t\t\tbuf.push(node);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}else{\n\t\t\treturn;\n\t\t}\n\t\t//buf.sort.apply(attrs, attributeSorter);\n\t}\n\tswitch(node.nodeType){\n\tcase ELEMENT_NODE:\n\t\tif (!visibleNamespaces) visibleNamespaces = [];\n\t\tvar startVisibleNamespaces = visibleNamespaces.length;\n\t\tvar attrs = node.attributes;\n\t\tvar len = attrs.length;\n\t\tvar child = node.firstChild;\n\t\tvar nodeName = node.tagName;\n\t\t\n\t\tisHTML =  (htmlns === node.namespaceURI) ||isHTML \n\t\tbuf.push('<',nodeName);\n\t\t\n\t\t\n\t\t\n\t\tfor(var i=0;i<len;i++){\n\t\t\t// add namespaces for attributes\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (attr.prefix == 'xmlns') {\n\t\t\t\tvisibleNamespaces.push({ prefix: attr.localName, namespace: attr.value });\n\t\t\t}else if(attr.nodeName == 'xmlns'){\n\t\t\t\tvisibleNamespaces.push({ prefix: '', namespace: attr.value });\n\t\t\t}\n\t\t}\n\t\tfor(var i=0;i<len;i++){\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (needNamespaceDefine(attr,isHTML, visibleNamespaces)) {\n\t\t\t\tvar prefix = attr.prefix||'';\n\t\t\t\tvar uri = attr.namespaceURI;\n\t\t\t\tvar ns = prefix ? ' xmlns:' + prefix : \" xmlns\";\n\t\t\t\tbuf.push(ns, '=\"' , uri , '\"');\n\t\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t\t}\n\t\t\tserializeToString(attr,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t}\n\t\t// add namespace for current node\t\t\n\t\tif (needNamespaceDefine(node,isHTML, visibleNamespaces)) {\n\t\t\tvar prefix = node.prefix||'';\n\t\t\tvar uri = node.namespaceURI;\n\t\t\tvar ns = prefix ? ' xmlns:' + prefix : \" xmlns\";\n\t\t\tbuf.push(ns, '=\"' , uri , '\"');\n\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t}\n\t\t\n\t\tif(child || isHTML && !/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)){\n\t\t\tbuf.push('>');\n\t\t\t//if is cdata child node\n\t\t\tif(isHTML && /^script$/i.test(nodeName)){\n\t\t\t\twhile(child){\n\t\t\t\t\tif(child.data){\n\t\t\t\t\t\tbuf.push(child.data);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tserializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t\t\t\t}\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}else\n\t\t\t{\n\t\t\t\twhile(child){\n\t\t\t\t\tserializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbuf.push('</',nodeName,'>');\n\t\t}else{\n\t\t\tbuf.push('/>');\n\t\t}\n\t\t// remove added visible namespaces\n\t\t//visibleNamespaces.length = startVisibleNamespaces;\n\t\treturn;\n\tcase DOCUMENT_NODE:\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tserializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t\treturn;\n\tcase ATTRIBUTE_NODE:\n\t\treturn buf.push(' ',node.name,'=\"',node.value.replace(/[<&\"]/g,_xmlEncoder),'\"');\n\tcase TEXT_NODE:\n\t\treturn buf.push(node.data.replace(/[<&]/g,_xmlEncoder));\n\tcase CDATA_SECTION_NODE:\n\t\treturn buf.push( '<![CDATA[',node.data,']]>');\n\tcase COMMENT_NODE:\n\t\treturn buf.push( \"<!--\",node.data,\"-->\");\n\tcase DOCUMENT_TYPE_NODE:\n\t\tvar pubid = node.publicId;\n\t\tvar sysid = node.systemId;\n\t\tbuf.push('<!DOCTYPE ',node.name);\n\t\tif(pubid){\n\t\t\tbuf.push(' PUBLIC \"',pubid);\n\t\t\tif (sysid && sysid!='.') {\n\t\t\t\tbuf.push( '\" \"',sysid);\n\t\t\t}\n\t\t\tbuf.push('\">');\n\t\t}else if(sysid && sysid!='.'){\n\t\t\tbuf.push(' SYSTEM \"',sysid,'\">');\n\t\t}else{\n\t\t\tvar sub = node.internalSubset;\n\t\t\tif(sub){\n\t\t\t\tbuf.push(\" [\",sub,\"]\");\n\t\t\t}\n\t\t\tbuf.push(\">\");\n\t\t}\n\t\treturn;\n\tcase PROCESSING_INSTRUCTION_NODE:\n\t\treturn buf.push( \"<?\",node.target,\" \",node.data,\"?>\");\n\tcase ENTITY_REFERENCE_NODE:\n\t\treturn buf.push( '&',node.nodeName,';');\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE:\n\tdefault:\n\t\tbuf.push('??',node.nodeName);\n\t}\n}\nfunction importNode(doc,node,deep){\n\tvar node2;\n\tswitch (node.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tnode2 = node.cloneNode(false);\n\t\tnode2.ownerDocument = doc;\n\t\t//var attrs = node2.attributes;\n\t\t//var len = attrs.length;\n\t\t//for(var i=0;i<len;i++){\n\t\t\t//node2.setAttributeNodeNS(importNode(doc,attrs.item(i),deep));\n\t\t//}\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tbreak;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t\tbreak;\n\t//case ENTITY_REFERENCE_NODE:\n\t//case PROCESSING_INSTRUCTION_NODE:\n\t////case TEXT_NODE:\n\t//case CDATA_SECTION_NODE:\n\t//case COMMENT_NODE:\n\t//\tdeep = false;\n\t//\tbreak;\n\t//case DOCUMENT_NODE:\n\t//case DOCUMENT_TYPE_NODE:\n\t//cannot be imported.\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE\n\t//can not hit in level3\n\t//default:throw e;\n\t}\n\tif(!node2){\n\t\tnode2 = node.cloneNode(false);//false\n\t}\n\tnode2.ownerDocument = doc;\n\tnode2.parentNode = null;\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(importNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n//\n//var _relationMap = {firstChild:1,lastChild:1,previousSibling:1,nextSibling:1,\n//\t\t\t\t\tattributes:1,childNodes:1,parentNode:1,documentElement:1,doctype,};\nfunction cloneNode(doc,node,deep){\n\tvar node2 = new node.constructor();\n\tfor(var n in node){\n\t\tvar v = node[n];\n\t\tif(typeof v != 'object' ){\n\t\t\tif(v != node2[n]){\n\t\t\t\tnode2[n] = v;\n\t\t\t}\n\t\t}\n\t}\n\tif(node.childNodes){\n\t\tnode2.childNodes = new NodeList();\n\t}\n\tnode2.ownerDocument = doc;\n\tswitch (node2.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tvar attrs\t= node.attributes;\n\t\tvar attrs2\t= node2.attributes = new NamedNodeMap();\n\t\tvar len = attrs.length\n\t\tattrs2._ownerElement = node2;\n\t\tfor(var i=0;i<len;i++){\n\t\t\tnode2.setAttributeNode(cloneNode(doc,attrs.item(i),true));\n\t\t}\n\t\tbreak;;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t}\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(cloneNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n\nfunction __set__(object,key,value){\n\tobject[key] = value\n}\n//do dynamic\ntry{\n\tif(Object.defineProperty){\n\t\tObject.defineProperty(LiveNodeList.prototype,'length',{\n\t\t\tget:function(){\n\t\t\t\t_updateLiveList(this);\n\t\t\t\treturn this.$$length;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(Node.prototype,'textContent',{\n\t\t\tget:function(){\n\t\t\t\treturn getTextContent(this);\n\t\t\t},\n\t\t\tset:function(data){\n\t\t\t\tswitch(this.nodeType){\n\t\t\t\tcase ELEMENT_NODE:\n\t\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\t\twhile(this.firstChild){\n\t\t\t\t\t\tthis.removeChild(this.firstChild);\n\t\t\t\t\t}\n\t\t\t\t\tif(data || String(data)){\n\t\t\t\t\t\tthis.appendChild(this.ownerDocument.createTextNode(data));\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t//TODO:\n\t\t\t\t\tthis.data = data;\n\t\t\t\t\tthis.value = data;\n\t\t\t\t\tthis.nodeValue = data;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\t\n\t\tfunction getTextContent(node){\n\t\t\tswitch(node.nodeType){\n\t\t\tcase ELEMENT_NODE:\n\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\tvar buf = [];\n\t\t\t\tnode = node.firstChild;\n\t\t\t\twhile(node){\n\t\t\t\t\tif(node.nodeType!==7 && node.nodeType !==8){\n\t\t\t\t\t\tbuf.push(getTextContent(node));\n\t\t\t\t\t}\n\t\t\t\t\tnode = node.nextSibling;\n\t\t\t\t}\n\t\t\t\treturn buf.join('');\n\t\t\tdefault:\n\t\t\t\treturn node.nodeValue;\n\t\t\t}\n\t\t}\n\t\t__set__ = function(object,key,value){\n\t\t\t//console.log(value)\n\t\t\tobject['$$'+key] = value\n\t\t}\n\t}\n}catch(e){//ie8\n}\n\n//if(typeof require == 'function'){\n\texports.DOMImplementation = DOMImplementation;\n\texports.XMLSerializer = XMLSerializer;\n//}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./EbookReader.vue?vue&type=style&index=0&id=3fa7579b&lang=scss&scoped=true\"","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.keys : require(\"./shim\");\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.createElement = createElement;\nfunction createElement(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\nexports.default = {\n    createElement: createElement\n};\n","import { extend } from \"./utils/core\";\nimport { EVENTS } from \"./utils/constants\";\nimport EventEmitter from \"event-emitter\";\n\n/**\n * Figures out the CSS values to apply for a layout\n * @class\n * @param {object} settings\n * @param {string} [settings.layout='reflowable']\n * @param {string} [settings.spread]\n * @param {number} [settings.minSpreadWidth=800]\n * @param {boolean} [settings.evenSpreads=false]\n */\nclass Layout {\n\tconstructor(settings) {\n\t\tthis.settings = settings;\n\t\tthis.name = settings.layout || \"reflowable\";\n\t\tthis._spread = (settings.spread === \"none\") ? false : true;\n\t\tthis._minSpreadWidth = settings.minSpreadWidth || 800;\n\t\tthis._evenSpreads = settings.evenSpreads || false;\n\n\t\tif (settings.flow === \"scrolled\" ||\n\t\t\t\tsettings.flow === \"scrolled-continuous\" ||\n\t\t\t\tsettings.flow === \"scrolled-doc\") {\n\t\t\tthis._flow = \"scrolled\";\n\t\t} else {\n\t\t\tthis._flow = \"paginated\";\n\t\t}\n\n\n\t\tthis.width = 0;\n\t\tthis.height = 0;\n\t\tthis.spreadWidth = 0;\n\t\tthis.delta = 0;\n\n\t\tthis.columnWidth = 0;\n\t\tthis.gap = 0;\n\t\tthis.divisor = 1;\n\n\t\tthis.props = {\n\t\t\tname: this.name,\n\t\t\tspread: this._spread,\n\t\t\tflow: this._flow,\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\tspreadWidth: 0,\n\t\t\tdelta: 0,\n\t\t\tcolumnWidth: 0,\n\t\t\tgap: 0,\n\t\t\tdivisor: 1\n\t\t};\n\n\t}\n\n\t/**\n\t * Switch the flow between paginated and scrolled\n\t * @param  {string} flow paginated | scrolled\n\t * @return {string} simplified flow\n\t */\n\tflow(flow) {\n\t\tif (typeof(flow) != \"undefined\") {\n\t\t\tif (flow === \"scrolled\" ||\n\t\t\t\t\tflow === \"scrolled-continuous\" ||\n\t\t\t\t\tflow === \"scrolled-doc\") {\n\t\t\t\tthis._flow = \"scrolled\";\n\t\t\t} else {\n\t\t\t\tthis._flow = \"paginated\";\n\t\t\t}\n\t\t\t// this.props.flow = this._flow;\n\t\t\tthis.update({flow: this._flow});\n\t\t}\n\t\treturn this._flow;\n\t}\n\n\t/**\n\t * Switch between using spreads or not, and set the\n\t * width at which they switch to single.\n\t * @param  {string} spread \"none\" | \"always\" | \"auto\"\n\t * @param  {number} min integer in pixels\n\t * @return {boolean} spread true | false\n\t */\n\tspread(spread, min) {\n\n\t\tif (spread) {\n\t\t\tthis._spread = (spread === \"none\") ? false : true;\n\t\t\t// this.props.spread = this._spread;\n\t\t\tthis.update({spread: this._spread});\n\t\t}\n\n\t\tif (min >= 0) {\n\t\t\tthis._minSpreadWidth = min;\n\t\t}\n\n\t\treturn this._spread;\n\t}\n\n\t/**\n\t * Calculate the dimensions of the pagination\n\t * @param  {number} _width  width of the rendering\n\t * @param  {number} _height height of the rendering\n\t * @param  {number} _gap    width of the gap between columns\n\t */\n\tcalculate(_width, _height, _gap){\n\n\t\tvar divisor = 1;\n\t\tvar gap = _gap || 0;\n\n\t\t//-- Check the width and create even width columns\n\t\t// var fullWidth = Math.floor(_width);\n\t\tvar width = _width;\n\t\tvar height = _height;\n\n\t\tvar section = Math.floor(width / 12);\n\n\t\tvar columnWidth;\n\t\tvar spreadWidth;\n\t\tvar pageWidth;\n\t\tvar delta;\n\n\t\tif (this._spread && width >= this._minSpreadWidth) {\n\t\t\tdivisor = 2;\n\t\t} else {\n\t\t\tdivisor = 1;\n\t\t}\n\n\t\tif (this.name === \"reflowable\" && this._flow === \"paginated\" && !(_gap >= 0)) {\n\t\t\tgap = ((section % 2 === 0) ? section : section - 1);\n\t\t}\n\n\t\tif (this.name === \"pre-paginated\" ) {\n\t\t\tgap = 0;\n\t\t}\n\n\t\t//-- Double Page\n\t\tif(divisor > 1) {\n\t\t\t// width = width - gap;\n\t\t\t// columnWidth = (width - gap) / divisor;\n\t\t\t// gap = gap / divisor;\n\t\t\tcolumnWidth = (width / divisor) - gap;\n\t\t\tpageWidth = columnWidth + gap;\n\t\t} else {\n\t\t\tcolumnWidth = width;\n\t\t\tpageWidth = width;\n\t\t}\n\n\t\tif (this.name === \"pre-paginated\" && divisor > 1) {\n\t\t\twidth = columnWidth;\n\t\t}\n\n\t\tspreadWidth = (columnWidth * divisor) + gap;\n\n\t\tdelta = width;\n\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.spreadWidth = spreadWidth;\n\t\tthis.pageWidth = pageWidth;\n\t\tthis.delta = delta;\n\n\t\tthis.columnWidth = columnWidth;\n\t\tthis.gap = gap;\n\t\tthis.divisor = divisor;\n\n\t\t// this.props.width = width;\n\t\t// this.props.height = _height;\n\t\t// this.props.spreadWidth = spreadWidth;\n\t\t// this.props.pageWidth = pageWidth;\n\t\t// this.props.delta = delta;\n\t\t//\n\t\t// this.props.columnWidth = colWidth;\n\t\t// this.props.gap = gap;\n\t\t// this.props.divisor = divisor;\n\n\t\tthis.update({\n\t\t\twidth,\n\t\t\theight,\n\t\t\tspreadWidth,\n\t\t\tpageWidth,\n\t\t\tdelta,\n\t\t\tcolumnWidth,\n\t\t\tgap,\n\t\t\tdivisor\n\t\t});\n\n\t}\n\n\t/**\n\t * Apply Css to a Document\n\t * @param  {Contents} contents\n\t * @return {Promise}\n\t */\n\tformat(contents){\n\t\tvar formating;\n\n\t\tif (this.name === \"pre-paginated\") {\n\t\t\tformating = contents.fit(this.columnWidth, this.height);\n\t\t} else if (this._flow === \"paginated\") {\n\t\t\tformating = contents.columns(this.width, this.height, this.columnWidth, this.gap);\n\t\t} else { // scrolled\n\t\t\tformating = contents.size(this.width, null);\n\t\t}\n\n\t\treturn formating; // might be a promise in some View Managers\n\t}\n\n\t/**\n\t * Count number of pages\n\t * @param  {number} totalLength\n\t * @param  {number} pageLength\n\t * @return {{spreads: Number, pages: Number}}\n\t */\n\tcount(totalLength, pageLength) {\n\n\t\tlet spreads, pages;\n\n\t\tif (this.name === \"pre-paginated\") {\n\t\t\tspreads = 1;\n\t\t\tpages = 1;\n\t\t} else if (this._flow === \"paginated\") {\n\t\t\tpageLength = pageLength || this.delta;\n\t\t\tspreads = Math.ceil( totalLength / pageLength);\n\t\t\tpages = spreads * this.divisor;\n\t\t} else { // scrolled\n\t\t\tpageLength = pageLength || this.height;\n\t\t\tspreads = Math.ceil( totalLength / pageLength);\n\t\t\tpages = spreads;\n\t\t}\n\n\t\treturn {\n\t\t\tspreads,\n\t\t\tpages\n\t\t};\n\n\t}\n\n\t/**\n\t * Update props that have changed\n\t * @private\n\t * @param  {object} props\n\t */\n\tupdate(props) {\n\t\t// Remove props that haven't changed\n\t\tObject.keys(props).forEach((propName) => {\n\t\t\tif (this.props[propName] === props[propName]) {\n\t\t\t\tdelete props[propName];\n\t\t\t}\n\t\t});\n\n\t\tif(Object.keys(props).length > 0) {\n\t\t\tlet newProps = extend(this.props, props);\n\t\t\tthis.emit(EVENTS.LAYOUT.UPDATED, newProps, props);\n\t\t}\n\t}\n}\n\nEventEmitter(Layout.prototype);\n\nexport default Layout;\n","import {extend, defer, requestAnimationFrame} from \"../../utils/core\";\nimport DefaultViewManager from \"../default\";\nimport { EVENTS } from \"../../utils/constants\";\nimport debounce from \"lodash/debounce\";\n\nclass ContinuousViewManager extends DefaultViewManager {\n\tconstructor(options) {\n\t\tsuper(options);\n\n\t\tthis.name = \"continuous\";\n\n\t\tthis.settings = extend(this.settings || {}, {\n\t\t\tinfinite: true,\n\t\t\toverflow: undefined,\n\t\t\taxis: undefined,\n\t\t\tflow: \"scrolled\",\n\t\t\toffset: 500,\n\t\t\toffsetDelta: 250,\n\t\t\twidth: undefined,\n\t\t\theight: undefined\n\t\t});\n\n\t\textend(this.settings, options.settings || {});\n\n\t\t// Gap can be 0, but defaults doesn't handle that\n\t\tif (options.settings.gap != \"undefined\" && options.settings.gap === 0) {\n\t\t\tthis.settings.gap = options.settings.gap;\n\t\t}\n\n\t\tthis.viewSettings = {\n\t\t\tignoreClass: this.settings.ignoreClass,\n\t\t\taxis: this.settings.axis,\n\t\t\tflow: this.settings.flow,\n\t\t\tlayout: this.layout,\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\tforceEvenPages: false\n\t\t};\n\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t}\n\n\tdisplay(section, target){\n\t\treturn DefaultViewManager.prototype.display.call(this, section, target)\n\t\t\t.then(function () {\n\t\t\t\treturn this.fill();\n\t\t\t}.bind(this));\n\t}\n\n\tfill(_full){\n\t\tvar full = _full || new defer();\n\n\t\tthis.q.enqueue(() => {\n\t\t\treturn this.check();\n\t\t}).then((result) => {\n\t\t\tif (result) {\n\t\t\t\tthis.fill(full);\n\t\t\t} else {\n\t\t\t\tfull.resolve();\n\t\t\t}\n\t\t});\n\n\t\treturn full.promise;\n\t}\n\n\tmoveTo(offset){\n\t\t// var bounds = this.stage.bounds();\n\t\t// var dist = Math.floor(offset.top / bounds.height) * bounds.height;\n\t\tvar distX = 0,\n\t\t\t\tdistY = 0;\n\n\t\tvar offsetX = 0,\n\t\t\t\toffsetY = 0;\n\n\t\tif(!this.isPaginated) {\n\t\t\tdistY = offset.top;\n\t\t\toffsetY = offset.top+this.settings.offset;\n\t\t} else {\n\t\t\tdistX = Math.floor(offset.left / this.layout.delta) * this.layout.delta;\n\t\t\toffsetX = distX+this.settings.offset;\n\t\t}\n\n\t\tif (distX > 0 || distY > 0) {\n\t\t\tthis.scrollBy(distX, distY, true);\n\t\t}\n\t}\n\n\tafterResized(view){\n\t\tthis.emit(EVENTS.MANAGERS.RESIZE, view.section);\n\t}\n\n\t// Remove Previous Listeners if present\n\tremoveShownListeners(view){\n\n\t\t// view.off(\"shown\", this.afterDisplayed);\n\t\t// view.off(\"shown\", this.afterDisplayedAbove);\n\t\tview.onDisplayed = function(){};\n\n\t}\n\n\tadd(section){\n\t\tvar view = this.createView(section);\n\n\t\tthis.views.append(view);\n\n\t\tview.on(EVENTS.VIEWS.RESIZED, (bounds) => {\n\t\t\tview.expanded = true;\n\t\t});\n\n\t\tview.on(EVENTS.VIEWS.AXIS, (axis) => {\n\t\t\tthis.updateAxis(axis);\n\t\t});\n\n\t\t// view.on(EVENTS.VIEWS.SHOWN, this.afterDisplayed.bind(this));\n\t\tview.onDisplayed = this.afterDisplayed.bind(this);\n\t\tview.onResize = this.afterResized.bind(this);\n\n\t\treturn view.display(this.request);\n\t}\n\n\tappend(section){\n\t\tvar view = this.createView(section);\n\n\t\tview.on(EVENTS.VIEWS.RESIZED, (bounds) => {\n\t\t\tview.expanded = true;\n\t\t});\n\n\t\t/*\n\t\tview.on(EVENTS.VIEWS.AXIS, (axis) => {\n\t\t\tthis.updateAxis(axis);\n\t\t});\n\t\t*/\n\n\t\tthis.views.append(view);\n\n\t\tview.onDisplayed = this.afterDisplayed.bind(this);\n\n\t\treturn view;\n\t}\n\n\tprepend(section){\n\t\tvar view = this.createView(section);\n\n\t\tview.on(EVENTS.VIEWS.RESIZED, (bounds) => {\n\t\t\tthis.counter(bounds);\n\t\t\tview.expanded = true;\n\t\t});\n\n\t\t/*\n\t\tview.on(EVENTS.VIEWS.AXIS, (axis) => {\n\t\t\tthis.updateAxis(axis);\n\t\t});\n\t\t*/\n\n\t\tthis.views.prepend(view);\n\n\t\tview.onDisplayed = this.afterDisplayed.bind(this);\n\n\t\treturn view;\n\t}\n\n\tcounter(bounds){\n\t\tif(this.settings.axis === \"vertical\") {\n\t\t\tthis.scrollBy(0, bounds.heightDelta, true);\n\t\t} else {\n\t\t\tthis.scrollBy(bounds.widthDelta, 0, true);\n\t\t}\n\n\t}\n\n\tupdate(_offset){\n\t\tvar container = this.bounds();\n\t\tvar views = this.views.all();\n\t\tvar viewsLength = views.length;\n\t\tvar visible = [];\n\t\tvar offset = typeof _offset != \"undefined\" ? _offset : (this.settings.offset || 0);\n\t\tvar isVisible;\n\t\tvar view;\n\n\t\tvar updating = new defer();\n\t\tvar promises = [];\n\t\tfor (var i = 0; i < viewsLength; i++) {\n\t\t\tview = views[i];\n\n\t\t\tisVisible = this.isVisible(view, offset, offset, container);\n\n\t\t\tif(isVisible === true) {\n\t\t\t\t// console.log(\"visible \" + view.index);\n\n\t\t\t\tif (!view.displayed) {\n\t\t\t\t\tlet displayed = view.display(this.request)\n\t\t\t\t\t\t.then(function (view) {\n\t\t\t\t\t\t\tview.show();\n\t\t\t\t\t\t}, (err) => {\n\t\t\t\t\t\t\tview.hide();\n\t\t\t\t\t\t});\n\t\t\t\t\tpromises.push(displayed);\n\t\t\t\t} else {\n\t\t\t\t\tview.show();\n\t\t\t\t}\n\t\t\t\tvisible.push(view);\n\t\t\t} else {\n\t\t\t\tthis.q.enqueue(view.destroy.bind(view));\n\t\t\t\t// console.log(\"hidden \" + view.index);\n\n\t\t\t\tclearTimeout(this.trimTimeout);\n\t\t\t\tthis.trimTimeout = setTimeout(function(){\n\t\t\t\t\tthis.q.enqueue(this.trim.bind(this));\n\t\t\t\t}.bind(this), 250);\n\t\t\t}\n\n\t\t}\n\n\t\tif(promises.length){\n\t\t\treturn Promise.all(promises)\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tupdating.reject(err);\n\t\t\t\t});\n\t\t} else {\n\t\t\tupdating.resolve();\n\t\t\treturn updating.promise;\n\t\t}\n\n\t}\n\n\tcheck(_offsetLeft, _offsetTop){\n\t\tvar checking = new defer();\n\t\tvar newViews = [];\n\n\t\tvar horizontal = (this.settings.axis === \"horizontal\");\n\t\tvar delta = this.settings.offset || 0;\n\n\t\tif (_offsetLeft && horizontal) {\n\t\t\tdelta = _offsetLeft;\n\t\t}\n\n\t\tif (_offsetTop && !horizontal) {\n\t\t\tdelta = _offsetTop;\n\t\t}\n\n\t\tvar bounds = this._bounds; // bounds saved this until resize\n\n\t\tlet rtl = this.settings.direction === \"rtl\";\n\t\tlet dir = horizontal && rtl ? -1 : 1; //RTL reverses scrollTop\n\n\t\tvar offset = horizontal ? this.scrollLeft : this.scrollTop * dir;\n\t\tvar visibleLength = horizontal ? Math.floor(bounds.width) : bounds.height;\n\t\tvar contentLength = horizontal ? this.container.scrollWidth : this.container.scrollHeight;\n\n\t\tlet prepend = () => {\n\t\t\tlet first = this.views.first();\n\t\t\tlet prev = first && first.section.prev();\n\n\t\t\tif(prev) {\n\t\t\t\tnewViews.push(this.prepend(prev));\n\t\t\t}\n\t\t};\n\n\t\tlet append = () => {\n\t\t\tlet last = this.views.last();\n\t\t\tlet next = last && last.section.next();\n\n\t\t\tif(next) {\n\t\t\t\tnewViews.push(this.append(next));\n\t\t\t}\n\n\t\t};\n\n\t\tif (offset + visibleLength + delta >= contentLength) {\n\t\t\tif (horizontal && rtl) {\n\t\t\t\tprepend();\n\t\t\t} else {\n\t\t\t\tappend();\n\t\t\t}\n\t\t}\n\n\t\tif (offset - delta < 0 ) {\n\t\t\tif (horizontal && rtl) {\n\t\t\t\tappend();\n\t\t\t} else {\n\t\t\t\tprepend();\n\t\t\t}\n\t\t}\n\n\t\tlet promises = newViews.map((view) => {\n\t\t\treturn view.displayed;\n\t\t});\n\n\t\tif(newViews.length){\n\t\t\treturn Promise.all(promises)\n\t\t\t\t.then(() => {\n\t\t\t\t\tif (this.layout.name === \"pre-paginated\" && this.layout.props.spread) {\n\t\t\t\t\t\treturn this.check();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\t// Check to see if anything new is on screen after rendering\n\t\t\t\t\treturn this.update(delta);\n\t\t\t\t}, (err) => {\n\t\t\t\t\treturn err;\n\t\t\t\t});\n\t\t} else {\n\t\t\tthis.q.enqueue(function(){\n\t\t\t\tthis.update();\n\t\t\t}.bind(this));\n\t\t\tchecking.resolve(false);\n\t\t\treturn checking.promise;\n\t\t}\n\n\n\t}\n\n\ttrim(){\n\t\tvar task = new defer();\n\t\tvar displayed = this.views.displayed();\n\t\tvar first = displayed[0];\n\t\tvar last = displayed[displayed.length-1];\n\t\tvar firstIndex = this.views.indexOf(first);\n\t\tvar lastIndex = this.views.indexOf(last);\n\t\tvar above = this.views.slice(0, firstIndex);\n\t\tvar below = this.views.slice(lastIndex+1);\n\n\t\t// Erase all but last above\n\t\tfor (var i = 0; i < above.length-1; i++) {\n\t\t\tthis.erase(above[i], above);\n\t\t}\n\n\t\t// Erase all except first below\n\t\tfor (var j = 1; j < below.length; j++) {\n\t\t\tthis.erase(below[j]);\n\t\t}\n\n\t\ttask.resolve();\n\t\treturn task.promise;\n\t}\n\n\terase(view, above){ //Trim\n\n\t\tvar prevTop;\n\t\tvar prevLeft;\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tprevTop = this.container.scrollTop;\n\t\t\tprevLeft = this.container.scrollLeft;\n\t\t} else {\n\t\t\tprevTop = window.scrollY;\n\t\t\tprevLeft = window.scrollX;\n\t\t}\n\n\t\tvar bounds = view.bounds();\n\n\t\tthis.views.remove(view);\n\n\t\tif(above) {\n\t\t\tif(this.settings.axis === \"vertical\") {\n\t\t\t\tthis.scrollTo(0, prevTop - bounds.height, true);\n\t\t\t} else {\n\t\t\t\tthis.scrollTo(prevLeft - Math.floor(bounds.width), 0, true);\n\t\t\t}\n\t\t}\n\n\t}\n\n\taddEventListeners(stage){\n\n\t\twindow.addEventListener(\"unload\", function(e){\n\t\t\tthis.ignore = true;\n\t\t\t// this.scrollTo(0,0);\n\t\t\tthis.destroy();\n\t\t}.bind(this));\n\n\t\tthis.addScrollListeners();\n\t}\n\n\taddScrollListeners() {\n\t\tvar scroller;\n\n\t\tthis.tick = requestAnimationFrame;\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tthis.prevScrollTop = this.container.scrollTop;\n\t\t\tthis.prevScrollLeft = this.container.scrollLeft;\n\t\t} else {\n\t\t\tthis.prevScrollTop = window.scrollY;\n\t\t\tthis.prevScrollLeft = window.scrollX;\n\t\t}\n\n\t\tthis.scrollDeltaVert = 0;\n\t\tthis.scrollDeltaHorz = 0;\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tscroller = this.container;\n\t\t\tthis.scrollTop = this.container.scrollTop;\n\t\t\tthis.scrollLeft = this.container.scrollLeft;\n\t\t} else {\n\t\t\tscroller = window;\n\t\t\tthis.scrollTop = window.scrollY;\n\t\t\tthis.scrollLeft = window.scrollX;\n\t\t}\n\n\t\tscroller.addEventListener(\"scroll\", this.onScroll.bind(this));\n\t\tthis._scrolled = debounce(this.scrolled.bind(this), 30);\n\t\t// this.tick.call(window, this.onScroll.bind(this));\n\n\t\tthis.didScroll = false;\n\n\t}\n\n\tremoveEventListeners(){\n\t\tvar scroller;\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tscroller = this.container;\n\t\t} else {\n\t\t\tscroller = window;\n\t\t}\n\n\t\tscroller.removeEventListener(\"scroll\", this.onScroll.bind(this));\n\t}\n\n\tonScroll(){\n\t\tlet scrollTop;\n\t\tlet scrollLeft;\n\t\tlet dir = this.settings.direction === \"rtl\" ? -1 : 1;\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tscrollTop = this.container.scrollTop;\n\t\t\tscrollLeft = this.container.scrollLeft;\n\t\t} else {\n\t\t\tscrollTop = window.scrollY * dir;\n\t\t\tscrollLeft = window.scrollX * dir;\n\t\t}\n\n\t\tthis.scrollTop = scrollTop;\n\t\tthis.scrollLeft = scrollLeft;\n\n\t\tif(!this.ignore) {\n\n\t\t\tthis._scrolled();\n\n\t\t} else {\n\t\t\tthis.ignore = false;\n\t\t}\n\n\t\tthis.scrollDeltaVert += Math.abs(scrollTop-this.prevScrollTop);\n\t\tthis.scrollDeltaHorz += Math.abs(scrollLeft-this.prevScrollLeft);\n\n\t\tthis.prevScrollTop = scrollTop;\n\t\tthis.prevScrollLeft = scrollLeft;\n\n\t\tclearTimeout(this.scrollTimeout);\n\t\tthis.scrollTimeout = setTimeout(function(){\n\t\t\tthis.scrollDeltaVert = 0;\n\t\t\tthis.scrollDeltaHorz = 0;\n\t\t}.bind(this), 150);\n\n\n\t\tthis.didScroll = false;\n\n\t}\n\n\tscrolled() {\n\t\tthis.q.enqueue(function() {\n\t\t\tthis.check();\n\t\t}.bind(this));\n\n\t\tthis.emit(EVENTS.MANAGERS.SCROLL, {\n\t\t\ttop: this.scrollTop,\n\t\t\tleft: this.scrollLeft\n\t\t});\n\n\t\tclearTimeout(this.afterScrolled);\n\t\tthis.afterScrolled = setTimeout(function () {\n\t\t\tthis.emit(EVENTS.MANAGERS.SCROLLED, {\n\t\t\t\ttop: this.scrollTop,\n\t\t\t\tleft: this.scrollLeft\n\t\t\t});\n\t\t}.bind(this));\n\t}\n\n\tnext(){\n\n\t\tlet dir = this.settings.direction;\n\t\tlet delta = this.layout.props.name === \"pre-paginated\" &&\n\t\t\t\t\t\t\t\tthis.layout.props.spread ? this.layout.props.delta * 2 : this.layout.props.delta;\n\n\t\tif(!this.views.length) return;\n\n\t\tif(this.isPaginated && this.settings.axis === \"horizontal\") {\n\n\t\t\tthis.scrollBy(delta, 0, true);\n\n\t\t} else {\n\n\t\t\tthis.scrollBy(0, this.layout.height, true);\n\n\t\t}\n\n\t\tthis.q.enqueue(function() {\n\t\t\tthis.check();\n\t\t}.bind(this));\n\t}\n\n\tprev(){\n\n\t\tlet dir = this.settings.direction;\n\t\tlet delta = this.layout.props.name === \"pre-paginated\" &&\n\t\t\t\t\t\t\t\tthis.layout.props.spread ? this.layout.props.delta * 2 : this.layout.props.delta;\n\n\t\tif(!this.views.length) return;\n\n\t\tif(this.isPaginated && this.settings.axis === \"horizontal\") {\n\n\t\t\tthis.scrollBy(-delta, 0, true);\n\n\t\t} else {\n\n\t\t\tthis.scrollBy(0, -this.layout.height, true);\n\n\t\t}\n\n\t\tthis.q.enqueue(function() {\n\t\t\tthis.check();\n\t\t}.bind(this));\n\t}\n\n\tupdateAxis(axis, forceUpdate){\n\n\t\tif (!this.isPaginated) {\n\t\t\taxis = \"vertical\";\n\t\t}\n\n\t\tif (!forceUpdate && axis === this.settings.axis) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.settings.axis = axis;\n\n\t\tthis.stage && this.stage.axis(axis);\n\n\t\tthis.viewSettings.axis = axis;\n\n\t\tif (this.mapping) {\n\t\t\tthis.mapping.axis(axis);\n\t\t}\n\n\t\tif (this.layout) {\n\t\t\tif (axis === \"vertical\") {\n\t\t\t\tthis.layout.spread(\"none\");\n\t\t\t} else {\n\t\t\t\tthis.layout.spread(this.layout.settings.spread);\n\t\t\t}\n\t\t}\n\n\t\tif (axis === \"vertical\") {\n\t\t\tthis.settings.infinite = true;\n\t\t} else {\n\t\t\tthis.settings.infinite = false;\n\t\t}\n\t}\n\n}\n\nexport default ContinuousViewManager;\n","import {extend, type, findChildren, RangeObject, isNumber} from \"./utils/core\";\n\nconst ELEMENT_NODE = 1;\nconst TEXT_NODE = 3;\nconst COMMENT_NODE = 8;\nconst DOCUMENT_NODE = 9;\n\n/**\n\t* Parsing and creation of EpubCFIs: http://www.idpf.org/epub/linking/cfi/epub-cfi.html\n\n\t* Implements:\n\t* - Character Offset: epubcfi(/6/4[chap01ref]!/4[body01]/10[para05]/2/1:3)\n\t* - Simple Ranges : epubcfi(/6/4[chap01ref]!/4[body01]/10[para05],/2/1:1,/3:4)\n\n\t* Does Not Implement:\n\t* - Temporal Offset (~)\n\t* - Spatial Offset (@)\n\t* - Temporal-Spatial Offset (~ + @)\n\t* - Text Location Assertion ([)\n\t* @class\n\t@param {string | Range | Node } [cfiFrom]\n\t@param {string | object} [base]\n\t@param {string} [ignoreClass] class to ignore when parsing DOM\n*/\nclass EpubCFI {\n\tconstructor(cfiFrom, base, ignoreClass){\n\t\tvar type;\n\n\t\tthis.str = \"\";\n\n\t\tthis.base = {};\n\t\tthis.spinePos = 0; // For compatibility\n\n\t\tthis.range = false; // true || false;\n\n\t\tthis.path = {};\n\t\tthis.start = null;\n\t\tthis.end = null;\n\n\t\t// Allow instantiation without the \"new\" keyword\n\t\tif (!(this instanceof EpubCFI)) {\n\t\t\treturn new EpubCFI(cfiFrom, base, ignoreClass);\n\t\t}\n\n\t\tif(typeof base === \"string\") {\n\t\t\tthis.base = this.parseComponent(base);\n\t\t} else if(typeof base === \"object\" && base.steps) {\n\t\t\tthis.base = base;\n\t\t}\n\n\t\ttype = this.checkType(cfiFrom);\n\n\n\t\tif(type === \"string\") {\n\t\t\tthis.str = cfiFrom;\n\t\t\treturn extend(this, this.parse(cfiFrom));\n\t\t} else if (type === \"range\") {\n\t\t\treturn extend(this, this.fromRange(cfiFrom, this.base, ignoreClass));\n\t\t} else if (type === \"node\") {\n\t\t\treturn extend(this, this.fromNode(cfiFrom, this.base, ignoreClass));\n\t\t} else if (type === \"EpubCFI\" && cfiFrom.path) {\n\t\t\treturn cfiFrom;\n\t\t} else if (!cfiFrom) {\n\t\t\treturn this;\n\t\t} else {\n\t\t\tthrow new TypeError(\"not a valid argument for EpubCFI\");\n\t\t}\n\n\t}\n\n\t/**\n\t * Check the type of constructor input\n\t * @private\n\t */\n\tcheckType(cfi) {\n\n\t\tif (this.isCfiString(cfi)) {\n\t\t\treturn \"string\";\n\t\t// Is a range object\n\t\t} else if (typeof cfi === \"object\" && (type(cfi) === \"Range\" || typeof(cfi.startContainer) != \"undefined\")){\n\t\t\treturn \"range\";\n\t\t} else if (typeof cfi === \"object\" && typeof(cfi.nodeType) != \"undefined\" ){ // || typeof cfi === \"function\"\n\t\t\treturn \"node\";\n\t\t} else if (typeof cfi === \"object\" && cfi instanceof EpubCFI){\n\t\t\treturn \"EpubCFI\";\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * Parse a cfi string to a CFI object representation\n\t * @param {string} cfiStr\n\t * @returns {object} cfi\n\t */\n\tparse(cfiStr) {\n\t\tvar cfi = {\n\t\t\tspinePos: -1,\n\t\t\trange: false,\n\t\t\tbase: {},\n\t\t\tpath: {},\n\t\t\tstart: null,\n\t\t\tend: null\n\t\t};\n\t\tvar baseComponent, pathComponent, range;\n\n\t\tif(typeof cfiStr !== \"string\") {\n\t\t\treturn {spinePos: -1};\n\t\t}\n\n\t\tif(cfiStr.indexOf(\"epubcfi(\") === 0 && cfiStr[cfiStr.length-1] === \")\") {\n\t\t\t// Remove intial epubcfi( and ending )\n\t\t\tcfiStr = cfiStr.slice(8, cfiStr.length-1);\n\t\t}\n\n\t\tbaseComponent = this.getChapterComponent(cfiStr);\n\n\t\t// Make sure this is a valid cfi or return\n\t\tif(!baseComponent) {\n\t\t\treturn {spinePos: -1};\n\t\t}\n\n\t\tcfi.base = this.parseComponent(baseComponent);\n\n\t\tpathComponent = this.getPathComponent(cfiStr);\n\t\tcfi.path = this.parseComponent(pathComponent);\n\n\t\trange = this.getRange(cfiStr);\n\n\t\tif(range) {\n\t\t\tcfi.range = true;\n\t\t\tcfi.start = this.parseComponent(range[0]);\n\t\t\tcfi.end = this.parseComponent(range[1]);\n\t\t}\n\n\t\t// Get spine node position\n\t\t// cfi.spineSegment = cfi.base.steps[1];\n\n\t\t// Chapter segment is always the second step\n\t\tcfi.spinePos = cfi.base.steps[1].index;\n\n\t\treturn cfi;\n\t}\n\n\tparseComponent(componentStr){\n\t\tvar component = {\n\t\t\tsteps: [],\n\t\t\tterminal: {\n\t\t\t\toffset: null,\n\t\t\t\tassertion: null\n\t\t\t}\n\t\t};\n\t\tvar parts = componentStr.split(\":\");\n\t\tvar steps = parts[0].split(\"/\");\n\t\tvar terminal;\n\n\t\tif(parts.length > 1) {\n\t\t\tterminal = parts[1];\n\t\t\tcomponent.terminal = this.parseTerminal(terminal);\n\t\t}\n\n\t\tif (steps[0] === \"\") {\n\t\t\tsteps.shift(); // Ignore the first slash\n\t\t}\n\n\t\tcomponent.steps = steps.map(function(step){\n\t\t\treturn this.parseStep(step);\n\t\t}.bind(this));\n\n\t\treturn component;\n\t}\n\n\tparseStep(stepStr){\n\t\tvar type, num, index, has_brackets, id;\n\n\t\thas_brackets = stepStr.match(/\\[(.*)\\]/);\n\t\tif(has_brackets && has_brackets[1]){\n\t\t\tid = has_brackets[1];\n\t\t}\n\n\t\t//-- Check if step is a text node or element\n\t\tnum = parseInt(stepStr);\n\n\t\tif(isNaN(num)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif(num % 2 === 0) { // Even = is an element\n\t\t\ttype = \"element\";\n\t\t\tindex = num / 2 - 1;\n\t\t} else {\n\t\t\ttype = \"text\";\n\t\t\tindex = (num - 1 ) / 2;\n\t\t}\n\n\t\treturn {\n\t\t\t\"type\" : type,\n\t\t\t\"index\" : index,\n\t\t\t\"id\" : id || null\n\t\t};\n\t}\n\n\tparseTerminal(termialStr){\n\t\tvar characterOffset, textLocationAssertion;\n\t\tvar assertion = termialStr.match(/\\[(.*)\\]/);\n\n\t\tif(assertion && assertion[1]){\n\t\t\tcharacterOffset = parseInt(termialStr.split(\"[\")[0]);\n\t\t\ttextLocationAssertion = assertion[1];\n\t\t} else {\n\t\t\tcharacterOffset = parseInt(termialStr);\n\t\t}\n\n\t\tif (!isNumber(characterOffset)) {\n\t\t\tcharacterOffset = null;\n\t\t}\n\n\t\treturn {\n\t\t\t\"offset\": characterOffset,\n\t\t\t\"assertion\": textLocationAssertion\n\t\t};\n\n\t}\n\n\tgetChapterComponent(cfiStr) {\n\n\t\tvar indirection = cfiStr.split(\"!\");\n\n\t\treturn indirection[0];\n\t}\n\n\tgetPathComponent(cfiStr) {\n\n\t\tvar indirection = cfiStr.split(\"!\");\n\n\t\tif(indirection[1]) {\n\t\t\tlet ranges = indirection[1].split(\",\");\n\t\t\treturn ranges[0];\n\t\t}\n\n\t}\n\n\tgetRange(cfiStr) {\n\n\t\tvar ranges = cfiStr.split(\",\");\n\n\t\tif(ranges.length === 3){\n\t\t\treturn [\n\t\t\t\tranges[1],\n\t\t\t\tranges[2]\n\t\t\t];\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tgetCharecterOffsetComponent(cfiStr) {\n\t\tvar splitStr = cfiStr.split(\":\");\n\t\treturn splitStr[1] || \"\";\n\t}\n\n\tjoinSteps(steps) {\n\t\tif(!steps) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\treturn steps.map(function(part){\n\t\t\tvar segment = \"\";\n\n\t\t\tif(part.type === \"element\") {\n\t\t\t\tsegment += (part.index + 1) * 2;\n\t\t\t}\n\n\t\t\tif(part.type === \"text\") {\n\t\t\t\tsegment += 1 + (2 * part.index); // TODO: double check that this is odd\n\t\t\t}\n\n\t\t\tif(part.id) {\n\t\t\t\tsegment += \"[\" + part.id + \"]\";\n\t\t\t}\n\n\t\t\treturn segment;\n\n\t\t}).join(\"/\");\n\n\t}\n\n\tsegmentString(segment) {\n\t\tvar segmentString = \"/\";\n\n\t\tsegmentString += this.joinSteps(segment.steps);\n\n\t\tif(segment.terminal && segment.terminal.offset != null){\n\t\t\tsegmentString += \":\" + segment.terminal.offset;\n\t\t}\n\n\t\tif(segment.terminal && segment.terminal.assertion != null){\n\t\t\tsegmentString += \"[\" + segment.terminal.assertion + \"]\";\n\t\t}\n\n\t\treturn segmentString;\n\t}\n\n\t/**\n\t * Convert CFI to a epubcfi(...) string\n\t * @returns {string} epubcfi\n\t */\n\ttoString() {\n\t\tvar cfiString = \"epubcfi(\";\n\n\t\tcfiString += this.segmentString(this.base);\n\n\t\tcfiString += \"!\";\n\t\tcfiString += this.segmentString(this.path);\n\n\t\t// Add Range, if present\n\t\tif(this.range && this.start) {\n\t\t\tcfiString += \",\";\n\t\t\tcfiString += this.segmentString(this.start);\n\t\t}\n\n\t\tif(this.range && this.end) {\n\t\t\tcfiString += \",\";\n\t\t\tcfiString += this.segmentString(this.end);\n\t\t}\n\n\t\tcfiString += \")\";\n\n\t\treturn cfiString;\n\t}\n\n\n\t/**\n\t * Compare which of two CFIs is earlier in the text\n\t * @returns {number} First is earlier = 1, Second is earlier = -1, They are equal = 0\n\t */\n\tcompare(cfiOne, cfiTwo) {\n\t\tvar stepsA, stepsB;\n\t\tvar terminalA, terminalB;\n\n\t\tvar rangeAStartSteps, rangeAEndSteps;\n\t\tvar rangeBEndSteps, rangeBEndSteps;\n\t\tvar rangeAStartTerminal, rangeAEndTerminal;\n\t\tvar rangeBStartTerminal, rangeBEndTerminal;\n\n\t\tif(typeof cfiOne === \"string\") {\n\t\t\tcfiOne = new EpubCFI(cfiOne);\n\t\t}\n\t\tif(typeof cfiTwo === \"string\") {\n\t\t\tcfiTwo = new EpubCFI(cfiTwo);\n\t\t}\n\t\t// Compare Spine Positions\n\t\tif(cfiOne.spinePos > cfiTwo.spinePos) {\n\t\t\treturn 1;\n\t\t}\n\t\tif(cfiOne.spinePos < cfiTwo.spinePos) {\n\t\t\treturn -1;\n\t\t}\n\n\t\tif (cfiOne.range) {\n\t\t\tstepsA = cfiOne.path.steps.concat(cfiOne.start.steps);\n\t\t\tterminalA = cfiOne.start.terminal;\n\t\t} else {\n\t\t\tstepsA = cfiOne.path.steps;\n\t\t\tterminalA = cfiOne.path.terminal;\n\t\t}\n\n\t\tif (cfiTwo.range) {\n\t\t\tstepsB = cfiTwo.path.steps.concat(cfiTwo.start.steps);\n\t\t\tterminalB = cfiTwo.start.terminal;\n\t\t} else {\n\t\t\tstepsB = cfiTwo.path.steps;\n\t\t\tterminalB = cfiTwo.path.terminal;\n\t\t}\n\n\t\t// Compare Each Step in the First item\n\t\tfor (var i = 0; i < stepsA.length; i++) {\n\t\t\tif(!stepsA[i]) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif(!stepsB[i]) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif(stepsA[i].index > stepsB[i].index) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif(stepsA[i].index < stepsB[i].index) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\t// Otherwise continue checking\n\t\t}\n\n\t\t// All steps in First equal to Second and First is Less Specific\n\t\tif(stepsA.length < stepsB.length) {\n\t\t\treturn 1;\n\t\t}\n\n\t\t// Compare the charecter offset of the text node\n\t\tif(terminalA.offset > terminalB.offset) {\n\t\t\treturn 1;\n\t\t}\n\t\tif(terminalA.offset < terminalB.offset) {\n\t\t\treturn -1;\n\t\t}\n\n\t\t// CFI's are equal\n\t\treturn 0;\n\t}\n\n\tstep(node) {\n\t\tvar nodeType = (node.nodeType === TEXT_NODE) ? \"text\" : \"element\";\n\n\t\treturn {\n\t\t\t\"id\" : node.id,\n\t\t\t\"tagName\" : node.tagName,\n\t\t\t\"type\" : nodeType,\n\t\t\t\"index\" : this.position(node)\n\t\t};\n\t}\n\n\tfilteredStep(node, ignoreClass) {\n\t\tvar filteredNode = this.filter(node, ignoreClass);\n\t\tvar nodeType;\n\n\t\t// Node filtered, so ignore\n\t\tif (!filteredNode) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Otherwise add the filter node in\n\t\tnodeType = (filteredNode.nodeType === TEXT_NODE) ? \"text\" : \"element\";\n\n\t\treturn {\n\t\t\t\"id\" : filteredNode.id,\n\t\t\t\"tagName\" : filteredNode.tagName,\n\t\t\t\"type\" : nodeType,\n\t\t\t\"index\" : this.filteredPosition(filteredNode, ignoreClass)\n\t\t};\n\t}\n\n\tpathTo(node, offset, ignoreClass) {\n\t\tvar segment = {\n\t\t\tsteps: [],\n\t\t\tterminal: {\n\t\t\t\toffset: null,\n\t\t\t\tassertion: null\n\t\t\t}\n\t\t};\n\t\tvar currentNode = node;\n\t\tvar step;\n\n\t\twhile(currentNode && currentNode.parentNode &&\n\t\t\t\t\tcurrentNode.parentNode.nodeType != DOCUMENT_NODE) {\n\n\t\t\tif (ignoreClass) {\n\t\t\t\tstep = this.filteredStep(currentNode, ignoreClass);\n\t\t\t} else {\n\t\t\t\tstep = this.step(currentNode);\n\t\t\t}\n\n\t\t\tif (step) {\n\t\t\t\tsegment.steps.unshift(step);\n\t\t\t}\n\n\t\t\tcurrentNode = currentNode.parentNode;\n\n\t\t}\n\n\t\tif (offset != null && offset >= 0) {\n\n\t\t\tsegment.terminal.offset = offset;\n\n\t\t\t// Make sure we are getting to a textNode if there is an offset\n\t\t\tif(segment.steps[segment.steps.length-1].type != \"text\") {\n\t\t\t\tsegment.steps.push({\n\t\t\t\t\t\"type\" : \"text\",\n\t\t\t\t\t\"index\" : 0\n\t\t\t\t});\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn segment;\n\t}\n\n\tequalStep(stepA, stepB) {\n\t\tif (!stepA || !stepB) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif(stepA.index === stepB.index &&\n\t\t\t stepA.id === stepB.id &&\n\t\t\t stepA.type === stepB.type) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Create a CFI object from a Range\n\t * @param {Range} range\n\t * @param {string | object} base\n\t * @param {string} [ignoreClass]\n\t * @returns {object} cfi\n\t */\n\tfromRange(range, base, ignoreClass) {\n\t\tvar cfi = {\n\t\t\trange: false,\n\t\t\tbase: {},\n\t\t\tpath: {},\n\t\t\tstart: null,\n\t\t\tend: null\n\t\t};\n\n\t\tvar start = range.startContainer;\n\t\tvar end = range.endContainer;\n\n\t\tvar startOffset = range.startOffset;\n\t\tvar endOffset = range.endOffset;\n\n\t\tvar needsIgnoring = false;\n\n\t\tif (ignoreClass) {\n\t\t\t// Tell pathTo if / what to ignore\n\t\t\tneedsIgnoring = (start.ownerDocument.querySelector(\".\" + ignoreClass) != null);\n\t\t}\n\n\n\t\tif (typeof base === \"string\") {\n\t\t\tcfi.base = this.parseComponent(base);\n\t\t\tcfi.spinePos = cfi.base.steps[1].index;\n\t\t} else if (typeof base === \"object\") {\n\t\t\tcfi.base = base;\n\t\t}\n\n\t\tif (range.collapsed) {\n\t\t\tif (needsIgnoring) {\n\t\t\t\tstartOffset = this.patchOffset(start, startOffset, ignoreClass);\n\t\t\t}\n\t\t\tcfi.path = this.pathTo(start, startOffset, ignoreClass);\n\t\t} else {\n\t\t\tcfi.range = true;\n\n\t\t\tif (needsIgnoring) {\n\t\t\t\tstartOffset = this.patchOffset(start, startOffset, ignoreClass);\n\t\t\t}\n\n\t\t\tcfi.start = this.pathTo(start, startOffset, ignoreClass);\n\t\t\tif (needsIgnoring) {\n\t\t\t\tendOffset = this.patchOffset(end, endOffset, ignoreClass);\n\t\t\t}\n\n\t\t\tcfi.end = this.pathTo(end, endOffset, ignoreClass);\n\n\t\t\t// Create a new empty path\n\t\t\tcfi.path = {\n\t\t\t\tsteps: [],\n\t\t\t\tterminal: null\n\t\t\t};\n\n\t\t\t// Push steps that are shared between start and end to the common path\n\t\t\tvar len = cfi.start.steps.length;\n\t\t\tvar i;\n\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tif (this.equalStep(cfi.start.steps[i], cfi.end.steps[i])) {\n\t\t\t\t\tif(i === len-1) {\n\t\t\t\t\t\t// Last step is equal, check terminals\n\t\t\t\t\t\tif(cfi.start.terminal === cfi.end.terminal) {\n\t\t\t\t\t\t\t// CFI's are equal\n\t\t\t\t\t\t\tcfi.path.steps.push(cfi.start.steps[i]);\n\t\t\t\t\t\t\t// Not a range\n\t\t\t\t\t\t\tcfi.range = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcfi.path.steps.push(cfi.start.steps[i]);\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcfi.start.steps = cfi.start.steps.slice(cfi.path.steps.length);\n\t\t\tcfi.end.steps = cfi.end.steps.slice(cfi.path.steps.length);\n\n\t\t\t// TODO: Add Sanity check to make sure that the end if greater than the start\n\t\t}\n\n\t\treturn cfi;\n\t}\n\n\t/**\n\t * Create a CFI object from a Node\n\t * @param {Node} anchor\n\t * @param {string | object} base\n\t * @param {string} [ignoreClass]\n\t * @returns {object} cfi\n\t */\n\tfromNode(anchor, base, ignoreClass) {\n\t\tvar cfi = {\n\t\t\trange: false,\n\t\t\tbase: {},\n\t\t\tpath: {},\n\t\t\tstart: null,\n\t\t\tend: null\n\t\t};\n\n\t\tif (typeof base === \"string\") {\n\t\t\tcfi.base = this.parseComponent(base);\n\t\t\tcfi.spinePos = cfi.base.steps[1].index;\n\t\t} else if (typeof base === \"object\") {\n\t\t\tcfi.base = base;\n\t\t}\n\n\t\tcfi.path = this.pathTo(anchor, null, ignoreClass);\n\n\t\treturn cfi;\n\t}\n\n\tfilter(anchor, ignoreClass) {\n\t\tvar needsIgnoring;\n\t\tvar sibling; // to join with\n\t\tvar parent, previousSibling, nextSibling;\n\t\tvar isText = false;\n\n\t\tif (anchor.nodeType === TEXT_NODE) {\n\t\t\tisText = true;\n\t\t\tparent = anchor.parentNode;\n\t\t\tneedsIgnoring = anchor.parentNode.classList.contains(ignoreClass);\n\t\t} else {\n\t\t\tisText = false;\n\t\t\tneedsIgnoring = anchor.classList.contains(ignoreClass);\n\t\t}\n\n\t\tif (needsIgnoring && isText) {\n\t\t\tpreviousSibling = parent.previousSibling;\n\t\t\tnextSibling = parent.nextSibling;\n\n\t\t\t// If the sibling is a text node, join the nodes\n\t\t\tif (previousSibling && previousSibling.nodeType === TEXT_NODE) {\n\t\t\t\tsibling = previousSibling;\n\t\t\t} else if (nextSibling && nextSibling.nodeType === TEXT_NODE) {\n\t\t\t\tsibling = nextSibling;\n\t\t\t}\n\n\t\t\tif (sibling) {\n\t\t\t\treturn sibling;\n\t\t\t} else {\n\t\t\t\t// Parent will be ignored on next step\n\t\t\t\treturn anchor;\n\t\t\t}\n\n\t\t} else if (needsIgnoring && !isText) {\n\t\t\t// Otherwise just skip the element node\n\t\t\treturn false;\n\t\t} else {\n\t\t\t// No need to filter\n\t\t\treturn anchor;\n\t\t}\n\n\t}\n\n\tpatchOffset(anchor, offset, ignoreClass) {\n\t\tif (anchor.nodeType != TEXT_NODE) {\n\t\t\tthrow new Error(\"Anchor must be a text node\");\n\t\t}\n\n\t\tvar curr = anchor;\n\t\tvar totalOffset = offset;\n\n\t\t// If the parent is a ignored node, get offset from it's start\n\t\tif (anchor.parentNode.classList.contains(ignoreClass)) {\n\t\t\tcurr = anchor.parentNode;\n\t\t}\n\n\t\twhile (curr.previousSibling) {\n\t\t\tif(curr.previousSibling.nodeType === ELEMENT_NODE) {\n\t\t\t\t// Originally a text node, so join\n\t\t\t\tif(curr.previousSibling.classList.contains(ignoreClass)){\n\t\t\t\t\ttotalOffset += curr.previousSibling.textContent.length;\n\t\t\t\t} else {\n\t\t\t\t\tbreak; // Normal node, dont join\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// If the previous sibling is a text node, join the nodes\n\t\t\t\ttotalOffset += curr.previousSibling.textContent.length;\n\t\t\t}\n\n\t\t\tcurr = curr.previousSibling;\n\t\t}\n\n\t\treturn totalOffset;\n\n\t}\n\n\tnormalizedMap(children, nodeType, ignoreClass) {\n\t\tvar output = {};\n\t\tvar prevIndex = -1;\n\t\tvar i, len = children.length;\n\t\tvar currNodeType;\n\t\tvar prevNodeType;\n\n\t\tfor (i = 0; i < len; i++) {\n\n\t\t\tcurrNodeType = children[i].nodeType;\n\n\t\t\t// Check if needs ignoring\n\t\t\tif (currNodeType === ELEMENT_NODE &&\n\t\t\t\t\tchildren[i].classList.contains(ignoreClass)) {\n\t\t\t\tcurrNodeType = TEXT_NODE;\n\t\t\t}\n\n\t\t\tif (i > 0 &&\n\t\t\t\t\tcurrNodeType === TEXT_NODE &&\n\t\t\t\t\tprevNodeType === TEXT_NODE) {\n\t\t\t\t// join text nodes\n\t\t\t\toutput[i] = prevIndex;\n\t\t\t} else if (nodeType === currNodeType){\n\t\t\t\tprevIndex = prevIndex + 1;\n\t\t\t\toutput[i] = prevIndex;\n\t\t\t}\n\n\t\t\tprevNodeType = currNodeType;\n\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tposition(anchor) {\n\t\tvar children, index;\n\t\tif (anchor.nodeType === ELEMENT_NODE) {\n\t\t\tchildren = anchor.parentNode.children;\n\t\t\tif (!children) {\n\t\t\t\tchildren = findChildren(anchor.parentNode);\n\t\t\t}\n\t\t\tindex = Array.prototype.indexOf.call(children, anchor);\n\t\t} else {\n\t\t\tchildren = this.textNodes(anchor.parentNode);\n\t\t\tindex = children.indexOf(anchor);\n\t\t}\n\n\t\treturn index;\n\t}\n\n\tfilteredPosition(anchor, ignoreClass) {\n\t\tvar children, index, map;\n\n\t\tif (anchor.nodeType === ELEMENT_NODE) {\n\t\t\tchildren = anchor.parentNode.children;\n\t\t\tmap = this.normalizedMap(children, ELEMENT_NODE, ignoreClass);\n\t\t} else {\n\t\t\tchildren = anchor.parentNode.childNodes;\n\t\t\t// Inside an ignored node\n\t\t\tif(anchor.parentNode.classList.contains(ignoreClass)) {\n\t\t\t\tanchor = anchor.parentNode;\n\t\t\t\tchildren = anchor.parentNode.childNodes;\n\t\t\t}\n\t\t\tmap = this.normalizedMap(children, TEXT_NODE, ignoreClass);\n\t\t}\n\n\n\t\tindex = Array.prototype.indexOf.call(children, anchor);\n\n\t\treturn map[index];\n\t}\n\n\tstepsToXpath(steps) {\n\t\tvar xpath = [\".\", \"*\"];\n\n\t\tsteps.forEach(function(step){\n\t\t\tvar position = step.index + 1;\n\n\t\t\tif(step.id){\n\t\t\t\txpath.push(\"*[position()=\" + position + \" and @id='\" + step.id + \"']\");\n\t\t\t} else if(step.type === \"text\") {\n\t\t\t\txpath.push(\"text()[\" + position + \"]\");\n\t\t\t} else {\n\t\t\t\txpath.push(\"*[\" + position + \"]\");\n\t\t\t}\n\t\t});\n\n\t\treturn xpath.join(\"/\");\n\t}\n\n\n\t/*\n\n\tTo get the last step if needed:\n\n\t// Get the terminal step\n\tlastStep = steps[steps.length-1];\n\t// Get the query string\n\tquery = this.stepsToQuery(steps);\n\t// Find the containing element\n\tstartContainerParent = doc.querySelector(query);\n\t// Find the text node within that element\n\tif(startContainerParent && lastStep.type == \"text\") {\n\t\tcontainer = startContainerParent.childNodes[lastStep.index];\n\t}\n\t*/\n\tstepsToQuerySelector(steps) {\n\t\tvar query = [\"html\"];\n\n\t\tsteps.forEach(function(step){\n\t\t\tvar position = step.index + 1;\n\n\t\t\tif(step.id){\n\t\t\t\tquery.push(\"#\" + step.id);\n\t\t\t} else if(step.type === \"text\") {\n\t\t\t\t// unsupported in querySelector\n\t\t\t\t// query.push(\"text()[\" + position + \"]\");\n\t\t\t} else {\n\t\t\t\tquery.push(\"*:nth-child(\" + position + \")\");\n\t\t\t}\n\t\t});\n\n\t\treturn query.join(\">\");\n\n\t}\n\n\ttextNodes(container, ignoreClass) {\n\t\treturn Array.prototype.slice.call(container.childNodes).\n\t\t\tfilter(function (node) {\n\t\t\t\tif (node.nodeType === TEXT_NODE) {\n\t\t\t\t\treturn true;\n\t\t\t\t} else if (ignoreClass && node.classList.contains(ignoreClass)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t}\n\n\twalkToNode(steps, _doc, ignoreClass) {\n\t\tvar doc = _doc || document;\n\t\tvar container = doc.documentElement;\n\t\tvar children;\n\t\tvar step;\n\t\tvar len = steps.length;\n\t\tvar i;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tstep = steps[i];\n\n\t\t\tif(step.type === \"element\") {\n\t\t\t\t//better to get a container using id as some times step.index may not be correct\n\t\t\t\t//For ex.https://github.com/futurepress/epub.js/issues/561\n\t\t\t\tif(step.id) {\n\t\t\t\t\tcontainer = doc.getElementById(step.id);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tchildren = container.children || findChildren(container);\n\t\t\t\t\tcontainer = children[step.index];\n\t\t\t\t}\n\t\t\t} else if(step.type === \"text\") {\n\t\t\t\tcontainer = this.textNodes(container, ignoreClass)[step.index];\n\t\t\t}\n\t\t\tif(!container) {\n\t\t\t\t//Break the for loop as due to incorrect index we can get error if\n\t\t\t\t//container is undefined so that other functionailties works fine\n\t\t\t\t//like navigation\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}\n\n\t\treturn container;\n\t}\n\n\tfindNode(steps, _doc, ignoreClass) {\n\t\tvar doc = _doc || document;\n\t\tvar container;\n\t\tvar xpath;\n\n\t\tif(!ignoreClass && typeof doc.evaluate != \"undefined\") {\n\t\t\txpath = this.stepsToXpath(steps);\n\t\t\tcontainer = doc.evaluate(xpath, doc, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;\n\t\t} else if(ignoreClass) {\n\t\t\tcontainer = this.walkToNode(steps, doc, ignoreClass);\n\t\t} else {\n\t\t\tcontainer = this.walkToNode(steps, doc);\n\t\t}\n\n\t\treturn container;\n\t}\n\n\tfixMiss(steps, offset, _doc, ignoreClass) {\n\t\tvar container = this.findNode(steps.slice(0,-1), _doc, ignoreClass);\n\t\tvar children = container.childNodes;\n\t\tvar map = this.normalizedMap(children, TEXT_NODE, ignoreClass);\n\t\tvar child;\n\t\tvar len;\n\t\tvar lastStepIndex = steps[steps.length-1].index;\n\n\t\tfor (let childIndex in map) {\n\t\t\tif (!map.hasOwnProperty(childIndex)) return;\n\n\t\t\tif(map[childIndex] === lastStepIndex) {\n\t\t\t\tchild = children[childIndex];\n\t\t\t\tlen = child.textContent.length;\n\t\t\t\tif(offset > len) {\n\t\t\t\t\toffset = offset - len;\n\t\t\t\t} else {\n\t\t\t\t\tif (child.nodeType === ELEMENT_NODE) {\n\t\t\t\t\t\tcontainer = child.childNodes[0];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontainer = child;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tcontainer: container,\n\t\t\toffset: offset\n\t\t};\n\n\t}\n\n\t/**\n\t * Creates a DOM range representing a CFI\n\t * @param {document} _doc document referenced in the base\n\t * @param {string} [ignoreClass]\n\t * @return {Range}\n\t */\n\ttoRange(_doc, ignoreClass) {\n\t\tvar doc = _doc || document;\n\t\tvar range;\n\t\tvar start, end, startContainer, endContainer;\n\t\tvar cfi = this;\n\t\tvar startSteps, endSteps;\n\t\tvar needsIgnoring = ignoreClass ? (doc.querySelector(\".\" + ignoreClass) != null) : false;\n\t\tvar missed;\n\n\t\tif (typeof(doc.createRange) !== \"undefined\") {\n\t\t\trange = doc.createRange();\n\t\t} else {\n\t\t\trange = new RangeObject();\n\t\t}\n\n\t\tif (cfi.range) {\n\t\t\tstart = cfi.start;\n\t\t\tstartSteps = cfi.path.steps.concat(start.steps);\n\t\t\tstartContainer = this.findNode(startSteps, doc, needsIgnoring ? ignoreClass : null);\n\t\t\tend = cfi.end;\n\t\t\tendSteps = cfi.path.steps.concat(end.steps);\n\t\t\tendContainer = this.findNode(endSteps, doc, needsIgnoring ? ignoreClass : null);\n\t\t} else {\n\t\t\tstart = cfi.path;\n\t\t\tstartSteps = cfi.path.steps;\n\t\t\tstartContainer = this.findNode(cfi.path.steps, doc, needsIgnoring ? ignoreClass : null);\n\t\t}\n\n\t\tif(startContainer) {\n\t\t\ttry {\n\n\t\t\t\tif(start.terminal.offset != null) {\n\t\t\t\t\trange.setStart(startContainer, start.terminal.offset);\n\t\t\t\t} else {\n\t\t\t\t\trange.setStart(startContainer, 0);\n\t\t\t\t}\n\n\t\t\t} catch (e) {\n\t\t\t\tmissed = this.fixMiss(startSteps, start.terminal.offset, doc, needsIgnoring ? ignoreClass : null);\n\t\t\t\trange.setStart(missed.container, missed.offset);\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.log(\"No startContainer found for\", this.toString());\n\t\t\t// No start found\n\t\t\treturn null;\n\t\t}\n\n\t\tif (endContainer) {\n\t\t\ttry {\n\n\t\t\t\tif(end.terminal.offset != null) {\n\t\t\t\t\trange.setEnd(endContainer, end.terminal.offset);\n\t\t\t\t} else {\n\t\t\t\t\trange.setEnd(endContainer, 0);\n\t\t\t\t}\n\n\t\t\t} catch (e) {\n\t\t\t\tmissed = this.fixMiss(endSteps, cfi.end.terminal.offset, doc, needsIgnoring ? ignoreClass : null);\n\t\t\t\trange.setEnd(missed.container, missed.offset);\n\t\t\t}\n\t\t}\n\n\n\t\t// doc.defaultView.getSelection().addRange(range);\n\t\treturn range;\n\t}\n\n\t/**\n\t * Check if a string is wrapped with \"epubcfi()\"\n\t * @param {string} str\n\t * @returns {boolean}\n\t */\n\tisCfiString(str) {\n\t\tif(typeof str === \"string\" &&\n\t\t\tstr.indexOf(\"epubcfi(\") === 0 &&\n\t\t\tstr[str.length-1] === \")\") {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tgenerateChapterComponent(_spineNodeIndex, _pos, id) {\n\t\tvar pos = parseInt(_pos),\n\t\t\t\tspineNodeIndex = (_spineNodeIndex + 1) * 2,\n\t\t\t\tcfi = \"/\"+spineNodeIndex+\"/\";\n\n\t\tcfi += (pos + 1) * 2;\n\n\t\tif(id) {\n\t\t\tcfi += \"[\" + id + \"]\";\n\t\t}\n\n\t\treturn cfi;\n\t}\n\n\t/**\n\t * Collapse a CFI Range to a single CFI Position\n\t * @param {boolean} [toStart=false]\n\t */\n\tcollapse(toStart) {\n\t\tif (!this.range) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.range = false;\n\n\t\tif (toStart) {\n\t\t\tthis.path.steps = this.path.steps.concat(this.start.steps);\n\t\t\tthis.path.terminal = this.start.terminal;\n\t\t} else {\n\t\t\tthis.path.steps = this.path.steps.concat(this.end.steps);\n\t\t\tthis.path.terminal = this.end.terminal;\n\t\t}\n\n\t}\n}\n\nexport default EpubCFI;\n","\"use strict\";\n\nvar isObject = require(\"../object/is\");\n\nmodule.exports = function (value) {\n\tif (!isObject(value)) return false;\n\ttry {\n\t\tif (!value.constructor) return false;\n\t\treturn value.constructor.prototype === value;\n\t} catch (error) {\n\t\treturn false;\n\t}\n};\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","\"use strict\";\n\n// ES3 safe\nvar _undefined = void 0;\n\nmodule.exports = function (value) { return value !== _undefined && value !== null; };\n","import {defer, requestAnimationFrame} from \"./core\";\n\n/**\n * Queue for handling tasks one at a time\n * @class\n * @param {scope} context what this will resolve to in the tasks\n */\nclass Queue {\n\tconstructor(context){\n\t\tthis._q = [];\n\t\tthis.context = context;\n\t\tthis.tick = requestAnimationFrame;\n\t\tthis.running = false;\n\t\tthis.paused = false;\n\t}\n\n\t/**\n\t * Add an item to the queue\n\t * @return {Promise}\n\t */\n\tenqueue() {\n\t\tvar deferred, promise;\n\t\tvar queued;\n\t\tvar task = [].shift.call(arguments);\n\t\tvar args = arguments;\n\n\t\t// Handle single args without context\n\t\t// if(args && !Array.isArray(args)) {\n\t\t//   args = [args];\n\t\t// }\n\t\tif(!task) {\n\t\t\tthrow new Error(\"No Task Provided\");\n\t\t}\n\n\t\tif(typeof task === \"function\"){\n\n\t\t\tdeferred = new defer();\n\t\t\tpromise = deferred.promise;\n\n\t\t\tqueued = {\n\t\t\t\t\"task\" : task,\n\t\t\t\t\"args\"     : args,\n\t\t\t\t//\"context\"  : context,\n\t\t\t\t\"deferred\" : deferred,\n\t\t\t\t\"promise\" : promise\n\t\t\t};\n\n\t\t} else {\n\t\t\t// Task is a promise\n\t\t\tqueued = {\n\t\t\t\t\"promise\" : task\n\t\t\t};\n\n\t\t}\n\n\t\tthis._q.push(queued);\n\n\t\t// Wait to start queue flush\n\t\tif (this.paused == false && !this.running) {\n\t\t\t// setTimeout(this.flush.bind(this), 0);\n\t\t\t// this.tick.call(window, this.run.bind(this));\n\t\t\tthis.run();\n\t\t}\n\n\t\treturn queued.promise;\n\t}\n\n\t/**\n\t * Run one item\n\t * @return {Promise}\n\t */\n\tdequeue(){\n\t\tvar inwait, task, result;\n\n\t\tif(this._q.length && !this.paused) {\n\t\t\tinwait = this._q.shift();\n\t\t\ttask = inwait.task;\n\t\t\tif(task){\n\t\t\t\t// console.log(task)\n\n\t\t\t\tresult = task.apply(this.context, inwait.args);\n\n\t\t\t\tif(result && typeof result[\"then\"] === \"function\") {\n\t\t\t\t\t// Task is a function that returns a promise\n\t\t\t\t\treturn result.then(function(){\n\t\t\t\t\t\tinwait.deferred.resolve.apply(this.context, arguments);\n\t\t\t\t\t}.bind(this), function() {\n\t\t\t\t\t\tinwait.deferred.reject.apply(this.context, arguments);\n\t\t\t\t\t}.bind(this));\n\t\t\t\t} else {\n\t\t\t\t\t// Task resolves immediately\n\t\t\t\t\tinwait.deferred.resolve.apply(this.context, result);\n\t\t\t\t\treturn inwait.promise;\n\t\t\t\t}\n\n\n\n\t\t\t} else if(inwait.promise) {\n\t\t\t\t// Task is a promise\n\t\t\t\treturn inwait.promise;\n\t\t\t}\n\n\t\t} else {\n\t\t\tinwait = new defer();\n\t\t\tinwait.deferred.resolve();\n\t\t\treturn inwait.promise;\n\t\t}\n\n\t}\n\n\t// Run All Immediately\n\tdump(){\n\t\twhile(this._q.length) {\n\t\t\tthis.dequeue();\n\t\t}\n\t}\n\n\t/**\n\t * Run all tasks sequentially, at convince\n\t * @return {Promise}\n\t */\n\trun(){\n\n\t\tif(!this.running){\n\t\t\tthis.running = true;\n\t\t\tthis.defered = new defer();\n\t\t}\n\n\t\tthis.tick.call(window, () => {\n\n\t\t\tif(this._q.length) {\n\n\t\t\t\tthis.dequeue()\n\t\t\t\t\t.then(function(){\n\t\t\t\t\t\tthis.run();\n\t\t\t\t\t}.bind(this));\n\n\t\t\t} else {\n\t\t\t\tthis.defered.resolve();\n\t\t\t\tthis.running = undefined;\n\t\t\t}\n\n\t\t});\n\n\t\t// Unpause\n\t\tif(this.paused == true) {\n\t\t\tthis.paused = false;\n\t\t}\n\n\t\treturn this.defered.promise;\n\t}\n\n\t/**\n\t * Flush all, as quickly as possible\n\t * @return {Promise}\n\t */\n\tflush(){\n\n\t\tif(this.running){\n\t\t\treturn this.running;\n\t\t}\n\n\t\tif(this._q.length) {\n\t\t\tthis.running = this.dequeue()\n\t\t\t\t.then(function(){\n\t\t\t\t\tthis.running = undefined;\n\t\t\t\t\treturn this.flush();\n\t\t\t\t}.bind(this));\n\n\t\t\treturn this.running;\n\t\t}\n\n\t}\n\n\t/**\n\t * Clear all items in wait\n\t */\n\tclear(){\n\t\tthis._q = [];\n\t}\n\n\t/**\n\t * Get the number of tasks in the queue\n\t * @return {number} tasks\n\t */\n\tlength(){\n\t\treturn this._q.length;\n\t}\n\n\t/**\n\t * Pause a running queue\n\t */\n\tpause(){\n\t\tthis.paused = true;\n\t}\n\n\t/**\n\t * End the queue\n\t */\n\tstop(){\n\t\tthis._q = [];\n\t\tthis.running = false;\n\t\tthis.paused = true;\n\t}\n}\n\n\n/**\n * Create a new task from a callback\n * @class\n * @private\n * @param {function} task\n * @param {array} args\n * @param {scope} context\n * @return {function} task\n */\nclass Task {\n\tconstructor(task, args, context){\n\n\t\treturn function(){\n\t\t\tvar toApply = arguments || [];\n\n\t\t\treturn new Promise( (resolve, reject) => {\n\t\t\t\tvar callback = function(value, err){\n\t\t\t\t\tif (!value && err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(value);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t// Add the callback to the arguments list\n\t\t\t\ttoApply.push(callback);\n\n\t\t\t\t// Apply all arguments to the functions\n\t\t\t\ttask.apply(context || this, toApply);\n\n\t\t\t});\n\n\t\t};\n\n\t}\n}\n\n\nexport default Queue;\nexport { Task };\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) throw new TypeError(\"Cannot use null or undefined\");\n\treturn value;\n};\n","import Url from \"./utils/url\";\n\n/**\n * Themes to apply to displayed content\n * @class\n * @param {Rendition} rendition\n */\nclass Themes {\n\tconstructor(rendition) {\n\t\tthis.rendition = rendition;\n\t\tthis._themes = {\n\t\t\t\"default\" : {\n\t\t\t\t\"rules\" : {},\n\t\t\t\t\"url\" : \"\",\n\t\t\t\t\"serialized\" : \"\"\n\t\t\t}\n\t\t};\n\t\tthis._overrides = {};\n\t\tthis._current = \"default\";\n\t\tthis._injected = [];\n\t\tthis.rendition.hooks.content.register(this.inject.bind(this));\n\t\tthis.rendition.hooks.content.register(this.overrides.bind(this));\n\n\t}\n\n\t/**\n\t * Add themes to be used by a rendition\n\t * @param {object | string}\n\t * @example themes.register(\"light\", \"http://example.com/light.css\")\n\t * @example themes.register(\"light\", { \"body\": { \"color\": \"purple\"}})\n\t * @example themes.register({ \"light\" : {...}, \"dark\" : {...}})\n\t */\n\tregister () {\n\t\tif (arguments.length === 0) {\n\t\t\treturn;\n\t\t}\n\t\tif (arguments.length === 1 && typeof(arguments[0]) === \"object\") {\n\t\t\treturn this.registerThemes(arguments[0]);\n\t\t}\n\t\tif (arguments.length === 1 && typeof(arguments[0]) === \"string\") {\n\t\t\treturn this.default(arguments[0]);\n\t\t}\n\t\tif (arguments.length === 2 && typeof(arguments[1]) === \"string\") {\n\t\t\treturn this.registerUrl(arguments[0], arguments[1]);\n\t\t}\n\t\tif (arguments.length === 2 && typeof(arguments[1]) === \"object\") {\n\t\t\treturn this.registerRules(arguments[0], arguments[1]);\n\t\t}\n\t}\n\n\t/**\n\t * Add a default theme to be used by a rendition\n\t * @param {object | string} theme\n\t * @example themes.register(\"http://example.com/default.css\")\n\t * @example themes.register({ \"body\": { \"color\": \"purple\"}})\n\t */\n\tdefault (theme) {\n\t\tif (!theme) {\n\t\t\treturn;\n\t\t}\n\t\tif (typeof(theme) === \"string\") {\n\t\t\treturn this.registerUrl(\"default\", theme);\n\t\t}\n\t\tif (typeof(theme) === \"object\") {\n\t\t\treturn this.registerRules(\"default\", theme);\n\t\t}\n\t}\n\n\t/**\n\t * Register themes object\n\t * @param {object} themes\n\t */\n\tregisterThemes (themes) {\n\t\tfor (var theme in themes) {\n\t\t\tif (themes.hasOwnProperty(theme)) {\n\t\t\t\tif (typeof(themes[theme]) === \"string\") {\n\t\t\t\t\tthis.registerUrl(theme, themes[theme]);\n\t\t\t\t} else {\n\t\t\t\t\tthis.registerRules(theme, themes[theme]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Register a url\n\t * @param {string} name\n\t * @param {string} input\n\t */\n\tregisterUrl (name, input) {\n\t\tvar url = new Url(input);\n\t\tthis._themes[name] = { \"url\": url.toString() };\n\t\tif (this._injected[name]) {\n\t\t\tthis.update(name);\n\t\t}\n\t}\n\n\t/**\n\t * Register rule\n\t * @param {string} name\n\t * @param {object} rules\n\t */\n\tregisterRules (name, rules) {\n\t\tthis._themes[name] = { \"rules\": rules };\n\t\t// TODO: serialize css rules\n\t\tif (this._injected[name]) {\n\t\t\tthis.update(name);\n\t\t}\n\t}\n\n\t/**\n\t * Select a theme\n\t * @param {string} name\n\t */\n\tselect (name) {\n\t\tvar prev = this._current;\n\t\tvar contents;\n\n\t\tthis._current = name;\n\t\tthis.update(name);\n\n\t\tcontents = this.rendition.getContents();\n\t\tcontents.forEach( (content) => {\n\t\t\tcontent.removeClass(prev);\n\t\t\tcontent.addClass(name);\n\t\t});\n\t}\n\n\t/**\n\t * Update a theme\n\t * @param {string} name\n\t */\n\tupdate (name) {\n\t\tvar contents = this.rendition.getContents();\n\t\tcontents.forEach( (content) => {\n\t\t\tthis.add(name, content);\n\t\t});\n\t}\n\n\t/**\n\t * Inject all themes into contents\n\t * @param {Contents} contents\n\t */\n\tinject (contents) {\n\t\tvar links = [];\n\t\tvar themes = this._themes;\n\t\tvar theme;\n\n\t\tfor (var name in themes) {\n\t\t\tif (themes.hasOwnProperty(name) && (name === this._current || name === \"default\")) {\n\t\t\t\ttheme = themes[name];\n\t\t\t\tif((theme.rules && Object.keys(theme.rules).length > 0) || (theme.url && links.indexOf(theme.url) === -1)) {\n\t\t\t\t\tthis.add(name, contents);\n\t\t\t\t}\n\t\t\t\tthis._injected.push(name);\n\t\t\t}\n\t\t}\n\n\t\tif(this._current != \"default\") {\n\t\t\tcontents.addClass(this._current);\n\t\t}\n\t}\n\n\t/**\n\t * Add Theme to contents\n\t * @param {string} name\n\t * @param {Contents} contents\n\t */\n\tadd (name, contents) {\n\t\tvar theme = this._themes[name];\n\n\t\tif (!theme || !contents) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (theme.url) {\n\t\t\tcontents.addStylesheet(theme.url);\n\t\t} else if (theme.serialized) {\n\t\t\t// TODO: handle serialized\n\t\t} else if (theme.rules) {\n\t\t\tcontents.addStylesheetRules(theme.rules);\n\t\t\ttheme.injected = true;\n\t\t}\n\t}\n\n\t/**\n\t * Add override\n\t * @param {string} name\n\t * @param {string} value\n\t * @param {boolean} priority\n\t */\n\toverride (name, value, priority) {\n\t\tvar contents = this.rendition.getContents();\n\n\t\tthis._overrides[name] = {\n\t\t\tvalue: value,\n\t\t\tpriority: priority === true\n\t\t};\n\n\t\tcontents.forEach( (content) => {\n\t\t\tcontent.css(name, this._overrides[name].value, this._overrides[name].priority);\n\t\t});\n\t}\n\n\t/**\n\t * Add all overrides\n\t * @param {Content} content\n\t */\n\toverrides (contents) {\n\t\tvar overrides = this._overrides;\n\n\t\tfor (var rule in overrides) {\n\t\t\tif (overrides.hasOwnProperty(rule)) {\n\t\t\t\tcontents.css(rule, overrides[rule].value, overrides[rule].priority);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Adjust the font size of a rendition\n\t * @param {number} size\n\t */\n\tfontSize (size) {\n\t\tthis.override(\"font-size\", size);\n\t}\n\n\t/**\n\t * Adjust the font-family of a rendition\n\t * @param {string} f\n\t */\n\tfont (f) {\n\t\tthis.override(\"font-family\", f, true);\n\t}\n\n\tdestroy() {\n\t\tthis.rendition = undefined;\n\t\tthis._themes = undefined;\n\t\tthis._overrides = undefined;\n\t\tthis._current = undefined;\n\t\tthis._injected = undefined;\n\t}\n\n}\n\nexport default Themes;\n","import EventEmitter from \"event-emitter\";\nimport EpubCFI from \"./epubcfi\";\n\n/**\n\t* Handles managing adding & removing Annotations\n\t* @param {Rendition} rendition\n\t* @class\n\t*/\nclass Annotations {\n\n\tconstructor (rendition) {\n\t\tthis.rendition = rendition;\n\t\tthis.highlights = [];\n\t\tthis.underlines = [];\n\t\tthis.marks = [];\n\t\tthis._annotations = {};\n\t\tthis._annotationsBySectionIndex = {};\n\n\t\tthis.rendition.hooks.render.register(this.inject.bind(this));\n\t\tthis.rendition.hooks.unloaded.register(this.clear.bind(this));\n\t}\n\n\t/**\n\t * Add an annotation to store\n\t * @param {string} type Type of annotation to add: \"highlight\", \"underline\", \"mark\"\n\t * @param {EpubCFI} cfiRange EpubCFI range to attach annotation to\n\t * @param {object} data Data to assign to annotation\n\t * @param {function} [cb] Callback after annotation is added\n\t * @param {string} className CSS class to assign to annotation\n\t * @param {object} styles CSS styles to assign to annotation\n\t * @returns {Annotation} annotation\n\t */\n\tadd (type, cfiRange, data, cb, className, styles) {\n\t\tlet hash = encodeURI(cfiRange);\n\t\tlet cfi = new EpubCFI(cfiRange);\n\t\tlet sectionIndex = cfi.spinePos;\n\t\tlet annotation = new Annotation({\n\t\t\ttype,\n\t\t\tcfiRange,\n\t\t\tdata,\n\t\t\tsectionIndex,\n\t\t\tcb,\n\t\t\tclassName,\n\t\t\tstyles\n\t\t});\n\n\t\tthis._annotations[hash] = annotation;\n\n\t\tif (sectionIndex in this._annotationsBySectionIndex) {\n\t\t\tthis._annotationsBySectionIndex[sectionIndex].push(hash);\n\t\t} else {\n\t\t\tthis._annotationsBySectionIndex[sectionIndex] = [hash];\n\t\t}\n\n\t\tlet views = this.rendition.views();\n\n\t\tviews.forEach( (view) => {\n\t\t\tif (annotation.sectionIndex === view.index) {\n\t\t\t\tannotation.attach(view);\n\t\t\t}\n\t\t});\n\n\t\treturn annotation;\n\t}\n\n\t/**\n\t * Remove an annotation from store\n\t * @param {EpubCFI} cfiRange EpubCFI range the annotation is attached to\n\t * @param {string} type Type of annotation to add: \"highlight\", \"underline\", \"mark\"\n\t */\n\tremove (cfiRange, type) {\n\t\tlet hash = encodeURI(cfiRange);\n\n\t\tif (hash in this._annotations) {\n\t\t\tlet annotation = this._annotations[hash];\n\n\t\t\tif (type && annotation.type !== type) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet views = this.rendition.views();\n\t\t\tviews.forEach( (view) => {\n\t\t\t\tthis._removeFromAnnotationBySectionIndex(annotation.sectionIndex, hash);\n\t\t\t\tif (annotation.sectionIndex === view.index) {\n\t\t\t\t\tannotation.detach(view);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tdelete this._annotations[hash];\n\t\t}\n\t}\n\n\t/**\n\t * Remove an annotations by Section Index\n\t * @private\n\t */\n\t_removeFromAnnotationBySectionIndex (sectionIndex, hash) {\n\t\tthis._annotationsBySectionIndex[sectionIndex] = this._annotationsAt(sectionIndex).filter(h => h !== hash);\n\t}\n\n\t/**\n\t * Get annotations by Section Index\n\t * @private\n\t */\n\t_annotationsAt (index) {\n\t\treturn this._annotationsBySectionIndex[index];\n\t}\n\n\n\t/**\n\t * Add a highlight to the store\n\t * @param {EpubCFI} cfiRange EpubCFI range to attach annotation to\n\t * @param {object} data Data to assign to annotation\n\t * @param {function} cb Callback after annotation is added\n\t * @param {string} className CSS class to assign to annotation\n\t * @param {object} styles CSS styles to assign to annotation\n\t */\n\thighlight (cfiRange, data, cb, className, styles) {\n\t\tthis.add(\"highlight\", cfiRange, data, cb, className, styles);\n\t}\n\n\t/**\n\t * Add a underline to the store\n\t * @param {EpubCFI} cfiRange EpubCFI range to attach annotation to\n\t * @param {object} data Data to assign to annotation\n\t * @param {function} cb Callback after annotation is added\n\t * @param {string} className CSS class to assign to annotation\n\t * @param {object} styles CSS styles to assign to annotation\n\t */\n\tunderline (cfiRange, data, cb, className, styles) {\n\t\tthis.add(\"underline\", cfiRange, data, cb, className, styles);\n\t}\n\n\t/**\n\t * Add a mark to the store\n\t * @param {EpubCFI} cfiRange EpubCFI range to attach annotation to\n\t * @param {object} data Data to assign to annotation\n\t * @param {function} cb Callback after annotation is added\n\t */\n\tmark (cfiRange, data, cb) {\n\t\tthis.add(\"mark\", cfiRange, data, cb);\n\t}\n\n\t/**\n\t * iterate over annotations in the store\n\t */\n\teach () {\n\t\treturn this._annotations.forEach.apply(this._annotations, arguments);\n\t}\n\n\t/**\n\t * Hook for injecting annotation into a view\n\t * @param {View} view\n\t * @private\n\t */\n\tinject (view) {\n\t\tlet sectionIndex = view.index;\n\t\tif (sectionIndex in this._annotationsBySectionIndex) {\n\t\t\tlet annotations = this._annotationsBySectionIndex[sectionIndex];\n\t\t\tannotations.forEach((hash) => {\n\t\t\t\tlet annotation = this._annotations[hash];\n\t\t\t\tannotation.attach(view);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Hook for removing annotation from a view\n\t * @param {View} view\n\t * @private\n\t */\n\tclear (view) {\n\t\tlet sectionIndex = view.index;\n\t\tif (sectionIndex in this._annotationsBySectionIndex) {\n\t\t\tlet annotations = this._annotationsBySectionIndex[sectionIndex];\n\t\t\tannotations.forEach((hash) => {\n\t\t\t\tlet annotation = this._annotations[hash];\n\t\t\t\tannotation.detach(view);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * [Not Implemented] Show annotations\n\t * @TODO: needs implementation in View\n\t */\n\tshow () {\n\n\t}\n\n\t/**\n\t * [Not Implemented] Hide annotations\n\t * @TODO: needs implementation in View\n\t */\n\thide () {\n\n\t}\n\n}\n\n/**\n * Annotation object\n * @class\n * @param {object} options\n * @param {string} options.type Type of annotation to add: \"highlight\", \"underline\", \"mark\"\n * @param {EpubCFI} options.cfiRange EpubCFI range to attach annotation to\n * @param {object} options.data Data to assign to annotation\n * @param {int} options.sectionIndex Index in the Spine of the Section annotation belongs to\n * @param {function} [options.cb] Callback after annotation is added\n * @param {string} className CSS class to assign to annotation\n * @param {object} styles CSS styles to assign to annotation\n * @returns {Annotation} annotation\n */\nclass Annotation {\n\n\tconstructor ({\n\t\ttype,\n\t\tcfiRange,\n\t\tdata,\n\t\tsectionIndex,\n\t\tcb, \n\t\tclassName, \n\t\tstyles\n\t}) {\n\t\tthis.type = type;\n\t\tthis.cfiRange = cfiRange;\n\t\tthis.data = data;\n\t\tthis.sectionIndex = sectionIndex;\n\t\tthis.mark = undefined;\n\t\tthis.cb = cb;\n\t\tthis.className = className;\n\t\tthis.styles = styles;\n\t}\n\n\t/**\n\t * Update stored data\n\t * @param {object} data\n\t */\n\tupdate (data) {\n\t\tthis.data = data;\n\t}\n\n\t/**\n\t * Add to a view\n\t * @param {View} view\n\t */\n\tattach (view) {\n\t\tlet {cfiRange, data, type, mark, cb, className, styles} = this;\n\t\tlet result;\n\n\t\tif (type === \"highlight\") {\n\t\t\tresult = view.highlight(cfiRange, data, cb, className, styles);\n\t\t} else if (type === \"underline\") {\n\t\t\tresult = view.underline(cfiRange, data, cb, className, styles);\n\t\t} else if (type === \"mark\") {\n\t\t\tresult = view.mark(cfiRange, data, cb);\n\t\t}\n\n\t\tthis.mark = result;\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Remove from a view\n\t * @param {View} view\n\t */\n\tdetach (view) {\n\t\tlet {cfiRange, type} = this;\n\t\tlet result;\n\n\t\tif (view) {\n\t\t\tif (type === \"highlight\") {\n\t\t\t\tresult = view.unhighlight(cfiRange);\n\t\t\t} else if (type === \"underline\") {\n\t\t\t\tresult = view.ununderline(cfiRange);\n\t\t\t} else if (type === \"mark\") {\n\t\t\t\tresult = view.unmark(cfiRange);\n\t\t\t}\n\t\t}\n\n\t\tthis.mark = undefined;\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * [Not Implemented] Get text of an annotation\n\t * @TODO: needs implementation in contents\n\t */\n\ttext () {\n\n\t}\n\n}\n\nEventEmitter(Annotation.prototype);\n\n\nexport default Annotations\n","import EventEmitter from \"event-emitter\";\nimport { extend, defer, isFloat } from \"./utils/core\";\nimport Hook from \"./utils/hook\";\nimport EpubCFI from \"./epubcfi\";\nimport Queue from \"./utils/queue\";\nimport Layout from \"./layout\";\n// import Mapping from \"./mapping\";\nimport Themes from \"./themes\";\nimport Contents from \"./contents\";\nimport Annotations from \"./annotations\";\nimport { EVENTS } from \"./utils/constants\";\n\n// Default Views\nimport IframeView from \"./managers/views/iframe\";\n\n// Default View Managers\nimport DefaultViewManager from \"./managers/default/index\";\nimport ContinuousViewManager from \"./managers/continuous/index\";\n\n/**\n * Displays an Epub as a series of Views for each Section.\n * Requires Manager and View class to handle specifics of rendering\n * the section contetn.\n * @class\n * @param {Book} book\n * @param {object} [options]\n * @param {number} [options.width]\n * @param {number} [options.height]\n * @param {string} [options.ignoreClass] class for the cfi parser to ignore\n * @param {string | function | object} [options.manager='default']\n * @param {string | function} [options.view='iframe']\n * @param {string} [options.layout] layout to force\n * @param {string} [options.spread] force spread value\n * @param {number} [options.minSpreadWidth] overridden by spread: none (never) / both (always)\n * @param {string} [options.stylesheet] url of stylesheet to be injected\n * @param {boolean} [options.resizeOnOrientationChange] false to disable orientation events\n * @param {string} [options.script] url of script to be injected\n */\nclass Rendition {\n\tconstructor(book, options) {\n\n\t\tthis.settings = extend(this.settings || {}, {\n\t\t\twidth: null,\n\t\t\theight: null,\n\t\t\tignoreClass: \"\",\n\t\t\tmanager: \"default\",\n\t\t\tview: \"iframe\",\n\t\t\tflow: null,\n\t\t\tlayout: null,\n\t\t\tspread: null,\n\t\t\tminSpreadWidth: 800,\n\t\t\tstylesheet: null,\n\t\t\tresizeOnOrientationChange: true,\n\t\t\tscript: null\n\t\t});\n\n\t\textend(this.settings, options);\n\n\t\tif (typeof(this.settings.manager) === \"object\") {\n\t\t\tthis.manager = this.settings.manager;\n\t\t}\n\n\t\tthis.book = book;\n\n\t\t/**\n\t\t * Adds Hook methods to the Rendition prototype\n\t\t * @member {object} hooks\n\t\t * @property {Hook} hooks.content\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.hooks = {};\n\t\tthis.hooks.display = new Hook(this);\n\t\tthis.hooks.serialize = new Hook(this);\n\t\tthis.hooks.content = new Hook(this);\n\t\tthis.hooks.unloaded = new Hook(this);\n\t\tthis.hooks.layout = new Hook(this);\n\t\tthis.hooks.render = new Hook(this);\n\t\tthis.hooks.show = new Hook(this);\n\n\t\tthis.hooks.content.register(this.handleLinks.bind(this));\n\t\tthis.hooks.content.register(this.passEvents.bind(this));\n\t\tthis.hooks.content.register(this.adjustImages.bind(this));\n\n\t\tthis.book.spine.hooks.content.register(this.injectIdentifier.bind(this));\n\n\t\tif (this.settings.stylesheet) {\n\t\t\tthis.book.spine.hooks.content.register(this.injectStylesheet.bind(this));\n\t\t}\n\n\t\tif (this.settings.script) {\n\t\t\tthis.book.spine.hooks.content.register(this.injectScript.bind(this));\n\t\t}\n\n\t\t/**\n\t\t * @member {Themes} themes\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.themes = new Themes(this);\n\n\t\t/**\n\t\t * @member {Annotations} annotations\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.annotations = new Annotations(this);\n\n\t\tthis.epubcfi = new EpubCFI();\n\n\t\tthis.q = new Queue(this);\n\n\t\t/**\n\t\t * A Rendered Location Range\n\t\t * @typedef location\n\t\t * @type {Object}\n\t\t * @property {object} start\n\t\t * @property {string} start.index\n\t\t * @property {string} start.href\n\t\t * @property {object} start.displayed\n\t\t * @property {EpubCFI} start.cfi\n\t\t * @property {number} start.location\n\t\t * @property {number} start.percentage\n\t\t * @property {number} start.displayed.page\n\t\t * @property {number} start.displayed.total\n\t\t * @property {object} end\n\t\t * @property {string} end.index\n\t\t * @property {string} end.href\n\t\t * @property {object} end.displayed\n\t\t * @property {EpubCFI} end.cfi\n\t\t * @property {number} end.location\n\t\t * @property {number} end.percentage\n\t\t * @property {number} end.displayed.page\n\t\t * @property {number} end.displayed.total\n\t\t * @property {boolean} atStart\n\t\t * @property {boolean} atEnd\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.location = undefined;\n\n\t\t// Hold queue until book is opened\n\t\tthis.q.enqueue(this.book.opened);\n\n\t\tthis.starting = new defer();\n\t\t/**\n\t\t * @member {promise} started returns after the rendition has started\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.started = this.starting.promise;\n\t\t// Block the queue until rendering is started\n\t\tthis.q.enqueue(this.start);\n\t}\n\n\t/**\n\t * Set the manager function\n\t * @param {function} manager\n\t */\n\tsetManager(manager) {\n\t\tthis.manager = manager;\n\t}\n\n\t/**\n\t * Require the manager from passed string, or as a class function\n\t * @param  {string|object} manager [description]\n\t * @return {method}\n\t */\n\trequireManager(manager) {\n\t\tvar viewManager;\n\n\t\t// If manager is a string, try to load from imported managers\n\t\tif (typeof manager === \"string\" && manager === \"default\") {\n\t\t\tviewManager = DefaultViewManager;\n\t\t} else if (typeof manager === \"string\" && manager === \"continuous\") {\n\t\t\tviewManager = ContinuousViewManager;\n\t\t} else {\n\t\t\t// otherwise, assume we were passed a class function\n\t\t\tviewManager = manager;\n\t\t}\n\n\t\treturn viewManager;\n\t}\n\n\t/**\n\t * Require the view from passed string, or as a class function\n\t * @param  {string|object} view\n\t * @return {view}\n\t */\n\trequireView(view) {\n\t\tvar View;\n\n\t\t// If view is a string, try to load from imported views,\n\t\tif (typeof view == \"string\" && view === \"iframe\") {\n\t\t\tView = IframeView;\n\t\t} else {\n\t\t\t// otherwise, assume we were passed a class function\n\t\t\tView = view;\n\t\t}\n\n\t\treturn View;\n\t}\n\n\t/**\n\t * Start the rendering\n\t * @return {Promise} rendering has started\n\t */\n\tstart(){\n\n\t\tif(!this.manager) {\n\t\t\tthis.ViewManager = this.requireManager(this.settings.manager);\n\t\t\tthis.View = this.requireView(this.settings.view);\n\n\t\t\tthis.manager = new this.ViewManager({\n\t\t\t\tview: this.View,\n\t\t\t\tqueue: this.q,\n\t\t\t\trequest: this.book.load.bind(this.book),\n\t\t\t\tsettings: this.settings\n\t\t\t});\n\t\t}\n\n\t\tthis.direction(this.book.package.metadata.direction);\n\n\t\t// Parse metadata to get layout props\n\t\tthis.settings.globalLayoutProperties = this.determineLayoutProperties(this.book.package.metadata);\n\n\t\tthis.flow(this.settings.globalLayoutProperties.flow);\n\n\t\tthis.layout(this.settings.globalLayoutProperties);\n\n\t\t// Listen for displayed views\n\t\tthis.manager.on(EVENTS.MANAGERS.ADDED, this.afterDisplayed.bind(this));\n\t\tthis.manager.on(EVENTS.MANAGERS.REMOVED, this.afterRemoved.bind(this));\n\n\t\t// Listen for resizing\n\t\tthis.manager.on(EVENTS.MANAGERS.RESIZED, this.onResized.bind(this));\n\n\t\t// Listen for rotation\n\t\tthis.manager.on(EVENTS.MANAGERS.ORIENTATION_CHANGE, this.onOrientationChange.bind(this));\n\n\t\t// Listen for scroll changes\n\t\tthis.manager.on(EVENTS.MANAGERS.SCROLLED, this.reportLocation.bind(this));\n\n\t\t/**\n\t\t * Emit that rendering has started\n\t\t * @event started\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.emit(EVENTS.RENDITION.STARTED);\n\n\t\t// Start processing queue\n\t\tthis.starting.resolve();\n\t}\n\n\t/**\n\t * Call to attach the container to an element in the dom\n\t * Container must be attached before rendering can begin\n\t * @param  {element} element to attach to\n\t * @return {Promise}\n\t */\n\tattachTo(element){\n\n\t\treturn this.q.enqueue(function () {\n\n\t\t\t// Start rendering\n\t\t\tthis.manager.render(element, {\n\t\t\t\t\"width\"  : this.settings.width,\n\t\t\t\t\"height\" : this.settings.height\n\t\t\t});\n\n\t\t\t/**\n\t\t\t * Emit that rendering has attached to an element\n\t\t\t * @event attached\n\t\t\t * @memberof Rendition\n\t\t\t */\n\t\t\tthis.emit(EVENTS.RENDITION.ATTACHED);\n\n\t\t}.bind(this));\n\n\t}\n\n\t/**\n\t * Display a point in the book\n\t * The request will be added to the rendering Queue,\n\t * so it will wait until book is opened, rendering started\n\t * and all other rendering tasks have finished to be called.\n\t * @param  {string} target Url or EpubCFI\n\t * @return {Promise}\n\t */\n\tdisplay(target){\n\t\tif (this.displaying) {\n\t\t\tthis.displaying.resolve();\n\t\t}\n\t\treturn this.q.enqueue(this._display, target);\n\t}\n\n\t/**\n\t * Tells the manager what to display immediately\n\t * @private\n\t * @param  {string} target Url or EpubCFI\n\t * @return {Promise}\n\t */\n\t_display(target){\n\t\tif (!this.book) {\n\t\t\treturn;\n\t\t}\n\t\tvar isCfiString = this.epubcfi.isCfiString(target);\n\t\tvar displaying = new defer();\n\t\tvar displayed = displaying.promise;\n\t\tvar section;\n\t\tvar moveTo;\n\n\t\tthis.displaying = displaying;\n\n\t\t// Check if this is a book percentage\n\t\tif (this.book.locations.length() && isFloat(target)) {\n\t\t\ttarget = this.book.locations.cfiFromPercentage(parseFloat(target));\n\t\t}\n\n\t\tsection = this.book.spine.get(target);\n\n\t\tif(!section){\n\t\t\tdisplaying.reject(new Error(\"No Section Found\"));\n\t\t\treturn displayed;\n\t\t}\n\n\t\tthis.manager.display(section, target)\n\t\t\t.then(() => {\n\t\t\t\tdisplaying.resolve(section);\n\t\t\t\tthis.displaying = undefined;\n\n\t\t\t\t/**\n\t\t\t\t * Emit that a section has been displayed\n\t\t\t\t * @event displayed\n\t\t\t\t * @param {Section} section\n\t\t\t\t * @memberof Rendition\n\t\t\t\t */\n\t\t\t\tthis.emit(EVENTS.RENDITION.DISPLAYED, section);\n\t\t\t\tthis.reportLocation();\n\t\t\t}, (err) => {\n\t\t\t\t/**\n\t\t\t\t * Emit that has been an error displaying\n\t\t\t\t * @event displayError\n\t\t\t\t * @param {Section} section\n\t\t\t\t * @memberof Rendition\n\t\t\t\t */\n\t\t\t\tthis.emit(EVENTS.RENDITION.DISPLAY_ERROR, err);\n\t\t\t});\n\n\t\treturn displayed;\n\t}\n\n\t/*\n\trender(view, show) {\n\n\t\t// view.onLayout = this.layout.format.bind(this.layout);\n\t\tview.create();\n\n\t\t// Fit to size of the container, apply padding\n\t\tthis.manager.resizeView(view);\n\n\t\t// Render Chain\n\t\treturn view.section.render(this.book.request)\n\t\t\t.then(function(contents){\n\t\t\t\treturn view.load(contents);\n\t\t\t}.bind(this))\n\t\t\t.then(function(doc){\n\t\t\t\treturn this.hooks.content.trigger(view, this);\n\t\t\t}.bind(this))\n\t\t\t.then(function(){\n\t\t\t\tthis.layout.format(view.contents);\n\t\t\t\treturn this.hooks.layout.trigger(view, this);\n\t\t\t}.bind(this))\n\t\t\t.then(function(){\n\t\t\t\treturn view.display();\n\t\t\t}.bind(this))\n\t\t\t.then(function(){\n\t\t\t\treturn this.hooks.render.trigger(view, this);\n\t\t\t}.bind(this))\n\t\t\t.then(function(){\n\t\t\t\tif(show !== false) {\n\t\t\t\t\tthis.q.enqueue(function(view){\n\t\t\t\t\t\tview.show();\n\t\t\t\t\t}, view);\n\t\t\t\t}\n\t\t\t\t// this.map = new Map(view, this.layout);\n\t\t\t\tthis.hooks.show.trigger(view, this);\n\t\t\t\tthis.trigger(\"rendered\", view.section);\n\n\t\t\t}.bind(this))\n\t\t\t.catch(function(e){\n\t\t\t\tthis.trigger(\"loaderror\", e);\n\t\t\t}.bind(this));\n\n\t}\n\t*/\n\n\t/**\n\t * Report what section has been displayed\n\t * @private\n\t * @param  {*} view\n\t */\n\tafterDisplayed(view){\n\n\t\tview.on(EVENTS.VIEWS.MARK_CLICKED, (cfiRange, data) => this.triggerMarkEvent(cfiRange, data, view));\n\n\t\tthis.hooks.render.trigger(view, this)\n\t\t\t.then(() => {\n\t\t\t\tif (view.contents) {\n\t\t\t\t\tthis.hooks.content.trigger(view.contents, this).then(() => {\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * Emit that a section has been rendered\n\t\t\t\t\t\t * @event rendered\n\t\t\t\t\t\t * @param {Section} section\n\t\t\t\t\t\t * @param {View} view\n\t\t\t\t\t\t * @memberof Rendition\n\t\t\t\t\t\t */\n\t\t\t\t\t\tthis.emit(EVENTS.RENDITION.RENDERED, view.section, view);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.emit(EVENTS.RENDITION.RENDERED, view.section, view);\n\t\t\t\t}\n\t\t\t});\n\n\t}\n\n\t/**\n\t * Report what has been removed\n\t * @private\n\t * @param  {*} view\n\t */\n\tafterRemoved(view){\n\t\tthis.hooks.unloaded.trigger(view, this).then(() => {\n\t\t\t/**\n\t\t\t * Emit that a section has been removed\n\t\t\t * @event removed\n\t\t\t * @param {Section} section\n\t\t\t * @param {View} view\n\t\t\t * @memberof Rendition\n\t\t\t */\n\t\t\tthis.emit(EVENTS.RENDITION.REMOVED, view.section, view);\n\t\t});\n\t}\n\n\t/**\n\t * Report resize events and display the last seen location\n\t * @private\n\t */\n\tonResized(size){\n\n\t\t/**\n\t\t * Emit that the rendition has been resized\n\t\t * @event resized\n\t\t * @param {number} width\n\t\t * @param {height} height\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.emit(EVENTS.RENDITION.RESIZED, {\n\t\t\twidth: size.width,\n\t\t\theight: size.height\n\t\t});\n\n\t\tif (this.location && this.location.start) {\n\t\t\tthis.display(this.location.start.cfi);\n\t\t}\n\n\t}\n\n\t/**\n\t * Report orientation events and display the last seen location\n\t * @private\n\t */\n\tonOrientationChange(orientation){\n\t\t/**\n\t\t * Emit that the rendition has been rotated\n\t\t * @event orientationchange\n\t\t * @param {string} orientation\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.emit(EVENTS.RENDITION.ORIENTATION_CHANGE, orientation);\n\t}\n\n\t/**\n\t * Move the Rendition to a specific offset\n\t * Usually you would be better off calling display()\n\t * @param {object} offset\n\t */\n\tmoveTo(offset){\n\t\tthis.manager.moveTo(offset);\n\t}\n\n\t/**\n\t * Trigger a resize of the views\n\t * @param {number} [width]\n\t * @param {number} [height]\n\t */\n\tresize(width, height){\n\t\tif (width) {\n\t\t\tthis.settings.width = width;\n\t\t}\n\t\tif (height) {\n\t\t\tthis.settings.height = height;\n\t\t}\n\t\tthis.manager.resize(width, height);\n\t}\n\n\t/**\n\t * Clear all rendered views\n\t */\n\tclear(){\n\t\tthis.manager.clear();\n\t}\n\n\t/**\n\t * Go to the next \"page\" in the rendition\n\t * @return {Promise}\n\t */\n\tnext(){\n\t\treturn this.q.enqueue(this.manager.next.bind(this.manager))\n\t\t\t.then(this.reportLocation.bind(this));\n\t}\n\n\t/**\n\t * Go to the previous \"page\" in the rendition\n\t * @return {Promise}\n\t */\n\tprev(){\n\t\treturn this.q.enqueue(this.manager.prev.bind(this.manager))\n\t\t\t.then(this.reportLocation.bind(this));\n\t}\n\n\t//-- http://www.idpf.org/epub/301/spec/epub-publications.html#meta-properties-rendering\n\t/**\n\t * Determine the Layout properties from metadata and settings\n\t * @private\n\t * @param  {object} metadata\n\t * @return {object} properties\n\t */\n\tdetermineLayoutProperties(metadata){\n\t\tvar properties;\n\t\tvar layout = this.settings.layout || metadata.layout || \"reflowable\";\n\t\tvar spread = this.settings.spread || metadata.spread || \"auto\";\n\t\tvar orientation = this.settings.orientation || metadata.orientation || \"auto\";\n\t\tvar flow = this.settings.flow || metadata.flow || \"auto\";\n\t\tvar viewport = metadata.viewport || \"\";\n\t\tvar minSpreadWidth = this.settings.minSpreadWidth || metadata.minSpreadWidth || 800;\n\t\tvar direction = this.settings.direction || metadata.direction || \"ltr\";\n\n\t\tif ((this.settings.width === 0 || this.settings.width > 0) &&\n\t\t\t\t(this.settings.height === 0 || this.settings.height > 0)) {\n\t\t\t// viewport = \"width=\"+this.settings.width+\", height=\"+this.settings.height+\"\";\n\t\t}\n\n\t\tproperties = {\n\t\t\tlayout : layout,\n\t\t\tspread : spread,\n\t\t\torientation : orientation,\n\t\t\tflow : flow,\n\t\t\tviewport : viewport,\n\t\t\tminSpreadWidth : minSpreadWidth,\n\t\t\tdirection: direction\n\t\t};\n\n\t\treturn properties;\n\t}\n\n\t/**\n\t * Adjust the flow of the rendition to paginated or scrolled\n\t * (scrolled-continuous vs scrolled-doc are handled by different view managers)\n\t * @param  {string} flow\n\t */\n\tflow(flow){\n\t\tvar _flow = flow;\n\t\tif (flow === \"scrolled\" ||\n\t\t\t\tflow === \"scrolled-doc\" ||\n\t\t\t\tflow === \"scrolled-continuous\") {\n\t\t\t_flow = \"scrolled\";\n\t\t}\n\n\t\tif (flow === \"auto\" || flow === \"paginated\") {\n\t\t\t_flow = \"paginated\";\n\t\t}\n\n\t\tthis.settings.flow = flow;\n\n\t\tif (this._layout) {\n\t\t\tthis._layout.flow(_flow);\n\t\t}\n\n\t\tif (this.manager && this._layout) {\n\t\t\tthis.manager.applyLayout(this._layout);\n\t\t}\n\n\t\tif (this.manager) {\n\t\t\tthis.manager.updateFlow(_flow);\n\t\t}\n\n\t\tif (this.manager && this.manager.isRendered() && this.location) {\n\t\t\tthis.manager.clear();\n\t\t\tthis.display(this.location.start.cfi);\n\t\t}\n\t}\n\n\t/**\n\t * Adjust the layout of the rendition to reflowable or pre-paginated\n\t * @param  {object} settings\n\t */\n\tlayout(settings){\n\t\tif (settings) {\n\t\t\tthis._layout = new Layout(settings);\n\t\t\tthis._layout.spread(settings.spread, this.settings.minSpreadWidth);\n\n\t\t\t// this.mapping = new Mapping(this._layout.props);\n\n\t\t\tthis._layout.on(EVENTS.LAYOUT.UPDATED, (props, changed) => {\n\t\t\t\tthis.emit(EVENTS.RENDITION.LAYOUT, props, changed);\n\t\t\t})\n\t\t}\n\n\t\tif (this.manager && this._layout) {\n\t\t\tthis.manager.applyLayout(this._layout);\n\t\t}\n\n\t\treturn this._layout;\n\t}\n\n\t/**\n\t * Adjust if the rendition uses spreads\n\t * @param  {string} spread none | auto (TODO: implement landscape, portrait, both)\n\t * @param  {int} min min width to use spreads at\n\t */\n\tspread(spread, min){\n\n\t\tthis._layout.spread(spread, min);\n\n\t\tif (this.manager.isRendered()) {\n\t\t\tthis.manager.updateLayout();\n\t\t}\n\t}\n\n\t/**\n\t * Adjust the direction of the rendition\n\t * @param  {string} dir\n\t */\n\tdirection(dir){\n\n\t\tthis.settings.direction = dir || \"ltr\";\n\n\t\tif (this.manager) {\n\t\t\tthis.manager.direction(this.settings.direction);\n\t\t}\n\n\t\tif (this.manager && this.manager.isRendered() && this.location) {\n\t\t\tthis.manager.clear();\n\t\t\tthis.display(this.location.start.cfi);\n\t\t}\n\t}\n\n\t/**\n\t * Report the current location\n\t * @fires relocated\n\t * @fires locationChanged\n\t */\n\treportLocation(){\n\t\treturn this.q.enqueue(function reportedLocation(){\n\t\t\trequestAnimationFrame(function reportedLocationAfterRAF() {\n\t\t\t\tvar location = this.manager.currentLocation();\n\t\t\t\tif (location && location.then && typeof location.then === \"function\") {\n\t\t\t\t\tlocation.then(function(result) {\n\t\t\t\t\t\tlet located = this.located(result);\n\n\t\t\t\t\t\tif (!located || !located.start || !located.end) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.location = located;\n\n\t\t\t\t\t\tthis.emit(EVENTS.RENDITION.LOCATION_CHANGED, {\n\t\t\t\t\t\t\tindex: this.location.start.index,\n\t\t\t\t\t\t\thref: this.location.start.href,\n\t\t\t\t\t\t\tstart: this.location.start.cfi,\n\t\t\t\t\t\t\tend: this.location.end.cfi,\n\t\t\t\t\t\t\tpercentage: this.location.start.percentage\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tthis.emit(EVENTS.RENDITION.RELOCATED, this.location);\n\t\t\t\t\t}.bind(this));\n\t\t\t\t} else if (location) {\n\t\t\t\t\tlet located = this.located(location);\n\n\t\t\t\t\tif (!located || !located.start || !located.end) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.location = located;\n\n\t\t\t\t\t/**\n\t\t\t\t\t * @event locationChanged\n\t\t\t\t\t * @deprecated\n\t\t\t\t\t * @type {object}\n\t\t\t\t\t * @property {number} index\n\t\t\t\t\t * @property {string} href\n\t\t\t\t\t * @property {EpubCFI} start\n\t\t\t\t\t * @property {EpubCFI} end\n\t\t\t\t\t * @property {number} percentage\n\t\t\t\t\t * @memberof Rendition\n\t\t\t\t\t */\n\t\t\t\t\tthis.emit(EVENTS.RENDITION.LOCATION_CHANGED, {\n\t\t\t\t\t\tindex: this.location.start.index,\n\t\t\t\t\t\thref: this.location.start.href,\n\t\t\t\t\t\tstart: this.location.start.cfi,\n\t\t\t\t\t\tend: this.location.end.cfi,\n\t\t\t\t\t\tpercentage: this.location.start.percentage\n\t\t\t\t\t});\n\n\t\t\t\t\t/**\n\t\t\t\t\t * @event relocated\n\t\t\t\t\t * @type {displayedLocation}\n\t\t\t\t\t * @memberof Rendition\n\t\t\t\t\t */\n\t\t\t\t\tthis.emit(EVENTS.RENDITION.RELOCATED, this.location);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t}.bind(this));\n\t}\n\n\t/**\n\t * Get the Current Location object\n\t * @return {displayedLocation | promise} location (may be a promise)\n\t */\n\tcurrentLocation(){\n\t\tvar location = this.manager.currentLocation();\n\t\tif (location && location.then && typeof location.then === \"function\") {\n\t\t\tlocation.then(function(result) {\n\t\t\t\tlet located = this.located(result);\n\t\t\t\treturn located;\n\t\t\t}.bind(this));\n\t\t} else if (location) {\n\t\t\tlet located = this.located(location);\n\t\t\treturn located;\n\t\t}\n\t}\n\n\t/**\n\t * Creates a Rendition#locationRange from location\n\t * passed by the Manager\n\t * @returns {displayedLocation}\n\t * @private\n\t */\n\tlocated(location){\n\t\tif (!location.length) {\n\t\t\treturn {};\n\t\t}\n\t\tlet start = location[0];\n\t\tlet end = location[location.length-1];\n\n\t\tlet located = {\n\t\t\tstart: {\n\t\t\t\tindex: start.index,\n\t\t\t\thref: start.href,\n\t\t\t\tcfi: start.mapping.start,\n\t\t\t\tdisplayed: {\n\t\t\t\t\tpage: start.pages[0] || 1,\n\t\t\t\t\ttotal: start.totalPages\n\t\t\t\t}\n\t\t\t},\n\t\t\tend: {\n\t\t\t\tindex: end.index,\n\t\t\t\thref: end.href,\n\t\t\t\tcfi: end.mapping.end,\n\t\t\t\tdisplayed: {\n\t\t\t\t\tpage: end.pages[end.pages.length-1] || 1,\n\t\t\t\t\ttotal: end.totalPages\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tlet locationStart = this.book.locations.locationFromCfi(start.mapping.start);\n\t\tlet locationEnd = this.book.locations.locationFromCfi(end.mapping.end);\n\n\t\tif (locationStart != null) {\n\t\t\tlocated.start.location = locationStart;\n\t\t\tlocated.start.percentage = this.book.locations.percentageFromLocation(locationStart);\n\t\t}\n\t\tif (locationEnd != null) {\n\t\t\tlocated.end.location = locationEnd;\n\t\t\tlocated.end.percentage = this.book.locations.percentageFromLocation(locationEnd);\n\t\t}\n\n\t\tlet pageStart = this.book.pageList.pageFromCfi(start.mapping.start);\n\t\tlet pageEnd = this.book.pageList.pageFromCfi(end.mapping.end);\n\n\t\tif (pageStart != -1) {\n\t\t\tlocated.start.page = pageStart;\n\t\t}\n\t\tif (pageEnd != -1) {\n\t\t\tlocated.end.page = pageEnd;\n\t\t}\n\n\t\tif (end.index === this.book.spine.last().index &&\n\t\t\t\tlocated.end.displayed.page >= located.end.displayed.total) {\n\t\t\tlocated.atEnd = true;\n\t\t}\n\n\t\tif (start.index === this.book.spine.first().index &&\n\t\t\t\tlocated.start.displayed.page === 1) {\n\t\t\tlocated.atStart = true;\n\t\t}\n\n\t\treturn located;\n\t}\n\n\t/**\n\t * Remove and Clean Up the Rendition\n\t */\n\tdestroy(){\n\t\t// Clear the queue\n\t\t// this.q.clear();\n\t\t// this.q = undefined;\n\n\t\tthis.manager && this.manager.destroy();\n\n\t\tthis.book = undefined;\n\n\t\t// this.views = null;\n\n\t\t// this.hooks.display.clear();\n\t\t// this.hooks.serialize.clear();\n\t\t// this.hooks.content.clear();\n\t\t// this.hooks.layout.clear();\n\t\t// this.hooks.render.clear();\n\t\t// this.hooks.show.clear();\n\t\t// this.hooks = {};\n\n\t\t// this.themes.destroy();\n\t\t// this.themes = undefined;\n\n\t\t// this.epubcfi = undefined;\n\n\t\t// this.starting = undefined;\n\t\t// this.started = undefined;\n\n\n\t}\n\n\t/**\n\t * Pass the events from a view's Contents\n\t * @private\n\t * @param  {Contents} view contents\n\t */\n\tpassEvents(contents){\n\t\tvar listenedEvents = Contents.listenedEvents;\n\n\t\tlistenedEvents.forEach((e) => {\n\t\t\tcontents.on(e, (ev) => this.triggerViewEvent(ev, contents));\n\t\t});\n\n\t\tcontents.on(EVENTS.CONTENTS.SELECTED, (e) => this.triggerSelectedEvent(e, contents));\n\t}\n\n\t/**\n\t * Emit events passed by a view\n\t * @private\n\t * @param  {event} e\n\t */\n\ttriggerViewEvent(e, contents){\n\t\tthis.emit(e.type, e, contents);\n\t}\n\n\t/**\n\t * Emit a selection event's CFI Range passed from a a view\n\t * @private\n\t * @param  {EpubCFI} cfirange\n\t */\n\ttriggerSelectedEvent(cfirange, contents){\n\t\t/**\n\t\t * Emit that a text selection has occured\n\t\t * @event selected\n\t\t * @param {EpubCFI} cfirange\n\t\t * @param {Contents} contents\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.emit(EVENTS.RENDITION.SELECTED, cfirange, contents);\n\t}\n\n\t/**\n\t * Emit a markClicked event with the cfiRange and data from a mark\n\t * @private\n\t * @param  {EpubCFI} cfirange\n\t */\n\ttriggerMarkEvent(cfiRange, data, contents){\n\t\t/**\n\t\t * Emit that a mark was clicked\n\t\t * @event markClicked\n\t\t * @param {EpubCFI} cfirange\n\t\t * @param {object} data\n\t\t * @param {Contents} contents\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.emit(EVENTS.RENDITION.MARK_CLICKED, cfiRange, data, contents);\n\t}\n\n\t/**\n\t * Get a Range from a Visible CFI\n\t * @param  {string} cfi EpubCfi String\n\t * @param  {string} ignoreClass\n\t * @return {range}\n\t */\n\tgetRange(cfi, ignoreClass){\n\t\tvar _cfi = new EpubCFI(cfi);\n\t\tvar found = this.manager.visible().filter(function (view) {\n\t\t\tif(_cfi.spinePos === view.index) return true;\n\t\t});\n\n\t\t// Should only every return 1 item\n\t\tif (found.length) {\n\t\t\treturn found[0].contents.range(_cfi, ignoreClass);\n\t\t}\n\t}\n\n\t/**\n\t * Hook to adjust images to fit in columns\n\t * @param  {Contents} contents\n\t * @private\n\t */\n\tadjustImages(contents) {\n\n\t\tif (this._layout.name === \"pre-paginated\") {\n\t\t\treturn new Promise(function(resolve){\n\t\t\t\tresolve();\n\t\t\t});\n\t\t}\n\n\t\tlet computed = contents.window.getComputedStyle(contents.content, null);\n\t\tlet height = contents.content.offsetHeight - (parseFloat(computed.paddingTop) + parseFloat(computed.paddingBottom));\n\n\t\tcontents.addStylesheetRules({\n\t\t\t\"img\" : {\n\t\t\t\t\"max-width\": (this._layout.columnWidth ? this._layout.columnWidth + \"px\" : \"100%\") + \"!important\",\n\t\t\t\t\"max-height\": height + \"px\" + \"!important\",\n\t\t\t\t\"object-fit\": \"contain\",\n\t\t\t\t\"page-break-inside\": \"avoid\",\n\t\t\t\t\"break-inside\": \"avoid\"\n\t\t\t},\n\t\t\t\"svg\" : {\n\t\t\t\t\"max-width\": (this._layout.columnWidth ? this._layout.columnWidth + \"px\" : \"100%\") + \"!important\",\n\t\t\t\t\"max-height\": height + \"px\" + \"!important\",\n\t\t\t\t\"page-break-inside\": \"avoid\",\n\t\t\t\t\"break-inside\": \"avoid\"\n\t\t\t}\n\t\t});\n\n\t\treturn new Promise(function(resolve, reject){\n\t\t\t// Wait to apply\n\t\t\tsetTimeout(function() {\n\t\t\t\tresolve();\n\t\t\t}, 1);\n\t\t});\n\t}\n\n\t/**\n\t * Get the Contents object of each rendered view\n\t * @returns {Contents[]}\n\t */\n\tgetContents () {\n\t\treturn this.manager ? this.manager.getContents() : [];\n\t}\n\n\t/**\n\t * Get the views member from the manager\n\t * @returns {Views}\n\t */\n\tviews () {\n\t\tlet views = this.manager ? this.manager.views : undefined;\n\t\treturn views || [];\n\t}\n\n\t/**\n\t * Hook to handle link clicks in rendered content\n\t * @param  {Contents} contents\n\t * @private\n\t */\n\thandleLinks(contents) {\n\t\tif (contents) {\n\t\t\tcontents.on(EVENTS.CONTENTS.LINK_CLICKED, (href) => {\n\t\t\t\tlet relative = this.book.path.relative(href);\n\t\t\t\tthis.display(relative);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Hook to handle injecting stylesheet before\n\t * a Section is serialized\n\t * @param  {document} doc\n\t * @param  {Section} section\n\t * @private\n\t */\n\tinjectStylesheet(doc, section) {\n\t\tlet style = doc.createElement(\"link\");\n\t\tstyle.setAttribute(\"type\", \"text/css\");\n\t\tstyle.setAttribute(\"rel\", \"stylesheet\");\n\t\tstyle.setAttribute(\"href\", this.settings.stylesheet);\n\t\tdoc.getElementsByTagName(\"head\")[0].appendChild(style);\n\t}\n\n\t/**\n\t * Hook to handle injecting scripts before\n\t * a Section is serialized\n\t * @param  {document} doc\n\t * @param  {Section} section\n\t * @private\n\t */\n\tinjectScript(doc, section) {\n\t\tlet script = doc.createElement(\"script\");\n\t\tscript.setAttribute(\"type\", \"text/javascript\");\n\t\tscript.setAttribute(\"src\", this.settings.script);\n\t\tscript.textContent = \" \"; // Needed to prevent self closing tag\n\t\tdoc.getElementsByTagName(\"head\")[0].appendChild(script);\n\t}\n\n\t/**\n\t * Hook to handle the document identifier before\n\t * a Section is serialized\n\t * @param  {document} doc\n\t * @param  {Section} section\n\t * @private\n\t */\n\tinjectIdentifier(doc, section) {\n\t\tlet ident = this.book.package.metadata.identifier;\n\t\tlet meta = doc.createElement(\"meta\");\n\t\tmeta.setAttribute(\"name\", \"dc.relation.ispartof\");\n\t\tif (ident) {\n\t\t\tmeta.setAttribute(\"content\", ident);\n\t\t}\n\t\tdoc.getElementsByTagName(\"head\")[0].appendChild(meta);\n\t}\n\n}\n\n//-- Enable binding events to Renderer\nEventEmitter(Rendition.prototype);\n\nexport default Rendition;\n","/* From https://github.com/webcomponents/URL/blob/master/url.js\n * Added UMD, file link handling */\n\n/* Any copyright is dedicated to the Public Domain.\n * http://creativecommons.org/publicdomain/zero/1.0/ */\n'use strict';\n(function (root, factory) {\n    // Fix for this being undefined in modules\n    if (!root) {\n      root = window || global;\n    }\n    if (typeof module === 'object' && module.exports) {\n        // Node\n        module.exports = factory(root);\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define([], factory);\n    } else {\n        // Browser globals (root is window)\n        root.URL = factory(root);\n  }\n}(this, function (scope) {\n  // feature detect for URL constructor\n  var hasWorkingUrl = false;\n  if (!scope.forceJURL) {\n    try {\n      var u = new URL('b', 'http://a');\n      u.pathname = 'c%20d';\n      hasWorkingUrl = u.href === 'http://a/c%20d';\n    } catch(e) {}\n  }\n\n  if (hasWorkingUrl)\n    return scope.URL;\n\n  var relative = Object.create(null);\n  relative['ftp'] = 21;\n  relative['file'] = 0;\n  relative['gopher'] = 70;\n  relative['http'] = 80;\n  relative['https'] = 443;\n  relative['ws'] = 80;\n  relative['wss'] = 443;\n\n  var relativePathDotMapping = Object.create(null);\n  relativePathDotMapping['%2e'] = '.';\n  relativePathDotMapping['.%2e'] = '..';\n  relativePathDotMapping['%2e.'] = '..';\n  relativePathDotMapping['%2e%2e'] = '..';\n\n  function isRelativeScheme(scheme) {\n    return relative[scheme] !== undefined;\n  }\n\n  function invalid() {\n    clear.call(this);\n    this._isInvalid = true;\n  }\n\n  function IDNAToASCII(h) {\n    if ('' == h) {\n      invalid.call(this)\n    }\n    // XXX\n    return h.toLowerCase()\n  }\n\n  function percentEscape(c) {\n    var unicode = c.charCodeAt(0);\n    if (unicode > 0x20 &&\n       unicode < 0x7F &&\n       // \" # < > ? `\n       [0x22, 0x23, 0x3C, 0x3E, 0x3F, 0x60].indexOf(unicode) == -1\n      ) {\n      return c;\n    }\n    return encodeURIComponent(c);\n  }\n\n  function percentEscapeQuery(c) {\n    // XXX This actually needs to encode c using encoding and then\n    // convert the bytes one-by-one.\n\n    var unicode = c.charCodeAt(0);\n    if (unicode > 0x20 &&\n       unicode < 0x7F &&\n       // \" # < > ` (do not escape '?')\n       [0x22, 0x23, 0x3C, 0x3E, 0x60].indexOf(unicode) == -1\n      ) {\n      return c;\n    }\n    return encodeURIComponent(c);\n  }\n\n  var EOF = undefined,\n      ALPHA = /[a-zA-Z]/,\n      ALPHANUMERIC = /[a-zA-Z0-9\\+\\-\\.]/;\n\n  function parse(input, stateOverride, base) {\n    function err(message) {\n      errors.push(message)\n    }\n\n    var state = stateOverride || 'scheme start',\n        cursor = 0,\n        buffer = '',\n        seenAt = false,\n        seenBracket = false,\n        errors = [];\n\n    loop: while ((input[cursor - 1] != EOF || cursor == 0) && !this._isInvalid) {\n      var c = input[cursor];\n      switch (state) {\n        case 'scheme start':\n          if (c && ALPHA.test(c)) {\n            buffer += c.toLowerCase(); // ASCII-safe\n            state = 'scheme';\n          } else if (!stateOverride) {\n            buffer = '';\n            state = 'no scheme';\n            continue;\n          } else {\n            err('Invalid scheme.');\n            break loop;\n          }\n          break;\n\n        case 'scheme':\n          if (c && ALPHANUMERIC.test(c)) {\n            buffer += c.toLowerCase(); // ASCII-safe\n          } else if (':' == c) {\n            this._scheme = buffer;\n            buffer = '';\n            if (stateOverride) {\n              break loop;\n            }\n            if (isRelativeScheme(this._scheme)) {\n              this._isRelative = true;\n            }\n            if ('file' == this._scheme) {\n              state = 'relative';\n            } else if (this._isRelative && base && base._scheme == this._scheme) {\n              state = 'relative or authority';\n            } else if (this._isRelative) {\n              state = 'authority first slash';\n            } else {\n              state = 'scheme data';\n            }\n          } else if (!stateOverride) {\n            buffer = '';\n            cursor = 0;\n            state = 'no scheme';\n            continue;\n          } else if (EOF == c) {\n            break loop;\n          } else {\n            err('Code point not allowed in scheme: ' + c)\n            break loop;\n          }\n          break;\n\n        case 'scheme data':\n          if ('?' == c) {\n            this._query = '?';\n            state = 'query';\n          } else if ('#' == c) {\n            this._fragment = '#';\n            state = 'fragment';\n          } else {\n            // XXX error handling\n            if (EOF != c && '\\t' != c && '\\n' != c && '\\r' != c) {\n              this._schemeData += percentEscape(c);\n            }\n          }\n          break;\n\n        case 'no scheme':\n          if (!base || !(isRelativeScheme(base._scheme))) {\n            err('Missing scheme.');\n            invalid.call(this);\n          } else {\n            state = 'relative';\n            continue;\n          }\n          break;\n\n        case 'relative or authority':\n          if ('/' == c && '/' == input[cursor+1]) {\n            state = 'authority ignore slashes';\n          } else {\n            err('Expected /, got: ' + c);\n            state = 'relative';\n            continue\n          }\n          break;\n\n        case 'relative':\n          this._isRelative = true;\n          if ('file' != this._scheme)\n            this._scheme = base._scheme;\n          if (EOF == c) {\n            this._host = base._host;\n            this._port = base._port;\n            this._path = base._path.slice();\n            this._query = base._query;\n            this._username = base._username;\n            this._password = base._password;\n            break loop;\n          } else if ('/' == c || '\\\\' == c) {\n            if ('\\\\' == c)\n              err('\\\\ is an invalid code point.');\n            state = 'relative slash';\n          } else if ('?' == c) {\n            this._host = base._host;\n            this._port = base._port;\n            this._path = base._path.slice();\n            this._query = '?';\n            this._username = base._username;\n            this._password = base._password;\n            state = 'query';\n          } else if ('#' == c) {\n            this._host = base._host;\n            this._port = base._port;\n            this._path = base._path.slice();\n            this._query = base._query;\n            this._fragment = '#';\n            this._username = base._username;\n            this._password = base._password;\n            state = 'fragment';\n          } else {\n            var nextC = input[cursor+1]\n            var nextNextC = input[cursor+2]\n            if (\n              'file' != this._scheme || !ALPHA.test(c) ||\n              (nextC != ':' && nextC != '|') ||\n              (EOF != nextNextC && '/' != nextNextC && '\\\\' != nextNextC && '?' != nextNextC && '#' != nextNextC)) {\n              this._host = base._host;\n              this._port = base._port;\n              this._username = base._username;\n              this._password = base._password;\n              this._path = base._path.slice();\n              this._path.pop();\n            }\n            state = 'relative path';\n            continue;\n          }\n          break;\n\n        case 'relative slash':\n          if ('/' == c || '\\\\' == c) {\n            if ('\\\\' == c) {\n              err('\\\\ is an invalid code point.');\n            }\n            if ('file' == this._scheme) {\n              state = 'file host';\n            } else {\n              state = 'authority ignore slashes';\n            }\n          } else {\n            if ('file' != this._scheme) {\n              this._host = base._host;\n              this._port = base._port;\n              this._username = base._username;\n              this._password = base._password;\n            }\n            state = 'relative path';\n            continue;\n          }\n          break;\n\n        case 'authority first slash':\n          if ('/' == c) {\n            state = 'authority second slash';\n          } else {\n            err(\"Expected '/', got: \" + c);\n            state = 'authority ignore slashes';\n            continue;\n          }\n          break;\n\n        case 'authority second slash':\n          state = 'authority ignore slashes';\n          if ('/' != c) {\n            err(\"Expected '/', got: \" + c);\n            continue;\n          }\n          break;\n\n        case 'authority ignore slashes':\n          if ('/' != c && '\\\\' != c) {\n            state = 'authority';\n            continue;\n          } else {\n            err('Expected authority, got: ' + c);\n          }\n          break;\n\n        case 'authority':\n          if ('@' == c) {\n            if (seenAt) {\n              err('@ already seen.');\n              buffer += '%40';\n            }\n            seenAt = true;\n            for (var i = 0; i < buffer.length; i++) {\n              var cp = buffer[i];\n              if ('\\t' == cp || '\\n' == cp || '\\r' == cp) {\n                err('Invalid whitespace in authority.');\n                continue;\n              }\n              // XXX check URL code points\n              if (':' == cp && null === this._password) {\n                this._password = '';\n                continue;\n              }\n              var tempC = percentEscape(cp);\n              (null !== this._password) ? this._password += tempC : this._username += tempC;\n            }\n            buffer = '';\n          } else if (EOF == c || '/' == c || '\\\\' == c || '?' == c || '#' == c) {\n            cursor -= buffer.length;\n            buffer = '';\n            state = 'host';\n            continue;\n          } else {\n            buffer += c;\n          }\n          break;\n\n        case 'file host':\n          if (EOF == c || '/' == c || '\\\\' == c || '?' == c || '#' == c) {\n            if (buffer.length == 2 && ALPHA.test(buffer[0]) && (buffer[1] == ':' || buffer[1] == '|')) {\n              state = 'relative path';\n            } else if (buffer.length == 0) {\n              state = 'relative path start';\n            } else {\n              this._host = IDNAToASCII.call(this, buffer);\n              buffer = '';\n              state = 'relative path start';\n            }\n            continue;\n          } else if ('\\t' == c || '\\n' == c || '\\r' == c) {\n            err('Invalid whitespace in file host.');\n          } else {\n            buffer += c;\n          }\n          break;\n\n        case 'host':\n        case 'hostname':\n          if (':' == c && !seenBracket) {\n            // XXX host parsing\n            this._host = IDNAToASCII.call(this, buffer);\n            buffer = '';\n            state = 'port';\n            if ('hostname' == stateOverride) {\n              break loop;\n            }\n          } else if (EOF == c || '/' == c || '\\\\' == c || '?' == c || '#' == c) {\n            this._host = IDNAToASCII.call(this, buffer);\n            buffer = '';\n            state = 'relative path start';\n            if (stateOverride) {\n              break loop;\n            }\n            continue;\n          } else if ('\\t' != c && '\\n' != c && '\\r' != c) {\n            if ('[' == c) {\n              seenBracket = true;\n            } else if (']' == c) {\n              seenBracket = false;\n            }\n            buffer += c;\n          } else {\n            err('Invalid code point in host/hostname: ' + c);\n          }\n          break;\n\n        case 'port':\n          if (/[0-9]/.test(c)) {\n            buffer += c;\n          } else if (EOF == c || '/' == c || '\\\\' == c || '?' == c || '#' == c || stateOverride) {\n            if ('' != buffer) {\n              var temp = parseInt(buffer, 10);\n              if (temp != relative[this._scheme]) {\n                this._port = temp + '';\n              }\n              buffer = '';\n            }\n            if (stateOverride) {\n              break loop;\n            }\n            state = 'relative path start';\n            continue;\n          } else if ('\\t' == c || '\\n' == c || '\\r' == c) {\n            err('Invalid code point in port: ' + c);\n          } else {\n            invalid.call(this);\n          }\n          break;\n\n        case 'relative path start':\n          if ('\\\\' == c)\n            err(\"'\\\\' not allowed in path.\");\n          state = 'relative path';\n          if ('/' != c && '\\\\' != c) {\n            continue;\n          }\n          break;\n\n        case 'relative path':\n          if (EOF == c || '/' == c || '\\\\' == c || (!stateOverride && ('?' == c || '#' == c))) {\n            if ('\\\\' == c) {\n              err('\\\\ not allowed in relative path.');\n            }\n            var tmp;\n            if (tmp = relativePathDotMapping[buffer.toLowerCase()]) {\n              buffer = tmp;\n            }\n            if ('..' == buffer) {\n              this._path.pop();\n              if ('/' != c && '\\\\' != c) {\n                this._path.push('');\n              }\n            } else if ('.' == buffer && '/' != c && '\\\\' != c) {\n              this._path.push('');\n            } else if ('.' != buffer) {\n              if ('file' == this._scheme && this._path.length == 0 && buffer.length == 2 && ALPHA.test(buffer[0]) && buffer[1] == '|') {\n                buffer = buffer[0] + ':';\n              }\n              this._path.push(buffer);\n            }\n            buffer = '';\n            if ('?' == c) {\n              this._query = '?';\n              state = 'query';\n            } else if ('#' == c) {\n              this._fragment = '#';\n              state = 'fragment';\n            }\n          } else if ('\\t' != c && '\\n' != c && '\\r' != c) {\n            buffer += percentEscape(c);\n          }\n          break;\n\n        case 'query':\n          if (!stateOverride && '#' == c) {\n            this._fragment = '#';\n            state = 'fragment';\n          } else if (EOF != c && '\\t' != c && '\\n' != c && '\\r' != c) {\n            this._query += percentEscapeQuery(c);\n          }\n          break;\n\n        case 'fragment':\n          if (EOF != c && '\\t' != c && '\\n' != c && '\\r' != c) {\n            this._fragment += c;\n          }\n          break;\n      }\n\n      cursor++;\n    }\n  }\n\n  function clear() {\n    this._scheme = '';\n    this._schemeData = '';\n    this._username = '';\n    this._password = null;\n    this._host = '';\n    this._port = '';\n    this._path = [];\n    this._query = '';\n    this._fragment = '';\n    this._isInvalid = false;\n    this._isRelative = false;\n  }\n\n  // Does not process domain names or IP addresses.\n  // Does not handle encoding for the query parameter.\n  function jURL(url, base /* , encoding */) {\n    if (base !== undefined && !(base instanceof jURL))\n      base = new jURL(String(base));\n\n    this._url = url;\n    clear.call(this);\n\n    var input = url.replace(/^[ \\t\\r\\n\\f]+|[ \\t\\r\\n\\f]+$/g, '');\n    // encoding = encoding || 'utf-8'\n\n    parse.call(this, input, null, base);\n  }\n\n  jURL.prototype = {\n    toString: function() {\n      return this.href;\n    },\n    get href() {\n      if (this._isInvalid)\n        return this._url;\n\n      var authority = '';\n      if ('' != this._username || null != this._password) {\n        authority = this._username +\n            (null != this._password ? ':' + this._password : '') + '@';\n      }\n\n      return this.protocol +\n          (this._isRelative ? '//' + authority + this.host : '') +\n          this.pathname + this._query + this._fragment;\n    },\n    set href(href) {\n      clear.call(this);\n      parse.call(this, href);\n    },\n\n    get protocol() {\n      return this._scheme + ':';\n    },\n    set protocol(protocol) {\n      if (this._isInvalid)\n        return;\n      parse.call(this, protocol + ':', 'scheme start');\n    },\n\n    get host() {\n      return this._isInvalid ? '' : this._port ?\n          this._host + ':' + this._port : this._host;\n    },\n    set host(host) {\n      if (this._isInvalid || !this._isRelative)\n        return;\n      parse.call(this, host, 'host');\n    },\n\n    get hostname() {\n      return this._host;\n    },\n    set hostname(hostname) {\n      if (this._isInvalid || !this._isRelative)\n        return;\n      parse.call(this, hostname, 'hostname');\n    },\n\n    get port() {\n      return this._port;\n    },\n    set port(port) {\n      if (this._isInvalid || !this._isRelative)\n        return;\n      parse.call(this, port, 'port');\n    },\n\n    get pathname() {\n      return this._isInvalid ? '' : this._isRelative ?\n          '/' + this._path.join('/') : this._schemeData;\n    },\n    set pathname(pathname) {\n      if (this._isInvalid || !this._isRelative)\n        return;\n      this._path = [];\n      parse.call(this, pathname, 'relative path start');\n    },\n\n    get search() {\n      return this._isInvalid || !this._query || '?' == this._query ?\n          '' : this._query;\n    },\n    set search(search) {\n      if (this._isInvalid || !this._isRelative)\n        return;\n      this._query = '?';\n      if ('?' == search[0])\n        search = search.slice(1);\n      parse.call(this, search, 'query');\n    },\n\n    get hash() {\n      return this._isInvalid || !this._fragment || '#' == this._fragment ?\n          '' : this._fragment;\n    },\n    set hash(hash) {\n      if (this._isInvalid)\n        return;\n      this._fragment = '#';\n      if ('#' == hash[0])\n        hash = hash.slice(1);\n      parse.call(this, hash, 'fragment');\n    },\n\n    get origin() {\n      var host;\n      if (this._isInvalid || !this._scheme) {\n        return '';\n      }\n      // javascript: Gecko returns String(\"\"), WebKit/Blink String(\"null\")\n      // Gecko throws error for \"data://\"\n      // data: Gecko returns \"\", Blink returns \"data://\", WebKit returns \"null\"\n      // Gecko returns String(\"\") for file: mailto:\n      // WebKit/Blink returns String(\"SCHEME://\") for file: mailto:\n      switch (this._scheme) {\n        case 'file':\n          return 'file://' // EPUBJS Added\n        case 'data':\n        case 'javascript':\n        case 'mailto':\n          return 'null';\n      }\n      host = this.host;\n      if (!host) {\n        return '';\n      }\n      return this._scheme + '://' + host;\n    }\n  };\n\n  // Copy over the static methods\n  var OriginalURL = scope.URL;\n  if (OriginalURL) {\n    jURL.createObjectURL = function(blob) {\n      // IE extension allows a second optional options argument.\n      // http://msdn.microsoft.com/en-us/library/ie/hh772302(v=vs.85).aspx\n      return OriginalURL.createObjectURL.apply(OriginalURL, arguments);\n    };\n    jURL.revokeObjectURL = function(url) {\n      OriginalURL.revokeObjectURL(url);\n    };\n  }\n\n  return jURL;\n}));\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","'use strict';\nvar $ = require('../internals/export');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar nativeJoin = [].join;\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return nativeJoin.call(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n","/*\n From Zip.js, by Gildas Lormeau\nedited down\n */\n\nvar table = {\n\t\"application\" : {\n\t\t\"ecmascript\" : [ \"es\", \"ecma\" ],\n\t\t\"javascript\" : \"js\",\n\t\t\"ogg\" : \"ogx\",\n\t\t\"pdf\" : \"pdf\",\n\t\t\"postscript\" : [ \"ps\", \"ai\", \"eps\", \"epsi\", \"epsf\", \"eps2\", \"eps3\" ],\n\t\t\"rdf+xml\" : \"rdf\",\n\t\t\"smil\" : [ \"smi\", \"smil\" ],\n\t\t\"xhtml+xml\" : [ \"xhtml\", \"xht\" ],\n\t\t\"xml\" : [ \"xml\", \"xsl\", \"xsd\", \"opf\", \"ncx\" ],\n\t\t\"zip\" : \"zip\",\n\t\t\"x-httpd-eruby\" : \"rhtml\",\n\t\t\"x-latex\" : \"latex\",\n\t\t\"x-maker\" : [ \"frm\", \"maker\", \"frame\", \"fm\", \"fb\", \"book\", \"fbdoc\" ],\n\t\t\"x-object\" : \"o\",\n\t\t\"x-shockwave-flash\" : [ \"swf\", \"swfl\" ],\n\t\t\"x-silverlight\" : \"scr\",\n\t\t\"epub+zip\" : \"epub\",\n\t\t\"font-tdpfr\" : \"pfr\",\n\t\t\"inkml+xml\" : [ \"ink\", \"inkml\" ],\n\t\t\"json\" : \"json\",\n\t\t\"jsonml+json\" : \"jsonml\",\n\t\t\"mathml+xml\" : \"mathml\",\n\t\t\"metalink+xml\" : \"metalink\",\n\t\t\"mp4\" : \"mp4s\",\n\t\t// \"oebps-package+xml\" : \"opf\",\n\t\t\"omdoc+xml\" : \"omdoc\",\n\t\t\"oxps\" : \"oxps\",\n\t\t\"vnd.amazon.ebook\" : \"azw\",\n\t\t\"widget\" : \"wgt\",\n\t\t// \"x-dtbncx+xml\" : \"ncx\",\n\t\t\"x-dtbook+xml\" : \"dtb\",\n\t\t\"x-dtbresource+xml\" : \"res\",\n\t\t\"x-font-bdf\" : \"bdf\",\n\t\t\"x-font-ghostscript\" : \"gsf\",\n\t\t\"x-font-linux-psf\" : \"psf\",\n\t\t\"x-font-otf\" : \"otf\",\n\t\t\"x-font-pcf\" : \"pcf\",\n\t\t\"x-font-snf\" : \"snf\",\n\t\t\"x-font-ttf\" : [ \"ttf\", \"ttc\" ],\n\t\t\"x-font-type1\" : [ \"pfa\", \"pfb\", \"pfm\", \"afm\" ],\n\t\t\"x-font-woff\" : \"woff\",\n\t\t\"x-mobipocket-ebook\" : [ \"prc\", \"mobi\" ],\n\t\t\"x-mspublisher\" : \"pub\",\n\t\t\"x-nzb\" : \"nzb\",\n\t\t\"x-tgif\" : \"obj\",\n\t\t\"xaml+xml\" : \"xaml\",\n\t\t\"xml-dtd\" : \"dtd\",\n\t\t\"xproc+xml\" : \"xpl\",\n\t\t\"xslt+xml\" : \"xslt\",\n\t\t\"internet-property-stream\" : \"acx\",\n\t\t\"x-compress\" : \"z\",\n\t\t\"x-compressed\" : \"tgz\",\n\t\t\"x-gzip\" : \"gz\",\n\t},\n\t\"audio\" : {\n\t\t\"flac\" : \"flac\",\n\t\t\"midi\" : [ \"mid\", \"midi\", \"kar\", \"rmi\" ],\n\t\t\"mpeg\" : [ \"mpga\", \"mpega\", \"mp2\", \"mp3\", \"m4a\", \"mp2a\", \"m2a\", \"m3a\" ],\n\t\t\"mpegurl\" : \"m3u\",\n\t\t\"ogg\" : [ \"oga\", \"ogg\", \"spx\" ],\n\t\t\"x-aiff\" : [ \"aif\", \"aiff\", \"aifc\" ],\n\t\t\"x-ms-wma\" : \"wma\",\n\t\t\"x-wav\" : \"wav\",\n\t\t\"adpcm\" : \"adp\",\n\t\t\"mp4\" : \"mp4a\",\n\t\t\"webm\" : \"weba\",\n\t\t\"x-aac\" : \"aac\",\n\t\t\"x-caf\" : \"caf\",\n\t\t\"x-matroska\" : \"mka\",\n\t\t\"x-pn-realaudio-plugin\" : \"rmp\",\n\t\t\"xm\" : \"xm\",\n\t\t\"mid\" : [ \"mid\", \"rmi\" ]\n\t},\n\t\"image\" : {\n\t\t\"gif\" : \"gif\",\n\t\t\"ief\" : \"ief\",\n\t\t\"jpeg\" : [ \"jpeg\", \"jpg\", \"jpe\" ],\n\t\t\"pcx\" : \"pcx\",\n\t\t\"png\" : \"png\",\n\t\t\"svg+xml\" : [ \"svg\", \"svgz\" ],\n\t\t\"tiff\" : [ \"tiff\", \"tif\" ],\n\t\t\"x-icon\" : \"ico\",\n\t\t\"bmp\" : \"bmp\",\n\t\t\"webp\" : \"webp\",\n\t\t\"x-pict\" : [ \"pic\", \"pct\" ],\n\t\t\"x-tga\" : \"tga\",\n\t\t\"cis-cod\" : \"cod\"\n\t},\n\t\"text\" : {\n\t\t\"cache-manifest\" : [ \"manifest\", \"appcache\" ],\n\t\t\"css\" : \"css\",\n\t\t\"csv\" : \"csv\",\n\t\t\"html\" : [ \"html\", \"htm\", \"shtml\", \"stm\" ],\n\t\t\"mathml\" : \"mml\",\n\t\t\"plain\" : [ \"txt\", \"text\", \"brf\", \"conf\", \"def\", \"list\", \"log\", \"in\", \"bas\" ],\n\t\t\"richtext\" : \"rtx\",\n\t\t\"tab-separated-values\" : \"tsv\",\n\t\t\"x-bibtex\" : \"bib\"\n\t},\n\t\"video\" : {\n\t\t\"mpeg\" : [ \"mpeg\", \"mpg\", \"mpe\", \"m1v\", \"m2v\", \"mp2\", \"mpa\", \"mpv2\" ],\n\t\t\"mp4\" : [ \"mp4\", \"mp4v\", \"mpg4\" ],\n\t\t\"quicktime\" : [ \"qt\", \"mov\" ],\n\t\t\"ogg\" : \"ogv\",\n\t\t\"vnd.mpegurl\" : [ \"mxu\", \"m4u\" ],\n\t\t\"x-flv\" : \"flv\",\n\t\t\"x-la-asf\" : [ \"lsf\", \"lsx\" ],\n\t\t\"x-mng\" : \"mng\",\n\t\t\"x-ms-asf\" : [ \"asf\", \"asx\", \"asr\" ],\n\t\t\"x-ms-wm\" : \"wm\",\n\t\t\"x-ms-wmv\" : \"wmv\",\n\t\t\"x-ms-wmx\" : \"wmx\",\n\t\t\"x-ms-wvx\" : \"wvx\",\n\t\t\"x-msvideo\" : \"avi\",\n\t\t\"x-sgi-movie\" : \"movie\",\n\t\t\"x-matroska\" : [ \"mpv\", \"mkv\", \"mk3d\", \"mks\" ],\n\t\t\"3gpp2\" : \"3g2\",\n\t\t\"h261\" : \"h261\",\n\t\t\"h263\" : \"h263\",\n\t\t\"h264\" : \"h264\",\n\t\t\"jpeg\" : \"jpgv\",\n\t\t\"jpm\" : [ \"jpm\", \"jpgm\" ],\n\t\t\"mj2\" : [ \"mj2\", \"mjp2\" ],\n\t\t\"vnd.ms-playready.media.pyv\" : \"pyv\",\n\t\t\"vnd.uvvu.mp4\" : [ \"uvu\", \"uvvu\" ],\n\t\t\"vnd.vivo\" : \"viv\",\n\t\t\"webm\" : \"webm\",\n\t\t\"x-f4v\" : \"f4v\",\n\t\t\"x-m4v\" : \"m4v\",\n\t\t\"x-ms-vob\" : \"vob\",\n\t\t\"x-smv\" : \"smv\"\n\t}\n};\n\nvar mimeTypes = (function() {\n\tvar type, subtype, val, index, mimeTypes = {};\n\tfor (type in table) {\n\t\tif (table.hasOwnProperty(type)) {\n\t\t\tfor (subtype in table[type]) {\n\t\t\t\tif (table[type].hasOwnProperty(subtype)) {\n\t\t\t\t\tval = table[type][subtype];\n\t\t\t\t\tif (typeof val == \"string\") {\n\t\t\t\t\t\tmimeTypes[val] = type + \"/\" + subtype;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor (index = 0; index < val.length; index++) {\n\t\t\t\t\t\t\tmimeTypes[val[index]] = type + \"/\" + subtype;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn mimeTypes;\n})();\n\nvar defaultValue = \"text/plain\";//\"application/octet-stream\";\n\nfunction lookup(filename) {\n\treturn filename && mimeTypes[filename.split(\".\").pop().toLowerCase()] || defaultValue;\n};\n\nmodule.exports = {\n\t'lookup': lookup\n}\n","import { defer } from \"./utils/core\";\nimport EpubCFI from \"./epubcfi\";\nimport Hook from \"./utils/hook\";\nimport { sprint } from \"./utils/core\";\nimport { replaceBase } from \"./utils/replacements\";\n\n/**\n * Represents a Section of the Book\n *\n * In most books this is equivelent to a Chapter\n * @param {object} item  The spine item representing the section\n * @param {object} hooks hooks for serialize and content\n */\nclass Section {\n\tconstructor(item, hooks){\n\t\tthis.idref = item.idref;\n\t\tthis.linear = item.linear === \"yes\";\n\t\tthis.properties = item.properties;\n\t\tthis.index = item.index;\n\t\tthis.href = item.href;\n\t\tthis.url = item.url;\n\t\tthis.canonical = item.canonical;\n\t\tthis.next = item.next;\n\t\tthis.prev = item.prev;\n\n\t\tthis.cfiBase = item.cfiBase;\n\n\t\tif (hooks) {\n\t\t\tthis.hooks = hooks;\n\t\t} else {\n\t\t\tthis.hooks = {};\n\t\t\tthis.hooks.serialize = new Hook(this);\n\t\t\tthis.hooks.content = new Hook(this);\n\t\t}\n\n\t\tthis.document = undefined;\n\t\tthis.contents = undefined;\n\t\tthis.output = undefined;\n\t}\n\n\t/**\n\t * Load the section from its url\n\t * @param  {method} [_request] a request method to use for loading\n\t * @return {document} a promise with the xml document\n\t */\n\tload(_request){\n\t\tvar request = _request || this.request || require(\"./utils/request\");\n\t\tvar loading = new defer();\n\t\tvar loaded = loading.promise;\n\n\t\tif(this.contents) {\n\t\t\tloading.resolve(this.contents);\n\t\t} else {\n\t\t\trequest(this.url)\n\t\t\t\t.then(function(xml){\n\t\t\t\t\t// var directory = new Url(this.url).directory;\n\n\t\t\t\t\tthis.document = xml;\n\t\t\t\t\tthis.contents = xml.documentElement;\n\n\t\t\t\t\treturn this.hooks.content.trigger(this.document, this);\n\t\t\t\t}.bind(this))\n\t\t\t\t.then(function(){\n\t\t\t\t\tloading.resolve(this.contents);\n\t\t\t\t}.bind(this))\n\t\t\t\t.catch(function(error){\n\t\t\t\t\tloading.reject(error);\n\t\t\t\t});\n\t\t}\n\n\t\treturn loaded;\n\t}\n\n\t/**\n\t * Adds a base tag for resolving urls in the section\n\t * @private\n\t */\n\tbase(){\n\t\treturn replaceBase(this.document, this);\n\t}\n\n\t/**\n\t * Render the contents of a section\n\t * @param  {method} [_request] a request method to use for loading\n\t * @return {string} output a serialized XML Document\n\t */\n\trender(_request){\n\t\tvar rendering = new defer();\n\t\tvar rendered = rendering.promise;\n\t\tthis.output; // TODO: better way to return this from hooks?\n\n\t\tthis.load(_request).\n\t\t\tthen(function(contents){\n\t\t\t\tvar userAgent = (typeof navigator !== 'undefined' && navigator.userAgent) || '';\n\t\t\t\tvar isIE = userAgent.indexOf('Trident') >= 0;\n\t\t\t\tvar Serializer;\n\t\t\t\tif (typeof XMLSerializer === \"undefined\" || isIE) {\n\t\t\t\t\tSerializer = require(\"xmldom\").XMLSerializer;\n\t\t\t\t} else {\n\t\t\t\t\tSerializer = XMLSerializer;\n\t\t\t\t}\n\t\t\t\tvar serializer = new Serializer();\n\t\t\t\tthis.output = serializer.serializeToString(contents);\n\t\t\t\treturn this.output;\n\t\t\t}.bind(this)).\n\t\t\tthen(function(){\n\t\t\t\treturn this.hooks.serialize.trigger(this.output, this);\n\t\t\t}.bind(this)).\n\t\t\tthen(function(){\n\t\t\t\trendering.resolve(this.output);\n\t\t\t}.bind(this))\n\t\t\t.catch(function(error){\n\t\t\t\trendering.reject(error);\n\t\t\t});\n\n\t\treturn rendered;\n\t}\n\n\t/**\n\t * Find a string in a section\n\t * @param  {string} _query The query string to find\n\t * @return {object[]} A list of matches, with form {cfi, excerpt}\n\t */\n\tfind(_query){\n\t\tvar section = this;\n\t\tvar matches = [];\n\t\tvar query = _query.toLowerCase();\n\t\tvar find = function(node){\n\t\t\tvar text = node.textContent.toLowerCase();\n\t\t\tvar range = section.document.createRange();\n\t\t\tvar cfi;\n\t\t\tvar pos;\n\t\t\tvar last = -1;\n\t\t\tvar excerpt;\n\t\t\tvar limit = 150;\n\n\t\t\twhile (pos != -1) {\n\t\t\t\t// Search for the query\n\t\t\t\tpos = text.indexOf(query, last + 1);\n\n\t\t\t\tif (pos != -1) {\n\t\t\t\t\t// We found it! Generate a CFI\n\t\t\t\t\trange = section.document.createRange();\n\t\t\t\t\trange.setStart(node, pos);\n\t\t\t\t\trange.setEnd(node, pos + query.length);\n\n\t\t\t\t\tcfi = section.cfiFromRange(range);\n\n\t\t\t\t\t// Generate the excerpt\n\t\t\t\t\tif (node.textContent.length < limit) {\n\t\t\t\t\t\texcerpt = node.textContent;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\texcerpt = node.textContent.substring(pos - limit/2, pos + limit/2);\n\t\t\t\t\t\texcerpt = \"...\" + excerpt + \"...\";\n\t\t\t\t\t}\n\n\t\t\t\t\t// Add the CFI to the matches list\n\t\t\t\t\tmatches.push({\n\t\t\t\t\t\tcfi: cfi,\n\t\t\t\t\t\texcerpt: excerpt\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tlast = pos;\n\t\t\t}\n\t\t};\n\n\t\tsprint(section.document, function(node) {\n\t\t\tfind(node);\n\t\t});\n\n\t\treturn matches;\n\t};\n\n\t/**\n\t* Reconciles the current chapters layout properies with\n\t* the global layout properities.\n\t* @param {object} globalLayout  The global layout settings object, chapter properties string\n\t* @return {object} layoutProperties Object with layout properties\n\t*/\n\treconcileLayoutSettings(globalLayout){\n\t\t//-- Get the global defaults\n\t\tvar settings = {\n\t\t\tlayout : globalLayout.layout,\n\t\t\tspread : globalLayout.spread,\n\t\t\torientation : globalLayout.orientation\n\t\t};\n\n\t\t//-- Get the chapter's display type\n\t\tthis.properties.forEach(function(prop){\n\t\t\tvar rendition = prop.replace(\"rendition:\", \"\");\n\t\t\tvar split = rendition.indexOf(\"-\");\n\t\t\tvar property, value;\n\n\t\t\tif(split != -1){\n\t\t\t\tproperty = rendition.slice(0, split);\n\t\t\t\tvalue = rendition.slice(split+1);\n\n\t\t\t\tsettings[property] = value;\n\t\t\t}\n\t\t});\n\t\treturn settings;\n\t}\n\n\t/**\n\t * Get a CFI from a Range in the Section\n\t * @param  {range} _range\n\t * @return {string} cfi an EpubCFI string\n\t */\n\tcfiFromRange(_range) {\n\t\treturn new EpubCFI(_range, this.cfiBase).toString();\n\t}\n\n\t/**\n\t * Get a CFI from an Element in the Section\n\t * @param  {element} el\n\t * @return {string} cfi an EpubCFI string\n\t */\n\tcfiFromElement(el) {\n\t\treturn new EpubCFI(el, this.cfiBase).toString();\n\t}\n\n\t/**\n\t * Unload the section document\n\t */\n\tunload() {\n\t\tthis.document = undefined;\n\t\tthis.contents = undefined;\n\t\tthis.output = undefined;\n\t}\n\n\tdestroy() {\n\t\tthis.unload();\n\t\tthis.hooks.serialize.clear();\n\t\tthis.hooks.content.clear();\n\n\t\tthis.hooks = undefined;\n\t\tthis.idref = undefined;\n\t\tthis.linear = undefined;\n\t\tthis.properties = undefined;\n\t\tthis.index = undefined;\n\t\tthis.href = undefined;\n\t\tthis.url = undefined;\n\t\tthis.next = undefined;\n\t\tthis.prev = undefined;\n\n\t\tthis.cfiBase = undefined;\n\t}\n}\n\nexport default Section;\n","import EpubCFI from \"./epubcfi\";\nimport Hook from \"./utils/hook\";\nimport Section from \"./section\";\nimport {replaceBase, replaceCanonical, replaceMeta} from \"./utils/replacements\";\n\n/**\n * A collection of Spine Items\n */\nclass Spine {\n\tconstructor() {\n\t\tthis.spineItems = [];\n\t\tthis.spineByHref = {};\n\t\tthis.spineById = {};\n\n\t\tthis.hooks = {};\n\t\tthis.hooks.serialize = new Hook();\n\t\tthis.hooks.content = new Hook();\n\n\t\t// Register replacements\n\t\tthis.hooks.content.register(replaceBase);\n\t\tthis.hooks.content.register(replaceCanonical);\n\t\tthis.hooks.content.register(replaceMeta);\n\n\t\tthis.epubcfi = new EpubCFI();\n\n\t\tthis.loaded = false;\n\n\t\tthis.items = undefined;\n\t\tthis.manifest = undefined;\n\t\tthis.spineNodeIndex = undefined;\n\t\tthis.baseUrl = undefined;\n\t\tthis.length = undefined;\n\t}\n\n\t/**\n\t * Unpack items from a opf into spine items\n\t * @param  {Packaging} _package\n\t * @param  {method} resolver URL resolver\n\t * @param  {method} canonical Resolve canonical url\n\t */\n\tunpack(_package, resolver, canonical) {\n\n\t\tthis.items = _package.spine;\n\t\tthis.manifest = _package.manifest;\n\t\tthis.spineNodeIndex = _package.spineNodeIndex;\n\t\tthis.baseUrl = _package.baseUrl || _package.basePath || \"\";\n\t\tthis.length = this.items.length;\n\n\t\tthis.items.forEach( (item, index) => {\n\t\t\tvar manifestItem = this.manifest[item.idref];\n\t\t\tvar spineItem;\n\n\t\t\titem.index = index;\n\t\t\titem.cfiBase = this.epubcfi.generateChapterComponent(this.spineNodeIndex, item.index, item.idref);\n\n\t\t\tif (item.href) {\n\t\t\t\titem.url = resolver(item.href, true);\n\t\t\t\titem.canonical = canonical(item.href);\n\t\t\t}\n\n\t\t\tif(manifestItem) {\n\t\t\t\titem.href = manifestItem.href;\n\t\t\t\titem.url = resolver(item.href, true);\n\t\t\t\titem.canonical = canonical(item.href);\n\n\t\t\t\tif(manifestItem.properties.length){\n\t\t\t\t\titem.properties.push.apply(item.properties, manifestItem.properties);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (item.linear === \"yes\") {\n\t\t\t\titem.prev = function() {\n\t\t\t\t\tlet prevIndex = item.index;\n\t\t\t\t\twhile (prevIndex > 0) {\n\t\t\t\t\t\tlet prev = this.get(prevIndex-1);\n\t\t\t\t\t\tif (prev && prev.linear) {\n\t\t\t\t\t\t\treturn prev;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tprevIndex -= 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}.bind(this);\n\t\t\t\titem.next = function() {\n\t\t\t\t\tlet nextIndex = item.index;\n\t\t\t\t\twhile (nextIndex < this.spineItems.length-1) {\n\t\t\t\t\t\tlet next = this.get(nextIndex+1);\n\t\t\t\t\t\tif (next && next.linear) {\n\t\t\t\t\t\t\treturn next;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnextIndex += 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}.bind(this);\n\t\t\t} else {\n\t\t\t\titem.prev = function() {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\titem.next = function() {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\tspineItem = new Section(item, this.hooks);\n\n\t\t\tthis.append(spineItem);\n\n\n\t\t});\n\n\t\tthis.loaded = true;\n\t}\n\n\t/**\n\t * Get an item from the spine\n\t * @param  {string|number} [target]\n\t * @return {Section} section\n\t * @example spine.get();\n\t * @example spine.get(1);\n\t * @example spine.get(\"chap1.html\");\n\t * @example spine.get(\"#id1234\");\n\t */\n\tget(target) {\n\t\tvar index = 0;\n\n\t\tif (typeof target === \"undefined\") {\n\t\t\twhile (index < this.spineItems.length) {\n\t\t\t\tlet next = this.spineItems[index];\n\t\t\t\tif (next && next.linear) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tindex += 1;\n\t\t\t}\n\t\t} else if(this.epubcfi.isCfiString(target)) {\n\t\t\tlet cfi = new EpubCFI(target);\n\t\t\tindex = cfi.spinePos;\n\t\t} else if(typeof target === \"number\" || isNaN(target) === false){\n\t\t\tindex = target;\n\t\t} else if(typeof target === \"string\" && target.indexOf(\"#\") === 0) {\n\t\t\tindex = this.spineById[target.substring(1)];\n\t\t} else if(typeof target === \"string\") {\n\t\t\t// Remove fragments\n\t\t\ttarget = target.split(\"#\")[0];\n\t\t\tindex = this.spineByHref[target] || this.spineByHref[encodeURI(target)];\n\t\t}\n\n\t\treturn this.spineItems[index] || null;\n\t}\n\n\t/**\n\t * Append a Section to the Spine\n\t * @private\n\t * @param  {Section} section\n\t */\n\tappend(section) {\n\t\tvar index = this.spineItems.length;\n\t\tsection.index = index;\n\n\t\tthis.spineItems.push(section);\n\n\t\t// Encode and Decode href lookups\n\t\t// see pr for details: https://github.com/futurepress/epub.js/pull/358\n\t\tthis.spineByHref[decodeURI(section.href)] = index;\n\t\tthis.spineByHref[encodeURI(section.href)] = index;\n\t\tthis.spineByHref[section.href] = index;\n\n\t\tthis.spineById[section.idref] = index;\n\n\t\treturn index;\n\t}\n\n\t/**\n\t * Prepend a Section to the Spine\n\t * @private\n\t * @param  {Section} section\n\t */\n\tprepend(section) {\n\t\t// var index = this.spineItems.unshift(section);\n\t\tthis.spineByHref[section.href] = 0;\n\t\tthis.spineById[section.idref] = 0;\n\n\t\t// Re-index\n\t\tthis.spineItems.forEach(function(item, index){\n\t\t\titem.index = index;\n\t\t});\n\n\t\treturn 0;\n\t}\n\n\t// insert(section, index) {\n\t//\n\t// };\n\n\t/**\n\t * Remove a Section from the Spine\n\t * @private\n\t * @param  {Section} section\n\t */\n\tremove(section) {\n\t\tvar index = this.spineItems.indexOf(section);\n\n\t\tif(index > -1) {\n\t\t\tdelete this.spineByHref[section.href];\n\t\t\tdelete this.spineById[section.idref];\n\n\t\t\treturn this.spineItems.splice(index, 1);\n\t\t}\n\t}\n\n\t/**\n\t * Loop over the Sections in the Spine\n\t * @return {method} forEach\n\t */\n\teach() {\n\t\treturn this.spineItems.forEach.apply(this.spineItems, arguments);\n\t}\n\n\t/**\n\t * Find the first Section in the Spine\n\t * @return {Section} first section\n\t */\n\tfirst() {\n\t\tlet index = 0;\n\n\t\tdo {\n\t\t\tlet next = this.get(index);\n\n\t\t\tif (next && next.linear) {\n\t\t\t\treturn next;\n\t\t\t}\n\t\t\tindex += 1;\n\t\t} while (index < this.spineItems.length) ;\n\t}\n\n\t/**\n\t * Find the last Section in the Spine\n\t * @return {Section} last section\n\t */\n\tlast() {\n\t\tlet index = this.spineItems.length-1;\n\n\t\tdo {\n\t\t\tlet prev = this.get(index);\n\t\t\tif (prev && prev.linear) {\n\t\t\t\treturn prev;\n\t\t\t}\n\t\t\tindex -= 1;\n\t\t} while (index >= 0);\n\t}\n\n\tdestroy() {\n\t\tthis.each((section) => section.destroy());\n\n\t\tthis.spineItems = undefined\n\t\tthis.spineByHref = undefined\n\t\tthis.spineById = undefined\n\n\t\tthis.hooks.serialize.clear();\n\t\tthis.hooks.content.clear();\n\t\tthis.hooks = undefined;\n\n\t\tthis.epubcfi = undefined;\n\n\t\tthis.loaded = false;\n\n\t\tthis.items = undefined;\n\t\tthis.manifest = undefined;\n\t\tthis.spineNodeIndex = undefined;\n\t\tthis.baseUrl = undefined;\n\t\tthis.length = undefined;\n\t}\n}\n\nexport default Spine;\n","import {qs, sprint, locationOf, defer} from \"./utils/core\";\nimport Queue from \"./utils/queue\";\nimport EpubCFI from \"./epubcfi\";\nimport { EVENTS } from \"./utils/constants\";\nimport EventEmitter from \"event-emitter\";\n\n/**\n * Find Locations for a Book\n * @param {Spine} spine\n * @param {request} request\n * @param {number} [pause=100]\n */\nclass Locations {\n\tconstructor(spine, request, pause) {\n\t\tthis.spine = spine;\n\t\tthis.request = request;\n\t\tthis.pause = pause || 100;\n\n\t\tthis.q = new Queue(this);\n\t\tthis.epubcfi = new EpubCFI();\n\n\t\tthis._locations = [];\n\t\tthis.total = 0;\n\n\t\tthis.break = 150;\n\n\t\tthis._current = 0;\n\n\t\tthis.currentLocation = '';\n\t\tthis._currentCfi ='';\n\t\tthis.processingTimeout = undefined;\n\t}\n\n\t/**\n\t * Load all of sections in the book to generate locations\n\t * @param  {int} chars how many chars to split on\n\t * @return {object} locations\n\t */\n\tgenerate(chars) {\n\n\t\tif (chars) {\n\t\t\tthis.break = chars;\n\t\t}\n\n\t\tthis.q.pause();\n\n\t\tthis.spine.each(function(section) {\n\t\t\tif (section.linear) {\n\t\t\t\tthis.q.enqueue(this.process.bind(this), section);\n\t\t\t}\n\t\t}.bind(this));\n\n\t\treturn this.q.run().then(function() {\n\t\t\tthis.total = this._locations.length - 1;\n\n\t\t\tif (this._currentCfi) {\n\t\t\t\tthis.currentLocation = this._currentCfi;\n\t\t\t}\n\n\t\t\treturn this._locations;\n\t\t\t// console.log(this.percentage(this.book.rendition.location.start), this.percentage(this.book.rendition.location.end));\n\t\t}.bind(this));\n\n\t}\n\n\tcreateRange () {\n\t\treturn {\n\t\t\tstartContainer: undefined,\n\t\t\tstartOffset: undefined,\n\t\t\tendContainer: undefined,\n\t\t\tendOffset: undefined\n\t\t};\n\t}\n\n\tprocess(section) {\n\n\t\treturn section.load(this.request)\n\t\t\t.then(function(contents) {\n\t\t\t\tvar completed = new defer();\n\t\t\t\tvar locations = this.parse(contents, section.cfiBase);\n\t\t\t\tthis._locations = this._locations.concat(locations);\n\n\t\t\t\tsection.unload();\n\n\t\t\t\tthis.processingTimeout = setTimeout(() => completed.resolve(locations), this.pause);\n\t\t\t\treturn completed.promise;\n\t\t\t}.bind(this));\n\n\t}\n\n\tparse(contents, cfiBase, chars) {\n\t\tvar locations = [];\n\t\tvar range;\n\t\tvar doc = contents.ownerDocument;\n\t\tvar body = qs(doc, \"body\");\n\t\tvar counter = 0;\n\t\tvar prev;\n\t\tvar _break = chars || this.break;\n\t\tvar parser = function(node) {\n\t\t\tvar len = node.length;\n\t\t\tvar dist;\n\t\t\tvar pos = 0;\n\n\t\t\tif (node.textContent.trim().length === 0) {\n\t\t\t\treturn false; // continue\n\t\t\t}\n\n\t\t\t// Start range\n\t\t\tif (counter == 0) {\n\t\t\t\trange = this.createRange();\n\t\t\t\trange.startContainer = node;\n\t\t\t\trange.startOffset = 0;\n\t\t\t}\n\n\t\t\tdist = _break - counter;\n\n\t\t\t// Node is smaller than a break,\n\t\t\t// skip over it\n\t\t\tif(dist > len){\n\t\t\t\tcounter += len;\n\t\t\t\tpos = len;\n\t\t\t}\n\n\n\t\t\twhile (pos < len) {\n\t\t\t\tdist = _break - counter;\n\n\t\t\t\tif (counter === 0) {\n\t\t\t\t\t// Start new range\n\t\t\t\t\tpos += 1;\n\t\t\t\t\trange = this.createRange();\n\t\t\t\t\trange.startContainer = node;\n\t\t\t\t\trange.startOffset = pos;\n\t\t\t\t}\n\n\t\t\t\t// pos += dist;\n\n\t\t\t\t// Gone over\n\t\t\t\tif(pos + dist >= len){\n\t\t\t\t\t// Continue counter for next node\n\t\t\t\t\tcounter += len - pos;\n\t\t\t\t\t// break\n\t\t\t\t\tpos = len;\n\t\t\t\t// At End\n\t\t\t\t} else {\n\t\t\t\t\t// Advance pos\n\t\t\t\t\tpos += dist;\n\n\t\t\t\t\t// End the previous range\n\t\t\t\t\trange.endContainer = node;\n\t\t\t\t\trange.endOffset = pos;\n\t\t\t\t\t// cfi = section.cfiFromRange(range);\n\t\t\t\t\tlet cfi = new EpubCFI(range, cfiBase).toString();\n\t\t\t\t\tlocations.push(cfi);\n\t\t\t\t\tcounter = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tprev = node;\n\t\t};\n\n\t\tsprint(body, parser.bind(this));\n\n\t\t// Close remaining\n\t\tif (range && range.startContainer && prev) {\n\t\t\trange.endContainer = prev;\n\t\t\trange.endOffset = prev.length;\n\t\t\tlet cfi = new EpubCFI(range, cfiBase).toString();\n\t\t\tlocations.push(cfi);\n\t\t\tcounter = 0;\n\t\t}\n\n\t\treturn locations;\n\t}\n\n\t/**\n\t * Get a location from an EpubCFI\n\t * @param {EpubCFI} cfi\n\t * @return {number}\n\t */\n\tlocationFromCfi(cfi){\n\t\tlet loc;\n\t\tif (EpubCFI.prototype.isCfiString(cfi)) {\n\t\t\tcfi = new EpubCFI(cfi);\n\t\t}\n\t\t// Check if the location has not been set yet\n\t\tif(this._locations.length === 0) {\n\t\t\treturn -1;\n\t\t}\n\n\t\tloc = locationOf(cfi, this._locations, this.epubcfi.compare);\n\n\t\tif (loc > this.total) {\n\t\t\treturn this.total;\n\t\t}\n\n\t\treturn loc;\n\t}\n\n\t/**\n\t * Get a percentage position in locations from an EpubCFI\n\t * @param {EpubCFI} cfi\n\t * @return {number}\n\t */\n\tpercentageFromCfi(cfi) {\n\t\tif(this._locations.length === 0) {\n\t\t\treturn null;\n\t\t}\n\t\t// Find closest cfi\n\t\tvar loc = this.locationFromCfi(cfi);\n\t\t// Get percentage in total\n\t\treturn this.percentageFromLocation(loc);\n\t}\n\n\t/**\n\t * Get a percentage position from a location index\n\t * @param {number} location\n\t * @return {number}\n\t */\n\tpercentageFromLocation(loc) {\n\t\tif (!loc || !this.total) {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn (loc / this.total);\n\t}\n\n\t/**\n\t * Get an EpubCFI from location index\n\t * @param {number} loc\n\t * @return {EpubCFI} cfi\n\t */\n\tcfiFromLocation(loc){\n\t\tvar cfi = -1;\n\t\t// check that pg is an int\n\t\tif(typeof loc != \"number\"){\n\t\t\tloc = parseInt(loc);\n\t\t}\n\n\t\tif(loc >= 0 && loc < this._locations.length) {\n\t\t\tcfi = this._locations[loc];\n\t\t}\n\n\t\treturn cfi;\n\t}\n\n\t/**\n\t * Get an EpubCFI from location percentage\n\t * @param {number} percentage\n\t * @return {EpubCFI} cfi\n\t */\n\tcfiFromPercentage(percentage){\n\t\tlet loc;\n\t\tif (percentage > 1) {\n\t\t\tconsole.warn(\"Normalize cfiFromPercentage value to between 0 - 1\");\n\t\t}\n\n\t\t// Make sure 1 goes to very end\n\t\tif (percentage >= 1) {\n\t\t\tlet cfi = new EpubCFI(this._locations[this.total]);\n\t\t\tcfi.collapse();\n\t\t\treturn cfi.toString();\n\t\t}\n\n\t\tloc = Math.ceil(this.total * percentage);\n\t\treturn this.cfiFromLocation(loc);\n\t}\n\n\t/**\n\t * Load locations from JSON\n\t * @param {json} locations\n\t */\n\tload(locations){\n\t\tif (typeof locations === \"string\") {\n\t\t\tthis._locations = JSON.parse(locations);\n\t\t} else {\n\t\t\tthis._locations = locations;\n\t\t}\n\t\tthis.total = this._locations.length - 1;\n\t\treturn this._locations;\n\t}\n\n\t/**\n\t * Save locations to JSON\n\t * @return {json}\n\t */\n\tsave(){\n\t\treturn JSON.stringify(this._locations);\n\t}\n\n\tgetCurrent(){\n\t\treturn this._current;\n\t}\n\n\tsetCurrent(curr){\n\t\tvar loc;\n\n\t\tif(typeof curr == \"string\"){\n\t\t\tthis._currentCfi = curr;\n\t\t} else if (typeof curr == \"number\") {\n\t\t\tthis._current = curr;\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\n\t\tif(this._locations.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tif(typeof curr == \"string\"){\n\t\t\tloc = this.locationFromCfi(curr);\n\t\t\tthis._current = loc;\n\t\t} else {\n\t\t\tloc = curr;\n\t\t}\n\n\t\tthis.emit(EVENTS.LOCATIONS.CHANGED, {\n\t\t\tpercentage: this.percentageFromLocation(loc)\n\t\t});\n\t}\n\n\t/**\n\t * Get the current location\n\t */\n\tget currentLocation() {\n\t\treturn this._current;\n\t}\n\n\t/**\n\t * Set the current location\n\t */\n\tset currentLocation(curr) {\n\t\tthis.setCurrent(curr);\n\t}\n\n\t/**\n\t * Locations length\n\t */\n\tlength () {\n\t\treturn this._locations.length;\n\t}\n\n\tdestroy () {\n\t\tthis.spine = undefined;\n\t\tthis.request = undefined;\n\t\tthis.pause = undefined;\n\n\t\tthis.q.stop();\n\t\tthis.q = undefined;\n\t\tthis.epubcfi = undefined;\n\n\t\tthis._locations = undefined\n\t\tthis.total = undefined;\n\n\t\tthis.break = undefined;\n\t\tthis._current = undefined;\n\n\t\tthis.currentLocation = undefined;\n\t\tthis._currentCfi = undefined;\n\t\tclearTimeout(this.processingTimeout);\n\t}\n}\n\nEventEmitter(Locations.prototype);\n\nexport default Locations;\n","import path from \"path-webpack\";\nimport {qs} from \"./utils/core\";\n\n/**\n * Handles Parsing and Accessing an Epub Container\n * @class\n * @param {document} [containerDocument] xml document\n */\nclass Container {\n\tconstructor(containerDocument) {\n\t\tthis.packagePath = '';\n\t\tthis.directory = '';\n\t\tthis.encoding = '';\n\n\t\tif (containerDocument) {\n\t\t\tthis.parse(containerDocument);\n\t\t}\n\t}\n\n\t/**\n\t * Parse the Container XML\n\t * @param  {document} containerDocument\n\t */\n\tparse(containerDocument){\n\t\t//-- <rootfile full-path=\"OPS/package.opf\" media-type=\"application/oebps-package+xml\"/>\n\t\tvar rootfile;\n\n\t\tif(!containerDocument) {\n\t\t\tthrow new Error(\"Container File Not Found\");\n\t\t}\n\n\t\trootfile = qs(containerDocument, \"rootfile\");\n\n\t\tif(!rootfile) {\n\t\t\tthrow new Error(\"No RootFile Found\");\n\t\t}\n\n\t\tthis.packagePath = rootfile.getAttribute(\"full-path\");\n\t\tthis.directory = path.dirname(this.packagePath);\n\t\tthis.encoding = containerDocument.xmlEncoding;\n\t}\n\n\tdestroy() {\n\t\tthis.packagePath = undefined;\n\t\tthis.directory = undefined;\n\t\tthis.encoding = undefined;\n\t}\n}\n\nexport default Container;\n","import {qs, qsa, qsp, indexOfElementNode} from \"./utils/core\";\n\n/**\n * Open Packaging Format Parser\n * @class\n * @param {document} packageDocument OPF XML\n */\nclass Packaging {\n\tconstructor(packageDocument) {\n\t\tthis.manifest = {};\n\t\tthis.navPath = '';\n\t\tthis.ncxPath = '';\n\t\tthis.coverPath = '';\n\t\tthis.spineNodeIndex = 0;\n\t\tthis.spine = [];\n\t\tthis.metadata = {};\n\n\t\tif (packageDocument) {\n\t\t\tthis.parse(packageDocument);\n\t\t}\n\t}\n\n\t/**\n\t * Parse OPF XML\n\t * @param  {document} packageDocument OPF XML\n\t * @return {object} parsed package parts\n\t */\n\tparse(packageDocument){\n\t\tvar metadataNode, manifestNode, spineNode;\n\n\t\tif(!packageDocument) {\n\t\t\tthrow new Error(\"Package File Not Found\");\n\t\t}\n\n\t\tmetadataNode = qs(packageDocument, \"metadata\");\n\t\tif(!metadataNode) {\n\t\t\tthrow new Error(\"No Metadata Found\");\n\t\t}\n\n\t\tmanifestNode = qs(packageDocument, \"manifest\");\n\t\tif(!manifestNode) {\n\t\t\tthrow new Error(\"No Manifest Found\");\n\t\t}\n\n\t\tspineNode = qs(packageDocument, \"spine\");\n\t\tif(!spineNode) {\n\t\t\tthrow new Error(\"No Spine Found\");\n\t\t}\n\n\t\tthis.manifest = this.parseManifest(manifestNode);\n\t\tthis.navPath = this.findNavPath(manifestNode);\n\t\tthis.ncxPath = this.findNcxPath(manifestNode, spineNode);\n\t\tthis.coverPath = this.findCoverPath(packageDocument);\n\n\t\tthis.spineNodeIndex = indexOfElementNode(spineNode);\n\n\t\tthis.spine = this.parseSpine(spineNode, this.manifest);\n\n\t\tthis.metadata = this.parseMetadata(metadataNode);\n\n\t\tthis.metadata.direction = spineNode.getAttribute(\"page-progression-direction\");\n\n\n\t\treturn {\n\t\t\t\"metadata\" : this.metadata,\n\t\t\t\"spine\"    : this.spine,\n\t\t\t\"manifest\" : this.manifest,\n\t\t\t\"navPath\"  : this.navPath,\n\t\t\t\"ncxPath\"  : this.ncxPath,\n\t\t\t\"coverPath\": this.coverPath,\n\t\t\t\"spineNodeIndex\" : this.spineNodeIndex\n\t\t};\n\t}\n\n\t/**\n\t * Parse Metadata\n\t * @private\n\t * @param  {node} xml\n\t * @return {object} metadata\n\t */\n\tparseMetadata(xml){\n\t\tvar metadata = {};\n\n\t\tmetadata.title = this.getElementText(xml, \"title\");\n\t\tmetadata.creator = this.getElementText(xml, \"creator\");\n\t\tmetadata.description = this.getElementText(xml, \"description\");\n\n\t\tmetadata.pubdate = this.getElementText(xml, \"date\");\n\n\t\tmetadata.publisher = this.getElementText(xml, \"publisher\");\n\n\t\tmetadata.identifier = this.getElementText(xml, \"identifier\");\n\t\tmetadata.language = this.getElementText(xml, \"language\");\n\t\tmetadata.rights = this.getElementText(xml, \"rights\");\n\n\t\tmetadata.modified_date = this.getPropertyText(xml, \"dcterms:modified\");\n\n\t\tmetadata.layout = this.getPropertyText(xml, \"rendition:layout\");\n\t\tmetadata.orientation = this.getPropertyText(xml, \"rendition:orientation\");\n\t\tmetadata.flow = this.getPropertyText(xml, \"rendition:flow\");\n\t\tmetadata.viewport = this.getPropertyText(xml, \"rendition:viewport\");\n\t\tmetadata.media_active_class = this.getPropertyText(xml, \"media:active-class\");\n\t\t// metadata.page_prog_dir = packageXml.querySelector(\"spine\").getAttribute(\"page-progression-direction\");\n\n\t\treturn metadata;\n\t}\n\n\t/**\n\t * Parse Manifest\n\t * @private\n\t * @param  {node} manifestXml\n\t * @return {object} manifest\n\t */\n\tparseManifest(manifestXml){\n\t\tvar manifest = {};\n\n\t\t//-- Turn items into an array\n\t\t// var selected = manifestXml.querySelectorAll(\"item\");\n\t\tvar selected = qsa(manifestXml, \"item\");\n\t\tvar items = Array.prototype.slice.call(selected);\n\n\t\t//-- Create an object with the id as key\n\t\titems.forEach(function(item){\n\t\t\tvar id = item.getAttribute(\"id\"),\n\t\t\t\t\thref = item.getAttribute(\"href\") || \"\",\n\t\t\t\t\ttype = item.getAttribute(\"media-type\") || \"\",\n\t\t\t\t\toverlay = item.getAttribute(\"media-overlay\") || \"\",\n\t\t\t\t\tproperties = item.getAttribute(\"properties\") || \"\";\n\n\t\t\tmanifest[id] = {\n\t\t\t\t\"href\" : href,\n\t\t\t\t// \"url\" : href,\n\t\t\t\t\"type\" : type,\n\t\t\t\t\"overlay\" : overlay,\n\t\t\t\t\"properties\" : properties.length ? properties.split(\" \") : []\n\t\t\t};\n\n\t\t});\n\n\t\treturn manifest;\n\n\t}\n\n\t/**\n\t * Parse Spine\n\t * @private\n\t * @param  {node} spineXml\n\t * @param  {Packaging.manifest} manifest\n\t * @return {object} spine\n\t */\n\tparseSpine(spineXml, manifest){\n\t\tvar spine = [];\n\n\t\tvar selected = qsa(spineXml, \"itemref\");\n\t\tvar items = Array.prototype.slice.call(selected);\n\n\t\t// var epubcfi = new EpubCFI();\n\n\t\t//-- Add to array to mantain ordering and cross reference with manifest\n\t\titems.forEach(function(item, index){\n\t\t\tvar idref = item.getAttribute(\"idref\");\n\t\t\t// var cfiBase = epubcfi.generateChapterComponent(spineNodeIndex, index, Id);\n\t\t\tvar props = item.getAttribute(\"properties\") || \"\";\n\t\t\tvar propArray = props.length ? props.split(\" \") : [];\n\t\t\t// var manifestProps = manifest[Id].properties;\n\t\t\t// var manifestPropArray = manifestProps.length ? manifestProps.split(\" \") : [];\n\n\t\t\tvar itemref = {\n\t\t\t\t\"idref\" : idref,\n\t\t\t\t\"linear\" : item.getAttribute(\"linear\") || \"yes\",\n\t\t\t\t\"properties\" : propArray,\n\t\t\t\t// \"href\" : manifest[Id].href,\n\t\t\t\t// \"url\" :  manifest[Id].url,\n\t\t\t\t\"index\" : index\n\t\t\t\t// \"cfiBase\" : cfiBase\n\t\t\t};\n\t\t\tspine.push(itemref);\n\t\t});\n\n\t\treturn spine;\n\t}\n\n\t/**\n\t * Find TOC NAV\n\t * @private\n\t * @param {element} manifestNode\n\t * @return {string}\n\t */\n\tfindNavPath(manifestNode){\n\t\t// Find item with property \"nav\"\n\t\t// Should catch nav irregardless of order\n\t\t// var node = manifestNode.querySelector(\"item[properties$='nav'], item[properties^='nav '], item[properties*=' nav ']\");\n\t\tvar node = qsp(manifestNode, \"item\", {\"properties\":\"nav\"});\n\t\treturn node ? node.getAttribute(\"href\") : false;\n\t}\n\n\t/**\n\t * Find TOC NCX\n\t * media-type=\"application/x-dtbncx+xml\" href=\"toc.ncx\"\n\t * @private\n\t * @param {element} manifestNode\n\t * @param {element} spineNode\n\t * @return {string}\n\t */\n\tfindNcxPath(manifestNode, spineNode){\n\t\t// var node = manifestNode.querySelector(\"item[media-type='application/x-dtbncx+xml']\");\n\t\tvar node = qsp(manifestNode, \"item\", {\"media-type\":\"application/x-dtbncx+xml\"});\n\t\tvar tocId;\n\n\t\t// If we can't find the toc by media-type then try to look for id of the item in the spine attributes as\n\t\t// according to http://www.idpf.org/epub/20/spec/OPF_2.0.1_draft.htm#Section2.4.1.2,\n\t\t// \"The item that describes the NCX must be referenced by the spine toc attribute.\"\n\t\tif (!node) {\n\t\t\ttocId = spineNode.getAttribute(\"toc\");\n\t\t\tif(tocId) {\n\t\t\t\t// node = manifestNode.querySelector(\"item[id='\" + tocId + \"']\");\n\t\t\t\tnode = manifestNode.getElementById(tocId);\n\t\t\t}\n\t\t}\n\n\t\treturn node ? node.getAttribute(\"href\") : false;\n\t}\n\n\t/**\n\t * Find the Cover Path\n\t * <item properties=\"cover-image\" id=\"ci\" href=\"cover.svg\" media-type=\"image/svg+xml\" />\n\t * Fallback for Epub 2.0\n\t * @private\n\t * @param  {node} packageXml\n\t * @return {string} href\n\t */\n\tfindCoverPath(packageXml){\n\t\tvar pkg = qs(packageXml, \"package\");\n\t\tvar epubVersion = pkg.getAttribute(\"version\");\n\n\t\tif (epubVersion === \"2.0\") {\n\t\t\tvar metaCover = qsp(packageXml, \"meta\", {\"name\":\"cover\"});\n\t\t\tif (metaCover) {\n\t\t\t\tvar coverId = metaCover.getAttribute(\"content\");\n\t\t\t\t// var cover = packageXml.querySelector(\"item[id='\" + coverId + \"']\");\n\t\t\t\tvar cover = packageXml.getElementById(coverId);\n\t\t\t\treturn cover ? cover.getAttribute(\"href\") : \"\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// var node = packageXml.querySelector(\"item[properties='cover-image']\");\n\t\t\tvar node = qsp(packageXml, \"item\", {\"properties\":\"cover-image\"});\n\t\t\treturn node ? node.getAttribute(\"href\") : \"\";\n\t\t}\n\t}\n\n\t/**\n\t * Get text of a namespaced element\n\t * @private\n\t * @param  {node} xml\n\t * @param  {string} tag\n\t * @return {string} text\n\t */\n\tgetElementText(xml, tag){\n\t\tvar found = xml.getElementsByTagNameNS(\"http://purl.org/dc/elements/1.1/\", tag);\n\t\tvar el;\n\n\t\tif(!found || found.length === 0) return \"\";\n\n\t\tel = found[0];\n\n\t\tif(el.childNodes.length){\n\t\t\treturn el.childNodes[0].nodeValue;\n\t\t}\n\n\t\treturn \"\";\n\n\t}\n\n\t/**\n\t * Get text by property\n\t * @private\n\t * @param  {node} xml\n\t * @param  {string} property\n\t * @return {string} text\n\t */\n\tgetPropertyText(xml, property){\n\t\tvar el = qsp(xml, \"meta\", {\"property\":property});\n\n\t\tif(el && el.childNodes.length){\n\t\t\treturn el.childNodes[0].nodeValue;\n\t\t}\n\n\t\treturn \"\";\n\t}\n\n\t/**\n\t * Load JSON Manifest\n\t * @param  {document} packageDocument OPF XML\n\t * @return {object} parsed package parts\n\t */\n\tload(json) {\n\t\tthis.metadata = json.metadata;\n\n\t\tthis.spine = json.spine.map((item, index) =>{\n\t\t\titem.index = index;\n\t\t\treturn item;\n\t\t});\n\n\t\tjson.resources.forEach((item, index) => {\n\t\t\tthis.manifest[index] = item;\n\n\t\t\tif (item.rel && item.rel[0] === \"cover\") {\n\t\t\t\tthis.coverPath = item.href;\n\t\t\t}\n\t\t});\n\n\t\tthis.spineNodeIndex = 0;\n\n\t\tthis.toc = json.toc.map((item, index) =>{\n\t\t\titem.label = item.title;\n\t\t\treturn item;\n\t\t});\n\n\t\treturn {\n\t\t\t\"metadata\" : this.metadata,\n\t\t\t\"spine\"    : this.spine,\n\t\t\t\"manifest\" : this.manifest,\n\t\t\t\"navPath\"  : this.navPath,\n\t\t\t\"ncxPath\"  : this.ncxPath,\n\t\t\t\"coverPath\": this.coverPath,\n\t\t\t\"spineNodeIndex\" : this.spineNodeIndex,\n\t\t\t\"toc\" : this.toc\n\t\t};\n\t}\n\n\tdestroy() {\n\t\tthis.manifest = undefined;\n\t\tthis.navPath = undefined;\n\t\tthis.ncxPath = undefined;\n\t\tthis.coverPath = undefined;\n\t\tthis.spineNodeIndex = undefined;\n\t\tthis.spine = undefined;\n\t\tthis.metadata = undefined;\n\t}\n}\n\nexport default Packaging;\n","import {qs, qsa, querySelectorByType, filterChildren, getParentByTagName} from \"./utils/core\";\n\n/**\n * Navigation Parser\n * @param {document} xml navigation html / xhtml / ncx\n */\nclass Navigation {\n\tconstructor(xml) {\n\t\tthis.toc = [];\n\t\tthis.tocByHref = {};\n\t\tthis.tocById = {};\n\n\t\tthis.landmarks = [];\n\t\tthis.landmarksByType = {};\n\n\t\tthis.length = 0;\n\t\tif (xml) {\n\t\t\tthis.parse(xml);\n\t\t}\n\t}\n\n\t/**\n\t * Parse out the navigation items\n\t * @param {document} xml navigation html / xhtml / ncx\n\t */\n\tparse(xml) {\n\t\tlet isXml = xml.nodeType;\n\t\tlet html;\n\t\tlet ncx;\n\n\t\tif (isXml) {\n\t\t\thtml = qs(xml, \"html\");\n\t\t\tncx = qs(xml, \"ncx\");\n\t\t}\n\n\t\tif (!isXml) {\n\t\t\tthis.toc = this.load(xml);\n\t\t} else if(html) {\n\t\t\tthis.toc = this.parseNav(xml);\n\t\t\tthis.landmarks = this.parseLandmarks(xml);\n\t\t} else if(ncx){\n\t\t\tthis.toc = this.parseNcx(xml);\n\t\t}\n\n\t\tthis.length = 0;\n\n\t\tthis.unpack(this.toc);\n\t}\n\n\t/**\n\t * Unpack navigation items\n\t * @private\n\t * @param  {array} toc\n\t */\n\tunpack(toc) {\n\t\tvar item;\n\n\t\tfor (var i = 0; i < toc.length; i++) {\n\t\t\titem = toc[i];\n\n\t\t\tif (item.href) {\n\t\t\t\tthis.tocByHref[item.href] = i;\n\t\t\t}\n\n\t\t\tif (item.id) {\n\t\t\t\tthis.tocById[item.id] = i;\n\t\t\t}\n\n\t\t\tthis.length++;\n\n\t\t\tif (item.subitems.length) {\n\t\t\t\tthis.unpack(item.subitems);\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Get an item from the navigation\n\t * @param  {string} target\n\t * @return {object} navItem\n\t */\n\tget(target) {\n\t\tvar index;\n\n\t\tif(!target) {\n\t\t\treturn this.toc;\n\t\t}\n\n\t\tif(target.indexOf(\"#\") === 0) {\n\t\t\tindex = this.tocById[target.substring(1)];\n\t\t} else if(target in this.tocByHref){\n\t\t\tindex = this.tocByHref[target];\n\t\t}\n\n\t\treturn this.toc[index];\n\t}\n\n\t/**\n\t * Get a landmark by type\n\t * List of types: https://idpf.github.io/epub-vocabs/structure/\n\t * @param  {string} type\n\t * @return {object} landmarkItem\n\t */\n\tlandmark(type) {\n\t\tvar index;\n\n\t\tif(!type) {\n\t\t\treturn this.landmarks;\n\t\t}\n\n\t\tindex = this.landmarksByType[type];\n\n\t\treturn this.landmarks[index];\n\t}\n\n\t/**\n\t * Parse toc from a Epub > 3.0 Nav\n\t * @private\n\t * @param  {document} navHtml\n\t * @return {array} navigation list\n\t */\n\tparseNav(navHtml){\n\t\tvar navElement = querySelectorByType(navHtml, \"nav\", \"toc\");\n\t\tvar navItems = navElement ? qsa(navElement, \"li\") : [];\n\t\tvar length = navItems.length;\n\t\tvar i;\n\t\tvar toc = {};\n\t\tvar list = [];\n\t\tvar item, parent;\n\n\t\tif(!navItems || length === 0) return list;\n\n\t\tfor (i = 0; i < length; ++i) {\n\t\t\titem = this.navItem(navItems[i]);\n\t\t\tif (item) {\n\t\t\t\ttoc[item.id] = item;\n\t\t\t\tif(!item.parent) {\n\t\t\t\t\tlist.push(item);\n\t\t\t\t} else {\n\t\t\t\t\tparent = toc[item.parent];\n\t\t\t\t\tparent.subitems.push(item);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn list;\n\t}\n\n\t/**\n\t * Create a navItem\n\t * @private\n\t * @param  {element} item\n\t * @return {object} navItem\n\t */\n\tnavItem(item){\n\t\tlet id = item.getAttribute(\"id\") || undefined;\n\t\tlet content = filterChildren(item, \"a\", true);\n\n\t\tif (!content) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet src = content.getAttribute(\"href\") || \"\";\n\t\tlet text = content.textContent || \"\";\n\t\tlet subitems = [];\n\t\tlet parentItem = getParentByTagName(item, \"li\");\n\t\tlet parent;\n\n\t\tif (parentItem) {\n\t\t\tparent = parentItem.getAttribute(\"id\");\n\t\t}\n\n\t\twhile (!parent && parentItem) {\n\t\t\tparentItem = getParentByTagName(parentItem, \"li\");\n\t\t\tif (parentItem) {\n\t\t\t\tparent = parentItem.getAttribute(\"id\");\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\t\"id\": id,\n\t\t\t\"href\": src,\n\t\t\t\"label\": text,\n\t\t\t\"subitems\" : subitems,\n\t\t\t\"parent\" : parent\n\t\t};\n\t}\n\n\t/**\n\t * Parse landmarks from a Epub > 3.0 Nav\n\t * @private\n\t * @param  {document} navHtml\n\t * @return {array} landmarks list\n\t */\n\tparseLandmarks(navHtml){\n\t\tvar navElement = querySelectorByType(navHtml, \"nav\", \"landmarks\");\n\t\tvar navItems = navElement ? qsa(navElement, \"li\") : [];\n\t\tvar length = navItems.length;\n\t\tvar i;\n\t\tvar list = [];\n\t\tvar item;\n\n\t\tif(!navItems || length === 0) return list;\n\n\t\tfor (i = 0; i < length; ++i) {\n\t\t\titem = this.landmarkItem(navItems[i]);\n\t\t\tif (item) {\n\t\t\t\tlist.push(item);\n\t\t\t\tthis.landmarksByType[item.type] = i;\n\t\t\t}\n\t\t}\n\n\t\treturn list;\n\t}\n\n\t/**\n\t * Create a landmarkItem\n\t * @private\n\t * @param  {element} item\n\t * @return {object} landmarkItem\n\t */\n\tlandmarkItem(item){\n\t\tlet content = filterChildren(item, \"a\", true);\n\n\t\tif (!content) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet type = content.getAttributeNS(\"http://www.idpf.org/2007/ops\", \"type\") || undefined;\n\t\tlet href = content.getAttribute(\"href\") || \"\";\n\t\tlet text = content.textContent || \"\";\n\n\t\treturn {\n\t\t\t\"href\": href,\n\t\t\t\"label\": text,\n\t\t\t\"type\" : type\n\t\t};\n\t}\n\n\t/**\n\t * Parse from a Epub > 3.0 NC\n\t * @private\n\t * @param  {document} navHtml\n\t * @return {array} navigation list\n\t */\n\tparseNcx(tocXml){\n\t\tvar navPoints = qsa(tocXml, \"navPoint\");\n\t\tvar length = navPoints.length;\n\t\tvar i;\n\t\tvar toc = {};\n\t\tvar list = [];\n\t\tvar item, parent;\n\n\t\tif(!navPoints || length === 0) return list;\n\n\t\tfor (i = 0; i < length; ++i) {\n\t\t\titem = this.ncxItem(navPoints[i]);\n\t\t\ttoc[item.id] = item;\n\t\t\tif(!item.parent) {\n\t\t\t\tlist.push(item);\n\t\t\t} else {\n\t\t\t\tparent = toc[item.parent];\n\t\t\t\tparent.subitems.push(item);\n\t\t\t}\n\t\t}\n\n\t\treturn list;\n\t}\n\n\t/**\n\t * Create a ncxItem\n\t * @private\n\t * @param  {element} item\n\t * @return {object} ncxItem\n\t */\n\tncxItem(item){\n\t\tvar id = item.getAttribute(\"id\") || false,\n\t\t\t\tcontent = qs(item, \"content\"),\n\t\t\t\tsrc = content.getAttribute(\"src\"),\n\t\t\t\tnavLabel = qs(item, \"navLabel\"),\n\t\t\t\ttext = navLabel.textContent ? navLabel.textContent : \"\",\n\t\t\t\tsubitems = [],\n\t\t\t\tparentNode = item.parentNode,\n\t\t\t\tparent;\n\n\t\tif(parentNode && parentNode.nodeName === \"navPoint\") {\n\t\t\tparent = parentNode.getAttribute(\"id\");\n\t\t}\n\n\n\t\treturn {\n\t\t\t\"id\": id,\n\t\t\t\"href\": src,\n\t\t\t\"label\": text,\n\t\t\t\"subitems\" : subitems,\n\t\t\t\"parent\" : parent\n\t\t};\n\t}\n\n\t/**\n\t * Load Spine Items\n\t * @param  {object} json the items to be loaded\n\t * @return {Array} navItems\n\t */\n\tload(json) {\n\t\treturn json.map(item => {\n\t\t\titem.label = item.title;\n\t\t\titem.subitems = item.children ? this.load(item.children) : [];\n\t\t\treturn item;\n\t\t});\n\t}\n\n\t/**\n\t * forEach pass through\n\t * @param  {Function} fn function to run on each item\n\t * @return {method} forEach loop\n\t */\n\tforEach(fn) {\n\t\treturn this.toc.forEach(fn);\n\t}\n}\n\nexport default Navigation;\n","import {substitute} from \"./utils/replacements\";\nimport {createBase64Url, createBlobUrl, blob2base64} from \"./utils/core\";\nimport Url from \"./utils/url\";\nimport mime from \"../libs/mime/mime\";\nimport Path from \"./utils/path\";\nimport path from \"path-webpack\";\n\n/**\n * Handle Package Resources\n * @class\n * @param {Manifest} manifest\n * @param {object} [options]\n * @param {string} [options.replacements=\"base64\"]\n * @param {Archive} [options.archive]\n * @param {method} [options.resolver]\n */\nclass Resources {\n\tconstructor(manifest, options) {\n\t\tthis.settings = {\n\t\t\treplacements: (options && options.replacements) || \"base64\",\n\t\t\tarchive: (options && options.archive),\n\t\t\tresolver: (options && options.resolver),\n\t\t\trequest: (options && options.request)\n\t\t};\n\t\tthis.manifest = manifest;\n\t\tthis.resources = Object.keys(manifest).\n\t\t\tmap(function (key){\n\t\t\t\treturn manifest[key];\n\t\t\t});\n\n\t\tthis.replacementUrls = [];\n\n\t\tthis.html = [];\n\t\tthis.assets = [];\n\t\tthis.css = [];\n\n\t\tthis.urls = [];\n\t\tthis.cssUrls = [];\n\n\t\tthis.split();\n\t\tthis.splitUrls();\n\t}\n\n\t/**\n\t * Split resources by type\n\t * @private\n\t */\n\tsplit(){\n\n\t\t// HTML\n\t\tthis.html = this.resources.\n\t\t\tfilter(function (item){\n\t\t\t\tif (item.type === \"application/xhtml+xml\" ||\n\t\t\t\t\t\titem.type === \"text/html\") {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t// Exclude HTML\n\t\tthis.assets = this.resources.\n\t\t\tfilter(function (item){\n\t\t\t\tif (item.type !== \"application/xhtml+xml\" &&\n\t\t\t\t\t\titem.type !== \"text/html\") {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t// Only CSS\n\t\tthis.css = this.resources.\n\t\t\tfilter(function (item){\n\t\t\t\tif (item.type === \"text/css\") {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\t/**\n\t * Convert split resources into Urls\n\t * @private\n\t */\n\tsplitUrls(){\n\n\t\t// All Assets Urls\n\t\tthis.urls = this.assets.\n\t\t\tmap(function(item) {\n\t\t\t\treturn item.href;\n\t\t\t}.bind(this));\n\n\t\t// Css Urls\n\t\tthis.cssUrls = this.css.map(function(item) {\n\t\t\treturn item.href;\n\t\t});\n\n\t}\n\n\t/**\n\t * Create a url to a resource\n\t * @param {string} url\n\t * @return {Promise<string>} Promise resolves with url string\n\t */\n\tcreateUrl (url) {\n\t\tvar parsedUrl = new Url(url);\n\t\tvar mimeType = mime.lookup(parsedUrl.filename);\n\n\t\tif (this.settings.archive) {\n\t\t\treturn this.settings.archive.createUrl(url, {\"base64\": (this.settings.replacements === \"base64\")});\n\t\t} else {\n\t\t\tif (this.settings.replacements === \"base64\") {\n\t\t\t\treturn this.settings.request(url, 'blob')\n\t\t\t\t\t.then((blob) => {\n\t\t\t\t\t\treturn blob2base64(blob);\n\t\t\t\t\t})\n\t\t\t\t\t.then((blob) => {\n\t\t\t\t\t\treturn createBase64Url(blob, mimeType);\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treturn this.settings.request(url, 'blob').then((blob) => {\n\t\t\t\t\treturn createBlobUrl(blob, mimeType);\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Create blob urls for all the assets\n\t * @return {Promise}         returns replacement urls\n\t */\n\treplacements(){\n\t\tif (this.settings.replacements === \"none\") {\n\t\t\treturn new Promise(function(resolve) {\n\t\t\t\tresolve(this.urls);\n\t\t\t}.bind(this));\n\t\t}\n\n\t\tvar replacements = this.urls.\n\t\t\tmap( (url) => {\n\t\t\t\tvar absolute = this.settings.resolver(url);\n\n\t\t\t\treturn this.createUrl(absolute).\n\t\t\t\t\tcatch((err) => {\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t});\n\t\t\t});\n\n\t\treturn Promise.all(replacements)\n\t\t\t.then( (replacementUrls) => {\n\t\t\t\tthis.replacementUrls = replacementUrls.filter((url) => {\n\t\t\t\t\treturn (typeof(url) === \"string\");\n\t\t\t\t});\n\t\t\t\treturn replacementUrls;\n\t\t\t});\n\t}\n\n\t/**\n\t * Replace URLs in CSS resources\n\t * @private\n\t * @param  {Archive} [archive]\n\t * @param  {method} [resolver]\n\t * @return {Promise}\n\t */\n\treplaceCss(archive, resolver){\n\t\tvar replaced = [];\n\t\tarchive = archive || this.settings.archive;\n\t\tresolver = resolver || this.settings.resolver;\n\t\tthis.cssUrls.forEach(function(href) {\n\t\t\tvar replacement = this.createCssFile(href, archive, resolver)\n\t\t\t\t.then(function (replacementUrl) {\n\t\t\t\t\t// switch the url in the replacementUrls\n\t\t\t\t\tvar indexInUrls = this.urls.indexOf(href);\n\t\t\t\t\tif (indexInUrls > -1) {\n\t\t\t\t\t\tthis.replacementUrls[indexInUrls] = replacementUrl;\n\t\t\t\t\t}\n\t\t\t\t}.bind(this))\n\n\n\t\t\treplaced.push(replacement);\n\t\t}.bind(this));\n\t\treturn Promise.all(replaced);\n\t}\n\n\t/**\n\t * Create a new CSS file with the replaced URLs\n\t * @private\n\t * @param  {string} href the original css file\n\t * @return {Promise}  returns a BlobUrl to the new CSS file or a data url\n\t */\n\tcreateCssFile(href){\n\t\tvar newUrl;\n\n\t\tif (path.isAbsolute(href)) {\n\t\t\treturn new Promise(function(resolve){\n\t\t\t\tresolve();\n\t\t\t});\n\t\t}\n\n\t\tvar absolute = this.settings.resolver(href);\n\n\t\t// Get the text of the css file from the archive\n\t\tvar textResponse;\n\n\t\tif (this.settings.archive) {\n\t\t\ttextResponse = this.settings.archive.getText(absolute);\n\t\t} else {\n\t\t\ttextResponse = this.settings.request(absolute, \"text\");\n\t\t}\n\n\t\t// Get asset links relative to css file\n\t\tvar relUrls = this.urls.map( (assetHref) => {\n\t\t\tvar resolved = this.settings.resolver(assetHref);\n\t\t\tvar relative = new Path(absolute).relative(resolved);\n\n\t\t\treturn relative;\n\t\t});\n\n\t\tif (!textResponse) {\n\t\t\t// file not found, don't replace\n\t\t\treturn new Promise(function(resolve){\n\t\t\t\tresolve();\n\t\t\t});\n\t\t}\n\n\t\treturn textResponse.then( (text) => {\n\t\t\t// Replacements in the css text\n\t\t\ttext = substitute(text, relUrls, this.replacementUrls);\n\n\t\t\t// Get the new url\n\t\t\tif (this.settings.replacements === \"base64\") {\n\t\t\t\tnewUrl = createBase64Url(text, \"text/css\");\n\t\t\t} else {\n\t\t\t\tnewUrl = createBlobUrl(text, \"text/css\");\n\t\t\t}\n\n\t\t\treturn newUrl;\n\t\t}, (err) => {\n\t\t\t// handle response errors\n\t\t\treturn new Promise(function(resolve){\n\t\t\t\tresolve();\n\t\t\t});\n\t\t});\n\n\t}\n\n\t/**\n\t * Resolve all resources URLs relative to an absolute URL\n\t * @param  {string} absolute to be resolved to\n\t * @param  {resolver} [resolver]\n\t * @return {string[]} array with relative Urls\n\t */\n\trelativeTo(absolute, resolver){\n\t\tresolver = resolver || this.settings.resolver;\n\n\t\t// Get Urls relative to current sections\n\t\treturn this.urls.\n\t\t\tmap(function(href) {\n\t\t\t\tvar resolved = resolver(href);\n\t\t\t\tvar relative = new Path(absolute).relative(resolved);\n\t\t\t\treturn relative;\n\t\t\t}.bind(this));\n\t}\n\n\t/**\n\t * Get a URL for a resource\n\t * @param  {string} path\n\t * @return {string} url\n\t */\n\tget(path) {\n\t\tvar indexInUrls = this.urls.indexOf(path);\n\t\tif (indexInUrls === -1) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.replacementUrls.length) {\n\t\t\treturn new Promise(function(resolve, reject) {\n\t\t\t\tresolve(this.replacementUrls[indexInUrls]);\n\t\t\t}.bind(this));\n\t\t} else {\n\t\t\treturn this.createUrl(path);\n\t\t}\n\t}\n\n\t/**\n\t * Substitute urls in content, with replacements,\n\t * relative to a url if provided\n\t * @param  {string} content\n\t * @param  {string} [url]   url to resolve to\n\t * @return {string}         content with urls substituted\n\t */\n\tsubstitute(content, url) {\n\t\tvar relUrls;\n\t\tif (url) {\n\t\t\trelUrls = this.relativeTo(url);\n\t\t} else {\n\t\t\trelUrls = this.urls;\n\t\t}\n\t\treturn substitute(content, relUrls, this.replacementUrls);\n\t}\n\n\tdestroy() {\n\t\tthis.settings = undefined;\n\t\tthis.manifest = undefined;\n\t\tthis.resources = undefined;\n\t\tthis.replacementUrls = undefined;\n\t\tthis.html = undefined;\n\t\tthis.assets = undefined;\n\t\tthis.css = undefined;\n\n\t\tthis.urls = undefined;\n\t\tthis.cssUrls = undefined;\n\t}\n}\n\nexport default Resources;\n","import EpubCFI from \"./epubcfi\";\nimport {\n\tqs,\n\tqsa,\n\tquerySelectorByType,\n\tindexOfSorted,\n\tlocationOf\n} from \"./utils/core\";\n\n/**\n * Page List Parser\n * @param {document} [xml]\n */\nclass PageList {\n\tconstructor(xml) {\n\t\tthis.pages = [];\n\t\tthis.locations = [];\n\t\tthis.epubcfi = new EpubCFI();\n\n\t\tthis.firstPage = 0;\n\t\tthis.lastPage = 0;\n\t\tthis.totalPages = 0;\n\n\t\tthis.toc = undefined;\n\t\tthis.ncx = undefined;\n\n\t\tif (xml) {\n\t\t\tthis.pageList = this.parse(xml);\n\t\t}\n\n\t\tif(this.pageList && this.pageList.length) {\n\t\t\tthis.process(this.pageList);\n\t\t}\n\t}\n\n\t/**\n\t * Parse PageList Xml\n\t * @param  {document} xml\n\t */\n\tparse(xml) {\n\t\tvar html = qs(xml, \"html\");\n\t\tvar ncx = qs(xml, \"ncx\");\n\n\t\tif(html) {\n\t\t\treturn this.parseNav(xml);\n\t\t} else if(ncx){ // Not supported\n\t\t\t// return this.parseNcx(xml);\n\t\t\treturn;\n\t\t}\n\n\t}\n\n\t/**\n\t * Parse a Nav PageList\n\t * @private\n\t * @param  {node} navHtml\n\t * @return {PageList.item[]} list\n\t */\n\tparseNav(navHtml){\n\t\tvar navElement = querySelectorByType(navHtml, \"nav\", \"page-list\");\n\t\tvar navItems = navElement ? qsa(navElement, \"li\") : [];\n\t\tvar length = navItems.length;\n\t\tvar i;\n\t\tvar list = [];\n\t\tvar item;\n\n\t\tif(!navItems || length === 0) return list;\n\n\t\tfor (i = 0; i < length; ++i) {\n\t\t\titem = this.item(navItems[i]);\n\t\t\tlist.push(item);\n\t\t}\n\n\t\treturn list;\n\t}\n\n\t/**\n\t * Page List Item\n\t * @private\n\t * @param  {node} item\n\t * @return {object} pageListItem\n\t */\n\titem(item){\n\t\tvar content = qs(item, \"a\"),\n\t\t\t\thref = content.getAttribute(\"href\") || \"\",\n\t\t\t\ttext = content.textContent || \"\",\n\t\t\t\tpage = parseInt(text),\n\t\t\t\tisCfi = href.indexOf(\"epubcfi\"),\n\t\t\t\tsplit,\n\t\t\t\tpackageUrl,\n\t\t\t\tcfi;\n\n\t\tif(isCfi != -1) {\n\t\t\tsplit = href.split(\"#\");\n\t\t\tpackageUrl = split[0];\n\t\t\tcfi = split.length > 1 ? split[1] : false;\n\t\t\treturn {\n\t\t\t\t\"cfi\" : cfi,\n\t\t\t\t\"href\" : href,\n\t\t\t\t\"packageUrl\" : packageUrl,\n\t\t\t\t\"page\" : page\n\t\t\t};\n\t\t} else {\n\t\t\treturn {\n\t\t\t\t\"href\" : href,\n\t\t\t\t\"page\" : page\n\t\t\t};\n\t\t}\n\t}\n\n\t/**\n\t * Process pageList items\n\t * @private\n\t * @param  {array} pageList\n\t */\n\tprocess(pageList){\n\t\tpageList.forEach(function(item){\n\t\t\tthis.pages.push(item.page);\n\t\t\tif (item.cfi) {\n\t\t\t\tthis.locations.push(item.cfi);\n\t\t\t}\n\t\t}, this);\n\t\tthis.firstPage = parseInt(this.pages[0]);\n\t\tthis.lastPage = parseInt(this.pages[this.pages.length-1]);\n\t\tthis.totalPages = this.lastPage - this.firstPage;\n\t}\n\n\t/**\n\t * Get a PageList result from a EpubCFI\n\t * @param  {string} cfi EpubCFI String\n\t * @return {number} page\n\t */\n\tpageFromCfi(cfi){\n\t\tvar pg = -1;\n\n\t\t// Check if the pageList has not been set yet\n\t\tif(this.locations.length === 0) {\n\t\t\treturn -1;\n\t\t}\n\n\t\t// TODO: check if CFI is valid?\n\n\t\t// check if the cfi is in the location list\n\t\t// var index = this.locations.indexOf(cfi);\n\t\tvar index = indexOfSorted(cfi, this.locations, this.epubcfi.compare);\n\t\tif(index != -1) {\n\t\t\tpg = this.pages[index];\n\t\t} else {\n\t\t\t// Otherwise add it to the list of locations\n\t\t\t// Insert it in the correct position in the locations page\n\t\t\t//index = EPUBJS.core.insert(cfi, this.locations, this.epubcfi.compare);\n\t\t\tindex = locationOf(cfi, this.locations, this.epubcfi.compare);\n\t\t\t// Get the page at the location just before the new one, or return the first\n\t\t\tpg = index-1 >= 0 ? this.pages[index-1] : this.pages[0];\n\t\t\tif(pg !== undefined) {\n\t\t\t\t// Add the new page in so that the locations and page array match up\n\t\t\t\t//this.pages.splice(index, 0, pg);\n\t\t\t} else {\n\t\t\t\tpg = -1;\n\t\t\t}\n\n\t\t}\n\t\treturn pg;\n\t}\n\n\t/**\n\t * Get an EpubCFI from a Page List Item\n\t * @param  {string | number} pg\n\t * @return {string} cfi\n\t */\n\tcfiFromPage(pg){\n\t\tvar cfi = -1;\n\t\t// check that pg is an int\n\t\tif(typeof pg != \"number\"){\n\t\t\tpg = parseInt(pg);\n\t\t}\n\n\t\t// check if the cfi is in the page list\n\t\t// Pages could be unsorted.\n\t\tvar index = this.pages.indexOf(pg);\n\t\tif(index != -1) {\n\t\t\tcfi = this.locations[index];\n\t\t}\n\t\t// TODO: handle pages not in the list\n\t\treturn cfi;\n\t}\n\n\t/**\n\t * Get a Page from Book percentage\n\t * @param  {number} percent\n\t * @return {number} page\n\t */\n\tpageFromPercentage(percent){\n\t\tvar pg = Math.round(this.totalPages * percent);\n\t\treturn pg;\n\t}\n\n\t/**\n\t * Returns a value between 0 - 1 corresponding to the location of a page\n\t * @param  {number} pg the page\n\t * @return {number} percentage\n\t */\n\tpercentageFromPage(pg){\n\t\tvar percentage = (pg - this.firstPage) / this.totalPages;\n\t\treturn Math.round(percentage * 1000) / 1000;\n\t}\n\n\t/**\n\t * Returns a value between 0 - 1 corresponding to the location of a cfi\n\t * @param  {string} cfi EpubCFI String\n\t * @return {number} percentage\n\t */\n\tpercentageFromCfi(cfi){\n\t\tvar pg = this.pageFromCfi(cfi);\n\t\tvar percentage = this.percentageFromPage(pg);\n\t\treturn percentage;\n\t}\n\n\t/**\n\t * Destroy\n\t */\n\tdestroy() {\n\t\tthis.pages = undefined;\n\t\tthis.locations = undefined;\n\t\tthis.epubcfi = undefined;\n\n\t\tthis.pageList = undefined;\n\n\t\tthis.toc = undefined;\n\t\tthis.ncx = undefined;\n\t}\n}\n\nexport default PageList;\n","import {defer, isXml, parse} from \"./utils/core\";\nimport request from \"./utils/request\";\nimport mime from \"../libs/mime/mime\";\nimport Path from \"./utils/path\";\n\n/**\n * Handles Unzipping a requesting files from an Epub Archive\n * @class\n */\nclass Archive {\n\n\tconstructor() {\n\t\tthis.zip = undefined;\n\t\tthis.urlCache = {};\n\n\t\tthis.checkRequirements();\n\n\t}\n\n\t/**\n\t * Checks to see if JSZip exists in global namspace,\n\t * Requires JSZip if it isn't there\n\t * @private\n\t */\n\tcheckRequirements(){\n\t\ttry {\n\t\t\tif (typeof JSZip === \"undefined\") {\n\t\t\t\tlet JSZip = require(\"jszip\");\n\t\t\t\tthis.zip = new JSZip();\n\t\t\t} else {\n\t\t\t\tthis.zip = new JSZip();\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tthrow new Error(\"JSZip lib not loaded\");\n\t\t}\n\t}\n\n\t/**\n\t * Open an archive\n\t * @param  {binary} input\n\t * @param  {boolean} [isBase64] tells JSZip if the input data is base64 encoded\n\t * @return {Promise} zipfile\n\t */\n\topen(input, isBase64){\n\t\treturn this.zip.loadAsync(input, {\"base64\": isBase64});\n\t}\n\n\t/**\n\t * Load and Open an archive\n\t * @param  {string} zipUrl\n\t * @param  {boolean} [isBase64] tells JSZip if the input data is base64 encoded\n\t * @return {Promise} zipfile\n\t */\n\topenUrl(zipUrl, isBase64){\n\t\treturn request(zipUrl, \"binary\")\n\t\t\t.then(function(data){\n\t\t\t\treturn this.zip.loadAsync(data, {\"base64\": isBase64});\n\t\t\t}.bind(this));\n\t}\n\n\t/**\n\t * Request a url from the archive\n\t * @param  {string} url  a url to request from the archive\n\t * @param  {string} [type] specify the type of the returned result\n\t * @return {Promise<Blob | string | JSON | Document | XMLDocument>}\n\t */\n\trequest(url, type){\n\t\tvar deferred = new defer();\n\t\tvar response;\n\t\tvar path = new Path(url);\n\n\t\t// If type isn't set, determine it from the file extension\n\t\tif(!type) {\n\t\t\ttype = path.extension;\n\t\t}\n\n\t\tif(type == \"blob\"){\n\t\t\tresponse = this.getBlob(url);\n\t\t} else {\n\t\t\tresponse = this.getText(url);\n\t\t}\n\n\t\tif (response) {\n\t\t\tresponse.then(function (r) {\n\t\t\t\tlet result = this.handleResponse(r, type);\n\t\t\t\tdeferred.resolve(result);\n\t\t\t}.bind(this));\n\t\t} else {\n\t\t\tdeferred.reject({\n\t\t\t\tmessage : \"File not found in the epub: \" + url,\n\t\t\t\tstack : new Error().stack\n\t\t\t});\n\t\t}\n\t\treturn deferred.promise;\n\t}\n\n\t/**\n\t * Handle the response from request\n\t * @private\n\t * @param  {any} response\n\t * @param  {string} [type]\n\t * @return {any} the parsed result\n\t */\n\thandleResponse(response, type){\n\t\tvar r;\n\n\t\tif(type == \"json\") {\n\t\t\tr = JSON.parse(response);\n\t\t}\n\t\telse\n\t\tif(isXml(type)) {\n\t\t\tr = parse(response, \"text/xml\");\n\t\t}\n\t\telse\n\t\tif(type == \"xhtml\") {\n\t\t\tr = parse(response, \"application/xhtml+xml\");\n\t\t}\n\t\telse\n\t\tif(type == \"html\" || type == \"htm\") {\n\t\t\tr = parse(response, \"text/html\");\n\t\t } else {\n\t\t\t r = response;\n\t\t }\n\n\t\treturn r;\n\t}\n\n\t/**\n\t * Get a Blob from Archive by Url\n\t * @param  {string} url\n\t * @param  {string} [mimeType]\n\t * @return {Blob}\n\t */\n\tgetBlob(url, mimeType){\n\t\tvar decodededUrl = window.decodeURIComponent(url.substr(1)); // Remove first slash\n\t\tvar entry = this.zip.file(decodededUrl);\n\n\t\tif(entry) {\n\t\t\tmimeType = mimeType || mime.lookup(entry.name);\n\t\t\treturn entry.async(\"uint8array\").then(function(uint8array) {\n\t\t\t\treturn new Blob([uint8array], {type : mimeType});\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Get Text from Archive by Url\n\t * @param  {string} url\n\t * @param  {string} [encoding]\n\t * @return {string}\n\t */\n\tgetText(url, encoding){\n\t\tvar decodededUrl = window.decodeURIComponent(url.substr(1)); // Remove first slash\n\t\tvar entry = this.zip.file(decodededUrl);\n\n\t\tif(entry) {\n\t\t\treturn entry.async(\"string\").then(function(text) {\n\t\t\t\treturn text;\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Get a base64 encoded result from Archive by Url\n\t * @param  {string} url\n\t * @param  {string} [mimeType]\n\t * @return {string} base64 encoded\n\t */\n\tgetBase64(url, mimeType){\n\t\tvar decodededUrl = window.decodeURIComponent(url.substr(1)); // Remove first slash\n\t\tvar entry = this.zip.file(decodededUrl);\n\n\t\tif(entry) {\n\t\t\tmimeType = mimeType || mime.lookup(entry.name);\n\t\t\treturn entry.async(\"base64\").then(function(data) {\n\t\t\t\treturn \"data:\" + mimeType + \";base64,\" + data;\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Create a Url from an unarchived item\n\t * @param  {string} url\n\t * @param  {object} [options.base64] use base64 encoding or blob url\n\t * @return {Promise} url promise with Url string\n\t */\n\tcreateUrl(url, options){\n\t\tvar deferred = new defer();\n\t\tvar _URL = window.URL || window.webkitURL || window.mozURL;\n\t\tvar tempUrl;\n\t\tvar response;\n\t\tvar useBase64 = options && options.base64;\n\n\t\tif(url in this.urlCache) {\n\t\t\tdeferred.resolve(this.urlCache[url]);\n\t\t\treturn deferred.promise;\n\t\t}\n\n\t\tif (useBase64) {\n\t\t\tresponse = this.getBase64(url);\n\n\t\t\tif (response) {\n\t\t\t\tresponse.then(function(tempUrl) {\n\n\t\t\t\t\tthis.urlCache[url] = tempUrl;\n\t\t\t\t\tdeferred.resolve(tempUrl);\n\n\t\t\t\t}.bind(this));\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tresponse = this.getBlob(url);\n\n\t\t\tif (response) {\n\t\t\t\tresponse.then(function(blob) {\n\n\t\t\t\t\ttempUrl = _URL.createObjectURL(blob);\n\t\t\t\t\tthis.urlCache[url] = tempUrl;\n\t\t\t\t\tdeferred.resolve(tempUrl);\n\n\t\t\t\t}.bind(this));\n\n\t\t\t}\n\t\t}\n\n\n\t\tif (!response) {\n\t\t\tdeferred.reject({\n\t\t\t\tmessage : \"File not found in the epub: \" + url,\n\t\t\t\tstack : new Error().stack\n\t\t\t});\n\t\t}\n\n\t\treturn deferred.promise;\n\t}\n\n\t/**\n\t * Revoke Temp Url for a achive item\n\t * @param  {string} url url of the item in the archive\n\t */\n\trevokeUrl(url){\n\t\tvar _URL = window.URL || window.webkitURL || window.mozURL;\n\t\tvar fromCache = this.urlCache[url];\n\t\tif(fromCache) _URL.revokeObjectURL(fromCache);\n\t}\n\n\tdestroy() {\n\t\tvar _URL = window.URL || window.webkitURL || window.mozURL;\n\t\tfor (let fromCache in this.urlCache) {\n\t\t\t_URL.revokeObjectURL(fromCache);\n\t\t}\n\t\tthis.zip = undefined;\n\t\tthis.urlCache = {};\n\t}\n}\n\nexport default Archive;\n","import EventEmitter from \"event-emitter\";\nimport {extend, defer} from \"./utils/core\";\nimport Url from \"./utils/url\";\nimport Path from \"./utils/path\";\nimport Spine from \"./spine\";\nimport Locations from \"./locations\";\nimport Container from \"./container\";\nimport Packaging from \"./packaging\";\nimport Navigation from \"./navigation\";\nimport Resources from \"./resources\";\nimport PageList from \"./pagelist\";\nimport Rendition from \"./rendition\";\nimport Archive from \"./archive\";\nimport request from \"./utils/request\";\nimport EpubCFI from \"./epubcfi\";\nimport { EPUBJS_VERSION, EVENTS } from \"./utils/constants\";\n\nconst CONTAINER_PATH = \"META-INF/container.xml\";\n\nconst INPUT_TYPE = {\n\tBINARY: \"binary\",\n\tBASE64: \"base64\",\n\tEPUB: \"epub\",\n\tOPF: \"opf\",\n\tMANIFEST: \"json\",\n\tDIRECTORY: \"directory\"\n};\n\n/**\n * An Epub representation with methods for the loading, parsing and manipulation\n * of its contents.\n * @class\n * @param {string} [url]\n * @param {object} [options]\n * @param {method} [options.requestMethod] a request function to use instead of the default\n * @param {boolean} [options.requestCredentials=undefined] send the xhr request withCredentials\n * @param {object} [options.requestHeaders=undefined] send the xhr request headers\n * @param {string} [options.encoding=binary] optional to pass 'binary' or base64' for archived Epubs\n * @param {string} [options.replacements=none] use base64, blobUrl, or none for replacing assets in archived Epubs\n * @param {method} [options.canonical] optional function to determine canonical urls for a path\n * @param {string} [options.openAs] optional string to determine the input type\n * @returns {Book}\n * @example new Book(\"/path/to/book.epub\", {})\n * @example new Book({ replacements: \"blobUrl\" })\n */\nclass Book {\n\tconstructor(url, options) {\n\t\t// Allow passing just options to the Book\n\t\tif (typeof(options) === \"undefined\" &&\n\t\t\t  typeof(url) !== \"string\" &&\n\t\t    url instanceof Blob === false) {\n\t\t\toptions = url;\n\t\t\turl = undefined;\n\t\t}\n\n\t\tthis.settings = extend(this.settings || {}, {\n\t\t\trequestMethod: undefined,\n\t\t\trequestCredentials: undefined,\n\t\t\trequestHeaders: undefined,\n\t\t\tencoding: undefined,\n\t\t\treplacements: undefined,\n\t\t\tcanonical: undefined,\n\t\t\topenAs: undefined\n\t\t});\n\n\t\textend(this.settings, options);\n\n\n\t\t// Promises\n\t\tthis.opening = new defer();\n\t\t/**\n\t\t * @member {promise} opened returns after the book is loaded\n\t\t * @memberof Book\n\t\t */\n\t\tthis.opened = this.opening.promise;\n\t\tthis.isOpen = false;\n\n\t\tthis.loading = {\n\t\t\tmanifest: new defer(),\n\t\t\tspine: new defer(),\n\t\t\tmetadata: new defer(),\n\t\t\tcover: new defer(),\n\t\t\tnavigation: new defer(),\n\t\t\tpageList: new defer(),\n\t\t\tresources: new defer()\n\t\t};\n\n\t\tthis.loaded = {\n\t\t\tmanifest: this.loading.manifest.promise,\n\t\t\tspine: this.loading.spine.promise,\n\t\t\tmetadata: this.loading.metadata.promise,\n\t\t\tcover: this.loading.cover.promise,\n\t\t\tnavigation: this.loading.navigation.promise,\n\t\t\tpageList: this.loading.pageList.promise,\n\t\t\tresources: this.loading.resources.promise\n\t\t};\n\n\t\t/**\n\t\t * @member {promise} ready returns after the book is loaded and parsed\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.ready = Promise.all([\n\t\t\tthis.loaded.manifest,\n\t\t\tthis.loaded.spine,\n\t\t\tthis.loaded.metadata,\n\t\t\tthis.loaded.cover,\n\t\t\tthis.loaded.navigation,\n\t\t\tthis.loaded.resources\n\t\t]);\n\n\n\t\t// Queue for methods used before opening\n\t\tthis.isRendered = false;\n\t\t// this._q = queue(this);\n\n\t\t/**\n\t\t * @member {method} request\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.request = this.settings.requestMethod || request;\n\n\t\t/**\n\t\t * @member {Spine} spine\n\t\t * @memberof Book\n\t\t */\n\t\tthis.spine = new Spine();\n\n\t\t/**\n\t\t * @member {Locations} locations\n\t\t * @memberof Book\n\t\t */\n\t\tthis.locations = new Locations(this.spine, this.load.bind(this));\n\n\t\t/**\n\t\t * @member {Navigation} navigation\n\t\t * @memberof Book\n\t\t */\n\t\tthis.navigation = undefined;\n\n\t\t/**\n\t\t * @member {PageList} pagelist\n\t\t * @memberof Book\n\t\t */\n\t\tthis.pageList = undefined;\n\n\t\t/**\n\t\t * @member {Url} url\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.url = undefined;\n\n\t\t/**\n\t\t * @member {Path} path\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.path = undefined;\n\n\t\t/**\n\t\t * @member {boolean} archived\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.archived = false;\n\n\t\t/**\n\t\t * @member {Archive} archive\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.archive = undefined;\n\n\t\t/**\n\t\t * @member {Resources} resources\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.resources = undefined;\n\n\t\t/**\n\t\t * @member {Rendition} rendition\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.rendition = undefined;\n\n\t\t/**\n\t\t * @member {Container} container\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.container = undefined;\n\n\t\t/**\n\t\t * @member {Packaging} packaging\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.packaging = undefined;\n\n\t\t// this.toc = undefined;\n\n\t\tif(url) {\n\t\t\tthis.open(url, this.settings.openAs).catch((error) => {\n\t\t\t\tvar err = new Error(\"Cannot load book at \"+ url );\n\t\t\t\tthis.emit(EVENTS.BOOK.OPEN_FAILED, err);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Open a epub or url\n\t * @param {string | ArrayBuffer} input Url, Path or ArrayBuffer\n\t * @param {string} [what=\"binary\", \"base64\", \"epub\", \"opf\", \"json\", \"directory\"] force opening as a certain type\n\t * @returns {Promise} of when the book has been loaded\n\t * @example book.open(\"/path/to/book.epub\")\n\t */\n\topen(input, what) {\n\t\tvar opening;\n\t\tvar type = what || this.determineType(input);\n\n\t\tif (type === INPUT_TYPE.BINARY) {\n\t\t\tthis.archived = true;\n\t\t\tthis.url = new Url(\"/\", \"\");\n\t\t\topening = this.openEpub(input);\n\t\t} else if (type === INPUT_TYPE.BASE64) {\n\t\t\tthis.archived = true;\n\t\t\tthis.url = new Url(\"/\", \"\");\n\t\t\topening = this.openEpub(input, type);\n\t\t} else if (type === INPUT_TYPE.EPUB) {\n\t\t\tthis.archived = true;\n\t\t\tthis.url = new Url(\"/\", \"\");\n\t\t\topening = this.request(input, \"binary\",this.settings.requestCredentials)\n\t\t\t\t.then(this.openEpub.bind(this));\n\t\t} else if(type == INPUT_TYPE.OPF) {\n\t\t\tthis.url = new Url(input);\n\t\t\topening = this.openPackaging(this.url.Path.toString());\n\t\t} else if(type == INPUT_TYPE.MANIFEST) {\n\t\t\tthis.url = new Url(input);\n\t\t\topening = this.openManifest(this.url.Path.toString());\n\t\t} else {\n\t\t\tthis.url = new Url(input);\n\t\t\topening = this.openContainer(CONTAINER_PATH)\n\t\t\t\t.then(this.openPackaging.bind(this));\n\t\t}\n\n\t\treturn opening;\n\t}\n\n\t/**\n\t * Open an archived epub\n\t * @private\n\t * @param  {binary} data\n\t * @param  {string} [encoding]\n\t * @return {Promise}\n\t */\n\topenEpub(data, encoding) {\n\t\treturn this.unarchive(data, encoding || this.settings.encoding)\n\t\t\t.then(() => {\n\t\t\t\treturn this.openContainer(CONTAINER_PATH);\n\t\t\t})\n\t\t\t.then((packagePath) => {\n\t\t\t\treturn this.openPackaging(packagePath);\n\t\t\t});\n\t}\n\n\t/**\n\t * Open the epub container\n\t * @private\n\t * @param  {string} url\n\t * @return {string} packagePath\n\t */\n\topenContainer(url) {\n\t\treturn this.load(url)\n\t\t\t.then((xml) => {\n\t\t\t\tthis.container = new Container(xml);\n\t\t\t\treturn this.resolve(this.container.packagePath);\n\t\t\t});\n\t}\n\n\t/**\n\t * Open the Open Packaging Format Xml\n\t * @private\n\t * @param  {string} url\n\t * @return {Promise}\n\t */\n\topenPackaging(url) {\n\t\tthis.path = new Path(url);\n\t\treturn this.load(url)\n\t\t\t.then((xml) => {\n\t\t\t\tthis.packaging = new Packaging(xml);\n\t\t\t\treturn this.unpack(this.packaging);\n\t\t\t});\n\t}\n\n\t/**\n\t * Open the manifest JSON\n\t * @private\n\t * @param  {string} url\n\t * @return {Promise}\n\t */\n\topenManifest(url) {\n\t\tthis.path = new Path(url);\n\t\treturn this.load(url)\n\t\t\t.then((json) => {\n\t\t\t\tthis.packaging = new Packaging();\n\t\t\t\tthis.packaging.load(json);\n\t\t\t\treturn this.unpack(this.packaging);\n\t\t\t});\n\t}\n\n\t/**\n\t * Load a resource from the Book\n\t * @param  {string} path path to the resource to load\n\t * @return {Promise}     returns a promise with the requested resource\n\t */\n\tload(path) {\n\t\tvar resolved;\n\n\t\tif(this.archived) {\n\t\t\tresolved = this.resolve(path);\n\t\t\treturn this.archive.request(resolved);\n\t\t} else {\n\t\t\tresolved = this.resolve(path);\n\t\t\treturn this.request(resolved, null, this.settings.requestCredentials, this.settings.requestHeaders);\n\t\t}\n\t}\n\n\t/**\n\t * Resolve a path to it's absolute position in the Book\n\t * @param  {string} path\n\t * @param  {boolean} [absolute] force resolving the full URL\n\t * @return {string}          the resolved path string\n\t */\n\tresolve(path, absolute) {\n\t\tif (!path) {\n\t\t\treturn;\n\t\t}\n\t\tvar resolved = path;\n\t\tvar isAbsolute = (path.indexOf(\"://\") > -1);\n\n\t\tif (isAbsolute) {\n\t\t\treturn path;\n\t\t}\n\n\t\tif (this.path) {\n\t\t\tresolved = this.path.resolve(path);\n\t\t}\n\n\t\tif(absolute != false && this.url) {\n\t\t\tresolved = this.url.resolve(resolved);\n\t\t}\n\n\t\treturn resolved;\n\t}\n\n\t/**\n\t * Get a canonical link to a path\n\t * @param  {string} path\n\t * @return {string} the canonical path string\n\t */\n\tcanonical(path) {\n\t\tvar url = path;\n\n\t\tif (!path) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\tif (this.settings.canonical) {\n\t\t\turl = this.settings.canonical(path);\n\t\t} else {\n\t\t\turl = this.resolve(path, true);\n\t\t}\n\n\t\treturn url;\n\t}\n\n\t/**\n\t * Determine the type of they input passed to open\n\t * @private\n\t * @param  {string} input\n\t * @return {string}  binary | directory | epub | opf\n\t */\n\tdetermineType(input) {\n\t\tvar url;\n\t\tvar path;\n\t\tvar extension;\n\n\t\tif (this.settings.encoding === \"base64\") {\n\t\t\treturn INPUT_TYPE.BASE64;\n\t\t}\n\n\t\tif(typeof(input) != \"string\") {\n\t\t\treturn INPUT_TYPE.BINARY;\n\t\t}\n\n\t\turl = new Url(input);\n\t\tpath = url.path();\n\t\textension = path.extension;\n\n\t\tif (!extension) {\n\t\t\treturn INPUT_TYPE.DIRECTORY;\n\t\t}\n\n\t\tif(extension === \"epub\"){\n\t\t\treturn INPUT_TYPE.EPUB;\n\t\t}\n\n\t\tif(extension === \"opf\"){\n\t\t\treturn INPUT_TYPE.OPF;\n\t\t}\n\n\t\tif(extension === \"json\"){\n\t\t\treturn INPUT_TYPE.MANIFEST;\n\t\t}\n\t}\n\n\n\t/**\n\t * unpack the contents of the Books packageXml\n\t * @private\n\t * @param {document} packageXml XML Document\n\t */\n\tunpack(opf) {\n\t\tthis.package = opf;\n\n\t\tthis.spine.unpack(this.package, this.resolve.bind(this), this.canonical.bind(this));\n\n\t\tthis.resources = new Resources(this.package.manifest, {\n\t\t\tarchive: this.archive,\n\t\t\tresolver: this.resolve.bind(this),\n\t\t\trequest: this.request.bind(this),\n\t\t\treplacements: this.settings.replacements || (this.archived ? \"blobUrl\" : \"base64\")\n\t\t});\n\n\t\tthis.loadNavigation(this.package).then(() => {\n\t\t\t// this.toc = this.navigation.toc;\n\t\t\tthis.loading.navigation.resolve(this.navigation);\n\t\t});\n\n\t\tif (this.package.coverPath) {\n\t\t\tthis.cover = this.resolve(this.package.coverPath);\n\t\t}\n\t\t// Resolve promises\n\t\tthis.loading.manifest.resolve(this.package.manifest);\n\t\tthis.loading.metadata.resolve(this.package.metadata);\n\t\tthis.loading.spine.resolve(this.spine);\n\t\tthis.loading.cover.resolve(this.cover);\n\t\tthis.loading.resources.resolve(this.resources);\n\t\tthis.loading.pageList.resolve(this.pageList);\n\n\t\tthis.isOpen = true;\n\n\t\tif(this.archived || this.settings.replacements && this.settings.replacements != \"none\") {\n\t\t\tthis.replacements().then(() => {\n\t\t\t\tthis.opening.resolve(this);\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.error(err);\n\t\t\t});\n\t\t} else {\n\t\t\t// Resolve book opened promise\n\t\t\tthis.opening.resolve(this);\n\t\t}\n\n\t}\n\n\t/**\n\t * Load Navigation and PageList from package\n\t * @private\n\t * @param {document} opf XML Document\n\t */\n\tloadNavigation(opf) {\n\t\tlet navPath = opf.navPath || opf.ncxPath;\n\t\tlet toc = opf.toc;\n\n\t\t// From json manifest\n\t\tif (toc) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis.navigation = new Navigation(toc);\n\n\t\t\t\tif (opf.pageList) {\n\t\t\t\t\tthis.pageList = new PageList(opf.pageList); // TODO: handle page lists from Manifest\n\t\t\t\t}\n\n\t\t\t\tresolve(this.navigation);\n\t\t\t});\n\t\t}\n\n\t\tif (!navPath) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis.navigation = new Navigation();\n\t\t\t\tthis.pageList = new PageList();\n\n\t\t\t\tresolve(this.navigation);\n\t\t\t});\n\t\t}\n\n\t\treturn this.load(navPath, \"xml\")\n\t\t\t.then((xml) => {\n\t\t\t\tthis.navigation = new Navigation(xml);\n\t\t\t\tthis.pageList = new PageList(xml);\n\t\t\t\treturn this.navigation;\n\t\t\t});\n\t}\n\n\t/**\n\t * Gets a Section of the Book from the Spine\n\t * Alias for `book.spine.get`\n\t * @param {string} target\n\t * @return {Section}\n\t */\n\tsection(target) {\n\t\treturn this.spine.get(target);\n\t}\n\n\t/**\n\t * Sugar to render a book to an element\n\t * @param  {element | string} element element or string to add a rendition to\n\t * @param  {object} [options]\n\t * @return {Rendition}\n\t */\n\trenderTo(element, options) {\n\t\tthis.rendition = new Rendition(this, options);\n\t\tthis.rendition.attachTo(element);\n\n\t\treturn this.rendition;\n\t}\n\n\t/**\n\t * Set if request should use withCredentials\n\t * @param {boolean} credentials\n\t */\n\tsetRequestCredentials(credentials) {\n\t\tthis.settings.requestCredentials = credentials;\n\t}\n\n\t/**\n\t * Set headers request should use\n\t * @param {object} headers\n\t */\n\tsetRequestHeaders(headers) {\n\t\tthis.settings.requestHeaders = headers;\n\t}\n\n\t/**\n\t * Unarchive a zipped epub\n\t * @private\n\t * @param  {binary} input epub data\n\t * @param  {string} [encoding]\n\t * @return {Archive}\n\t */\n\tunarchive(input, encoding) {\n\t\tthis.archive = new Archive();\n\t\treturn this.archive.open(input, encoding);\n\t}\n\n\t/**\n\t * Get the cover url\n\t * @return {string} coverUrl\n\t */\n\tcoverUrl() {\n\t\tvar retrieved = this.loaded.cover.\n\t\t\tthen((url) => {\n\t\t\t\tif(this.archived) {\n\t\t\t\t\t// return this.archive.createUrl(this.cover);\n\t\t\t\t\treturn this.resources.get(this.cover);\n\t\t\t\t}else{\n\t\t\t\t\treturn this.cover;\n\t\t\t\t}\n\t\t\t});\n\n\t\treturn retrieved;\n\t}\n\n\t/**\n\t * Load replacement urls\n\t * @private\n\t * @return {Promise} completed loading urls\n\t */\n\treplacements() {\n\t\tthis.spine.hooks.serialize.register((output, section) => {\n\t\t\tsection.output = this.resources.substitute(output, section.url);\n\t\t});\n\n\t\treturn this.resources.replacements().\n\t\t\tthen(() => {\n\t\t\t\treturn this.resources.replaceCss();\n\t\t\t});\n\t}\n\n\t/**\n\t * Find a DOM Range for a given CFI Range\n\t * @param  {EpubCFI} cfiRange a epub cfi range\n\t * @return {Range}\n\t */\n\tgetRange(cfiRange) {\n\t\tvar cfi = new EpubCFI(cfiRange);\n\t\tvar item = this.spine.get(cfi.spinePos);\n\t\tvar _request = this.load.bind(this);\n\t\tif (!item) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\treject(\"CFI could not be found\");\n\t\t\t});\n\t\t}\n\t\treturn item.load(_request).then(function (contents) {\n\t\t\tvar range = cfi.toRange(item.document);\n\t\t\treturn range;\n\t\t});\n\t}\n\n\t/**\n\t * Generates the Book Key using the identifer in the manifest or other string provided\n\t * @param  {string} [identifier] to use instead of metadata identifier\n\t * @return {string} key\n\t */\n\tkey(identifier) {\n\t\tvar ident = identifier || this.package.metadata.identifier || this.url.filename;\n\t\treturn `epubjs:${EPUBJS_VERSION}:${ident}`;\n\t}\n\n\t/**\n\t * Destroy the Book and all associated objects\n\t */\n\tdestroy() {\n\t\tthis.opened = undefined;\n\t\tthis.loading = undefined;\n\t\tthis.loaded = undefined;\n\t\tthis.ready = undefined;\n\n\t\tthis.isOpen = false;\n\t\tthis.isRendered = false;\n\n\t\tthis.spine && this.spine.destroy();\n\t\tthis.locations && this.locations.destroy();\n\t\tthis.pageList && this.pageList.destroy();\n\t\tthis.archive && this.archive.destroy();\n\t\tthis.resources && this.resources.destroy();\n\t\tthis.container && this.container.destroy();\n\t\tthis.packaging && this.packaging.destroy();\n\t\tthis.rendition && this.rendition.destroy();\n\n\t\tthis.spine = undefined;\n\t\tthis.locations = undefined;\n\t\tthis.pageList = undefined;\n\t\tthis.archive = undefined;\n\t\tthis.resources = undefined;\n\t\tthis.container = undefined;\n\t\tthis.packaging = undefined;\n\t\tthis.rendition = undefined;\n\n\t\tthis.navigation = undefined;\n\t\tthis.url = undefined;\n\t\tthis.path = undefined;\n\t\tthis.archived = false;\n\t}\n\n}\n\n//-- Enable binding events to book\nEventEmitter(Book.prototype);\n\nexport default Book;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Underline = exports.Highlight = exports.Mark = exports.Pane = undefined;\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _svg = require('./svg');\n\nvar _svg2 = _interopRequireDefault(_svg);\n\nvar _events = require('./events');\n\nvar _events2 = _interopRequireDefault(_events);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Pane = exports.Pane = function () {\n    function Pane(target) {\n        var container = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : document.body;\n\n        _classCallCheck(this, Pane);\n\n        this.target = target;\n        this.element = _svg2.default.createElement('svg');\n        this.marks = [];\n\n        // Match the coordinates of the target element\n        this.element.style.position = 'absolute';\n        // Disable pointer events\n        this.element.setAttribute('pointer-events', 'none');\n\n        // Set up mouse event proxying between the target element and the marks\n        _events2.default.proxyMouse(this.target, this.marks);\n\n        this.container = container;\n        this.container.appendChild(this.element);\n\n        this.render();\n    }\n\n    _createClass(Pane, [{\n        key: 'addMark',\n        value: function addMark(mark) {\n            var g = _svg2.default.createElement('g');\n            this.element.appendChild(g);\n            mark.bind(g, this.container);\n\n            this.marks.push(mark);\n\n            mark.render();\n            return mark;\n        }\n    }, {\n        key: 'removeMark',\n        value: function removeMark(mark) {\n            var idx = this.marks.indexOf(mark);\n            if (idx === -1) {\n                return;\n            }\n            var el = mark.unbind();\n            this.element.removeChild(el);\n            this.marks.splice(idx, 1);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            setCoords(this.element, coords(this.target, this.container));\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n                for (var _iterator = this.marks[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                    var m = _step.value;\n\n                    m.render();\n                }\n            } catch (err) {\n                _didIteratorError = true;\n                _iteratorError = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion && _iterator.return) {\n                        _iterator.return();\n                    }\n                } finally {\n                    if (_didIteratorError) {\n                        throw _iteratorError;\n                    }\n                }\n            }\n        }\n    }]);\n\n    return Pane;\n}();\n\nvar Mark = exports.Mark = function () {\n    function Mark() {\n        _classCallCheck(this, Mark);\n\n        this.element = null;\n    }\n\n    _createClass(Mark, [{\n        key: 'bind',\n        value: function bind(element, container) {\n            this.element = element;\n            this.container = container;\n        }\n    }, {\n        key: 'unbind',\n        value: function unbind() {\n            var el = this.element;\n            this.element = null;\n            return el;\n        }\n    }, {\n        key: 'render',\n        value: function render() {}\n    }, {\n        key: 'dispatchEvent',\n        value: function dispatchEvent(e) {\n            if (!this.element) return;\n            this.element.dispatchEvent(e);\n        }\n    }, {\n        key: 'getBoundingClientRect',\n        value: function getBoundingClientRect() {\n            return this.element.getBoundingClientRect();\n        }\n    }, {\n        key: 'getClientRects',\n        value: function getClientRects() {\n            var rects = [];\n            var el = this.element.firstChild;\n            while (el) {\n                rects.push(el.getBoundingClientRect());\n                el = el.nextSibling;\n            }\n            return rects;\n        }\n    }, {\n        key: 'filteredRanges',\n        value: function filteredRanges() {\n            var rects = Array.from(this.range.getClientRects());\n\n            // De-duplicate the boxes\n            return rects.filter(function (box) {\n                for (var i = 0; i < rects.length; i++) {\n                    if (rects[i] === box) {\n                        return true;\n                    }\n                    var contained = contains(rects[i], box);\n                    if (contained) {\n                        return false;\n                    }\n                }\n                return true;\n            });\n        }\n    }]);\n\n    return Mark;\n}();\n\nvar Highlight = exports.Highlight = function (_Mark) {\n    _inherits(Highlight, _Mark);\n\n    function Highlight(range, className, data, attributes) {\n        _classCallCheck(this, Highlight);\n\n        var _this = _possibleConstructorReturn(this, (Highlight.__proto__ || Object.getPrototypeOf(Highlight)).call(this));\n\n        _this.range = range;\n        _this.className = className;\n        _this.data = data || {};\n        _this.attributes = attributes || {};\n        return _this;\n    }\n\n    _createClass(Highlight, [{\n        key: 'bind',\n        value: function bind(element, container) {\n            _get(Highlight.prototype.__proto__ || Object.getPrototypeOf(Highlight.prototype), 'bind', this).call(this, element, container);\n\n            for (var attr in this.data) {\n                if (this.data.hasOwnProperty(attr)) {\n                    this.element.dataset[attr] = this.data[attr];\n                }\n            }\n\n            for (var attr in this.attributes) {\n                if (this.attributes.hasOwnProperty(attr)) {\n                    this.element.setAttribute(attr, this.attributes[attr]);\n                }\n            }\n\n            if (this.className) {\n                this.element.classList.add(this.className);\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            // Empty element\n            while (this.element.firstChild) {\n                this.element.removeChild(this.element.firstChild);\n            }\n\n            var docFrag = this.element.ownerDocument.createDocumentFragment();\n            var filtered = this.filteredRanges();\n            var offset = this.element.getBoundingClientRect();\n            var container = this.container.getBoundingClientRect();\n\n            for (var i = 0, len = filtered.length; i < len; i++) {\n                var r = filtered[i];\n                var el = _svg2.default.createElement('rect');\n                el.setAttribute('x', r.left - offset.left + container.left);\n                el.setAttribute('y', r.top - offset.top + container.top);\n                el.setAttribute('height', r.height);\n                el.setAttribute('width', r.width);\n                docFrag.appendChild(el);\n            }\n\n            this.element.appendChild(docFrag);\n        }\n    }]);\n\n    return Highlight;\n}(Mark);\n\nvar Underline = exports.Underline = function (_Highlight) {\n    _inherits(Underline, _Highlight);\n\n    function Underline(range, className, data, attributes) {\n        _classCallCheck(this, Underline);\n\n        return _possibleConstructorReturn(this, (Underline.__proto__ || Object.getPrototypeOf(Underline)).call(this, range, className, data, attributes));\n    }\n\n    _createClass(Underline, [{\n        key: 'render',\n        value: function render() {\n            // Empty element\n            while (this.element.firstChild) {\n                this.element.removeChild(this.element.firstChild);\n            }\n\n            var docFrag = this.element.ownerDocument.createDocumentFragment();\n            var filtered = this.filteredRanges();\n            var offset = this.element.getBoundingClientRect();\n            var container = this.container.getBoundingClientRect();\n\n            for (var i = 0, len = filtered.length; i < len; i++) {\n                var r = filtered[i];\n\n                var rect = _svg2.default.createElement('rect');\n                rect.setAttribute('x', r.left - offset.left + container.left);\n                rect.setAttribute('y', r.top - offset.top + container.top);\n                rect.setAttribute('height', r.height);\n                rect.setAttribute('width', r.width);\n                rect.setAttribute('fill', 'none');\n\n                var line = _svg2.default.createElement('line');\n                line.setAttribute('x1', r.left - offset.left + container.left);\n                line.setAttribute('x2', r.left - offset.left + container.left + r.width);\n                line.setAttribute('y1', r.top - offset.top + container.top + r.height - 1);\n                line.setAttribute('y2', r.top - offset.top + container.top + r.height - 1);\n\n                line.setAttribute('stroke-width', 1);\n                line.setAttribute('stroke', 'black'); //TODO: match text color?\n                line.setAttribute('stroke-linecap', 'square');\n\n                docFrag.appendChild(rect);\n\n                docFrag.appendChild(line);\n            }\n\n            this.element.appendChild(docFrag);\n        }\n    }]);\n\n    return Underline;\n}(Highlight);\n\nfunction coords(el, container) {\n    var offset = container.getBoundingClientRect();\n    var rect = el.getBoundingClientRect();\n\n    return {\n        top: rect.top - offset.top,\n        left: rect.left - offset.left,\n        height: el.scrollHeight,\n        width: el.scrollWidth\n    };\n}\n\nfunction setCoords(el, coords) {\n    el.style.setProperty('top', coords.top + 'px', 'important');\n    el.style.setProperty('left', coords.left + 'px', 'important');\n    el.style.setProperty('height', coords.height + 'px', 'important');\n    el.style.setProperty('width', coords.width + 'px', 'important');\n}\n\nfunction contains(rect1, rect2) {\n    return rect2.right <= rect1.right && rect2.left >= rect1.left && rect2.top >= rect1.top && rect2.bottom <= rect1.bottom;\n}\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","var isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","/*!\n\nJSZip v3.5.0 - A JavaScript class for generating and reading zip files\n<http://stuartk.com/jszip>\n\n(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>\nDual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.\n\nJSZip uses the library pako released under the MIT license :\nhttps://github.com/nodeca/pako/blob/master/LICENSE\n*/\n\n!function(t){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{(\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this).JSZip=t()}}(function(){return function s(a,o,h){function u(r,t){if(!o[r]){if(!a[r]){var e=\"function\"==typeof require&&require;if(!t&&e)return e(r,!0);if(l)return l(r,!0);var i=new Error(\"Cannot find module '\"+r+\"'\");throw i.code=\"MODULE_NOT_FOUND\",i}var n=o[r]={exports:{}};a[r][0].call(n.exports,function(t){var e=a[r][1][t];return u(e||t)},n,n.exports,s,a,o,h)}return o[r].exports}for(var l=\"function\"==typeof require&&require,t=0;t<h.length;t++)u(h[t]);return u}({1:[function(t,e,r){\"use strict\";var c=t(\"./utils\"),d=t(\"./support\"),p=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";r.encode=function(t){for(var e,r,i,n,s,a,o,h=[],u=0,l=t.length,f=l,d=\"string\"!==c.getTypeOf(t);u<t.length;)f=l-u,i=d?(e=t[u++],r=u<l?t[u++]:0,u<l?t[u++]:0):(e=t.charCodeAt(u++),r=u<l?t.charCodeAt(u++):0,u<l?t.charCodeAt(u++):0),n=e>>2,s=(3&e)<<4|r>>4,a=1<f?(15&r)<<2|i>>6:64,o=2<f?63&i:64,h.push(p.charAt(n)+p.charAt(s)+p.charAt(a)+p.charAt(o));return h.join(\"\")},r.decode=function(t){var e,r,i,n,s,a,o=0,h=0,u=\"data:\";if(t.substr(0,u.length)===u)throw new Error(\"Invalid base64 input, it looks like a data url.\");var l,f=3*(t=t.replace(/[^A-Za-z0-9\\+\\/\\=]/g,\"\")).length/4;if(t.charAt(t.length-1)===p.charAt(64)&&f--,t.charAt(t.length-2)===p.charAt(64)&&f--,f%1!=0)throw new Error(\"Invalid base64 input, bad content length.\");for(l=d.uint8array?new Uint8Array(0|f):new Array(0|f);o<t.length;)e=p.indexOf(t.charAt(o++))<<2|(n=p.indexOf(t.charAt(o++)))>>4,r=(15&n)<<4|(s=p.indexOf(t.charAt(o++)))>>2,i=(3&s)<<6|(a=p.indexOf(t.charAt(o++))),l[h++]=e,64!==s&&(l[h++]=r),64!==a&&(l[h++]=i);return l}},{\"./support\":30,\"./utils\":32}],2:[function(t,e,r){\"use strict\";var i=t(\"./external\"),n=t(\"./stream/DataWorker\"),s=t(\"./stream/DataLengthProbe\"),a=t(\"./stream/Crc32Probe\");s=t(\"./stream/DataLengthProbe\");function o(t,e,r,i,n){this.compressedSize=t,this.uncompressedSize=e,this.crc32=r,this.compression=i,this.compressedContent=n}o.prototype={getContentWorker:function(){var t=new n(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s(\"data_length\")),e=this;return t.on(\"end\",function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error(\"Bug : uncompressed data size mismatch\")}),t},getCompressedWorker:function(){return new n(i.Promise.resolve(this.compressedContent)).withStreamInfo(\"compressedSize\",this.compressedSize).withStreamInfo(\"uncompressedSize\",this.uncompressedSize).withStreamInfo(\"crc32\",this.crc32).withStreamInfo(\"compression\",this.compression)}},o.createWorkerFrom=function(t,e,r){return t.pipe(new a).pipe(new s(\"uncompressedSize\")).pipe(e.compressWorker(r)).pipe(new s(\"compressedSize\")).withStreamInfo(\"compression\",e)},e.exports=o},{\"./external\":6,\"./stream/Crc32Probe\":25,\"./stream/DataLengthProbe\":26,\"./stream/DataWorker\":27}],3:[function(t,e,r){\"use strict\";var i=t(\"./stream/GenericWorker\");r.STORE={magic:\"\\0\\0\",compressWorker:function(t){return new i(\"STORE compression\")},uncompressWorker:function(){return new i(\"STORE decompression\")}},r.DEFLATE=t(\"./flate\")},{\"./flate\":7,\"./stream/GenericWorker\":28}],4:[function(t,e,r){\"use strict\";var i=t(\"./utils\");var o=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();e.exports=function(t,e){return void 0!==t&&t.length?\"string\"!==i.getTypeOf(t)?function(t,e,r,i){var n=o,s=i+r;t^=-1;for(var a=i;a<s;a++)t=t>>>8^n[255&(t^e[a])];return-1^t}(0|e,t,t.length,0):function(t,e,r,i){var n=o,s=i+r;t^=-1;for(var a=i;a<s;a++)t=t>>>8^n[255&(t^e.charCodeAt(a))];return-1^t}(0|e,t,t.length,0):0}},{\"./utils\":32}],5:[function(t,e,r){\"use strict\";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,e,r){\"use strict\";var i=null;i=\"undefined\"!=typeof Promise?Promise:t(\"lie\"),e.exports={Promise:i}},{lie:37}],7:[function(t,e,r){\"use strict\";var i=\"undefined\"!=typeof Uint8Array&&\"undefined\"!=typeof Uint16Array&&\"undefined\"!=typeof Uint32Array,n=t(\"pako\"),s=t(\"./utils\"),a=t(\"./stream/GenericWorker\"),o=i?\"uint8array\":\"array\";function h(t,e){a.call(this,\"FlateWorker/\"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}r.magic=\"\\b\\0\",s.inherits(h,a),h.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(o,t.data),!1)},h.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new n[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},r.compressWorker=function(t){return new h(\"Deflate\",t)},r.uncompressWorker=function(){return new h(\"Inflate\",{})}},{\"./stream/GenericWorker\":28,\"./utils\":32,pako:38}],8:[function(t,e,r){\"use strict\";function A(t,e){var r,i=\"\";for(r=0;r<e;r++)i+=String.fromCharCode(255&t),t>>>=8;return i}function i(t,e,r,i,n,s){var a,o,h=t.file,u=t.compression,l=s!==O.utf8encode,f=I.transformTo(\"string\",s(h.name)),d=I.transformTo(\"string\",O.utf8encode(h.name)),c=h.comment,p=I.transformTo(\"string\",s(c)),m=I.transformTo(\"string\",O.utf8encode(c)),_=d.length!==h.name.length,g=m.length!==c.length,b=\"\",v=\"\",y=\"\",w=h.dir,k=h.date,x={crc32:0,compressedSize:0,uncompressedSize:0};e&&!r||(x.crc32=t.crc32,x.compressedSize=t.compressedSize,x.uncompressedSize=t.uncompressedSize);var S=0;e&&(S|=8),l||!_&&!g||(S|=2048);var z=0,C=0;w&&(z|=16),\"UNIX\"===n?(C=798,z|=function(t,e){var r=t;return t||(r=e?16893:33204),(65535&r)<<16}(h.unixPermissions,w)):(C=20,z|=function(t){return 63&(t||0)}(h.dosPermissions)),a=k.getUTCHours(),a<<=6,a|=k.getUTCMinutes(),a<<=5,a|=k.getUTCSeconds()/2,o=k.getUTCFullYear()-1980,o<<=4,o|=k.getUTCMonth()+1,o<<=5,o|=k.getUTCDate(),_&&(v=A(1,1)+A(B(f),4)+d,b+=\"up\"+A(v.length,2)+v),g&&(y=A(1,1)+A(B(p),4)+m,b+=\"uc\"+A(y.length,2)+y);var E=\"\";return E+=\"\\n\\0\",E+=A(S,2),E+=u.magic,E+=A(a,2),E+=A(o,2),E+=A(x.crc32,4),E+=A(x.compressedSize,4),E+=A(x.uncompressedSize,4),E+=A(f.length,2),E+=A(b.length,2),{fileRecord:R.LOCAL_FILE_HEADER+E+f+b,dirRecord:R.CENTRAL_FILE_HEADER+A(C,2)+E+A(p.length,2)+\"\\0\\0\\0\\0\"+A(z,4)+A(i,4)+f+b+p}}var I=t(\"../utils\"),n=t(\"../stream/GenericWorker\"),O=t(\"../utf8\"),B=t(\"../crc32\"),R=t(\"../signature\");function s(t,e,r,i){n.call(this,\"ZipFileWorker\"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=r,this.encodeFileName=i,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}I.inherits(s,n),s.prototype.push=function(t){var e=t.meta.percent||0,r=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,n.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:r?(e+100*(r-i-1))/r:100}}))},s.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var r=i(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},s.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,r=i(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),e)this.push({data:function(t){return R.DATA_DESCRIPTOR+A(t.crc32,4)+A(t.compressedSize,4)+A(t.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},s.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var r=this.bytesWritten-t,i=function(t,e,r,i,n){var s=I.transformTo(\"string\",n(i));return R.CENTRAL_DIRECTORY_END+\"\\0\\0\\0\\0\"+A(t,2)+A(t,2)+A(e,4)+A(r,4)+A(s.length,2)+s}(this.dirRecords.length,r,t,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},s.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},s.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on(\"data\",function(t){e.processChunk(t)}),t.on(\"end\",function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()}),t.on(\"error\",function(t){e.error(t)}),this},s.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},s.prototype.error=function(t){var e=this._sources;if(!n.prototype.error.call(this,t))return!1;for(var r=0;r<e.length;r++)try{e[r].error(t)}catch(t){}return!0},s.prototype.lock=function(){n.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=s},{\"../crc32\":4,\"../signature\":23,\"../stream/GenericWorker\":28,\"../utf8\":31,\"../utils\":32}],9:[function(t,e,r){\"use strict\";var u=t(\"../compressions\"),i=t(\"./ZipFileWorker\");r.generateWorker=function(t,a,e){var o=new i(a.streamFiles,e,a.platform,a.encodeFileName),h=0;try{t.forEach(function(t,e){h++;var r=function(t,e){var r=t||e,i=u[r];if(!i)throw new Error(r+\" is not a valid compression method !\");return i}(e.options.compression,a.compression),i=e.options.compressionOptions||a.compressionOptions||{},n=e.dir,s=e.date;e._compressWorker(r,i).withStreamInfo(\"file\",{name:t,dir:n,date:s,comment:e.comment||\"\",unixPermissions:e.unixPermissions,dosPermissions:e.dosPermissions}).pipe(o)}),o.entriesCount=h}catch(t){o.error(t)}return o}},{\"../compressions\":3,\"./ZipFileWorker\":8}],10:[function(t,e,r){\"use strict\";function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error(\"The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.\");this.files={},this.comment=null,this.root=\"\",this.clone=function(){var t=new i;for(var e in this)\"function\"!=typeof this[e]&&(t[e]=this[e]);return t}}(i.prototype=t(\"./object\")).loadAsync=t(\"./load\"),i.support=t(\"./support\"),i.defaults=t(\"./defaults\"),i.version=\"3.5.0\",i.loadAsync=function(t,e){return(new i).loadAsync(t,e)},i.external=t(\"./external\"),e.exports=i},{\"./defaults\":5,\"./external\":6,\"./load\":11,\"./object\":15,\"./support\":30}],11:[function(t,e,r){\"use strict\";var i=t(\"./utils\"),n=t(\"./external\"),o=t(\"./utf8\"),h=(i=t(\"./utils\"),t(\"./zipEntries\")),s=t(\"./stream/Crc32Probe\"),u=t(\"./nodejsUtils\");function l(i){return new n.Promise(function(t,e){var r=i.decompressed.getContentWorker().pipe(new s);r.on(\"error\",function(t){e(t)}).on(\"end\",function(){r.streamInfo.crc32!==i.decompressed.crc32?e(new Error(\"Corrupted zip : CRC32 mismatch\")):t()}).resume()})}e.exports=function(t,s){var a=this;return s=i.extend(s||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),u.isNode&&u.isStream(t)?n.Promise.reject(new Error(\"JSZip can't accept a stream when loading a zip file.\")):i.prepareContent(\"the loaded zip file\",t,!0,s.optimizedBinaryString,s.base64).then(function(t){var e=new h(s);return e.load(t),e}).then(function(t){var e=[n.Promise.resolve(t)],r=t.files;if(s.checkCRC32)for(var i=0;i<r.length;i++)e.push(l(r[i]));return n.Promise.all(e)}).then(function(t){for(var e=t.shift(),r=e.files,i=0;i<r.length;i++){var n=r[i];a.file(n.fileNameStr,n.decompressed,{binary:!0,optimizedBinaryString:!0,date:n.date,dir:n.dir,comment:n.fileCommentStr.length?n.fileCommentStr:null,unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions,createFolders:s.createFolders})}return e.zipComment.length&&(a.comment=e.zipComment),a})}},{\"./external\":6,\"./nodejsUtils\":14,\"./stream/Crc32Probe\":25,\"./utf8\":31,\"./utils\":32,\"./zipEntries\":33}],12:[function(t,e,r){\"use strict\";var i=t(\"../utils\"),n=t(\"../stream/GenericWorker\");function s(t,e){n.call(this,\"Nodejs stream input adapter for \"+t),this._upstreamEnded=!1,this._bindStream(e)}i.inherits(s,n),s.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on(\"data\",function(t){e.push({data:t,meta:{percent:0}})}).on(\"error\",function(t){e.isPaused?this.generatedError=t:e.error(t)}).on(\"end\",function(){e.isPaused?e._upstreamEnded=!0:e.end()})},s.prototype.pause=function(){return!!n.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=s},{\"../stream/GenericWorker\":28,\"../utils\":32}],13:[function(t,e,r){\"use strict\";var n=t(\"readable-stream\").Readable;function i(t,e,r){n.call(this,e),this._helper=t;var i=this;t.on(\"data\",function(t,e){i.push(t)||i._helper.pause(),r&&r(e)}).on(\"error\",function(t){i.emit(\"error\",t)}).on(\"end\",function(){i.push(null)})}t(\"../utils\").inherits(i,n),i.prototype._read=function(){this._helper.resume()},e.exports=i},{\"../utils\":32,\"readable-stream\":16}],14:[function(t,e,r){\"use strict\";e.exports={isNode:\"undefined\"!=typeof Buffer,newBufferFrom:function(t,e){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,e);if(\"number\"==typeof t)throw new Error('The \"data\" argument must not be a number');return new Buffer(t,e)},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&\"function\"==typeof t.on&&\"function\"==typeof t.pause&&\"function\"==typeof t.resume}}},{}],15:[function(t,e,r){\"use strict\";function s(t,e,r){var i,n=u.getTypeOf(e),s=u.extend(r||{},f);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),\"string\"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(t=g(t)),s.createFolders&&(i=_(t))&&b.call(this,i,!0);var a=\"string\"===n&&!1===s.binary&&!1===s.base64;r&&void 0!==r.binary||(s.binary=!a),(e instanceof d&&0===e.uncompressedSize||s.dir||!e||0===e.length)&&(s.base64=!1,s.binary=!0,e=\"\",s.compression=\"STORE\",n=\"string\");var o=null;o=e instanceof d||e instanceof l?e:p.isNode&&p.isStream(e)?new m(t,e):u.prepareContent(t,e,s.binary,s.optimizedBinaryString,s.base64);var h=new c(t,o,s);this.files[t]=h}var n=t(\"./utf8\"),u=t(\"./utils\"),l=t(\"./stream/GenericWorker\"),a=t(\"./stream/StreamHelper\"),f=t(\"./defaults\"),d=t(\"./compressedObject\"),c=t(\"./zipObject\"),o=t(\"./generate\"),p=t(\"./nodejsUtils\"),m=t(\"./nodejs/NodejsStreamInputAdapter\"),_=function(t){\"/\"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf(\"/\");return 0<e?t.substring(0,e):\"\"},g=function(t){return\"/\"!==t.slice(-1)&&(t+=\"/\"),t},b=function(t,e){return e=void 0!==e?e:f.createFolders,t=g(t),this.files[t]||s.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function h(t){return\"[object RegExp]\"===Object.prototype.toString.call(t)}var i={load:function(){throw new Error(\"This method has been removed in JSZip 3.0, please check the upgrade guide.\")},forEach:function(t){var e,r,i;for(e in this.files)this.files.hasOwnProperty(e)&&(i=this.files[e],(r=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(r,i))},filter:function(r){var i=[];return this.forEach(function(t,e){r(t,e)&&i.push(e)}),i},file:function(t,e,r){if(1!==arguments.length)return t=this.root+t,s.call(this,t,e,r),this;if(h(t)){var i=t;return this.filter(function(t,e){return!e.dir&&i.test(t)})}var n=this.files[this.root+t];return n&&!n.dir?n:null},folder:function(r){if(!r)return this;if(h(r))return this.filter(function(t,e){return e.dir&&r.test(t)});var t=this.root+r,e=b.call(this,t),i=this.clone();return i.root=e.name,i},remove:function(r){r=this.root+r;var t=this.files[r];if(t||(\"/\"!==r.slice(-1)&&(r+=\"/\"),t=this.files[r]),t&&!t.dir)delete this.files[r];else for(var e=this.filter(function(t,e){return e.name.slice(0,r.length)===r}),i=0;i<e.length;i++)delete this.files[e[i].name];return this},generate:function(t){throw new Error(\"This method has been removed in JSZip 3.0, please check the upgrade guide.\")},generateInternalStream:function(t){var e,r={};try{if((r=u.extend(t||{},{streamFiles:!1,compression:\"STORE\",compressionOptions:null,type:\"\",platform:\"DOS\",comment:null,mimeType:\"application/zip\",encodeFileName:n.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),\"binarystring\"===r.type&&(r.type=\"string\"),!r.type)throw new Error(\"No output type specified.\");u.checkSupport(r.type),\"darwin\"!==r.platform&&\"freebsd\"!==r.platform&&\"linux\"!==r.platform&&\"sunos\"!==r.platform||(r.platform=\"UNIX\"),\"win32\"===r.platform&&(r.platform=\"DOS\");var i=r.comment||this.comment||\"\";e=o.generateWorker(this,r,i)}catch(t){(e=new l(\"error\")).error(t)}return new a(e,r.type||\"string\",r.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type=\"nodebuffer\"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=i},{\"./compressedObject\":2,\"./defaults\":5,\"./generate\":9,\"./nodejs/NodejsStreamInputAdapter\":12,\"./nodejsUtils\":14,\"./stream/GenericWorker\":28,\"./stream/StreamHelper\":29,\"./utf8\":31,\"./utils\":32,\"./zipObject\":35}],16:[function(t,e,r){e.exports=t(\"stream\")},{stream:void 0}],17:[function(t,e,r){\"use strict\";var i=t(\"./DataReader\");function n(t){i.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t(\"../utils\").inherits(n,i),n.prototype.byteAt=function(t){return this.data[this.zero+t]},n.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),r=t.charCodeAt(1),i=t.charCodeAt(2),n=t.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===e&&this.data[s+1]===r&&this.data[s+2]===i&&this.data[s+3]===n)return s-this.zero;return-1},n.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1),i=t.charCodeAt(2),n=t.charCodeAt(3),s=this.readData(4);return e===s[0]&&r===s[1]&&i===s[2]&&n===s[3]},n.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{\"../utils\":32,\"./DataReader\":18}],18:[function(t,e,r){\"use strict\";var i=t(\"../utils\");function n(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}n.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error(\"End of data reached (data length = \"+this.length+\", asked index = \"+t+\"). Corrupted zip ?\")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,r=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)r=(r<<8)+this.byteAt(e);return this.index+=t,r},readString:function(t){return i.transformTo(\"string\",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=n},{\"../utils\":32}],19:[function(t,e,r){\"use strict\";var i=t(\"./Uint8ArrayReader\");function n(t){i.call(this,t)}t(\"../utils\").inherits(n,i),n.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{\"../utils\":32,\"./Uint8ArrayReader\":21}],20:[function(t,e,r){\"use strict\";var i=t(\"./DataReader\");function n(t){i.call(this,t)}t(\"../utils\").inherits(n,i),n.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},n.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},n.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},n.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{\"../utils\":32,\"./DataReader\":18}],21:[function(t,e,r){\"use strict\";var i=t(\"./ArrayReader\");function n(t){i.call(this,t)}t(\"../utils\").inherits(n,i),n.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=n},{\"../utils\":32,\"./ArrayReader\":17}],22:[function(t,e,r){\"use strict\";var i=t(\"../utils\"),n=t(\"../support\"),s=t(\"./ArrayReader\"),a=t(\"./StringReader\"),o=t(\"./NodeBufferReader\"),h=t(\"./Uint8ArrayReader\");e.exports=function(t){var e=i.getTypeOf(t);return i.checkSupport(e),\"string\"!==e||n.uint8array?\"nodebuffer\"===e?new o(t):n.uint8array?new h(i.transformTo(\"uint8array\",t)):new s(i.transformTo(\"array\",t)):new a(t)}},{\"../support\":30,\"../utils\":32,\"./ArrayReader\":17,\"./NodeBufferReader\":19,\"./StringReader\":20,\"./Uint8ArrayReader\":21}],23:[function(t,e,r){\"use strict\";r.LOCAL_FILE_HEADER=\"PK\u0003\u0004\",r.CENTRAL_FILE_HEADER=\"PK\u0001\u0002\",r.CENTRAL_DIRECTORY_END=\"PK\u0005\u0006\",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR=\"PK\u0006\u0007\",r.ZIP64_CENTRAL_DIRECTORY_END=\"PK\u0006\u0006\",r.DATA_DESCRIPTOR=\"PK\u0007\\b\"},{}],24:[function(t,e,r){\"use strict\";var i=t(\"./GenericWorker\"),n=t(\"../utils\");function s(t){i.call(this,\"ConvertWorker to \"+t),this.destType=t}n.inherits(s,i),s.prototype.processChunk=function(t){this.push({data:n.transformTo(this.destType,t.data),meta:t.meta})},e.exports=s},{\"../utils\":32,\"./GenericWorker\":28}],25:[function(t,e,r){\"use strict\";var i=t(\"./GenericWorker\"),n=t(\"../crc32\");function s(){i.call(this,\"Crc32Probe\"),this.withStreamInfo(\"crc32\",0)}t(\"../utils\").inherits(s,i),s.prototype.processChunk=function(t){this.streamInfo.crc32=n(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=s},{\"../crc32\":4,\"../utils\":32,\"./GenericWorker\":28}],26:[function(t,e,r){\"use strict\";var i=t(\"../utils\"),n=t(\"./GenericWorker\");function s(t){n.call(this,\"DataLengthProbe for \"+t),this.propName=t,this.withStreamInfo(t,0)}i.inherits(s,n),s.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}n.prototype.processChunk.call(this,t)},e.exports=s},{\"../utils\":32,\"./GenericWorker\":28}],27:[function(t,e,r){\"use strict\";var i=t(\"../utils\"),n=t(\"./GenericWorker\");function s(t){n.call(this,\"DataWorker\");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type=\"\",this._tickScheduled=!1,t.then(function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=i.getTypeOf(t),e.isPaused||e._tickAndRepeat()},function(t){e.error(t)})}i.inherits(s,n),s.prototype.cleanUp=function(){n.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case\"string\":t=this.data.substring(this.index,e);break;case\"uint8array\":t=this.data.subarray(this.index,e);break;case\"array\":case\"nodebuffer\":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=s},{\"../utils\":32,\"./GenericWorker\":28}],28:[function(t,e,r){\"use strict\";function i(t){this.name=t||\"default\",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(t){this.emit(\"data\",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit(\"end\"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit(\"error\",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit(\"error\",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var r=0;r<this._listeners[t].length;r++)this._listeners[t][r].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error(\"The stream '\"+this+\"' has already been used.\");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on(\"data\",function(t){e.processChunk(t)}),t.on(\"end\",function(){e.end()}),t.on(\"error\",function(t){e.error(t)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error(\"The stream '\"+this+\"' has already been used.\");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t=\"Worker \"+this.name;return this.previous?this.previous+\" -> \"+t:t}},e.exports=i},{}],29:[function(t,e,r){\"use strict\";var h=t(\"../utils\"),n=t(\"./ConvertWorker\"),s=t(\"./GenericWorker\"),u=t(\"../base64\"),i=t(\"../support\"),a=t(\"../external\"),o=null;if(i.nodestream)try{o=t(\"../nodejs/NodejsStreamOutputAdapter\")}catch(t){}function l(t,o){return new a.Promise(function(e,r){var i=[],n=t._internalType,s=t._outputType,a=t._mimeType;t.on(\"data\",function(t,e){i.push(t),o&&o(e)}).on(\"error\",function(t){i=[],r(t)}).on(\"end\",function(){try{var t=function(t,e,r){switch(t){case\"blob\":return h.newBlob(h.transformTo(\"arraybuffer\",e),r);case\"base64\":return u.encode(e);default:return h.transformTo(t,e)}}(s,function(t,e){var r,i=0,n=null,s=0;for(r=0;r<e.length;r++)s+=e[r].length;switch(t){case\"string\":return e.join(\"\");case\"array\":return Array.prototype.concat.apply([],e);case\"uint8array\":for(n=new Uint8Array(s),r=0;r<e.length;r++)n.set(e[r],i),i+=e[r].length;return n;case\"nodebuffer\":return Buffer.concat(e);default:throw new Error(\"concat : unsupported type '\"+t+\"'\")}}(n,i),a);e(t)}catch(t){r(t)}i=[]}).resume()})}function f(t,e,r){var i=e;switch(e){case\"blob\":case\"arraybuffer\":i=\"uint8array\";break;case\"base64\":i=\"string\"}try{this._internalType=i,this._outputType=e,this._mimeType=r,h.checkSupport(i),this._worker=t.pipe(new n(i)),t.lock()}catch(t){this._worker=new s(\"error\"),this._worker.error(t)}}f.prototype={accumulate:function(t){return l(this,t)},on:function(t,e){var r=this;return\"data\"===t?this._worker.on(t,function(t){e.call(r,t.data,t.meta)}):this._worker.on(t,function(){h.delay(e,arguments,r)}),this},resume:function(){return h.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(h.checkSupport(\"nodestream\"),\"nodebuffer\"!==this._outputType)throw new Error(this._outputType+\" is not supported by this method\");return new o(this,{objectMode:\"nodebuffer\"!==this._outputType},t)}},e.exports=f},{\"../base64\":1,\"../external\":6,\"../nodejs/NodejsStreamOutputAdapter\":13,\"../support\":30,\"../utils\":32,\"./ConvertWorker\":24,\"./GenericWorker\":28}],30:[function(t,e,r){\"use strict\";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=\"undefined\"!=typeof ArrayBuffer&&\"undefined\"!=typeof Uint8Array,r.nodebuffer=\"undefined\"!=typeof Buffer,r.uint8array=\"undefined\"!=typeof Uint8Array,\"undefined\"==typeof ArrayBuffer)r.blob=!1;else{var i=new ArrayBuffer(0);try{r.blob=0===new Blob([i],{type:\"application/zip\"}).size}catch(t){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);n.append(i),r.blob=0===n.getBlob(\"application/zip\").size}catch(t){r.blob=!1}}}try{r.nodestream=!!t(\"readable-stream\").Readable}catch(t){r.nodestream=!1}},{\"readable-stream\":16}],31:[function(t,e,s){\"use strict\";for(var o=t(\"./utils\"),h=t(\"./support\"),r=t(\"./nodejsUtils\"),i=t(\"./stream/GenericWorker\"),u=new Array(256),n=0;n<256;n++)u[n]=252<=n?6:248<=n?5:240<=n?4:224<=n?3:192<=n?2:1;u[254]=u[254]=1;function a(){i.call(this,\"utf-8 decode\"),this.leftOver=null}function l(){i.call(this,\"utf-8 encode\")}s.utf8encode=function(t){return h.nodebuffer?r.newBufferFrom(t,\"utf-8\"):function(t){var e,r,i,n,s,a=t.length,o=0;for(n=0;n<a;n++)55296==(64512&(r=t.charCodeAt(n)))&&n+1<a&&56320==(64512&(i=t.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(i-56320),n++),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=h.uint8array?new Uint8Array(o):new Array(o),n=s=0;s<o;n++)55296==(64512&(r=t.charCodeAt(n)))&&n+1<a&&56320==(64512&(i=t.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(i-56320),n++),r<128?e[s++]=r:(r<2048?e[s++]=192|r>>>6:(r<65536?e[s++]=224|r>>>12:(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63),e[s++]=128|r>>>6&63),e[s++]=128|63&r);return e}(t)},s.utf8decode=function(t){return h.nodebuffer?o.transformTo(\"nodebuffer\",t).toString(\"utf-8\"):function(t){var e,r,i,n,s=t.length,a=new Array(2*s);for(e=r=0;e<s;)if((i=t[e++])<128)a[r++]=i;else if(4<(n=u[i]))a[r++]=65533,e+=n-1;else{for(i&=2===n?31:3===n?15:7;1<n&&e<s;)i=i<<6|63&t[e++],n--;1<n?a[r++]=65533:i<65536?a[r++]=i:(i-=65536,a[r++]=55296|i>>10&1023,a[r++]=56320|1023&i)}return a.length!==r&&(a.subarray?a=a.subarray(0,r):a.length=r),o.applyFromCharCode(a)}(t=o.transformTo(h.uint8array?\"uint8array\":\"array\",t))},o.inherits(a,i),a.prototype.processChunk=function(t){var e=o.transformTo(h.uint8array?\"uint8array\":\"array\",t.data);if(this.leftOver&&this.leftOver.length){if(h.uint8array){var r=e;(e=new Uint8Array(r.length+this.leftOver.length)).set(this.leftOver,0),e.set(r,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var i=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;0<=r&&128==(192&t[r]);)r--;return r<0?e:0===r?e:r+u[t[r]]>e?r:e}(e),n=e;i!==e.length&&(h.uint8array?(n=e.subarray(0,i),this.leftOver=e.subarray(i,e.length)):(n=e.slice(0,i),this.leftOver=e.slice(i,e.length))),this.push({data:s.utf8decode(n),meta:t.meta})},a.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=a,o.inherits(l,i),l.prototype.processChunk=function(t){this.push({data:s.utf8encode(t.data),meta:t.meta})},s.Utf8EncodeWorker=l},{\"./nodejsUtils\":14,\"./stream/GenericWorker\":28,\"./support\":30,\"./utils\":32}],32:[function(t,e,a){\"use strict\";var o=t(\"./support\"),h=t(\"./base64\"),r=t(\"./nodejsUtils\"),i=t(\"set-immediate-shim\"),u=t(\"./external\");function n(t){return t}function l(t,e){for(var r=0;r<t.length;++r)e[r]=255&t.charCodeAt(r);return e}a.newBlob=function(e,r){a.checkSupport(\"blob\");try{return new Blob([e],{type:r})}catch(t){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return i.append(e),i.getBlob(r)}catch(t){throw new Error(\"Bug : can't construct the Blob.\")}}};var s={stringifyByChunk:function(t,e,r){var i=[],n=0,s=t.length;if(s<=r)return String.fromCharCode.apply(null,t);for(;n<s;)\"array\"===e||\"nodebuffer\"===e?i.push(String.fromCharCode.apply(null,t.slice(n,Math.min(n+r,s)))):i.push(String.fromCharCode.apply(null,t.subarray(n,Math.min(n+r,s)))),n+=r;return i.join(\"\")},stringifyByChar:function(t){for(var e=\"\",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&1===String.fromCharCode.apply(null,r.allocBuffer(1)).length}catch(t){return!1}}()}};function f(t){var e=65536,r=a.getTypeOf(t),i=!0;if(\"uint8array\"===r?i=s.applyCanBeUsed.uint8array:\"nodebuffer\"===r&&(i=s.applyCanBeUsed.nodebuffer),i)for(;1<e;)try{return s.stringifyByChunk(t,r,e)}catch(t){e=Math.floor(e/2)}return s.stringifyByChar(t)}function d(t,e){for(var r=0;r<t.length;r++)e[r]=t[r];return e}a.applyFromCharCode=f;var c={};c.string={string:n,array:function(t){return l(t,new Array(t.length))},arraybuffer:function(t){return c.string.uint8array(t).buffer},uint8array:function(t){return l(t,new Uint8Array(t.length))},nodebuffer:function(t){return l(t,r.allocBuffer(t.length))}},c.array={string:f,array:n,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return r.newBufferFrom(t)}},c.arraybuffer={string:function(t){return f(new Uint8Array(t))},array:function(t){return d(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:n,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return r.newBufferFrom(new Uint8Array(t))}},c.uint8array={string:f,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:n,nodebuffer:function(t){return r.newBufferFrom(t)}},c.nodebuffer={string:f,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return c.nodebuffer.uint8array(t).buffer},uint8array:function(t){return d(t,new Uint8Array(t.length))},nodebuffer:n},a.transformTo=function(t,e){if(e=e||\"\",!t)return e;a.checkSupport(t);var r=a.getTypeOf(e);return c[r][t](e)},a.getTypeOf=function(t){return\"string\"==typeof t?\"string\":\"[object Array]\"===Object.prototype.toString.call(t)?\"array\":o.nodebuffer&&r.isBuffer(t)?\"nodebuffer\":o.uint8array&&t instanceof Uint8Array?\"uint8array\":o.arraybuffer&&t instanceof ArrayBuffer?\"arraybuffer\":void 0},a.checkSupport=function(t){if(!o[t.toLowerCase()])throw new Error(t+\" is not supported by this platform\")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(t){var e,r,i=\"\";for(r=0;r<(t||\"\").length;r++)i+=\"\\\\x\"+((e=t.charCodeAt(r))<16?\"0\":\"\")+e.toString(16).toUpperCase();return i},a.delay=function(t,e,r){i(function(){t.apply(r||null,e||[])})},a.inherits=function(t,e){function r(){}r.prototype=e.prototype,t.prototype=new r},a.extend=function(){var t,e,r={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===r[e]&&(r[e]=arguments[t][e]);return r},a.prepareContent=function(r,t,i,n,s){return u.Promise.resolve(t).then(function(i){return o.blob&&(i instanceof Blob||-1!==[\"[object File]\",\"[object Blob]\"].indexOf(Object.prototype.toString.call(i)))&&\"undefined\"!=typeof FileReader?new u.Promise(function(e,r){var t=new FileReader;t.onload=function(t){e(t.target.result)},t.onerror=function(t){r(t.target.error)},t.readAsArrayBuffer(i)}):i}).then(function(t){var e=a.getTypeOf(t);return e?(\"arraybuffer\"===e?t=a.transformTo(\"uint8array\",t):\"string\"===e&&(s?t=h.decode(t):i&&!0!==n&&(t=function(t){return l(t,o.uint8array?new Uint8Array(t.length):new Array(t.length))}(t))),t):u.Promise.reject(new Error(\"Can't read the data of '\"+r+\"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?\"))})}},{\"./base64\":1,\"./external\":6,\"./nodejsUtils\":14,\"./support\":30,\"set-immediate-shim\":54}],33:[function(t,e,r){\"use strict\";var i=t(\"./reader/readerFor\"),n=t(\"./utils\"),s=t(\"./signature\"),a=t(\"./zipEntry\"),o=(t(\"./utf8\"),t(\"./support\"));function h(t){this.files=[],this.loadOptions=t}h.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error(\"Corrupted zip or bug: unexpected signature (\"+n.pretty(e)+\", expected \"+n.pretty(t)+\")\")}},isSignature:function(t,e){var r=this.reader.index;this.reader.setIndex(t);var i=this.reader.readString(4)===e;return this.reader.setIndex(r),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=o.uint8array?\"uint8array\":\"array\",r=n.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,r,i=this.zip64EndOfCentralSize-44;0<i;)t=this.reader.readInt(2),e=this.reader.readInt(4),r=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error(\"Multi-volumes zip are not supported\")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(t=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error(\"Corrupted zip or bug: expected \"+this.centralDirRecords+\" records in central dir, got \"+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(t<0)throw!this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error(\"Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html\"):new Error(\"Corrupted zip: can't find end of central directory\");this.reader.setIndex(t);var e=t;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===n.MAX_VALUE_16BITS||this.diskWithCentralDirStart===n.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===n.MAX_VALUE_16BITS||this.centralDirRecords===n.MAX_VALUE_16BITS||this.centralDirSize===n.MAX_VALUE_32BITS||this.centralDirOffset===n.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error(\"Corrupted zip: can't find the ZIP64 end of central directory locator\");if(this.reader.setIndex(t),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error(\"Corrupted zip: can't find the ZIP64 end of central directory\");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var i=e-r;if(0<i)this.isSignature(e,s.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error(\"Corrupted zip: missing \"+Math.abs(i)+\" bytes.\")},prepareReader:function(t){this.reader=i(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=h},{\"./reader/readerFor\":22,\"./signature\":23,\"./support\":30,\"./utf8\":31,\"./utils\":32,\"./zipEntry\":34}],34:[function(t,e,r){\"use strict\";var i=t(\"./reader/readerFor\"),s=t(\"./utils\"),n=t(\"./compressedObject\"),a=t(\"./crc32\"),o=t(\"./utf8\"),h=t(\"./compressions\"),u=t(\"./support\");function l(t,e){this.options=t,this.loadOptions=e}l.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,r;if(t.skip(22),this.fileNameLength=t.readInt(2),r=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error(\"Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)\");if(null===(e=function(t){for(var e in h)if(h.hasOwnProperty(e)&&h[e].magic===t)return h[e];return null}(this.compressionMethod)))throw new Error(\"Corrupted zip : compression \"+s.pretty(this.compressionMethod)+\" unknown (inner file : \"+s.transformTo(\"string\",this.fileName)+\")\");this.decompressed=new n(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error(\"Encrypted zip are not supported\");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||\"/\"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=i(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,r,i,n=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<n;)e=t.readInt(2),r=t.readInt(2),i=t.readData(r),this.extraFields[e]={id:e,length:r,value:i};t.setIndex(n)},handleUTF8:function(){var t=u.uint8array?\"uint8array\":\"array\";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var r=s.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var i=this.findExtraFieldUnicodeComment();if(null!==i)this.fileCommentStr=i;else{var n=s.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(n)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=i(t.value);return 1!==e.readInt(1)?null:a(this.fileName)!==e.readInt(4)?null:o.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=i(t.value);return 1!==e.readInt(1)?null:a(this.fileComment)!==e.readInt(4)?null:o.utf8decode(e.readData(t.length-5))}return null}},e.exports=l},{\"./compressedObject\":2,\"./compressions\":3,\"./crc32\":4,\"./reader/readerFor\":22,\"./support\":30,\"./utf8\":31,\"./utils\":32}],35:[function(t,e,r){\"use strict\";function i(t,e,r){this.name=t,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=e,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}}var s=t(\"./stream/StreamHelper\"),n=t(\"./stream/DataWorker\"),a=t(\"./utf8\"),o=t(\"./compressedObject\"),h=t(\"./stream/GenericWorker\");i.prototype={internalStream:function(t){var e=null,r=\"string\";try{if(!t)throw new Error(\"No output type specified.\");var i=\"string\"===(r=t.toLowerCase())||\"text\"===r;\"binarystring\"!==r&&\"text\"!==r||(r=\"string\"),e=this._decompressWorker();var n=!this._dataBinary;n&&!i&&(e=e.pipe(new a.Utf8EncodeWorker)),!n&&i&&(e=e.pipe(new a.Utf8DecodeWorker))}catch(t){(e=new h(\"error\")).error(t)}return new s(e,r,\"\")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||\"nodebuffer\").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof o&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new a.Utf8EncodeWorker)),o.createWorkerFrom(r,t,e)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof h?this._data:new n(this._data)}};for(var u=[\"asText\",\"asBinary\",\"asNodeBuffer\",\"asUint8Array\",\"asArrayBuffer\"],l=function(){throw new Error(\"This method has been removed in JSZip 3.0, please check the upgrade guide.\")},f=0;f<u.length;f++)i.prototype[u[f]]=l;e.exports=i},{\"./compressedObject\":2,\"./stream/DataWorker\":27,\"./stream/GenericWorker\":28,\"./stream/StreamHelper\":29,\"./utf8\":31}],36:[function(t,l,e){(function(e){\"use strict\";var r,i,t=e.MutationObserver||e.WebKitMutationObserver;if(t){var n=0,s=new t(u),a=e.document.createTextNode(\"\");s.observe(a,{characterData:!0}),r=function(){a.data=n=++n%2}}else if(e.setImmediate||void 0===e.MessageChannel)r=\"document\"in e&&\"onreadystatechange\"in e.document.createElement(\"script\")?function(){var t=e.document.createElement(\"script\");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var o=new e.MessageChannel;o.port1.onmessage=u,r=function(){o.port2.postMessage(0)}}var h=[];function u(){var t,e;i=!0;for(var r=h.length;r;){for(e=h,h=[],t=-1;++t<r;)e[t]();r=h.length}i=!1}l.exports=function(t){1!==h.push(t)||i||r()}}).call(this,\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{}],37:[function(t,e,r){\"use strict\";var n=t(\"immediate\");function u(){}var l={},s=[\"REJECTED\"],a=[\"FULFILLED\"],i=[\"PENDING\"];function o(t){if(\"function\"!=typeof t)throw new TypeError(\"resolver must be a function\");this.state=i,this.queue=[],this.outcome=void 0,t!==u&&c(this,t)}function h(t,e,r){this.promise=t,\"function\"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),\"function\"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function f(e,r,i){n(function(){var t;try{t=r(i)}catch(t){return l.reject(e,t)}t===e?l.reject(e,new TypeError(\"Cannot resolve promise with itself\")):l.resolve(e,t)})}function d(t){var e=t&&t.then;if(t&&(\"object\"==typeof t||\"function\"==typeof t)&&\"function\"==typeof e)return function(){e.apply(t,arguments)}}function c(e,t){var r=!1;function i(t){r||(r=!0,l.reject(e,t))}function n(t){r||(r=!0,l.resolve(e,t))}var s=p(function(){t(n,i)});\"error\"===s.status&&i(s.value)}function p(t,e){var r={};try{r.value=t(e),r.status=\"success\"}catch(t){r.status=\"error\",r.value=t}return r}(e.exports=o).prototype.finally=function(e){if(\"function\"!=typeof e)return this;var r=this.constructor;return this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})})},o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,e){if(\"function\"!=typeof t&&this.state===a||\"function\"!=typeof e&&this.state===s)return this;var r=new this.constructor(u);this.state!==i?f(r,this.state===a?t:e,this.outcome):this.queue.push(new h(r,t,e));return r},h.prototype.callFulfilled=function(t){l.resolve(this.promise,t)},h.prototype.otherCallFulfilled=function(t){f(this.promise,this.onFulfilled,t)},h.prototype.callRejected=function(t){l.reject(this.promise,t)},h.prototype.otherCallRejected=function(t){f(this.promise,this.onRejected,t)},l.resolve=function(t,e){var r=p(d,e);if(\"error\"===r.status)return l.reject(t,r.value);var i=r.value;if(i)c(t,i);else{t.state=a,t.outcome=e;for(var n=-1,s=t.queue.length;++n<s;)t.queue[n].callFulfilled(e)}return t},l.reject=function(t,e){t.state=s,t.outcome=e;for(var r=-1,i=t.queue.length;++r<i;)t.queue[r].callRejected(e);return t},o.resolve=function(t){if(t instanceof this)return t;return l.resolve(new this(u),t)},o.reject=function(t){var e=new this(u);return l.reject(e,t)},o.all=function(t){var r=this;if(\"[object Array]\"!==Object.prototype.toString.call(t))return this.reject(new TypeError(\"must be an array\"));var i=t.length,n=!1;if(!i)return this.resolve([]);var s=new Array(i),a=0,e=-1,o=new this(u);for(;++e<i;)h(t[e],e);return o;function h(t,e){r.resolve(t).then(function(t){s[e]=t,++a!==i||n||(n=!0,l.resolve(o,s))},function(t){n||(n=!0,l.reject(o,t))})}},o.race=function(t){var e=this;if(\"[object Array]\"!==Object.prototype.toString.call(t))return this.reject(new TypeError(\"must be an array\"));var r=t.length,i=!1;if(!r)return this.resolve([]);var n=-1,s=new this(u);for(;++n<r;)a=t[n],e.resolve(a).then(function(t){i||(i=!0,l.resolve(s,t))},function(t){i||(i=!0,l.reject(s,t))});var a;return s}},{immediate:36}],38:[function(t,e,r){\"use strict\";var i={};(0,t(\"./lib/utils/common\").assign)(i,t(\"./lib/deflate\"),t(\"./lib/inflate\"),t(\"./lib/zlib/constants\")),e.exports=i},{\"./lib/deflate\":39,\"./lib/inflate\":40,\"./lib/utils/common\":41,\"./lib/zlib/constants\":44}],39:[function(t,e,r){\"use strict\";var a=t(\"./zlib/deflate\"),o=t(\"./utils/common\"),h=t(\"./utils/strings\"),n=t(\"./zlib/messages\"),s=t(\"./zlib/zstream\"),u=Object.prototype.toString,l=0,f=-1,d=0,c=8;function p(t){if(!(this instanceof p))return new p(t);this.options=o.assign({level:f,method:c,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:\"\"},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var r=a.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==l)throw new Error(n[r]);if(e.header&&a.deflateSetHeader(this.strm,e.header),e.dictionary){var i;if(i=\"string\"==typeof e.dictionary?h.string2buf(e.dictionary):\"[object ArrayBuffer]\"===u.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(r=a.deflateSetDictionary(this.strm,i))!==l)throw new Error(n[r]);this._dict_set=!0}}function i(t,e){var r=new p(e);if(r.push(t,!0),r.err)throw r.msg||n[r.err];return r.result}p.prototype.push=function(t,e){var r,i,n=this.strm,s=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:!0===e?4:0,\"string\"==typeof t?n.input=h.string2buf(t):\"[object ArrayBuffer]\"===u.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new o.Buf8(s),n.next_out=0,n.avail_out=s),1!==(r=a.deflate(n,i))&&r!==l)return this.onEnd(r),!(this.ended=!0);0!==n.avail_out&&(0!==n.avail_in||4!==i&&2!==i)||(\"string\"===this.options.to?this.onData(h.buf2binstring(o.shrinkBuf(n.output,n.next_out))):this.onData(o.shrinkBuf(n.output,n.next_out)))}while((0<n.avail_in||0===n.avail_out)&&1!==r);return 4===i?(r=a.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===l):2!==i||(this.onEnd(l),!(n.avail_out=0))},p.prototype.onData=function(t){this.chunks.push(t)},p.prototype.onEnd=function(t){t===l&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Deflate=p,r.deflate=i,r.deflateRaw=function(t,e){return(e=e||{}).raw=!0,i(t,e)},r.gzip=function(t,e){return(e=e||{}).gzip=!0,i(t,e)}},{\"./utils/common\":41,\"./utils/strings\":42,\"./zlib/deflate\":46,\"./zlib/messages\":51,\"./zlib/zstream\":53}],40:[function(t,e,r){\"use strict\";var d=t(\"./zlib/inflate\"),c=t(\"./utils/common\"),p=t(\"./utils/strings\"),m=t(\"./zlib/constants\"),i=t(\"./zlib/messages\"),n=t(\"./zlib/zstream\"),s=t(\"./zlib/gzheader\"),_=Object.prototype.toString;function a(t){if(!(this instanceof a))return new a(t);this.options=c.assign({chunkSize:16384,windowBits:0,to:\"\"},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new n,this.strm.avail_out=0;var r=d.inflateInit2(this.strm,e.windowBits);if(r!==m.Z_OK)throw new Error(i[r]);this.header=new s,d.inflateGetHeader(this.strm,this.header)}function o(t,e){var r=new a(e);if(r.push(t,!0),r.err)throw r.msg||i[r.err];return r.result}a.prototype.push=function(t,e){var r,i,n,s,a,o,h=this.strm,u=this.options.chunkSize,l=this.options.dictionary,f=!1;if(this.ended)return!1;i=e===~~e?e:!0===e?m.Z_FINISH:m.Z_NO_FLUSH,\"string\"==typeof t?h.input=p.binstring2buf(t):\"[object ArrayBuffer]\"===_.call(t)?h.input=new Uint8Array(t):h.input=t,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new c.Buf8(u),h.next_out=0,h.avail_out=u),(r=d.inflate(h,m.Z_NO_FLUSH))===m.Z_NEED_DICT&&l&&(o=\"string\"==typeof l?p.string2buf(l):\"[object ArrayBuffer]\"===_.call(l)?new Uint8Array(l):l,r=d.inflateSetDictionary(this.strm,o)),r===m.Z_BUF_ERROR&&!0===f&&(r=m.Z_OK,f=!1),r!==m.Z_STREAM_END&&r!==m.Z_OK)return this.onEnd(r),!(this.ended=!0);h.next_out&&(0!==h.avail_out&&r!==m.Z_STREAM_END&&(0!==h.avail_in||i!==m.Z_FINISH&&i!==m.Z_SYNC_FLUSH)||(\"string\"===this.options.to?(n=p.utf8border(h.output,h.next_out),s=h.next_out-n,a=p.buf2string(h.output,n),h.next_out=s,h.avail_out=u-s,s&&c.arraySet(h.output,h.output,n,s,0),this.onData(a)):this.onData(c.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(f=!0)}while((0<h.avail_in||0===h.avail_out)&&r!==m.Z_STREAM_END);return r===m.Z_STREAM_END&&(i=m.Z_FINISH),i===m.Z_FINISH?(r=d.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===m.Z_OK):i!==m.Z_SYNC_FLUSH||(this.onEnd(m.Z_OK),!(h.avail_out=0))},a.prototype.onData=function(t){this.chunks.push(t)},a.prototype.onEnd=function(t){t===m.Z_OK&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Inflate=a,r.inflate=o,r.inflateRaw=function(t,e){return(e=e||{}).raw=!0,o(t,e)},r.ungzip=o},{\"./utils/common\":41,\"./utils/strings\":42,\"./zlib/constants\":44,\"./zlib/gzheader\":47,\"./zlib/inflate\":49,\"./zlib/messages\":51,\"./zlib/zstream\":53}],41:[function(t,e,r){\"use strict\";var i=\"undefined\"!=typeof Uint8Array&&\"undefined\"!=typeof Uint16Array&&\"undefined\"!=typeof Int32Array;r.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if(\"object\"!=typeof r)throw new TypeError(r+\"must be non-object\");for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var n={arraySet:function(t,e,r,i,n){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+i),n);else for(var s=0;s<i;s++)t[n+s]=e[r+s]},flattenChunks:function(t){var e,r,i,n,s,a;for(e=i=0,r=t.length;e<r;e++)i+=t[e].length;for(a=new Uint8Array(i),e=n=0,r=t.length;e<r;e++)s=t[e],a.set(s,n),n+=s.length;return a}},s={arraySet:function(t,e,r,i,n){for(var s=0;s<i;s++)t[n+s]=e[r+s]},flattenChunks:function(t){return[].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,n)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,s))},r.setTyped(i)},{}],42:[function(t,e,r){\"use strict\";var h=t(\"./common\"),n=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(t){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){s=!1}for(var u=new h.Buf8(256),i=0;i<256;i++)u[i]=252<=i?6:248<=i?5:240<=i?4:224<=i?3:192<=i?2:1;function l(t,e){if(e<65537&&(t.subarray&&s||!t.subarray&&n))return String.fromCharCode.apply(null,h.shrinkBuf(t,e));for(var r=\"\",i=0;i<e;i++)r+=String.fromCharCode(t[i]);return r}u[254]=u[254]=1,r.string2buf=function(t){var e,r,i,n,s,a=t.length,o=0;for(n=0;n<a;n++)55296==(64512&(r=t.charCodeAt(n)))&&n+1<a&&56320==(64512&(i=t.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(i-56320),n++),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new h.Buf8(o),n=s=0;s<o;n++)55296==(64512&(r=t.charCodeAt(n)))&&n+1<a&&56320==(64512&(i=t.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(i-56320),n++),r<128?e[s++]=r:(r<2048?e[s++]=192|r>>>6:(r<65536?e[s++]=224|r>>>12:(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63),e[s++]=128|r>>>6&63),e[s++]=128|63&r);return e},r.buf2binstring=function(t){return l(t,t.length)},r.binstring2buf=function(t){for(var e=new h.Buf8(t.length),r=0,i=e.length;r<i;r++)e[r]=t.charCodeAt(r);return e},r.buf2string=function(t,e){var r,i,n,s,a=e||t.length,o=new Array(2*a);for(r=i=0;r<a;)if((n=t[r++])<128)o[i++]=n;else if(4<(s=u[n]))o[i++]=65533,r+=s-1;else{for(n&=2===s?31:3===s?15:7;1<s&&r<a;)n=n<<6|63&t[r++],s--;1<s?o[i++]=65533:n<65536?o[i++]=n:(n-=65536,o[i++]=55296|n>>10&1023,o[i++]=56320|1023&n)}return l(o,i)},r.utf8border=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;0<=r&&128==(192&t[r]);)r--;return r<0?e:0===r?e:r+u[t[r]]>e?r:e}},{\"./common\":41}],43:[function(t,e,r){\"use strict\";e.exports=function(t,e,r,i){for(var n=65535&t|0,s=t>>>16&65535|0,a=0;0!==r;){for(r-=a=2e3<r?2e3:r;s=s+(n=n+e[i++]|0)|0,--a;);n%=65521,s%=65521}return n|s<<16|0}},{}],44:[function(t,e,r){\"use strict\";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,r){\"use strict\";var o=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();e.exports=function(t,e,r,i){var n=o,s=i+r;t^=-1;for(var a=i;a<s;a++)t=t>>>8^n[255&(t^e[a])];return-1^t}},{}],46:[function(t,e,r){\"use strict\";var h,d=t(\"../utils/common\"),u=t(\"./trees\"),c=t(\"./adler32\"),p=t(\"./crc32\"),i=t(\"./messages\"),l=0,f=4,m=0,_=-2,g=-1,b=4,n=2,v=8,y=9,s=286,a=30,o=19,w=2*s+1,k=15,x=3,S=258,z=S+x+1,C=42,E=113,A=1,I=2,O=3,B=4;function R(t,e){return t.msg=i[e],e}function T(t){return(t<<1)-(4<t?9:0)}function D(t){for(var e=t.length;0<=--e;)t[e]=0}function F(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(d.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function N(t,e){u._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,F(t.strm)}function U(t,e){t.pending_buf[t.pending++]=e}function P(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function L(t,e){var r,i,n=t.max_chain_length,s=t.strstart,a=t.prev_length,o=t.nice_match,h=t.strstart>t.w_size-z?t.strstart-(t.w_size-z):0,u=t.window,l=t.w_mask,f=t.prev,d=t.strstart+S,c=u[s+a-1],p=u[s+a];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do{if(u[(r=e)+a]===p&&u[r+a-1]===c&&u[r]===u[s]&&u[++r]===u[s+1]){s+=2,r++;do{}while(u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&u[++s]===u[++r]&&s<d);if(i=S-(d-s),s=d-S,a<i){if(t.match_start=e,o<=(a=i))break;c=u[s+a-1],p=u[s+a]}}}while((e=f[e&l])>h&&0!=--n);return a<=t.lookahead?a:t.lookahead}function j(t){var e,r,i,n,s,a,o,h,u,l,f=t.w_size;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-z)){for(d.arraySet(t.window,t.window,f,f,0),t.match_start-=f,t.strstart-=f,t.block_start-=f,e=r=t.hash_size;i=t.head[--e],t.head[e]=f<=i?i-f:0,--r;);for(e=r=f;i=t.prev[--e],t.prev[e]=f<=i?i-f:0,--r;);n+=f}if(0===t.strm.avail_in)break;if(a=t.strm,o=t.window,h=t.strstart+t.lookahead,u=n,l=void 0,l=a.avail_in,u<l&&(l=u),r=0===l?0:(a.avail_in-=l,d.arraySet(o,a.input,a.next_in,l,h),1===a.state.wrap?a.adler=c(a.adler,o,l,h):2===a.state.wrap&&(a.adler=p(a.adler,o,l,h)),a.next_in+=l,a.total_in+=l,l),t.lookahead+=r,t.lookahead+t.insert>=x)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+x-1])&t.hash_mask,t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<x)););}while(t.lookahead<z&&0!==t.strm.avail_in)}function Z(t,e){for(var r,i;;){if(t.lookahead<z){if(j(t),t.lookahead<z&&e===l)return A;if(0===t.lookahead)break}if(r=0,t.lookahead>=x&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-z&&(t.match_length=L(t,r)),t.match_length>=x)if(i=u._tr_tally(t,t.strstart-t.match_start,t.match_length-x),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=x){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(N(t,!1),0===t.strm.avail_out))return A}return t.insert=t.strstart<x-1?t.strstart:x-1,e===f?(N(t,!0),0===t.strm.avail_out?O:B):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?A:I}function W(t,e){for(var r,i,n;;){if(t.lookahead<z){if(j(t),t.lookahead<z&&e===l)return A;if(0===t.lookahead)break}if(r=0,t.lookahead>=x&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=x-1,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-z&&(t.match_length=L(t,r),t.match_length<=5&&(1===t.strategy||t.match_length===x&&4096<t.strstart-t.match_start)&&(t.match_length=x-1)),t.prev_length>=x&&t.match_length<=t.prev_length){for(n=t.strstart+t.lookahead-x,i=u._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-x),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=x-1,t.strstart++,i&&(N(t,!1),0===t.strm.avail_out))return A}else if(t.match_available){if((i=u._tr_tally(t,0,t.window[t.strstart-1]))&&N(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return A}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=u._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<x-1?t.strstart:x-1,e===f?(N(t,!0),0===t.strm.avail_out?O:B):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?A:I}function M(t,e,r,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=i,this.func=n}function H(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new d.Buf16(2*w),this.dyn_dtree=new d.Buf16(2*(2*a+1)),this.bl_tree=new d.Buf16(2*(2*o+1)),D(this.dyn_ltree),D(this.dyn_dtree),D(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new d.Buf16(k+1),this.heap=new d.Buf16(2*s+1),D(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new d.Buf16(2*s+1),D(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function G(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=n,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?C:E,t.adler=2===e.wrap?0:1,e.last_flush=l,u._tr_init(e),m):R(t,_)}function K(t){var e=G(t);return e===m&&function(t){t.window_size=2*t.w_size,D(t.head),t.max_lazy_match=h[t.level].max_lazy,t.good_match=h[t.level].good_length,t.nice_match=h[t.level].nice_length,t.max_chain_length=h[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=x-1,t.match_available=0,t.ins_h=0}(t.state),e}function Y(t,e,r,i,n,s){if(!t)return _;var a=1;if(e===g&&(e=6),i<0?(a=0,i=-i):15<i&&(a=2,i-=16),n<1||y<n||r!==v||i<8||15<i||e<0||9<e||s<0||b<s)return R(t,_);8===i&&(i=9);var o=new H;return(t.state=o).strm=t,o.wrap=a,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=n+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+x-1)/x),o.window=new d.Buf8(2*o.w_size),o.head=new d.Buf16(o.hash_size),o.prev=new d.Buf16(o.w_size),o.lit_bufsize=1<<n+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new d.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=s,o.method=r,K(t)}h=[new M(0,0,0,0,function(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(j(t),0===t.lookahead&&e===l)return A;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+r;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,N(t,!1),0===t.strm.avail_out))return A;if(t.strstart-t.block_start>=t.w_size-z&&(N(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(N(t,!0),0===t.strm.avail_out?O:B):(t.strstart>t.block_start&&(N(t,!1),t.strm.avail_out),A)}),new M(4,4,8,4,Z),new M(4,5,16,8,Z),new M(4,6,32,32,Z),new M(4,4,16,16,W),new M(8,16,32,32,W),new M(8,16,128,128,W),new M(8,32,128,256,W),new M(32,128,258,1024,W),new M(32,258,258,4096,W)],r.deflateInit=function(t,e){return Y(t,e,v,15,8,0)},r.deflateInit2=Y,r.deflateReset=K,r.deflateResetKeep=G,r.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?_:(t.state.gzhead=e,m):_},r.deflate=function(t,e){var r,i,n,s;if(!t||!t.state||5<e||e<0)return t?R(t,_):_;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&e!==f)return R(t,0===t.avail_out?-5:_);if(i.strm=t,r=i.last_flush,i.last_flush=e,i.status===C)if(2===i.wrap)t.adler=0,U(i,31),U(i,139),U(i,8),i.gzhead?(U(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),U(i,255&i.gzhead.time),U(i,i.gzhead.time>>8&255),U(i,i.gzhead.time>>16&255),U(i,i.gzhead.time>>24&255),U(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),U(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(U(i,255&i.gzhead.extra.length),U(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=p(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(U(i,0),U(i,0),U(i,0),U(i,0),U(i,0),U(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),U(i,3),i.status=E);else{var a=v+(i.w_bits-8<<4)<<8;a|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(a|=32),a+=31-a%31,i.status=E,P(i,a),0!==i.strstart&&(P(i,t.adler>>>16),P(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),F(t),n=i.pending,i.pending!==i.pending_buf_size));)U(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),F(t),n=i.pending,i.pending===i.pending_buf_size)){s=1;break}s=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,U(i,s)}while(0!==s);i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),0===s&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),F(t),n=i.pending,i.pending===i.pending_buf_size)){s=1;break}s=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,U(i,s)}while(0!==s);i.gzhead.hcrc&&i.pending>n&&(t.adler=p(t.adler,i.pending_buf,i.pending-n,n)),0===s&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&F(t),i.pending+2<=i.pending_buf_size&&(U(i,255&t.adler),U(i,t.adler>>8&255),t.adler=0,i.status=E)):i.status=E),0!==i.pending){if(F(t),0===t.avail_out)return i.last_flush=-1,m}else if(0===t.avail_in&&T(e)<=T(r)&&e!==f)return R(t,-5);if(666===i.status&&0!==t.avail_in)return R(t,-5);if(0!==t.avail_in||0!==i.lookahead||e!==l&&666!==i.status){var o=2===i.strategy?function(t,e){for(var r;;){if(0===t.lookahead&&(j(t),0===t.lookahead)){if(e===l)return A;break}if(t.match_length=0,r=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(N(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(N(t,!0),0===t.strm.avail_out?O:B):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?A:I}(i,e):3===i.strategy?function(t,e){for(var r,i,n,s,a=t.window;;){if(t.lookahead<=S){if(j(t),t.lookahead<=S&&e===l)return A;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=x&&0<t.strstart&&(i=a[n=t.strstart-1])===a[++n]&&i===a[++n]&&i===a[++n]){s=t.strstart+S;do{}while(i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&i===a[++n]&&n<s);t.match_length=S-(s-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=x?(r=u._tr_tally(t,1,t.match_length-x),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(N(t,!1),0===t.strm.avail_out))return A}return t.insert=0,e===f?(N(t,!0),0===t.strm.avail_out?O:B):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?A:I}(i,e):h[i.level].func(i,e);if(o!==O&&o!==B||(i.status=666),o===A||o===O)return 0===t.avail_out&&(i.last_flush=-1),m;if(o===I&&(1===e?u._tr_align(i):5!==e&&(u._tr_stored_block(i,0,0,!1),3===e&&(D(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),F(t),0===t.avail_out))return i.last_flush=-1,m}return e!==f?m:i.wrap<=0?1:(2===i.wrap?(U(i,255&t.adler),U(i,t.adler>>8&255),U(i,t.adler>>16&255),U(i,t.adler>>24&255),U(i,255&t.total_in),U(i,t.total_in>>8&255),U(i,t.total_in>>16&255),U(i,t.total_in>>24&255)):(P(i,t.adler>>>16),P(i,65535&t.adler)),F(t),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?m:1)},r.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==C&&69!==e&&73!==e&&91!==e&&103!==e&&e!==E&&666!==e?R(t,_):(t.state=null,e===E?R(t,-3):m):_},r.deflateSetDictionary=function(t,e){var r,i,n,s,a,o,h,u,l=e.length;if(!t||!t.state)return _;if(2===(s=(r=t.state).wrap)||1===s&&r.status!==C||r.lookahead)return _;for(1===s&&(t.adler=c(t.adler,e,l,0)),r.wrap=0,l>=r.w_size&&(0===s&&(D(r.head),r.strstart=0,r.block_start=0,r.insert=0),u=new d.Buf8(r.w_size),d.arraySet(u,e,l-r.w_size,r.w_size,0),e=u,l=r.w_size),a=t.avail_in,o=t.next_in,h=t.input,t.avail_in=l,t.next_in=0,t.input=e,j(r);r.lookahead>=x;){for(i=r.strstart,n=r.lookahead-(x-1);r.ins_h=(r.ins_h<<r.hash_shift^r.window[i+x-1])&r.hash_mask,r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++,--n;);r.strstart=i,r.lookahead=x-1,j(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=x-1,r.match_available=0,t.next_in=o,t.input=h,t.avail_in=a,r.wrap=s,m},r.deflateInfo=\"pako deflate (from Nodeca project)\"},{\"../utils/common\":41,\"./adler32\":43,\"./crc32\":45,\"./messages\":51,\"./trees\":52}],47:[function(t,e,r){\"use strict\";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=\"\",this.comment=\"\",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,r){\"use strict\";e.exports=function(t,e){var r,i,n,s,a,o,h,u,l,f,d,c,p,m,_,g,b,v,y,w,k,x,S,z,C;r=t.state,i=t.next_in,z=t.input,n=i+(t.avail_in-5),s=t.next_out,C=t.output,a=s-(e-t.avail_out),o=s+(t.avail_out-257),h=r.dmax,u=r.wsize,l=r.whave,f=r.wnext,d=r.window,c=r.hold,p=r.bits,m=r.lencode,_=r.distcode,g=(1<<r.lenbits)-1,b=(1<<r.distbits)-1;t:do{p<15&&(c+=z[i++]<<p,p+=8,c+=z[i++]<<p,p+=8),v=m[c&g];e:for(;;){if(c>>>=y=v>>>24,p-=y,0===(y=v>>>16&255))C[s++]=65535&v;else{if(!(16&y)){if(0==(64&y)){v=m[(65535&v)+(c&(1<<y)-1)];continue e}if(32&y){r.mode=12;break t}t.msg=\"invalid literal/length code\",r.mode=30;break t}w=65535&v,(y&=15)&&(p<y&&(c+=z[i++]<<p,p+=8),w+=c&(1<<y)-1,c>>>=y,p-=y),p<15&&(c+=z[i++]<<p,p+=8,c+=z[i++]<<p,p+=8),v=_[c&b];r:for(;;){if(c>>>=y=v>>>24,p-=y,!(16&(y=v>>>16&255))){if(0==(64&y)){v=_[(65535&v)+(c&(1<<y)-1)];continue r}t.msg=\"invalid distance code\",r.mode=30;break t}if(k=65535&v,p<(y&=15)&&(c+=z[i++]<<p,(p+=8)<y&&(c+=z[i++]<<p,p+=8)),h<(k+=c&(1<<y)-1)){t.msg=\"invalid distance too far back\",r.mode=30;break t}if(c>>>=y,p-=y,(y=s-a)<k){if(l<(y=k-y)&&r.sane){t.msg=\"invalid distance too far back\",r.mode=30;break t}if(S=d,(x=0)===f){if(x+=u-y,y<w){for(w-=y;C[s++]=d[x++],--y;);x=s-k,S=C}}else if(f<y){if(x+=u+f-y,(y-=f)<w){for(w-=y;C[s++]=d[x++],--y;);if(x=0,f<w){for(w-=y=f;C[s++]=d[x++],--y;);x=s-k,S=C}}}else if(x+=f-y,y<w){for(w-=y;C[s++]=d[x++],--y;);x=s-k,S=C}for(;2<w;)C[s++]=S[x++],C[s++]=S[x++],C[s++]=S[x++],w-=3;w&&(C[s++]=S[x++],1<w&&(C[s++]=S[x++]))}else{for(x=s-k;C[s++]=C[x++],C[s++]=C[x++],C[s++]=C[x++],2<(w-=3););w&&(C[s++]=C[x++],1<w&&(C[s++]=C[x++]))}break}}break}}while(i<n&&s<o);i-=w=p>>3,c&=(1<<(p-=w<<3))-1,t.next_in=i,t.next_out=s,t.avail_in=i<n?n-i+5:5-(i-n),t.avail_out=s<o?o-s+257:257-(s-o),r.hold=c,r.bits=p}},{}],49:[function(t,e,r){\"use strict\";var I=t(\"../utils/common\"),O=t(\"./adler32\"),B=t(\"./crc32\"),R=t(\"./inffast\"),T=t(\"./inftrees\"),D=1,F=2,N=0,U=-2,P=1,i=852,n=592;function L(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function s(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new I.Buf16(320),this.work=new I.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg=\"\",e.wrap&&(t.adler=1&e.wrap),e.mode=P,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new I.Buf32(i),e.distcode=e.distdyn=new I.Buf32(n),e.sane=1,e.back=-1,N):U}function o(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,a(t)):U}function h(t,e){var r,i;return t&&t.state?(i=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?U:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=r,i.wbits=e,o(t))):U}function u(t,e){var r,i;return t?(i=new s,(t.state=i).window=null,(r=h(t,e))!==N&&(t.state=null),r):U}var l,f,d=!0;function j(t){if(d){var e;for(l=new I.Buf32(512),f=new I.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(T(D,t.lens,0,288,l,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;T(F,t.lens,0,32,f,0,t.work,{bits:5}),d=!1}t.lencode=l,t.lenbits=9,t.distcode=f,t.distbits=5}function Z(t,e,r,i){var n,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new I.Buf8(s.wsize)),i>=s.wsize?(I.arraySet(s.window,e,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i<(n=s.wsize-s.wnext)&&(n=i),I.arraySet(s.window,e,r-i,n,s.wnext),(i-=n)?(I.arraySet(s.window,e,r-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0}r.inflateReset=o,r.inflateReset2=h,r.inflateResetKeep=a,r.inflateInit=function(t){return u(t,15)},r.inflateInit2=u,r.inflate=function(t,e){var r,i,n,s,a,o,h,u,l,f,d,c,p,m,_,g,b,v,y,w,k,x,S,z,C=0,E=new I.Buf8(4),A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return U;12===(r=t.state).mode&&(r.mode=13),a=t.next_out,n=t.output,h=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,u=r.hold,l=r.bits,f=o,d=h,x=N;t:for(;;)switch(r.mode){case P:if(0===r.wrap){r.mode=13;break}for(;l<16;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(2&r.wrap&&35615===u){E[r.check=0]=255&u,E[1]=u>>>8&255,r.check=B(r.check,E,2,0),l=u=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&u)<<8)+(u>>8))%31){t.msg=\"incorrect header check\",r.mode=30;break}if(8!=(15&u)){t.msg=\"unknown compression method\",r.mode=30;break}if(l-=4,k=8+(15&(u>>>=4)),0===r.wbits)r.wbits=k;else if(k>r.wbits){t.msg=\"invalid window size\",r.mode=30;break}r.dmax=1<<k,t.adler=r.check=1,r.mode=512&u?10:12,l=u=0;break;case 2:for(;l<16;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(r.flags=u,8!=(255&r.flags)){t.msg=\"unknown compression method\",r.mode=30;break}if(57344&r.flags){t.msg=\"unknown header flags set\",r.mode=30;break}r.head&&(r.head.text=u>>8&1),512&r.flags&&(E[0]=255&u,E[1]=u>>>8&255,r.check=B(r.check,E,2,0)),l=u=0,r.mode=3;case 3:for(;l<32;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.head&&(r.head.time=u),512&r.flags&&(E[0]=255&u,E[1]=u>>>8&255,E[2]=u>>>16&255,E[3]=u>>>24&255,r.check=B(r.check,E,4,0)),l=u=0,r.mode=4;case 4:for(;l<16;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.head&&(r.head.xflags=255&u,r.head.os=u>>8),512&r.flags&&(E[0]=255&u,E[1]=u>>>8&255,r.check=B(r.check,E,2,0)),l=u=0,r.mode=5;case 5:if(1024&r.flags){for(;l<16;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.length=u,r.head&&(r.head.extra_len=u),512&r.flags&&(E[0]=255&u,E[1]=u>>>8&255,r.check=B(r.check,E,2,0)),l=u=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(o<(c=r.length)&&(c=o),c&&(r.head&&(k=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),I.arraySet(r.head.extra,i,s,c,k)),512&r.flags&&(r.check=B(r.check,i,c,s)),o-=c,s+=c,r.length-=c),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===o)break t;for(c=0;k=i[s+c++],r.head&&k&&r.length<65536&&(r.head.name+=String.fromCharCode(k)),k&&c<o;);if(512&r.flags&&(r.check=B(r.check,i,c,s)),o-=c,s+=c,k)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===o)break t;for(c=0;k=i[s+c++],r.head&&k&&r.length<65536&&(r.head.comment+=String.fromCharCode(k)),k&&c<o;);if(512&r.flags&&(r.check=B(r.check,i,c,s)),o-=c,s+=c,k)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;l<16;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(u!==(65535&r.check)){t.msg=\"header crc mismatch\",r.mode=30;break}l=u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=12;break;case 10:for(;l<32;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}t.adler=r.check=L(u),l=u=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=o,r.hold=u,r.bits=l,2;t.adler=r.check=1,r.mode=12;case 12:if(5===e||6===e)break t;case 13:if(r.last){u>>>=7&l,l-=7&l,r.mode=27;break}for(;l<3;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}switch(r.last=1&u,l-=1,3&(u>>>=1)){case 0:r.mode=14;break;case 1:if(j(r),r.mode=20,6!==e)break;u>>>=2,l-=2;break t;case 2:r.mode=17;break;case 3:t.msg=\"invalid block type\",r.mode=30}u>>>=2,l-=2;break;case 14:for(u>>>=7&l,l-=7&l;l<32;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if((65535&u)!=(u>>>16^65535)){t.msg=\"invalid stored block lengths\",r.mode=30;break}if(r.length=65535&u,l=u=0,r.mode=15,6===e)break t;case 15:r.mode=16;case 16:if(c=r.length){if(o<c&&(c=o),h<c&&(c=h),0===c)break t;I.arraySet(n,i,s,c,a),o-=c,s+=c,h-=c,a+=c,r.length-=c;break}r.mode=12;break;case 17:for(;l<14;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(r.nlen=257+(31&u),u>>>=5,l-=5,r.ndist=1+(31&u),u>>>=5,l-=5,r.ncode=4+(15&u),u>>>=4,l-=4,286<r.nlen||30<r.ndist){t.msg=\"too many length or distance symbols\",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;l<3;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.lens[A[r.have++]]=7&u,u>>>=3,l-=3}for(;r.have<19;)r.lens[A[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,S={bits:r.lenbits},x=T(0,r.lens,0,19,r.lencode,0,r.work,S),r.lenbits=S.bits,x){t.msg=\"invalid code lengths set\",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;g=(C=r.lencode[u&(1<<r.lenbits)-1])>>>16&255,b=65535&C,!((_=C>>>24)<=l);){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(b<16)u>>>=_,l-=_,r.lens[r.have++]=b;else{if(16===b){for(z=_+2;l<z;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(u>>>=_,l-=_,0===r.have){t.msg=\"invalid bit length repeat\",r.mode=30;break}k=r.lens[r.have-1],c=3+(3&u),u>>>=2,l-=2}else if(17===b){for(z=_+3;l<z;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}l-=_,k=0,c=3+(7&(u>>>=_)),u>>>=3,l-=3}else{for(z=_+7;l<z;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}l-=_,k=0,c=11+(127&(u>>>=_)),u>>>=7,l-=7}if(r.have+c>r.nlen+r.ndist){t.msg=\"invalid bit length repeat\",r.mode=30;break}for(;c--;)r.lens[r.have++]=k}}if(30===r.mode)break;if(0===r.lens[256]){t.msg=\"invalid code -- missing end-of-block\",r.mode=30;break}if(r.lenbits=9,S={bits:r.lenbits},x=T(D,r.lens,0,r.nlen,r.lencode,0,r.work,S),r.lenbits=S.bits,x){t.msg=\"invalid literal/lengths set\",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,S={bits:r.distbits},x=T(F,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,S),r.distbits=S.bits,x){t.msg=\"invalid distances set\",r.mode=30;break}if(r.mode=20,6===e)break t;case 20:r.mode=21;case 21:if(6<=o&&258<=h){t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=o,r.hold=u,r.bits=l,R(t,d),a=t.next_out,n=t.output,h=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,u=r.hold,l=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;g=(C=r.lencode[u&(1<<r.lenbits)-1])>>>16&255,b=65535&C,!((_=C>>>24)<=l);){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(g&&0==(240&g)){for(v=_,y=g,w=b;g=(C=r.lencode[w+((u&(1<<v+y)-1)>>v)])>>>16&255,b=65535&C,!(v+(_=C>>>24)<=l);){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}u>>>=v,l-=v,r.back+=v}if(u>>>=_,l-=_,r.back+=_,r.length=b,0===g){r.mode=26;break}if(32&g){r.back=-1,r.mode=12;break}if(64&g){t.msg=\"invalid literal/length code\",r.mode=30;break}r.extra=15&g,r.mode=22;case 22:if(r.extra){for(z=r.extra;l<z;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;g=(C=r.distcode[u&(1<<r.distbits)-1])>>>16&255,b=65535&C,!((_=C>>>24)<=l);){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(0==(240&g)){for(v=_,y=g,w=b;g=(C=r.distcode[w+((u&(1<<v+y)-1)>>v)])>>>16&255,b=65535&C,!(v+(_=C>>>24)<=l);){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}u>>>=v,l-=v,r.back+=v}if(u>>>=_,l-=_,r.back+=_,64&g){t.msg=\"invalid distance code\",r.mode=30;break}r.offset=b,r.extra=15&g,r.mode=24;case 24:if(r.extra){for(z=r.extra;l<z;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg=\"invalid distance too far back\",r.mode=30;break}r.mode=25;case 25:if(0===h)break t;if(c=d-h,r.offset>c){if((c=r.offset-c)>r.whave&&r.sane){t.msg=\"invalid distance too far back\",r.mode=30;break}p=c>r.wnext?(c-=r.wnext,r.wsize-c):r.wnext-c,c>r.length&&(c=r.length),m=r.window}else m=n,p=a-r.offset,c=r.length;for(h<c&&(c=h),h-=c,r.length-=c;n[a++]=m[p++],--c;);0===r.length&&(r.mode=21);break;case 26:if(0===h)break t;n[a++]=r.length,h--,r.mode=21;break;case 27:if(r.wrap){for(;l<32;){if(0===o)break t;o--,u|=i[s++]<<l,l+=8}if(d-=h,t.total_out+=d,r.total+=d,d&&(t.adler=r.check=r.flags?B(r.check,n,d,a-d):O(r.check,n,d,a-d)),d=h,(r.flags?u:L(u))!==r.check){t.msg=\"incorrect data check\",r.mode=30;break}l=u=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;l<32;){if(0===o)break t;o--,u+=i[s++]<<l,l+=8}if(u!==(4294967295&r.total)){t.msg=\"incorrect length check\",r.mode=30;break}l=u=0}r.mode=29;case 29:x=1;break t;case 30:x=-3;break t;case 31:return-4;case 32:default:return U}return t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=o,r.hold=u,r.bits=l,(r.wsize||d!==t.avail_out&&r.mode<30&&(r.mode<27||4!==e))&&Z(t,t.output,t.next_out,d-t.avail_out)?(r.mode=31,-4):(f-=t.avail_in,d-=t.avail_out,t.total_in+=f,t.total_out+=d,r.total+=d,r.wrap&&d&&(t.adler=r.check=r.flags?B(r.check,n,d,t.next_out-d):O(r.check,n,d,t.next_out-d)),t.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==f&&0===d||4===e)&&x===N&&(x=-5),x)},r.inflateEnd=function(t){if(!t||!t.state)return U;var e=t.state;return e.window&&(e.window=null),t.state=null,N},r.inflateGetHeader=function(t,e){var r;return t&&t.state?0==(2&(r=t.state).wrap)?U:((r.head=e).done=!1,N):U},r.inflateSetDictionary=function(t,e){var r,i=e.length;return t&&t.state?0!==(r=t.state).wrap&&11!==r.mode?U:11===r.mode&&O(1,e,i,0)!==r.check?-3:Z(t,e,i,i)?(r.mode=31,-4):(r.havedict=1,N):U},r.inflateInfo=\"pako inflate (from Nodeca project)\"},{\"../utils/common\":41,\"./adler32\":43,\"./crc32\":45,\"./inffast\":48,\"./inftrees\":50}],50:[function(t,e,r){\"use strict\";var D=t(\"../utils/common\"),F=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],N=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],U=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],P=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,r,i,n,s,a,o){var h,u,l,f,d,c,p,m,_,g=o.bits,b=0,v=0,y=0,w=0,k=0,x=0,S=0,z=0,C=0,E=0,A=null,I=0,O=new D.Buf16(16),B=new D.Buf16(16),R=null,T=0;for(b=0;b<=15;b++)O[b]=0;for(v=0;v<i;v++)O[e[r+v]]++;for(k=g,w=15;1<=w&&0===O[w];w--);if(w<k&&(k=w),0===w)return n[s++]=20971520,n[s++]=20971520,o.bits=1,0;for(y=1;y<w&&0===O[y];y++);for(k<y&&(k=y),b=z=1;b<=15;b++)if(z<<=1,(z-=O[b])<0)return-1;if(0<z&&(0===t||1!==w))return-1;for(B[1]=0,b=1;b<15;b++)B[b+1]=B[b]+O[b];for(v=0;v<i;v++)0!==e[r+v]&&(a[B[e[r+v]]++]=v);if(c=0===t?(A=R=a,19):1===t?(A=F,I-=257,R=N,T-=257,256):(A=U,R=P,-1),b=y,d=s,S=v=E=0,l=-1,f=(C=1<<(x=k))-1,1===t&&852<C||2===t&&592<C)return 1;for(;;){for(p=b-S,_=a[v]<c?(m=0,a[v]):a[v]>c?(m=R[T+a[v]],A[I+a[v]]):(m=96,0),h=1<<b-S,y=u=1<<x;n[d+(E>>S)+(u-=h)]=p<<24|m<<16|_|0,0!==u;);for(h=1<<b-1;E&h;)h>>=1;if(0!==h?(E&=h-1,E+=h):E=0,v++,0==--O[b]){if(b===w)break;b=e[r+a[v]]}if(k<b&&(E&f)!==l){for(0===S&&(S=k),d+=y,z=1<<(x=b-S);x+S<w&&!((z-=O[x+S])<=0);)x++,z<<=1;if(C+=1<<x,1===t&&852<C||2===t&&592<C)return 1;n[l=E&f]=k<<24|x<<16|d-s|0}}return 0!==E&&(n[d+E]=b-S<<24|64<<16|0),o.bits=k,0}},{\"../utils/common\":41}],51:[function(t,e,r){\"use strict\";e.exports={2:\"need dictionary\",1:\"stream end\",0:\"\",\"-1\":\"file error\",\"-2\":\"stream error\",\"-3\":\"data error\",\"-4\":\"insufficient memory\",\"-5\":\"buffer error\",\"-6\":\"incompatible version\"}},{}],52:[function(t,e,r){\"use strict\";var n=t(\"../utils/common\"),o=0,h=1;function i(t){for(var e=t.length;0<=--e;)t[e]=0}var s=0,a=29,u=256,l=u+1+a,f=30,d=19,_=2*l+1,g=15,c=16,p=7,m=256,b=16,v=17,y=18,w=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],k=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],z=new Array(2*(l+2));i(z);var C=new Array(2*f);i(C);var E=new Array(512);i(E);var A=new Array(256);i(A);var I=new Array(a);i(I);var O,B,R,T=new Array(f);function D(t,e,r,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}function F(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function N(t){return t<256?E[t]:E[256+(t>>>7)]}function U(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function P(t,e,r){t.bi_valid>c-r?(t.bi_buf|=e<<t.bi_valid&65535,U(t,t.bi_buf),t.bi_buf=e>>c-t.bi_valid,t.bi_valid+=r-c):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function L(t,e,r){P(t,r[2*e],r[2*e+1])}function j(t,e){for(var r=0;r|=1&t,t>>>=1,r<<=1,0<--e;);return r>>>1}function Z(t,e,r){var i,n,s=new Array(g+1),a=0;for(i=1;i<=g;i++)s[i]=a=a+r[i-1]<<1;for(n=0;n<=e;n++){var o=t[2*n+1];0!==o&&(t[2*n]=j(s[o]++,o))}}function W(t){var e;for(e=0;e<l;e++)t.dyn_ltree[2*e]=0;for(e=0;e<f;e++)t.dyn_dtree[2*e]=0;for(e=0;e<d;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*m]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function M(t){8<t.bi_valid?U(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function H(t,e,r,i){var n=2*e,s=2*r;return t[n]<t[s]||t[n]===t[s]&&i[e]<=i[r]}function G(t,e,r){for(var i=t.heap[r],n=r<<1;n<=t.heap_len&&(n<t.heap_len&&H(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!H(e,i,t.heap[n],t.depth));)t.heap[r]=t.heap[n],r=n,n<<=1;t.heap[r]=i}function K(t,e,r){var i,n,s,a,o=0;if(0!==t.last_lit)for(;i=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],n=t.pending_buf[t.l_buf+o],o++,0===i?L(t,n,e):(L(t,(s=A[n])+u+1,e),0!==(a=w[s])&&P(t,n-=I[s],a),L(t,s=N(--i),r),0!==(a=k[s])&&P(t,i-=T[s],a)),o<t.last_lit;);L(t,m,e)}function Y(t,e){var r,i,n,s=e.dyn_tree,a=e.stat_desc.static_tree,o=e.stat_desc.has_stree,h=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=_,r=0;r<h;r++)0!==s[2*r]?(t.heap[++t.heap_len]=u=r,t.depth[r]=0):s[2*r+1]=0;for(;t.heap_len<2;)s[2*(n=t.heap[++t.heap_len]=u<2?++u:0)]=1,t.depth[n]=0,t.opt_len--,o&&(t.static_len-=a[2*n+1]);for(e.max_code=u,r=t.heap_len>>1;1<=r;r--)G(t,s,r);for(n=h;r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],G(t,s,1),i=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=i,s[2*n]=s[2*r]+s[2*i],t.depth[n]=(t.depth[r]>=t.depth[i]?t.depth[r]:t.depth[i])+1,s[2*r+1]=s[2*i+1]=n,t.heap[1]=n++,G(t,s,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,i,n,s,a,o,h=e.dyn_tree,u=e.max_code,l=e.stat_desc.static_tree,f=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,c=e.stat_desc.extra_base,p=e.stat_desc.max_length,m=0;for(s=0;s<=g;s++)t.bl_count[s]=0;for(h[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<_;r++)p<(s=h[2*h[2*(i=t.heap[r])+1]+1]+1)&&(s=p,m++),h[2*i+1]=s,u<i||(t.bl_count[s]++,a=0,c<=i&&(a=d[i-c]),o=h[2*i],t.opt_len+=o*(s+a),f&&(t.static_len+=o*(l[2*i+1]+a)));if(0!==m){do{for(s=p-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[p]--,m-=2}while(0<m);for(s=p;0!==s;s--)for(i=t.bl_count[s];0!==i;)u<(n=t.heap[--r])||(h[2*n+1]!==s&&(t.opt_len+=(s-h[2*n+1])*h[2*n],h[2*n+1]=s),i--)}}(t,e),Z(s,u,t.bl_count)}function X(t,e,r){var i,n,s=-1,a=e[1],o=0,h=7,u=4;for(0===a&&(h=138,u=3),e[2*(r+1)+1]=65535,i=0;i<=r;i++)n=a,a=e[2*(i+1)+1],++o<h&&n===a||(o<u?t.bl_tree[2*n]+=o:0!==n?(n!==s&&t.bl_tree[2*n]++,t.bl_tree[2*b]++):o<=10?t.bl_tree[2*v]++:t.bl_tree[2*y]++,s=n,u=(o=0)===a?(h=138,3):n===a?(h=6,3):(h=7,4))}function V(t,e,r){var i,n,s=-1,a=e[1],o=0,h=7,u=4;for(0===a&&(h=138,u=3),i=0;i<=r;i++)if(n=a,a=e[2*(i+1)+1],!(++o<h&&n===a)){if(o<u)for(;L(t,n,t.bl_tree),0!=--o;);else 0!==n?(n!==s&&(L(t,n,t.bl_tree),o--),L(t,b,t.bl_tree),P(t,o-3,2)):o<=10?(L(t,v,t.bl_tree),P(t,o-3,3)):(L(t,y,t.bl_tree),P(t,o-11,7));s=n,u=(o=0)===a?(h=138,3):n===a?(h=6,3):(h=7,4)}}i(T);var q=!1;function J(t,e,r,i){P(t,(s<<1)+(i?1:0),3),function(t,e,r,i){M(t),i&&(U(t,r),U(t,~r)),n.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}(t,e,r,!0)}r._tr_init=function(t){q||(function(){var t,e,r,i,n,s=new Array(g+1);for(i=r=0;i<a-1;i++)for(I[i]=r,t=0;t<1<<w[i];t++)A[r++]=i;for(A[r-1]=i,i=n=0;i<16;i++)for(T[i]=n,t=0;t<1<<k[i];t++)E[n++]=i;for(n>>=7;i<f;i++)for(T[i]=n<<7,t=0;t<1<<k[i]-7;t++)E[256+n++]=i;for(e=0;e<=g;e++)s[e]=0;for(t=0;t<=143;)z[2*t+1]=8,t++,s[8]++;for(;t<=255;)z[2*t+1]=9,t++,s[9]++;for(;t<=279;)z[2*t+1]=7,t++,s[7]++;for(;t<=287;)z[2*t+1]=8,t++,s[8]++;for(Z(z,l+1,s),t=0;t<f;t++)C[2*t+1]=5,C[2*t]=j(t,5);O=new D(z,w,u+1,l,g),B=new D(C,k,0,f,g),R=new D(new Array(0),x,0,d,p)}(),q=!0),t.l_desc=new F(t.dyn_ltree,O),t.d_desc=new F(t.dyn_dtree,B),t.bl_desc=new F(t.bl_tree,R),t.bi_buf=0,t.bi_valid=0,W(t)},r._tr_stored_block=J,r._tr_flush_block=function(t,e,r,i){var n,s,a=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return o;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return h;for(e=32;e<u;e++)if(0!==t.dyn_ltree[2*e])return h;return o}(t)),Y(t,t.l_desc),Y(t,t.d_desc),a=function(t){var e;for(X(t,t.dyn_ltree,t.l_desc.max_code),X(t,t.dyn_dtree,t.d_desc.max_code),Y(t,t.bl_desc),e=d-1;3<=e&&0===t.bl_tree[2*S[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),n=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=n&&(n=s)):n=s=r+5,r+4<=n&&-1!==e?J(t,e,r,i):4===t.strategy||s===n?(P(t,2+(i?1:0),3),K(t,z,C)):(P(t,4+(i?1:0),3),function(t,e,r,i){var n;for(P(t,e-257,5),P(t,r-1,5),P(t,i-4,4),n=0;n<i;n++)P(t,t.bl_tree[2*S[n]+1],3);V(t,t.dyn_ltree,e-1),V(t,t.dyn_dtree,r-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),K(t,t.dyn_ltree,t.dyn_dtree)),W(t),i&&M(t)},r._tr_tally=function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(A[r]+u+1)]++,t.dyn_dtree[2*N(e)]++),t.last_lit===t.lit_bufsize-1},r._tr_align=function(t){P(t,2,3),L(t,m,z),function(t){16===t.bi_valid?(U(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{\"../utils/common\":41}],53:[function(t,e,r){\"use strict\";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=\"\",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,e,r){\"use strict\";e.exports=\"function\"==typeof setImmediate?setImmediate:function(){var t=[].slice.apply(arguments);t.splice(1,0,0),setTimeout.apply(null,t)}},{}]},{},[10])(10)});","'use strict';\n\nvar d        = require('d')\n  , callable = require('es5-ext/object/valid-callable')\n\n  , apply = Function.prototype.apply, call = Function.prototype.call\n  , create = Object.create, defineProperty = Object.defineProperty\n  , defineProperties = Object.defineProperties\n  , hasOwnProperty = Object.prototype.hasOwnProperty\n  , descriptor = { configurable: true, enumerable: false, writable: true }\n\n  , on, once, off, emit, methods, descriptors, base;\n\non = function (type, listener) {\n\tvar data;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) {\n\t\tdata = descriptor.value = create(null);\n\t\tdefineProperty(this, '__ee__', descriptor);\n\t\tdescriptor.value = null;\n\t} else {\n\t\tdata = this.__ee__;\n\t}\n\tif (!data[type]) data[type] = listener;\n\telse if (typeof data[type] === 'object') data[type].push(listener);\n\telse data[type] = [data[type], listener];\n\n\treturn this;\n};\n\nonce = function (type, listener) {\n\tvar once, self;\n\n\tcallable(listener);\n\tself = this;\n\ton.call(this, type, once = function () {\n\t\toff.call(self, type, once);\n\t\tapply.call(listener, this, arguments);\n\t});\n\n\tonce.__eeOnceListener__ = listener;\n\treturn this;\n};\n\noff = function (type, listener) {\n\tvar data, listeners, candidate, i;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return this;\n\tdata = this.__ee__;\n\tif (!data[type]) return this;\n\tlisteners = data[type];\n\n\tif (typeof listeners === 'object') {\n\t\tfor (i = 0; (candidate = listeners[i]); ++i) {\n\t\t\tif ((candidate === listener) ||\n\t\t\t\t\t(candidate.__eeOnceListener__ === listener)) {\n\t\t\t\tif (listeners.length === 2) data[type] = listeners[i ? 0 : 1];\n\t\t\t\telse listeners.splice(i, 1);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif ((listeners === listener) ||\n\t\t\t\t(listeners.__eeOnceListener__ === listener)) {\n\t\t\tdelete data[type];\n\t\t}\n\t}\n\n\treturn this;\n};\n\nemit = function (type) {\n\tvar i, l, listener, listeners, args;\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return;\n\tlisteners = this.__ee__[type];\n\tif (!listeners) return;\n\n\tif (typeof listeners === 'object') {\n\t\tl = arguments.length;\n\t\targs = new Array(l - 1);\n\t\tfor (i = 1; i < l; ++i) args[i - 1] = arguments[i];\n\n\t\tlisteners = listeners.slice();\n\t\tfor (i = 0; (listener = listeners[i]); ++i) {\n\t\t\tapply.call(listener, this, args);\n\t\t}\n\t} else {\n\t\tswitch (arguments.length) {\n\t\tcase 1:\n\t\t\tcall.call(listeners, this);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tcall.call(listeners, this, arguments[1]);\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tcall.call(listeners, this, arguments[1], arguments[2]);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tl = arguments.length;\n\t\t\targs = new Array(l - 1);\n\t\t\tfor (i = 1; i < l; ++i) {\n\t\t\t\targs[i - 1] = arguments[i];\n\t\t\t}\n\t\t\tapply.call(listeners, this, args);\n\t\t}\n\t}\n};\n\nmethods = {\n\ton: on,\n\tonce: once,\n\toff: off,\n\temit: emit\n};\n\ndescriptors = {\n\ton: d(on),\n\tonce: d(once),\n\toff: d(off),\n\temit: d(emit)\n};\n\nbase = defineProperties({}, descriptors);\n\nmodule.exports = exports = function (o) {\n\treturn (o == null) ? create(base) : defineProperties(Object(o), descriptors);\n};\nexports.methods = methods;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.proxyMouse = proxyMouse;\nexports.clone = clone;\n// import 'babelify/polyfill'; // needed for Object.assign\n\nexports.default = {\n    proxyMouse: proxyMouse\n};\n\n/**\n * Start proxying all mouse events that occur on the target node to each node in\n * a set of tracked nodes.\n *\n * The items in tracked do not strictly have to be DOM Nodes, but they do have\n * to have dispatchEvent, getBoundingClientRect, and getClientRects methods.\n *\n * @param target {Node} The node on which to listen for mouse events.\n * @param tracked {Node[]} A (possibly mutable) array of nodes to which to proxy\n *                         events.\n */\n\nfunction proxyMouse(target, tracked) {\n    function dispatch(e) {\n        // We walk through the set of tracked elements in reverse order so that\n        // events are sent to those most recently added first.\n        //\n        // This is the least surprising behaviour as it simulates the way the\n        // browser would work if items added later were drawn \"on top of\"\n        // earlier ones.\n        for (var i = tracked.length - 1; i >= 0; i--) {\n            var t = tracked[i];\n            var x = e.clientX;\n            var y = e.clientY;\n\n            if (e.touches && e.touches.length) {\n                x = e.touches[0].clientX;\n                y = e.touches[0].clientY;\n            }\n\n            if (!contains(t, target, x, y)) {\n                continue;\n            }\n\n            // The event targets this mark, so dispatch a cloned event:\n            t.dispatchEvent(clone(e));\n            // We only dispatch the cloned event to the first matching mark.\n            break;\n        }\n    }\n\n    if (target.nodeName === \"iframe\" || target.nodeName === \"IFRAME\") {\n\n        try {\n            // Try to get the contents if same domain\n            this.target = target.contentDocument;\n        } catch (err) {\n            this.target = target;\n        }\n    } else {\n        this.target = target;\n    }\n\n    var _arr = ['mouseup', 'mousedown', 'click', 'touchstart'];\n    for (var _i = 0; _i < _arr.length; _i++) {\n        var ev = _arr[_i];\n        this.target.addEventListener(ev, function (e) {\n            return dispatch(e);\n        }, false);\n    }\n}\n\n/**\n * Clone a mouse event object.\n *\n * @param e {MouseEvent} A mouse event object to clone.\n * @returns {MouseEvent}\n */\nfunction clone(e) {\n    var opts = Object.assign({}, e, { bubbles: false });\n    try {\n        return new MouseEvent(e.type, opts);\n    } catch (err) {\n        // compat: webkit\n        var copy = document.createEvent('MouseEvents');\n        copy.initMouseEvent(e.type, false, opts.cancelable, opts.view, opts.detail, opts.screenX, opts.screenY, opts.clientX, opts.clientY, opts.ctrlKey, opts.altKey, opts.shiftKey, opts.metaKey, opts.button, opts.relatedTarget);\n        return copy;\n    }\n}\n\n/**\n * Check if the item contains the point denoted by the passed coordinates\n * @param item {Object} An object with getBoundingClientRect and getClientRects\n *                      methods.\n * @param x {Number}\n * @param y {Number}\n * @returns {Boolean}\n */\nfunction contains(item, target, x, y) {\n    // offset\n    var offset = target.getBoundingClientRect();\n\n    function rectContains(r, x, y) {\n        var top = r.top - offset.top;\n        var left = r.left - offset.left;\n        var bottom = top + r.height;\n        var right = left + r.width;\n        return top <= y && left <= x && bottom > y && right > x;\n    }\n\n    // Check overall bounding box first\n    var rect = item.getBoundingClientRect();\n    if (!rectContains(rect, x, y)) {\n        return false;\n    }\n\n    // Then continue to check each child rect\n    var rects = item.getClientRects();\n    for (var i = 0, len = rects.length; i < len; i++) {\n        if (rectContains(rects[i], x, y)) {\n            return true;\n        }\n    }\n    return false;\n}\n","//[4]   \tNameStartChar\t   ::=   \t\":\" | [A-Z] | \"_\" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]\r\n//[4a]   \tNameChar\t   ::=   \tNameStartChar | \"-\" | \".\" | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]\r\n//[5]   \tName\t   ::=   \tNameStartChar (NameChar)*\r\nvar nameStartChar = /[A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]///\\u10000-\\uEFFFF\r\nvar nameChar = new RegExp(\"[\\\\-\\\\.0-9\"+nameStartChar.source.slice(1,-1)+\"\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]\");\r\nvar tagNamePattern = new RegExp('^'+nameStartChar.source+nameChar.source+'*(?:\\:'+nameStartChar.source+nameChar.source+'*)?$');\r\n//var tagNamePattern = /^[a-zA-Z_][\\w\\-\\.]*(?:\\:[a-zA-Z_][\\w\\-\\.]*)?$/\r\n//var handlers = 'resolveEntity,getExternalSubset,characters,endDocument,endElement,endPrefixMapping,ignorableWhitespace,processingInstruction,setDocumentLocator,skippedEntity,startDocument,startElement,startPrefixMapping,notationDecl,unparsedEntityDecl,error,fatalError,warning,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,comment,endCDATA,endDTD,endEntity,startCDATA,startDTD,startEntity'.split(',')\r\n\r\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\r\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\r\nvar S_TAG = 0;//tag name offerring\r\nvar S_ATTR = 1;//attr name offerring \r\nvar S_ATTR_SPACE=2;//attr name end and space offer\r\nvar S_EQ = 3;//=space?\r\nvar S_ATTR_NOQUOT_VALUE = 4;//attr value(no quot value only)\r\nvar S_ATTR_END = 5;//attr value end and no space(quot end)\r\nvar S_TAG_SPACE = 6;//(attr value end || tag end ) && (space offer)\r\nvar S_TAG_CLOSE = 7;//closed el<el />\r\n\r\nfunction XMLReader(){\r\n\t\r\n}\r\n\r\nXMLReader.prototype = {\r\n\tparse:function(source,defaultNSMap,entityMap){\r\n\t\tvar domBuilder = this.domBuilder;\r\n\t\tdomBuilder.startDocument();\r\n\t\t_copy(defaultNSMap ,defaultNSMap = {})\r\n\t\tparse(source,defaultNSMap,entityMap,\r\n\t\t\t\tdomBuilder,this.errorHandler);\r\n\t\tdomBuilder.endDocument();\r\n\t}\r\n}\r\nfunction parse(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){\r\n\tfunction fixedFromCharCode(code) {\r\n\t\t// String.prototype.fromCharCode does not supports\r\n\t\t// > 2 bytes unicode chars directly\r\n\t\tif (code > 0xffff) {\r\n\t\t\tcode -= 0x10000;\r\n\t\t\tvar surrogate1 = 0xd800 + (code >> 10)\r\n\t\t\t\t, surrogate2 = 0xdc00 + (code & 0x3ff);\r\n\r\n\t\t\treturn String.fromCharCode(surrogate1, surrogate2);\r\n\t\t} else {\r\n\t\t\treturn String.fromCharCode(code);\r\n\t\t}\r\n\t}\r\n\tfunction entityReplacer(a){\r\n\t\tvar k = a.slice(1,-1);\r\n\t\tif(k in entityMap){\r\n\t\t\treturn entityMap[k]; \r\n\t\t}else if(k.charAt(0) === '#'){\r\n\t\t\treturn fixedFromCharCode(parseInt(k.substr(1).replace('x','0x')))\r\n\t\t}else{\r\n\t\t\terrorHandler.error('entity not found:'+a);\r\n\t\t\treturn a;\r\n\t\t}\r\n\t}\r\n\tfunction appendText(end){//has some bugs\r\n\t\tif(end>start){\r\n\t\t\tvar xt = source.substring(start,end).replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\tlocator&&position(start);\r\n\t\t\tdomBuilder.characters(xt,0,end-start);\r\n\t\t\tstart = end\r\n\t\t}\r\n\t}\r\n\tfunction position(p,m){\r\n\t\twhile(p>=lineEnd && (m = linePattern.exec(source))){\r\n\t\t\tlineStart = m.index;\r\n\t\t\tlineEnd = lineStart + m[0].length;\r\n\t\t\tlocator.lineNumber++;\r\n\t\t\t//console.log('line++:',locator,startPos,endPos)\r\n\t\t}\r\n\t\tlocator.columnNumber = p-lineStart+1;\r\n\t}\r\n\tvar lineStart = 0;\r\n\tvar lineEnd = 0;\r\n\tvar linePattern = /.*(?:\\r\\n?|\\n)|.*$/g\r\n\tvar locator = domBuilder.locator;\r\n\t\r\n\tvar parseStack = [{currentNSMap:defaultNSMapCopy}]\r\n\tvar closeMap = {};\r\n\tvar start = 0;\r\n\twhile(true){\r\n\t\ttry{\r\n\t\t\tvar tagStart = source.indexOf('<',start);\r\n\t\t\tif(tagStart<0){\r\n\t\t\t\tif(!source.substr(start).match(/^\\s*$/)){\r\n\t\t\t\t\tvar doc = domBuilder.doc;\r\n\t    \t\t\tvar text = doc.createTextNode(source.substr(start));\r\n\t    \t\t\tdoc.appendChild(text);\r\n\t    \t\t\tdomBuilder.currentElement = text;\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(tagStart>start){\r\n\t\t\t\tappendText(tagStart);\r\n\t\t\t}\r\n\t\t\tswitch(source.charAt(tagStart+1)){\r\n\t\t\tcase '/':\r\n\t\t\t\tvar end = source.indexOf('>',tagStart+3);\r\n\t\t\t\tvar tagName = source.substring(tagStart+2,end);\r\n\t\t\t\tvar config = parseStack.pop();\r\n\t\t\t\tif(end<0){\r\n\t\t\t\t\t\r\n\t        \t\ttagName = source.substring(tagStart+2).replace(/[\\s<].*/,'');\r\n\t        \t\t//console.error('#@@@@@@'+tagName)\r\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' is not complete:'+config.tagName);\r\n\t        \t\tend = tagStart+1+tagName.length;\r\n\t        \t}else if(tagName.match(/\\s</)){\r\n\t        \t\ttagName = tagName.replace(/[\\s<].*/,'');\r\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' maybe not complete');\r\n\t        \t\tend = tagStart+1+tagName.length;\r\n\t\t\t\t}\r\n\t\t\t\t//console.error(parseStack.length,parseStack)\r\n\t\t\t\t//console.error(config);\r\n\t\t\t\tvar localNSMap = config.localNSMap;\r\n\t\t\t\tvar endMatch = config.tagName == tagName;\r\n\t\t\t\tvar endIgnoreCaseMach = endMatch || config.tagName&&config.tagName.toLowerCase() == tagName.toLowerCase()\r\n\t\t        if(endIgnoreCaseMach){\r\n\t\t        \tdomBuilder.endElement(config.uri,config.localName,tagName);\r\n\t\t\t\t\tif(localNSMap){\r\n\t\t\t\t\t\tfor(var prefix in localNSMap){\r\n\t\t\t\t\t\t\tdomBuilder.endPrefixMapping(prefix) ;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!endMatch){\r\n\t\t            \terrorHandler.fatalError(\"end tag name: \"+tagName+' is not match the current start tagName:'+config.tagName );\r\n\t\t\t\t\t}\r\n\t\t        }else{\r\n\t\t        \tparseStack.push(config)\r\n\t\t        }\r\n\t\t\t\t\r\n\t\t\t\tend++;\r\n\t\t\t\tbreak;\r\n\t\t\t\t// end elment\r\n\t\t\tcase '?':// <?...?>\r\n\t\t\t\tlocator&&position(tagStart);\r\n\t\t\t\tend = parseInstruction(source,tagStart,domBuilder);\r\n\t\t\t\tbreak;\r\n\t\t\tcase '!':// <!doctype,<![CDATA,<!--\r\n\t\t\t\tlocator&&position(tagStart);\r\n\t\t\t\tend = parseDCC(source,tagStart,domBuilder,errorHandler);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tlocator&&position(tagStart);\r\n\t\t\t\tvar el = new ElementAttributes();\r\n\t\t\t\tvar currentNSMap = parseStack[parseStack.length-1].currentNSMap;\r\n\t\t\t\t//elStartEnd\r\n\t\t\t\tvar end = parseElementStartPart(source,tagStart,el,currentNSMap,entityReplacer,errorHandler);\r\n\t\t\t\tvar len = el.length;\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif(!el.closed && fixSelfClosed(source,end,el.tagName,closeMap)){\r\n\t\t\t\t\tel.closed = true;\r\n\t\t\t\t\tif(!entityMap.nbsp){\r\n\t\t\t\t\t\terrorHandler.warning('unclosed xml attribute');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(locator && len){\r\n\t\t\t\t\tvar locator2 = copyLocator(locator,{});\r\n\t\t\t\t\t//try{//attribute position fixed\r\n\t\t\t\t\tfor(var i = 0;i<len;i++){\r\n\t\t\t\t\t\tvar a = el[i];\r\n\t\t\t\t\t\tposition(a.offset);\r\n\t\t\t\t\t\ta.locator = copyLocator(locator,{});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//}catch(e){console.error('@@@@@'+e)}\r\n\t\t\t\t\tdomBuilder.locator = locator2\r\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\r\n\t\t\t\t\t\tparseStack.push(el)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdomBuilder.locator = locator;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\r\n\t\t\t\t\t\tparseStack.push(el)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif(el.uri === 'http://www.w3.org/1999/xhtml' && !el.closed){\r\n\t\t\t\t\tend = parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder)\r\n\t\t\t\t}else{\r\n\t\t\t\t\tend++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}catch(e){\r\n\t\t\terrorHandler.error('element parse error: '+e)\r\n\t\t\t//errorHandler.error('element parse error: '+e);\r\n\t\t\tend = -1;\r\n\t\t\t//throw e;\r\n\t\t}\r\n\t\tif(end>start){\r\n\t\t\tstart = end;\r\n\t\t}else{\r\n\t\t\t//TODO: sax\r\n\t\t\tappendText(Math.max(tagStart,start)+1);\r\n\t\t}\r\n\t}\r\n}\r\nfunction copyLocator(f,t){\r\n\tt.lineNumber = f.lineNumber;\r\n\tt.columnNumber = f.columnNumber;\r\n\treturn t;\r\n}\r\n\r\n/**\r\n * @see #appendElement(source,elStartEnd,el,selfClosed,entityReplacer,domBuilder,parseStack);\r\n * @return end of the elementStartPart(end of elementEndPart for selfClosed el)\r\n */\r\nfunction parseElementStartPart(source,start,el,currentNSMap,entityReplacer,errorHandler){\r\n\tvar attrName;\r\n\tvar value;\r\n\tvar p = ++start;\r\n\tvar s = S_TAG;//status\r\n\twhile(true){\r\n\t\tvar c = source.charAt(p);\r\n\t\tswitch(c){\r\n\t\tcase '=':\r\n\t\t\tif(s === S_ATTR){//attrName\r\n\t\t\t\tattrName = source.slice(start,p);\r\n\t\t\t\ts = S_EQ;\r\n\t\t\t}else if(s === S_ATTR_SPACE){\r\n\t\t\t\ts = S_EQ;\r\n\t\t\t}else{\r\n\t\t\t\t//fatalError: equal must after attrName or space after attrName\r\n\t\t\t\tthrow new Error('attribute equal must after attrName');\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase '\\'':\r\n\t\tcase '\"':\r\n\t\t\tif(s === S_EQ || s === S_ATTR //|| s == S_ATTR_SPACE\r\n\t\t\t\t){//equal\r\n\t\t\t\tif(s === S_ATTR){\r\n\t\t\t\t\terrorHandler.warning('attribute value must after \"=\"')\r\n\t\t\t\t\tattrName = source.slice(start,p)\r\n\t\t\t\t}\r\n\t\t\t\tstart = p+1;\r\n\t\t\t\tp = source.indexOf(c,start)\r\n\t\t\t\tif(p>0){\r\n\t\t\t\t\tvalue = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\t\t\tel.add(attrName,value,start-1);\r\n\t\t\t\t\ts = S_ATTR_END;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t//fatalError: no end quot match\r\n\t\t\t\t\tthrow new Error('attribute value no end \\''+c+'\\' match');\r\n\t\t\t\t}\r\n\t\t\t}else if(s == S_ATTR_NOQUOT_VALUE){\r\n\t\t\t\tvalue = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\t\t//console.log(attrName,value,start,p)\r\n\t\t\t\tel.add(attrName,value,start);\r\n\t\t\t\t//console.dir(el)\r\n\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed start quot('+c+')!!');\r\n\t\t\t\tstart = p+1;\r\n\t\t\t\ts = S_ATTR_END\r\n\t\t\t}else{\r\n\t\t\t\t//fatalError: no equal before\r\n\t\t\t\tthrow new Error('attribute value must after \"=\"');\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase '/':\r\n\t\t\tswitch(s){\r\n\t\t\tcase S_TAG:\r\n\t\t\t\tel.setTagName(source.slice(start,p));\r\n\t\t\tcase S_ATTR_END:\r\n\t\t\tcase S_TAG_SPACE:\r\n\t\t\tcase S_TAG_CLOSE:\r\n\t\t\t\ts =S_TAG_CLOSE;\r\n\t\t\t\tel.closed = true;\r\n\t\t\tcase S_ATTR_NOQUOT_VALUE:\r\n\t\t\tcase S_ATTR:\r\n\t\t\tcase S_ATTR_SPACE:\r\n\t\t\t\tbreak;\r\n\t\t\t//case S_EQ:\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(\"attribute invalid close char('/')\")\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase ''://end document\r\n\t\t\t//throw new Error('unexpected end of input')\r\n\t\t\terrorHandler.error('unexpected end of input');\r\n\t\t\tif(s == S_TAG){\r\n\t\t\t\tel.setTagName(source.slice(start,p));\r\n\t\t\t}\r\n\t\t\treturn p;\r\n\t\tcase '>':\r\n\t\t\tswitch(s){\r\n\t\t\tcase S_TAG:\r\n\t\t\t\tel.setTagName(source.slice(start,p));\r\n\t\t\tcase S_ATTR_END:\r\n\t\t\tcase S_TAG_SPACE:\r\n\t\t\tcase S_TAG_CLOSE:\r\n\t\t\t\tbreak;//normal\r\n\t\t\tcase S_ATTR_NOQUOT_VALUE://Compatible state\r\n\t\t\tcase S_ATTR:\r\n\t\t\t\tvalue = source.slice(start,p);\r\n\t\t\t\tif(value.slice(-1) === '/'){\r\n\t\t\t\t\tel.closed  = true;\r\n\t\t\t\t\tvalue = value.slice(0,-1)\r\n\t\t\t\t}\r\n\t\t\tcase S_ATTR_SPACE:\r\n\t\t\t\tif(s === S_ATTR_SPACE){\r\n\t\t\t\t\tvalue = attrName;\r\n\t\t\t\t}\r\n\t\t\t\tif(s == S_ATTR_NOQUOT_VALUE){\r\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!!');\r\n\t\t\t\t\tel.add(attrName,value.replace(/&#?\\w+;/g,entityReplacer),start)\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(currentNSMap[''] !== 'http://www.w3.org/1999/xhtml' || !value.match(/^(?:disabled|checked|selected)$/i)){\r\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed value!! \"'+value+'\" instead!!')\r\n\t\t\t\t\t}\r\n\t\t\t\t\tel.add(value,value,start)\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase S_EQ:\r\n\t\t\t\tthrow new Error('attribute value missed!!');\r\n\t\t\t}\r\n//\t\t\tconsole.log(tagName,tagNamePattern,tagNamePattern.test(tagName))\r\n\t\t\treturn p;\r\n\t\t/*xml space '\\x20' | #x9 | #xD | #xA; */\r\n\t\tcase '\\u0080':\r\n\t\t\tc = ' ';\r\n\t\tdefault:\r\n\t\t\tif(c<= ' '){//space\r\n\t\t\t\tswitch(s){\r\n\t\t\t\tcase S_TAG:\r\n\t\t\t\t\tel.setTagName(source.slice(start,p));//tagName\r\n\t\t\t\t\ts = S_TAG_SPACE;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_ATTR:\r\n\t\t\t\t\tattrName = source.slice(start,p)\r\n\t\t\t\t\ts = S_ATTR_SPACE;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_ATTR_NOQUOT_VALUE:\r\n\t\t\t\t\tvar value = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!!');\r\n\t\t\t\t\tel.add(attrName,value,start)\r\n\t\t\t\tcase S_ATTR_END:\r\n\t\t\t\t\ts = S_TAG_SPACE;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t//case S_TAG_SPACE:\r\n\t\t\t\t//case S_EQ:\r\n\t\t\t\t//case S_ATTR_SPACE:\r\n\t\t\t\t//\tvoid();break;\r\n\t\t\t\t//case S_TAG_CLOSE:\r\n\t\t\t\t\t//ignore warning\r\n\t\t\t\t}\r\n\t\t\t}else{//not space\r\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\r\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\r\n\t\t\t\tswitch(s){\r\n\t\t\t\t//case S_TAG:void();break;\r\n\t\t\t\t//case S_ATTR:void();break;\r\n\t\t\t\t//case S_ATTR_NOQUOT_VALUE:void();break;\r\n\t\t\t\tcase S_ATTR_SPACE:\r\n\t\t\t\t\tvar tagName =  el.tagName;\r\n\t\t\t\t\tif(currentNSMap[''] !== 'http://www.w3.org/1999/xhtml' || !attrName.match(/^(?:disabled|checked|selected)$/i)){\r\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed value!! \"'+attrName+'\" instead2!!')\r\n\t\t\t\t\t}\r\n\t\t\t\t\tel.add(attrName,attrName,start);\r\n\t\t\t\t\tstart = p;\r\n\t\t\t\t\ts = S_ATTR;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_ATTR_END:\r\n\t\t\t\t\terrorHandler.warning('attribute space is required\"'+attrName+'\"!!')\r\n\t\t\t\tcase S_TAG_SPACE:\r\n\t\t\t\t\ts = S_ATTR;\r\n\t\t\t\t\tstart = p;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_EQ:\r\n\t\t\t\t\ts = S_ATTR_NOQUOT_VALUE;\r\n\t\t\t\t\tstart = p;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_TAG_CLOSE:\r\n\t\t\t\t\tthrow new Error(\"elements closed character '/' and '>' must be connected to\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}//end outer switch\r\n\t\t//console.log('p++',p)\r\n\t\tp++;\r\n\t}\r\n}\r\n/**\r\n * @return true if has new namespace define\r\n */\r\nfunction appendElement(el,domBuilder,currentNSMap){\r\n\tvar tagName = el.tagName;\r\n\tvar localNSMap = null;\r\n\t//var currentNSMap = parseStack[parseStack.length-1].currentNSMap;\r\n\tvar i = el.length;\r\n\twhile(i--){\r\n\t\tvar a = el[i];\r\n\t\tvar qName = a.qName;\r\n\t\tvar value = a.value;\r\n\t\tvar nsp = qName.indexOf(':');\r\n\t\tif(nsp>0){\r\n\t\t\tvar prefix = a.prefix = qName.slice(0,nsp);\r\n\t\t\tvar localName = qName.slice(nsp+1);\r\n\t\t\tvar nsPrefix = prefix === 'xmlns' && localName\r\n\t\t}else{\r\n\t\t\tlocalName = qName;\r\n\t\t\tprefix = null\r\n\t\t\tnsPrefix = qName === 'xmlns' && ''\r\n\t\t}\r\n\t\t//can not set prefix,because prefix !== ''\r\n\t\ta.localName = localName ;\r\n\t\t//prefix == null for no ns prefix attribute \r\n\t\tif(nsPrefix !== false){//hack!!\r\n\t\t\tif(localNSMap == null){\r\n\t\t\t\tlocalNSMap = {}\r\n\t\t\t\t//console.log(currentNSMap,0)\r\n\t\t\t\t_copy(currentNSMap,currentNSMap={})\r\n\t\t\t\t//console.log(currentNSMap,1)\r\n\t\t\t}\r\n\t\t\tcurrentNSMap[nsPrefix] = localNSMap[nsPrefix] = value;\r\n\t\t\ta.uri = 'http://www.w3.org/2000/xmlns/'\r\n\t\t\tdomBuilder.startPrefixMapping(nsPrefix, value) \r\n\t\t}\r\n\t}\r\n\tvar i = el.length;\r\n\twhile(i--){\r\n\t\ta = el[i];\r\n\t\tvar prefix = a.prefix;\r\n\t\tif(prefix){//no prefix attribute has no namespace\r\n\t\t\tif(prefix === 'xml'){\r\n\t\t\t\ta.uri = 'http://www.w3.org/XML/1998/namespace';\r\n\t\t\t}if(prefix !== 'xmlns'){\r\n\t\t\t\ta.uri = currentNSMap[prefix || '']\r\n\t\t\t\t\r\n\t\t\t\t//{console.log('###'+a.qName,domBuilder.locator.systemId+'',currentNSMap,a.uri)}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tvar nsp = tagName.indexOf(':');\r\n\tif(nsp>0){\r\n\t\tprefix = el.prefix = tagName.slice(0,nsp);\r\n\t\tlocalName = el.localName = tagName.slice(nsp+1);\r\n\t}else{\r\n\t\tprefix = null;//important!!\r\n\t\tlocalName = el.localName = tagName;\r\n\t}\r\n\t//no prefix element has default namespace\r\n\tvar ns = el.uri = currentNSMap[prefix || ''];\r\n\tdomBuilder.startElement(ns,localName,tagName,el);\r\n\t//endPrefixMapping and startPrefixMapping have not any help for dom builder\r\n\t//localNSMap = null\r\n\tif(el.closed){\r\n\t\tdomBuilder.endElement(ns,localName,tagName);\r\n\t\tif(localNSMap){\r\n\t\t\tfor(prefix in localNSMap){\r\n\t\t\t\tdomBuilder.endPrefixMapping(prefix) \r\n\t\t\t}\r\n\t\t}\r\n\t}else{\r\n\t\tel.currentNSMap = currentNSMap;\r\n\t\tel.localNSMap = localNSMap;\r\n\t\t//parseStack.push(el);\r\n\t\treturn true;\r\n\t}\r\n}\r\nfunction parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){\r\n\tif(/^(?:script|textarea)$/i.test(tagName)){\r\n\t\tvar elEndStart =  source.indexOf('</'+tagName+'>',elStartEnd);\r\n\t\tvar text = source.substring(elStartEnd+1,elEndStart);\r\n\t\tif(/[&<]/.test(text)){\r\n\t\t\tif(/^script$/i.test(tagName)){\r\n\t\t\t\t//if(!/\\]\\]>/.test(text)){\r\n\t\t\t\t\t//lexHandler.startCDATA();\r\n\t\t\t\t\tdomBuilder.characters(text,0,text.length);\r\n\t\t\t\t\t//lexHandler.endCDATA();\r\n\t\t\t\t\treturn elEndStart;\r\n\t\t\t\t//}\r\n\t\t\t}//}else{//text area\r\n\t\t\t\ttext = text.replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\t\tdomBuilder.characters(text,0,text.length);\r\n\t\t\t\treturn elEndStart;\r\n\t\t\t//}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\treturn elStartEnd+1;\r\n}\r\nfunction fixSelfClosed(source,elStartEnd,tagName,closeMap){\r\n\t//if(tagName in closeMap){\r\n\tvar pos = closeMap[tagName];\r\n\tif(pos == null){\r\n\t\t//console.log(tagName)\r\n\t\tpos =  source.lastIndexOf('</'+tagName+'>')\r\n\t\tif(pos<elStartEnd){//\r\n\t\t\tpos = source.lastIndexOf('</'+tagName)\r\n\t\t}\r\n\t\tcloseMap[tagName] =pos\r\n\t}\r\n\treturn pos<elStartEnd;\r\n\t//} \r\n}\r\nfunction _copy(source,target){\r\n\tfor(var n in source){target[n] = source[n]}\r\n}\r\nfunction parseDCC(source,start,domBuilder,errorHandler){//sure start with '<!'\r\n\tvar next= source.charAt(start+2)\r\n\tswitch(next){\r\n\tcase '-':\r\n\t\tif(source.charAt(start + 3) === '-'){\r\n\t\t\tvar end = source.indexOf('-->',start+4);\r\n\t\t\t//append comment source.substring(4,end)//<!--\r\n\t\t\tif(end>start){\r\n\t\t\t\tdomBuilder.comment(source,start+4,end-start-4);\r\n\t\t\t\treturn end+3;\r\n\t\t\t}else{\r\n\t\t\t\terrorHandler.error(\"Unclosed comment\");\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\t//error\r\n\t\t\treturn -1;\r\n\t\t}\r\n\tdefault:\r\n\t\tif(source.substr(start+3,6) == 'CDATA['){\r\n\t\t\tvar end = source.indexOf(']]>',start+9);\r\n\t\t\tdomBuilder.startCDATA();\r\n\t\t\tdomBuilder.characters(source,start+9,end-start-9);\r\n\t\t\tdomBuilder.endCDATA() \r\n\t\t\treturn end+3;\r\n\t\t}\r\n\t\t//<!DOCTYPE\r\n\t\t//startDTD(java.lang.String name, java.lang.String publicId, java.lang.String systemId) \r\n\t\tvar matchs = split(source,start);\r\n\t\tvar len = matchs.length;\r\n\t\tif(len>1 && /!doctype/i.test(matchs[0][0])){\r\n\t\t\tvar name = matchs[1][0];\r\n\t\t\tvar pubid = len>3 && /^public$/i.test(matchs[2][0]) && matchs[3][0]\r\n\t\t\tvar sysid = len>4 && matchs[4][0];\r\n\t\t\tvar lastMatch = matchs[len-1]\r\n\t\t\tdomBuilder.startDTD(name,pubid && pubid.replace(/^(['\"])(.*?)\\1$/,'$2'),\r\n\t\t\t\t\tsysid && sysid.replace(/^(['\"])(.*?)\\1$/,'$2'));\r\n\t\t\tdomBuilder.endDTD();\r\n\t\t\t\r\n\t\t\treturn lastMatch.index+lastMatch[0].length\r\n\t\t}\r\n\t}\r\n\treturn -1;\r\n}\r\n\r\n\r\n\r\nfunction parseInstruction(source,start,domBuilder){\r\n\tvar end = source.indexOf('?>',start);\r\n\tif(end){\r\n\t\tvar match = source.substring(start,end).match(/^<\\?(\\S*)\\s*([\\s\\S]*?)\\s*$/);\r\n\t\tif(match){\r\n\t\t\tvar len = match[0].length;\r\n\t\t\tdomBuilder.processingInstruction(match[1], match[2]) ;\r\n\t\t\treturn end+2;\r\n\t\t}else{//error\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t}\r\n\treturn -1;\r\n}\r\n\r\n/**\r\n * @param source\r\n */\r\nfunction ElementAttributes(source){\r\n\t\r\n}\r\nElementAttributes.prototype = {\r\n\tsetTagName:function(tagName){\r\n\t\tif(!tagNamePattern.test(tagName)){\r\n\t\t\tthrow new Error('invalid tagName:'+tagName)\r\n\t\t}\r\n\t\tthis.tagName = tagName\r\n\t},\r\n\tadd:function(qName,value,offset){\r\n\t\tif(!tagNamePattern.test(qName)){\r\n\t\t\tthrow new Error('invalid attribute:'+qName)\r\n\t\t}\r\n\t\tthis[this.length++] = {qName:qName,value:value,offset:offset}\r\n\t},\r\n\tlength:0,\r\n\tgetLocalName:function(i){return this[i].localName},\r\n\tgetLocator:function(i){return this[i].locator},\r\n\tgetQName:function(i){return this[i].qName},\r\n\tgetURI:function(i){return this[i].uri},\r\n\tgetValue:function(i){return this[i].value}\r\n//\t,getIndex:function(uri, localName)){\r\n//\t\tif(localName){\r\n//\t\t\t\r\n//\t\t}else{\r\n//\t\t\tvar qName = uri\r\n//\t\t}\r\n//\t},\r\n//\tgetValue:function(){return this.getValue(this.getIndex.apply(this,arguments))},\r\n//\tgetType:function(uri,localName){}\r\n//\tgetType:function(i){},\r\n}\r\n\r\n\r\n\r\n\r\nfunction _set_proto_(thiz,parent){\r\n\tthiz.__proto__ = parent;\r\n\treturn thiz;\r\n}\r\nif(!(_set_proto_({},_set_proto_.prototype) instanceof _set_proto_)){\r\n\t_set_proto_ = function(thiz,parent){\r\n\t\tfunction p(){};\r\n\t\tp.prototype = parent;\r\n\t\tp = new p();\r\n\t\tfor(parent in thiz){\r\n\t\t\tp[parent] = thiz[parent];\r\n\t\t}\r\n\t\treturn p;\r\n\t}\r\n}\r\n\r\nfunction split(source,start){\r\n\tvar match;\r\n\tvar buf = [];\r\n\tvar reg = /'[^']+'|\"[^\"]+\"|[^\\s<>\\/=]+=?|(\\/?\\s*>|<)/g;\r\n\treg.lastIndex = start;\r\n\treg.exec(source);//skip <\r\n\twhile(match = reg.exec(source)){\r\n\t\tbuf.push(match);\r\n\t\tif(match[1])return buf;\r\n\t}\r\n}\r\n\r\nexports.XMLReader = XMLReader;\r\n\r\n","import EventEmitter from \"event-emitter\";\nimport {extend, borders, uuid, isNumber, bounds, defer, createBlobUrl, revokeBlobUrl} from \"../../utils/core\";\nimport EpubCFI from \"../../epubcfi\";\nimport Contents from \"../../contents\";\nimport { EVENTS } from \"../../utils/constants\";\nimport { Pane, Highlight, Underline } from \"marks-pane\";\n\nclass IframeView {\n\tconstructor(section, options) {\n\t\tthis.settings = extend({\n\t\t\tignoreClass : \"\",\n\t\t\taxis: options.layout && options.layout.props.flow === \"scrolled\" ? \"vertical\" : \"horizontal\",\n\t\t\tdirection: undefined,\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\tlayout: undefined,\n\t\t\tglobalLayoutProperties: {},\n\t\t\tmethod: undefined\n\t\t}, options || {});\n\n\t\tthis.id = \"epubjs-view-\" + uuid();\n\t\tthis.section = section;\n\t\tthis.index = section.index;\n\n\t\tthis.element = this.container(this.settings.axis);\n\n\t\tthis.added = false;\n\t\tthis.displayed = false;\n\t\tthis.rendered = false;\n\n\t\t// this.width  = this.settings.width;\n\t\t// this.height = this.settings.height;\n\n\t\tthis.fixedWidth  = 0;\n\t\tthis.fixedHeight = 0;\n\n\t\t// Blank Cfi for Parsing\n\t\tthis.epubcfi = new EpubCFI();\n\n\t\tthis.layout = this.settings.layout;\n\t\t// Dom events to listen for\n\t\t// this.listenedEvents = [\"keydown\", \"keyup\", \"keypressed\", \"mouseup\", \"mousedown\", \"click\", \"touchend\", \"touchstart\"];\n\n\t\tthis.pane = undefined;\n\t\tthis.highlights = {};\n\t\tthis.underlines = {};\n\t\tthis.marks = {};\n\n\t}\n\n\tcontainer(axis) {\n\t\tvar element = document.createElement(\"div\");\n\n\t\telement.classList.add(\"epub-view\");\n\n\t\t// this.element.style.minHeight = \"100px\";\n\t\telement.style.height = \"0px\";\n\t\telement.style.width = \"0px\";\n\t\telement.style.overflow = \"hidden\";\n\t\telement.style.position = \"relative\";\n\t\telement.style.display = \"block\";\n\n\t\tif(axis && axis == \"horizontal\"){\n\t\t\telement.style.flex = \"none\";\n\t\t} else {\n\t\t\telement.style.flex = \"initial\";\n\t\t}\n\n\t\treturn element;\n\t}\n\n\tcreate() {\n\n\t\tif(this.iframe) {\n\t\t\treturn this.iframe;\n\t\t}\n\n\t\tif(!this.element) {\n\t\t\tthis.element = this.createContainer();\n\t\t}\n\n\t\tthis.iframe = document.createElement(\"iframe\");\n\t\tthis.iframe.id = this.id;\n\t\tthis.iframe.scrolling = \"no\"; // Might need to be removed: breaks ios width calculations\n\t\tthis.iframe.style.overflow = \"hidden\";\n\t\tthis.iframe.seamless = \"seamless\";\n\t\t// Back up if seamless isn't supported\n\t\tthis.iframe.style.border = \"none\";\n\n\t\tthis.iframe.setAttribute(\"enable-annotation\", \"true\");\n\n\t\tthis.resizing = true;\n\n\t\t// this.iframe.style.display = \"none\";\n\t\tthis.element.style.visibility = \"hidden\";\n\t\tthis.iframe.style.visibility = \"hidden\";\n\n\t\tthis.iframe.style.width = \"0\";\n\t\tthis.iframe.style.height = \"0\";\n\t\tthis._width = 0;\n\t\tthis._height = 0;\n\n\t\tthis.element.setAttribute(\"ref\", this.index);\n\n\t\tthis.element.appendChild(this.iframe);\n\t\tthis.added = true;\n\n\t\tthis.elementBounds = bounds(this.element);\n\n\t\t// if(width || height){\n\t\t//   this.resize(width, height);\n\t\t// } else if(this.width && this.height){\n\t\t//   this.resize(this.width, this.height);\n\t\t// } else {\n\t\t//   this.iframeBounds = bounds(this.iframe);\n\t\t// }\n\n\n\t\tif((\"srcdoc\" in this.iframe)) {\n\t\t\tthis.supportsSrcdoc = true;\n\t\t} else {\n\t\t\tthis.supportsSrcdoc = false;\n\t\t}\n\n\t\tif (!this.settings.method) {\n\t\t\tthis.settings.method = this.supportsSrcdoc ? \"srcdoc\" : \"write\";\n\t\t}\n\n\t\treturn this.iframe;\n\t}\n\n\trender(request, show) {\n\n\t\t// view.onLayout = this.layout.format.bind(this.layout);\n\t\tthis.create();\n\n\t\t// Fit to size of the container, apply padding\n\t\tthis.size();\n\n\t\tif(!this.sectionRender) {\n\t\t\tthis.sectionRender = this.section.render(request);\n\t\t}\n\n\t\t// Render Chain\n\t\treturn this.sectionRender\n\t\t\t.then(function(contents){\n\t\t\t\treturn this.load(contents);\n\t\t\t}.bind(this))\n\t\t\t.then(function(){\n\n\t\t\t\t// apply the layout function to the contents\n\t\t\t\tthis.layout.format(this.contents);\n\n\t\t\t\t// find and report the writingMode axis\n\t\t\t\tlet writingMode = this.contents.writingMode();\n\t\t\t\tlet axis = (writingMode.indexOf(\"vertical\") === 0) ? \"vertical\" : \"horizontal\";\n\n\t\t\t\tthis.setAxis(axis);\n\t\t\t\tthis.emit(EVENTS.VIEWS.AXIS, axis);\n\n\n\t\t\t\t// Listen for events that require an expansion of the iframe\n\t\t\t\tthis.addListeners();\n\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\t// Expand the iframe to the full size of the content\n\t\t\t\t\tthis.expand();\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\n\t\t\t}.bind(this), function(e){\n\t\t\t\tthis.emit(EVENTS.VIEWS.LOAD_ERROR, e);\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\treject(e);\n\t\t\t\t});\n\t\t\t}.bind(this))\n\t\t\t.then(function() {\n\t\t\t\tthis.emit(EVENTS.VIEWS.RENDERED, this.section);\n\t\t\t}.bind(this));\n\n\t}\n\n\treset () {\n\t\tif (this.iframe) {\n\t\t\tthis.iframe.style.width = \"0\";\n\t\t\tthis.iframe.style.height = \"0\";\n\t\t\tthis._width = 0;\n\t\t\tthis._height = 0;\n\t\t\tthis._textWidth = undefined;\n\t\t\tthis._contentWidth = undefined;\n\t\t\tthis._textHeight = undefined;\n\t\t\tthis._contentHeight = undefined;\n\t\t}\n\t\tthis._needsReframe = true;\n\t}\n\n\t// Determine locks base on settings\n\tsize(_width, _height) {\n\t\tvar width = _width || this.settings.width;\n\t\tvar height = _height || this.settings.height;\n\n\t\tif(this.layout.name === \"pre-paginated\") {\n\t\t\tthis.lock(\"both\", width, height);\n\t\t} else if(this.settings.axis === \"horizontal\") {\n\t\t\tthis.lock(\"height\", width, height);\n\t\t} else {\n\t\t\tthis.lock(\"width\", width, height);\n\t\t}\n\n\t\tthis.settings.width = width;\n\t\tthis.settings.height = height;\n\t}\n\n\t// Lock an axis to element dimensions, taking borders into account\n\tlock(what, width, height) {\n\t\tvar elBorders = borders(this.element);\n\t\tvar iframeBorders;\n\n\t\tif(this.iframe) {\n\t\t\tiframeBorders = borders(this.iframe);\n\t\t} else {\n\t\t\tiframeBorders = {width: 0, height: 0};\n\t\t}\n\n\t\tif(what == \"width\" && isNumber(width)){\n\t\t\tthis.lockedWidth = width - elBorders.width - iframeBorders.width;\n\t\t\t// this.resize(this.lockedWidth, width); //  width keeps ratio correct\n\t\t}\n\n\t\tif(what == \"height\" && isNumber(height)){\n\t\t\tthis.lockedHeight = height - elBorders.height - iframeBorders.height;\n\t\t\t// this.resize(width, this.lockedHeight);\n\t\t}\n\n\t\tif(what === \"both\" &&\n\t\t\t isNumber(width) &&\n\t\t\t isNumber(height)){\n\n\t\t\tthis.lockedWidth = width - elBorders.width - iframeBorders.width;\n\t\t\tthis.lockedHeight = height - elBorders.height - iframeBorders.height;\n\t\t\t// this.resize(this.lockedWidth, this.lockedHeight);\n\t\t}\n\n\t\tif(this.displayed && this.iframe) {\n\n\t\t\t// this.contents.layout();\n\t\t\tthis.expand();\n\t\t}\n\n\n\n\t}\n\n\t// Resize a single axis based on content dimensions\n\texpand(force) {\n\t\tvar width = this.lockedWidth;\n\t\tvar height = this.lockedHeight;\n\t\tvar columns;\n\n\t\tvar textWidth, textHeight;\n\n\t\tif(!this.iframe || this._expanding) return;\n\n\t\tthis._expanding = true;\n\n\t\tif(this.layout.name === \"pre-paginated\") {\n\t\t\twidth = this.layout.columnWidth;\n\t\t\theight = this.layout.height;\n\t\t}\n\t\t// Expand Horizontally\n\t\telse if(this.settings.axis === \"horizontal\") {\n\t\t\t// Get the width of the text\n\t\t\twidth = this.contents.textWidth();\n\n\t\t\tif (width % this.layout.pageWidth > 0) {\n\t\t\t\twidth = Math.ceil(width / this.layout.pageWidth) * this.layout.pageWidth;\n\t\t\t}\n\n\t\t\tif (this.settings.forceEvenPages) {\n\t\t\t\tcolumns = (width / this.layout.delta);\n\t\t\t\tif ( this.layout.divisor > 1 &&\n\t\t\t\t\t\t this.layout.name === \"reflowable\" &&\n\t\t\t\t\t\t(columns % 2 > 0)) {\n\t\t\t\t\t// add a blank page\n\t\t\t\t\twidth += this.layout.gap + this.layout.columnWidth;\n\t\t\t\t}\n\t\t\t}\n\n\t\t} // Expand Vertically\n\t\telse if(this.settings.axis === \"vertical\") {\n\t\t\theight = this.contents.textHeight();\n\t\t}\n\n\t\t// Only Resize if dimensions have changed or\n\t\t// if Frame is still hidden, so needs reframing\n\t\tif(this._needsReframe || width != this._width || height != this._height){\n\t\t\tthis.reframe(width, height);\n\t\t}\n\n\t\tthis._expanding = false;\n\t}\n\n\treframe(width, height) {\n\t\tvar size;\n\n\t\tif(isNumber(width)){\n\t\t\tthis.element.style.width = width + \"px\";\n\t\t\tthis.iframe.style.width = width + \"px\";\n\t\t\tthis._width = width;\n\t\t}\n\n\t\tif(isNumber(height)){\n\t\t\tthis.element.style.height = height + \"px\";\n\t\t\tthis.iframe.style.height = height + \"px\";\n\t\t\tthis._height = height;\n\t\t}\n\n\t\tlet widthDelta = this.prevBounds ? width - this.prevBounds.width : width;\n\t\tlet heightDelta = this.prevBounds ? height - this.prevBounds.height : height;\n\n\t\tsize = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\twidthDelta: widthDelta,\n\t\t\theightDelta: heightDelta,\n\t\t};\n\n\t\tthis.pane && this.pane.render();\n\n\t\tthis.onResize(this, size);\n\n\t\tthis.emit(EVENTS.VIEWS.RESIZED, size);\n\n\t\tthis.prevBounds = size;\n\n\t\tthis.elementBounds = bounds(this.element);\n\n\t}\n\n\n\tload(contents) {\n\t\tvar loading = new defer();\n\t\tvar loaded = loading.promise;\n\n\t\tif(!this.iframe) {\n\t\t\tloading.reject(new Error(\"No Iframe Available\"));\n\t\t\treturn loaded;\n\t\t}\n\n\t\tthis.iframe.onload = function(event) {\n\n\t\t\tthis.onLoad(event, loading);\n\n\t\t}.bind(this);\n\n\t\tif (this.settings.method === \"blobUrl\") {\n\t\t\tthis.blobUrl = createBlobUrl(contents, \"application/xhtml+xml\");\n\t\t\tthis.iframe.src = this.blobUrl;\n\t\t} else if(this.settings.method === \"srcdoc\"){\n\t\t\tthis.iframe.srcdoc = contents;\n\t\t} else {\n\n\t\t\tthis.document = this.iframe.contentDocument;\n\n\t\t\tif(!this.document) {\n\t\t\t\tloading.reject(new Error(\"No Document Available\"));\n\t\t\t\treturn loaded;\n\t\t\t}\n\n\t\t\tthis.iframe.contentDocument.open();\n\t\t\tthis.iframe.contentDocument.write(contents);\n\t\t\tthis.iframe.contentDocument.close();\n\n\t\t}\n\n\t\treturn loaded;\n\t}\n\n\tonLoad(event, promise) {\n\n\t\tthis.window = this.iframe.contentWindow;\n\t\tthis.document = this.iframe.contentDocument;\n\n\t\tthis.contents = new Contents(this.document, this.document.body, this.section.cfiBase, this.section.index);\n\n\t\tthis.rendering = false;\n\n\t\tvar link = this.document.querySelector(\"link[rel='canonical']\");\n\t\tif (link) {\n\t\t\tlink.setAttribute(\"href\", this.section.canonical);\n\t\t} else {\n\t\t\tlink = this.document.createElement(\"link\");\n\t\t\tlink.setAttribute(\"rel\", \"canonical\");\n\t\t\tlink.setAttribute(\"href\", this.section.canonical);\n\t\t\tthis.document.querySelector(\"head\").appendChild(link);\n\t\t}\n\n\t\tthis.contents.on(EVENTS.CONTENTS.EXPAND, () => {\n\t\t\tif(this.displayed && this.iframe) {\n\t\t\t\tthis.expand();\n\t\t\t\tif (this.contents) {\n\t\t\t\t\tthis.layout.format(this.contents);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.contents.on(EVENTS.CONTENTS.RESIZE, (e) => {\n\t\t\tif(this.displayed && this.iframe) {\n\t\t\t\tthis.expand();\n\t\t\t\tif (this.contents) {\n\t\t\t\t\tthis.layout.format(this.contents);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tpromise.resolve(this.contents);\n\t}\n\n\tsetLayout(layout) {\n\t\tthis.layout = layout;\n\n\t\tif (this.contents) {\n\t\t\tthis.layout.format(this.contents);\n\t\t\tthis.expand();\n\t\t}\n\t}\n\n\tsetAxis(axis) {\n\n\t\t// Force vertical for scrolled\n\t\tif (this.layout.props.flow === \"scrolled\") {\n\t\t\taxis = \"vertical\";\n\t\t}\n\n\t\tthis.settings.axis = axis;\n\n\t\tif(axis == \"horizontal\"){\n\t\t\tthis.element.style.flex = \"none\";\n\t\t} else {\n\t\t\tthis.element.style.flex = \"initial\";\n\t\t}\n\n\t\tthis.size();\n\n\t}\n\n\taddListeners() {\n\t\t//TODO: Add content listeners for expanding\n\t}\n\n\tremoveListeners(layoutFunc) {\n\t\t//TODO: remove content listeners for expanding\n\t}\n\n\tdisplay(request) {\n\t\tvar displayed = new defer();\n\n\t\tif (!this.displayed) {\n\n\t\t\tthis.render(request)\n\t\t\t\t.then(function () {\n\n\t\t\t\t\tthis.emit(EVENTS.VIEWS.DISPLAYED, this);\n\t\t\t\t\tthis.onDisplayed(this);\n\n\t\t\t\t\tthis.displayed = true;\n\t\t\t\t\tdisplayed.resolve(this);\n\n\t\t\t\t}.bind(this), function (err) {\n\t\t\t\t\tdisplayed.reject(err, this);\n\t\t\t\t});\n\n\t\t} else {\n\t\t\tdisplayed.resolve(this);\n\t\t}\n\n\n\t\treturn displayed.promise;\n\t}\n\n\tshow() {\n\n\t\tthis.element.style.visibility = \"visible\";\n\n\t\tif(this.iframe){\n\t\t\tthis.iframe.style.visibility = \"visible\";\n\n\t\t\t// Remind Safari to redraw the iframe\n\t\t\tthis.iframe.style.transform = \"translateZ(0)\";\n\t\t\tthis.iframe.offsetWidth;\n\t\t\tthis.iframe.style.transform = null;\n\t\t}\n\n\t\tthis.emit(EVENTS.VIEWS.SHOWN, this);\n\t}\n\n\thide() {\n\t\t// this.iframe.style.display = \"none\";\n\t\tthis.element.style.visibility = \"hidden\";\n\t\tthis.iframe.style.visibility = \"hidden\";\n\n\t\tthis.stopExpanding = true;\n\t\tthis.emit(EVENTS.VIEWS.HIDDEN, this);\n\t}\n\n\toffset() {\n\t\treturn {\n\t\t\ttop: this.element.offsetTop,\n\t\t\tleft: this.element.offsetLeft\n\t\t}\n\t}\n\n\twidth() {\n\t\treturn this._width;\n\t}\n\n\theight() {\n\t\treturn this._height;\n\t}\n\n\tposition() {\n\t\treturn this.element.getBoundingClientRect();\n\t}\n\n\tlocationOf(target) {\n\t\tvar parentPos = this.iframe.getBoundingClientRect();\n\t\tvar targetPos = this.contents.locationOf(target, this.settings.ignoreClass);\n\n\t\treturn {\n\t\t\t\"left\": targetPos.left,\n\t\t\t\"top\": targetPos.top\n\t\t};\n\t}\n\n\tonDisplayed(view) {\n\t\t// Stub, override with a custom functions\n\t}\n\n\tonResize(view, e) {\n\t\t// Stub, override with a custom functions\n\t}\n\n\tbounds(force) {\n\t\tif(force || !this.elementBounds) {\n\t\t\tthis.elementBounds = bounds(this.element);\n\t\t}\n\n\t\treturn this.elementBounds;\n\t}\n\n\thighlight(cfiRange, data={}, cb, className = \"epubjs-hl\", styles = {}) {\n\t\tif (!this.contents) {\n\t\t\treturn;\n\t\t}\n\t\tconst attributes = Object.assign({\"fill\": \"yellow\", \"fill-opacity\": \"0.3\", \"mix-blend-mode\": \"multiply\"}, styles);\n\t\tlet range = this.contents.range(cfiRange);\n\n\t\tlet emitter = () => {\n\t\t\tthis.emit(EVENTS.VIEWS.MARK_CLICKED, cfiRange, data);\n\t\t};\n\n\t\tdata[\"epubcfi\"] = cfiRange;\n\n\t\tif (!this.pane) {\n\t\t\tthis.pane = new Pane(this.iframe, this.element);\n\t\t}\n\n\t\tlet m = new Highlight(range, className, data, attributes);\n\t\tlet h = this.pane.addMark(m);\n\n\t\tthis.highlights[cfiRange] = { \"mark\": h, \"element\": h.element, \"listeners\": [emitter, cb] };\n\n\t\th.element.setAttribute(\"ref\", className);\n\t\th.element.addEventListener(\"click\", emitter);\n\t\th.element.addEventListener(\"touchstart\", emitter);\n\n\t\tif (cb) {\n\t\t\th.element.addEventListener(\"click\", cb);\n\t\t\th.element.addEventListener(\"touchstart\", cb);\n\t\t}\n\t\treturn h;\n\t}\n\n\tunderline(cfiRange, data={}, cb, className = \"epubjs-ul\", styles = {}) {\n\t\tif (!this.contents) {\n\t\t\treturn;\n\t\t}\n\t\tconst attributes = Object.assign({\"stroke\": \"black\", \"stroke-opacity\": \"0.3\", \"mix-blend-mode\": \"multiply\"}, styles);\n\t\tlet range = this.contents.range(cfiRange);\n\t\tlet emitter = () => {\n\t\t\tthis.emit(EVENTS.VIEWS.MARK_CLICKED, cfiRange, data);\n\t\t};\n\n\t\tdata[\"epubcfi\"] = cfiRange;\n\n\t\tif (!this.pane) {\n\t\t\tthis.pane = new Pane(this.iframe, this.element);\n\t\t}\n\n\t\tlet m = new Underline(range, className, data, attributes);\n\t\tlet h = this.pane.addMark(m);\n\n\t\tthis.underlines[cfiRange] = { \"mark\": h, \"element\": h.element, \"listeners\": [emitter, cb] };\n\n\t\th.element.setAttribute(\"ref\", className);\n\t\th.element.addEventListener(\"click\", emitter);\n\t\th.element.addEventListener(\"touchstart\", emitter);\n\n\t\tif (cb) {\n\t\t\th.element.addEventListener(\"click\", cb);\n\t\t\th.element.addEventListener(\"touchstart\", cb);\n\t\t}\n\t\treturn h;\n\t}\n\n\tmark(cfiRange, data={}, cb) {\n\n\t\tif (!this.contents) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (cfiRange in this.marks) {\n\t\t\tlet item = this.marks[cfiRange];\n\t\t\treturn item;\n\t\t}\n\n\t\tlet range = this.contents.range(cfiRange);\n\t\tif (!range) {\n\t\t\treturn;\n\t\t}\n\t\tlet container = range.commonAncestorContainer;\n\t\tlet parent = (container.nodeType === 1) ? container : container.parentNode;\n\n\t\tlet emitter = (e) => {\n\t\t\tthis.emit(EVENTS.VIEWS.MARK_CLICKED, cfiRange, data);\n\t\t};\n\n\t\tif (range.collapsed && container.nodeType === 1) {\n\t\t\trange = new Range();\n\t\t\trange.selectNodeContents(container);\n\t\t} else if (range.collapsed) { // Webkit doesn't like collapsed ranges\n\t\t\trange = new Range();\n\t\t\trange.selectNodeContents(parent);\n\t\t}\n\n\t\tlet top, right, left;\n\n\t\tif(this.layout.name === \"pre-paginated\" ||\n\t\t\tthis.settings.axis !== \"horizontal\") {\n\t\t\tlet pos = range.getBoundingClientRect();\n\t\t\ttop = pos.top;\n\t\t\tright = pos.right;\n\t\t} else {\n\t\t\t// Element might break columns, so find the left most element\n\t\t\tlet rects = range.getClientRects();\n\t\t\tlet rect;\n\t\t\tfor (var i = 0; i != rects.length; i++) {\n\t\t\t\trect = rects[i];\n\t\t\t\tif (!left || rect.left < left) {\n\t\t\t\t\tleft = rect.left;\n\t\t\t\t\tright = left + this.layout.columnWidth - this.layout.gap;\n\t\t\t\t\ttop = rect.top;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t\tlet mark = this.document.createElement(\"a\");\n\t\tmark.setAttribute(\"ref\", \"epubjs-mk\");\n\t\tmark.style.position = \"absolute\";\n\t\tmark.style.top = `${top}px`;\n\t\tmark.style.left = `${right}px`;\n\n\t\tmark.dataset[\"epubcfi\"] = cfiRange;\n\n\t\tif (data) {\n\t\t\tObject.keys(data).forEach((key) => {\n\t\t\t\tmark.dataset[key] = data[key];\n\t\t\t});\n\t\t}\n\n\t\tif (cb) {\n\t\t\tmark.addEventListener(\"click\", cb);\n\t\t\tmark.addEventListener(\"touchstart\", cb);\n\t\t}\n\n\t\tmark.addEventListener(\"click\", emitter);\n\t\tmark.addEventListener(\"touchstart\", emitter);\n\n\t\tthis.element.appendChild(mark);\n\n\t\tthis.marks[cfiRange] = { \"element\": mark, \"listeners\": [emitter, cb] };\n\n\t\treturn parent;\n\t}\n\n\tunhighlight(cfiRange) {\n\t\tlet item;\n\t\tif (cfiRange in this.highlights) {\n\t\t\titem = this.highlights[cfiRange];\n\n\t\t\tthis.pane.removeMark(item.mark);\n\t\t\titem.listeners.forEach((l) => {\n\t\t\t\tif (l) { item.element.removeEventListener(\"click\", l) };\n\t\t\t});\n\t\t\tdelete this.highlights[cfiRange];\n\t\t}\n\t}\n\n\tununderline(cfiRange) {\n\t\tlet item;\n\t\tif (cfiRange in this.underlines) {\n\t\t\titem = this.underlines[cfiRange];\n\t\t\tthis.pane.removeMark(item.mark);\n\t\t\titem.listeners.forEach((l) => {\n\t\t\t\tif (l) { item.element.removeEventListener(\"click\", l) };\n\t\t\t});\n\t\t\tdelete this.underlines[cfiRange];\n\t\t}\n\t}\n\n\tunmark(cfiRange) {\n\t\tlet item;\n\t\tif (cfiRange in this.marks) {\n\t\t\titem = this.marks[cfiRange];\n\t\t\tthis.element.removeChild(item.element);\n\t\t\titem.listeners.forEach((l) => {\n\t\t\t\tif (l) { item.element.removeEventListener(\"click\", l) };\n\t\t\t});\n\t\t\tdelete this.marks[cfiRange];\n\t\t}\n\t}\n\n\tdestroy() {\n\n\t\tfor (let cfiRange in this.highlights) {\n\t\t\tthis.unhighlight(cfiRange);\n\t\t}\n\n\t\tfor (let cfiRange in this.underlines) {\n\t\t\tthis.ununderline(cfiRange);\n\t\t}\n\n\t\tfor (let cfiRange in this.marks) {\n\t\t\tthis.unmark(cfiRange);\n\t\t}\n\n\t\tif (this.blobUrl) {\n\t\t\trevokeBlobUrl(this.blobUrl);\n\t\t}\n\n\t\tif(this.displayed){\n\t\t\tthis.displayed = false;\n\n\t\t\tthis.removeListeners();\n\n\t\t\tthis.stopExpanding = true;\n\t\t\tthis.element.removeChild(this.iframe);\n\n\t\t\tthis.iframe = undefined;\n\t\t\tthis.contents = undefined;\n\n\t\t\tthis._textWidth = null;\n\t\t\tthis._textHeight = null;\n\t\t\tthis._width = null;\n\t\t\tthis._height = null;\n\t\t}\n\n\t\t// this.element.style.height = \"0px\";\n\t\t// this.element.style.width = \"0px\";\n\t}\n}\n\nEventEmitter(IframeView.prototype);\n\nexport default IframeView;\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","import {uuid, isNumber, isElement, windowBounds} from \"../../utils/core\";\nimport throttle from 'lodash/throttle'\n\nclass Stage {\n\tconstructor(_options) {\n\t\tthis.settings = _options || {};\n\t\tthis.id = \"epubjs-container-\" + uuid();\n\n\t\tthis.container = this.create(this.settings);\n\n\t\tif(this.settings.hidden) {\n\t\t\tthis.wrapper = this.wrap(this.container);\n\t\t}\n\n\t}\n\n\t/*\n\t* Creates an element to render to.\n\t* Resizes to passed width and height or to the elements size\n\t*/\n\tcreate(options){\n\t\tlet height  = options.height;// !== false ? options.height : \"100%\";\n\t\tlet width   = options.width;// !== false ? options.width : \"100%\";\n\t\tlet overflow  = options.overflow || false;\n\t\tlet axis = options.axis || \"vertical\";\n\t\tlet direction = options.direction;\n\n\t\tif(options.height && isNumber(options.height)) {\n\t\t\theight = options.height + \"px\";\n\t\t}\n\n\t\tif(options.width && isNumber(options.width)) {\n\t\t\twidth = options.width + \"px\";\n\t\t}\n\n\t\t// Create new container element\n\t\tlet container = document.createElement(\"div\");\n\n\t\tcontainer.id = this.id;\n\t\tcontainer.classList.add(\"epub-container\");\n\n\t\t// Style Element\n\t\t// container.style.fontSize = \"0\";\n\t\tcontainer.style.wordSpacing = \"0\";\n\t\tcontainer.style.lineHeight = \"0\";\n\t\tcontainer.style.verticalAlign = \"top\";\n\t\tcontainer.style.position = \"relative\";\n\n\t\tif(axis === \"horizontal\") {\n\t\t\t// container.style.whiteSpace = \"nowrap\";\n\t\t\tcontainer.style.display = \"flex\";\n\t\t\tcontainer.style.flexDirection = \"row\";\n\t\t\tcontainer.style.flexWrap = \"nowrap\";\n\t\t}\n\n\t\tif(width){\n\t\t\tcontainer.style.width = width;\n\t\t}\n\n\t\tif(height){\n\t\t\tcontainer.style.height = height;\n\t\t}\n\n\t\tif (overflow) {\n\t\t\tcontainer.style.overflow = overflow;\n\t\t}\n\n\t\tif (direction) {\n\t\t\tcontainer.dir = direction;\n\t\t\tcontainer.style[\"direction\"] = direction;\n\t\t}\n\n\t\tif (direction && this.settings.fullsize) {\n\t\t\tdocument.body.style[\"direction\"] = direction;\n\t\t}\n\n\t\treturn container;\n\t}\n\n\twrap(container) {\n\t\tvar wrapper = document.createElement(\"div\");\n\n\t\twrapper.style.visibility = \"hidden\";\n\t\twrapper.style.overflow = \"hidden\";\n\t\twrapper.style.width = \"0\";\n\t\twrapper.style.height = \"0\";\n\n\t\twrapper.appendChild(container);\n\t\treturn wrapper;\n\t}\n\n\n\tgetElement(_element){\n\t\tvar element;\n\n\t\tif(isElement(_element)) {\n\t\t\telement = _element;\n\t\t} else if (typeof _element === \"string\") {\n\t\t\telement = document.getElementById(_element);\n\t\t}\n\n\t\tif(!element){\n\t\t\tthrow new Error(\"Not an Element\");\n\t\t}\n\n\t\treturn element;\n\t}\n\n\tattachTo(what){\n\n\t\tvar element = this.getElement(what);\n\t\tvar base;\n\n\t\tif(!element){\n\t\t\treturn;\n\t\t}\n\n\t\tif(this.settings.hidden) {\n\t\t\tbase = this.wrapper;\n\t\t} else {\n\t\t\tbase = this.container;\n\t\t}\n\n\t\telement.appendChild(base);\n\n\t\tthis.element = element;\n\n\t\treturn element;\n\n\t}\n\n\tgetContainer() {\n\t\treturn this.container;\n\t}\n\n\tonResize(func){\n\t\t// Only listen to window for resize event if width and height are not fixed.\n\t\t// This applies if it is set to a percent or auto.\n\t\tif(!isNumber(this.settings.width) ||\n\t\t\t !isNumber(this.settings.height) ) {\n\t\t\tthis.resizeFunc = throttle(func, 50);\n\t\t\twindow.addEventListener(\"resize\", this.resizeFunc, false);\n\t\t}\n\n\t}\n\n\tonOrientationChange(func){\n\t\tthis.orientationChangeFunc = func;\n\t\twindow.addEventListener(\"orientationchange\", this.orientationChangeFunc, false);\n\t}\n\n\tsize(width, height){\n\t\tvar bounds;\n\t\t// var width = _width || this.settings.width;\n\t\t// var height = _height || this.settings.height;\n\n\t\t// If width or height are set to false, inherit them from containing element\n\t\tif(width === null) {\n\t\t\tbounds = this.element.getBoundingClientRect();\n\n\t\t\tif(bounds.width) {\n\t\t\t\twidth = Math.floor(bounds.width);\n\t\t\t\tthis.container.style.width = width + \"px\";\n\t\t\t}\n\t\t} else {\n\t\t\tif (isNumber(width)) {\n\t\t\t\tthis.container.style.width = width + \"px\";\n\t\t\t} else {\n\t\t\t\tthis.container.style.width = width;\n\t\t\t}\n\t\t}\n\n\t\tif(height === null) {\n\t\t\tbounds = bounds || this.element.getBoundingClientRect();\n\n\t\t\tif(bounds.height) {\n\t\t\t\theight = bounds.height;\n\t\t\t\tthis.container.style.height = height + \"px\";\n\t\t\t}\n\n\t\t} else {\n\t\t\tif (isNumber(height)) {\n\t\t\t\tthis.container.style.height = height + \"px\";\n\t\t\t} else {\n\t\t\t\tthis.container.style.height = height;\n\t\t\t}\n\t\t}\n\n\t\tif(!isNumber(width)) {\n\t\t\tbounds = this.container.getBoundingClientRect();\n\t\t\twidth = Math.floor(bounds.width);\n\t\t\t//height = bounds.height;\n\t\t}\n\n\t\tif(!isNumber(height)) {\n\t\t\tbounds = bounds || this.container.getBoundingClientRect();\n\t\t\t//width = bounds.width;\n\t\t\theight = bounds.height;\n\t\t}\n\n\n\t\tthis.containerStyles = window.getComputedStyle(this.container);\n\n\t\tthis.containerPadding = {\n\t\t\tleft: parseFloat(this.containerStyles[\"padding-left\"]) || 0,\n\t\t\tright: parseFloat(this.containerStyles[\"padding-right\"]) || 0,\n\t\t\ttop: parseFloat(this.containerStyles[\"padding-top\"]) || 0,\n\t\t\tbottom: parseFloat(this.containerStyles[\"padding-bottom\"]) || 0\n\t\t};\n\n\t\t// Bounds not set, get them from window\n\t\tlet _windowBounds = windowBounds();\n\t\tlet bodyStyles = window.getComputedStyle(document.body);\n\t\tlet bodyPadding = {\n\t\t\tleft: parseFloat(bodyStyles[\"padding-left\"]) || 0,\n\t\t\tright: parseFloat(bodyStyles[\"padding-right\"]) || 0,\n\t\t\ttop: parseFloat(bodyStyles[\"padding-top\"]) || 0,\n\t\t\tbottom: parseFloat(bodyStyles[\"padding-bottom\"]) || 0\n\t\t};\n\n\t\tif (!width) {\n\t\t\twidth = _windowBounds.width -\n\t\t\t\t\t\t\t\tbodyPadding.left -\n\t\t\t\t\t\t\t\tbodyPadding.right;\n\t\t}\n\t\tif ((this.settings.fullsize && !height) || !height) {\n\t\t\theight = _windowBounds.height -\n\t\t\t\t\t\t\t\tbodyPadding.top -\n\t\t\t\t\t\t\t\tbodyPadding.bottom;\n\t\t}\n\n\t\treturn {\n\t\t\twidth: width -\n\t\t\t\t\t\t\tthis.containerPadding.left -\n\t\t\t\t\t\t\tthis.containerPadding.right,\n\t\t\theight: height -\n\t\t\t\t\t\t\tthis.containerPadding.top -\n\t\t\t\t\t\t\tthis.containerPadding.bottom\n\t\t};\n\n\t}\n\n\tbounds(){\n\t\tlet box;\n\t\tif (this.container.style.overflow !== \"visible\") {\n\t\t\tbox = this.container && this.container.getBoundingClientRect();\n\t\t}\n\n\t\tif(!box || !box.width || !box.height) {\n\t\t\treturn windowBounds();\n\t\t} else {\n\t\t\treturn box;\n\t\t}\n\n\t}\n\n\tgetSheet(){\n\t\tvar style = document.createElement(\"style\");\n\n\t\t// WebKit hack --> https://davidwalsh.name/add-rules-stylesheets\n\t\tstyle.appendChild(document.createTextNode(\"\"));\n\n\t\tdocument.head.appendChild(style);\n\n\t\treturn style.sheet;\n\t}\n\n\taddStyleRules(selector, rulesArray){\n\t\tvar scope = \"#\" + this.id + \" \";\n\t\tvar rules = \"\";\n\n\t\tif(!this.sheet){\n\t\t\tthis.sheet = this.getSheet();\n\t\t}\n\n\t\trulesArray.forEach(function(set) {\n\t\t\tfor (var prop in set) {\n\t\t\t\tif(set.hasOwnProperty(prop)) {\n\t\t\t\t\trules += prop + \":\" + set[prop] + \";\";\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.sheet.insertRule(scope + selector + \" {\" + rules + \"}\", 0);\n\t}\n\n\taxis(axis) {\n\t\tif(axis === \"horizontal\") {\n\t\t\tthis.container.style.display = \"flex\";\n\t\t\tthis.container.style.flexDirection = \"row\";\n\t\t\tthis.container.style.flexWrap = \"nowrap\";\n\t\t} else {\n\t\t\tthis.container.style.display = \"block\";\n\t\t}\n\t}\n\n\t// orientation(orientation) {\n\t// \tif (orientation === \"landscape\") {\n\t//\n\t// \t} else {\n\t//\n\t// \t}\n\t//\n\t// \tthis.orientation = orientation;\n\t// }\n\n\tdirection(dir) {\n\t\tif (this.container) {\n\t\t\tthis.container.dir = dir;\n\t\t\tthis.container.style[\"direction\"] = dir;\n\t\t}\n\n\t\tif (this.settings.fullsize) {\n\t\t\tdocument.body.style[\"direction\"] = dir;\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tvar base;\n\n\t\tif (this.element) {\n\n\t\t\tif(this.settings.hidden) {\n\t\t\t\tbase = this.wrapper;\n\t\t\t} else {\n\t\t\t\tbase = this.container;\n\t\t\t}\n\n\t\t\tif(this.element.contains(this.container)) {\n\t\t\t\tthis.element.removeChild(this.container);\n\t\t\t}\n\n\t\t\twindow.removeEventListener(\"resize\", this.resizeFunc);\n\t\t\twindow.removeEventListener(\"orientationChange\", this.orientationChangeFunc);\n\n\t\t}\n\t}\n}\n\nexport default Stage;\n","class Views {\n\tconstructor(container) {\n\t\tthis.container = container;\n\t\tthis._views = [];\n\t\tthis.length = 0;\n\t\tthis.hidden = false;\n\t}\n\n\tall() {\n\t\treturn this._views;\n\t}\n\n\tfirst() {\n\t\treturn this._views[0];\n\t}\n\n\tlast() {\n\t\treturn this._views[this._views.length-1];\n\t}\n\n\tindexOf(view) {\n\t\treturn this._views.indexOf(view);\n\t}\n\n\tslice() {\n\t\treturn this._views.slice.apply(this._views, arguments);\n\t}\n\n\tget(i) {\n\t\treturn this._views[i];\n\t}\n\n\tappend(view){\n\t\tthis._views.push(view);\n\t\tif(this.container){\n\t\t\tthis.container.appendChild(view.element);\n\t\t}\n\t\tthis.length++;\n\t\treturn view;\n\t}\n\n\tprepend(view){\n\t\tthis._views.unshift(view);\n\t\tif(this.container){\n\t\t\tthis.container.insertBefore(view.element, this.container.firstChild);\n\t\t}\n\t\tthis.length++;\n\t\treturn view;\n\t}\n\n\tinsert(view, index) {\n\t\tthis._views.splice(index, 0, view);\n\n\t\tif(this.container){\n\t\t\tif(index < this.container.children.length){\n\t\t\t\tthis.container.insertBefore(view.element, this.container.children[index]);\n\t\t\t} else {\n\t\t\t\tthis.container.appendChild(view.element);\n\t\t\t}\n\t\t}\n\n\t\tthis.length++;\n\t\treturn view;\n\t}\n\n\tremove(view) {\n\t\tvar index = this._views.indexOf(view);\n\n\t\tif(index > -1) {\n\t\t\tthis._views.splice(index, 1);\n\t\t}\n\n\n\t\tthis.destroy(view);\n\n\t\tthis.length--;\n\t}\n\n\tdestroy(view) {\n\t\tif(view.displayed){\n\t\t\tview.destroy();\n\t\t}\n\n\t\tif(this.container){\n\t\t\t this.container.removeChild(view.element);\n\t\t}\n\t\tview = null;\n\t}\n\n\t// Iterators\n\n\tforEach() {\n\t\treturn this._views.forEach.apply(this._views, arguments);\n\t}\n\n\tclear(){\n\t\t// Remove all views\n\t\tvar view;\n\t\tvar len = this.length;\n\n\t\tif(!this.length) return;\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tview = this._views[i];\n\t\t\tthis.destroy(view);\n\t\t}\n\n\t\tthis._views = [];\n\t\tthis.length = 0;\n\t}\n\n\tfind(section){\n\n\t\tvar view;\n\t\tvar len = this.length;\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tview = this._views[i];\n\t\t\tif(view.displayed && view.section.index == section.index) {\n\t\t\t\treturn view;\n\t\t\t}\n\t\t}\n\n\t}\n\n\tdisplayed(){\n\t\tvar displayed = [];\n\t\tvar view;\n\t\tvar len = this.length;\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tview = this._views[i];\n\t\t\tif(view.displayed){\n\t\t\t\tdisplayed.push(view);\n\t\t\t}\n\t\t}\n\t\treturn displayed;\n\t}\n\n\tshow(){\n\t\tvar view;\n\t\tvar len = this.length;\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tview = this._views[i];\n\t\t\tif(view.displayed){\n\t\t\t\tview.show();\n\t\t\t}\n\t\t}\n\t\tthis.hidden = false;\n\t}\n\n\thide(){\n\t\tvar view;\n\t\tvar len = this.length;\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tview = this._views[i];\n\t\t\tif(view.displayed){\n\t\t\t\tview.hide();\n\t\t\t}\n\t\t}\n\t\tthis.hidden = true;\n\t}\n}\n\nexport default Views;\n","import EventEmitter from \"event-emitter\";\nimport {extend, defer, windowBounds, isNumber} from \"../../utils/core\";\nimport Mapping from \"../../mapping\";\nimport Queue from \"../../utils/queue\";\nimport Stage from \"../helpers/stage\";\nimport Views from \"../helpers/views\";\nimport { EVENTS } from \"../../utils/constants\";\n\nclass DefaultViewManager {\n\tconstructor(options) {\n\n\t\tthis.name = \"default\";\n\t\tthis.optsSettings = options.settings;\n\t\tthis.View = options.view;\n\t\tthis.request = options.request;\n\t\tthis.renditionQueue = options.queue;\n\t\tthis.q = new Queue(this);\n\n\t\tthis.settings = extend(this.settings || {}, {\n\t\t\tinfinite: true,\n\t\t\thidden: false,\n\t\t\twidth: undefined,\n\t\t\theight: undefined,\n\t\t\taxis: undefined,\n\t\t\tflow: \"scrolled\",\n\t\t\tignoreClass: \"\",\n\t\t\tfullsize: undefined\n\t\t});\n\n\t\textend(this.settings, options.settings || {});\n\n\t\tthis.viewSettings = {\n\t\t\tignoreClass: this.settings.ignoreClass,\n\t\t\taxis: this.settings.axis,\n\t\t\tflow: this.settings.flow,\n\t\t\tlayout: this.layout,\n\t\t\tmethod: this.settings.method, // srcdoc, blobUrl, write\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\tforceEvenPages: true\n\t\t};\n\n\t\tthis.rendered = false;\n\n\t}\n\n\trender(element, size){\n\t\tlet tag = element.tagName;\n\n\t\tif (typeof this.settings.fullsize === \"undefined\" &&\n\t\t\t\ttag && (tag.toLowerCase() == \"body\" ||\n\t\t\t\ttag.toLowerCase() == \"html\")) {\n\t\t\t\tthis.settings.fullsize = true;\n\t\t}\n\n\t\tif (this.settings.fullsize) {\n\t\t\tthis.settings.overflow = \"visible\";\n\t\t\tthis.overflow = this.settings.overflow;\n\t\t}\n\n\t\tthis.settings.size = size;\n\n\t\t// Save the stage\n\t\tthis.stage = new Stage({\n\t\t\twidth: size.width,\n\t\t\theight: size.height,\n\t\t\toverflow: this.overflow,\n\t\t\thidden: this.settings.hidden,\n\t\t\taxis: this.settings.axis,\n\t\t\tfullsize: this.settings.fullsize,\n\t\t\tdirection: this.settings.direction\n\t\t});\n\n\t\tthis.stage.attachTo(element);\n\n\t\t// Get this stage container div\n\t\tthis.container = this.stage.getContainer();\n\n\t\t// Views array methods\n\t\tthis.views = new Views(this.container);\n\n\t\t// Calculate Stage Size\n\t\tthis._bounds = this.bounds();\n\t\tthis._stageSize = this.stage.size();\n\n\t\t// Set the dimensions for views\n\t\tthis.viewSettings.width = this._stageSize.width;\n\t\tthis.viewSettings.height = this._stageSize.height;\n\n\t\t// Function to handle a resize event.\n\t\t// Will only attach if width and height are both fixed.\n\t\tthis.stage.onResize(this.onResized.bind(this));\n\n\t\tthis.stage.onOrientationChange(this.onOrientationChange.bind(this));\n\n\t\t// Add Event Listeners\n\t\tthis.addEventListeners();\n\n\t\t// Add Layout method\n\t\t// this.applyLayoutMethod();\n\t\tif (this.layout) {\n\t\t\tthis.updateLayout();\n\t\t}\n\n\t\tthis.rendered = true;\n\n\t}\n\n\taddEventListeners(){\n\t\tvar scroller;\n\n\t\twindow.addEventListener(\"unload\", function(e){\n\t\t\tthis.destroy();\n\t\t}.bind(this));\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tscroller = this.container;\n\t\t} else {\n\t\t\tscroller = window;\n\t\t}\n\n\t\tscroller.addEventListener(\"scroll\", this.onScroll.bind(this));\n\t}\n\n\tremoveEventListeners(){\n\t\tvar scroller;\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tscroller = this.container;\n\t\t} else {\n\t\t\tscroller = window;\n\t\t}\n\n\t\tscroller.removeEventListener(\"scroll\", this.onScroll.bind(this));\n\t}\n\n\tdestroy(){\n\t\tclearTimeout(this.orientationTimeout);\n\t\tclearTimeout(this.resizeTimeout);\n\t\tclearTimeout(this.afterScrolled);\n\n\t\tthis.clear();\n\n\t\tthis.removeEventListeners();\n\n\t\tthis.stage.destroy();\n\n\t\tthis.rendered = false;\n\n\t\t/*\n\n\t\t\tclearTimeout(this.trimTimeout);\n\t\t\tif(this.settings.hidden) {\n\t\t\t\tthis.element.removeChild(this.wrapper);\n\t\t\t} else {\n\t\t\t\tthis.element.removeChild(this.container);\n\t\t\t}\n\t\t*/\n\t}\n\n\tonOrientationChange(e) {\n\t\tlet {orientation} = window;\n\n\t\tif(this.optsSettings.resizeOnOrientationChange) {\n\t\t\tthis.resize();\n\t\t}\n\n\t\t// Per ampproject:\n\t\t// In IOS 10.3, the measured size of an element is incorrect if the\n\t\t// element size depends on window size directly and the measurement\n\t\t// happens in window.resize event. Adding a timeout for correct\n\t\t// measurement. See https://github.com/ampproject/amphtml/issues/8479\n\t\tclearTimeout(this.orientationTimeout);\n\t\tthis.orientationTimeout = setTimeout(function(){\n\t\t\tthis.orientationTimeout = undefined;\n\n\t\t\tif(this.optsSettings.resizeOnOrientationChange) {\n\t\t\t\tthis.resize();\n\t\t\t}\n\n\t\t\tthis.emit(EVENTS.MANAGERS.ORIENTATION_CHANGE, orientation);\n\t\t}.bind(this), 500);\n\n\t}\n\n\tonResized(e) {\n\t\tthis.resize();\n\t}\n\n\tresize(width, height){\n\t\tlet stageSize = this.stage.size(width, height);\n\n\t\t// For Safari, wait for orientation to catch up\n\t\t// if the window is a square\n\t\tthis.winBounds = windowBounds();\n\t\tif (this.orientationTimeout &&\n\t\t\t\tthis.winBounds.width === this.winBounds.height) {\n\t\t\t// reset the stage size for next resize\n\t\t\tthis._stageSize = undefined;\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._stageSize &&\n\t\t\t\tthis._stageSize.width === stageSize.width &&\n\t\t\t\tthis._stageSize.height === stageSize.height ) {\n\t\t\t// Size is the same, no need to resize\n\t\t\treturn;\n\t\t}\n\n\t\tthis._stageSize = stageSize;\n\n\t\tthis._bounds = this.bounds();\n\n\t\t// Clear current views\n\t\tthis.clear();\n\n\t\t// Update for new views\n\t\tthis.viewSettings.width = this._stageSize.width;\n\t\tthis.viewSettings.height = this._stageSize.height;\n\n\t\tthis.updateLayout();\n\n\t\tthis.emit(EVENTS.MANAGERS.RESIZED, {\n\t\t\twidth: this._stageSize.width,\n\t\t\theight: this._stageSize.height\n\t\t});\n\t}\n\n\tcreateView(section) {\n\t\treturn new this.View(section, this.viewSettings);\n\t}\n\n\tdisplay(section, target){\n\n\t\tvar displaying = new defer();\n\t\tvar displayed = displaying.promise;\n\n\t\t// Check if moving to target is needed\n\t\tif (target === section.href || isNumber(target)) {\n\t\t\ttarget = undefined;\n\t\t}\n\n\t\t// Check to make sure the section we want isn't already shown\n\t\tvar visible = this.views.find(section);\n\n\t\t// View is already shown, just move to correct location in view\n\t\tif(visible && section) {\n\t\t\tlet offset = visible.offset();\n\n\t\t\tif (this.settings.direction === \"ltr\") {\n\t\t\t\tthis.scrollTo(offset.left, offset.top, true);\n\t\t\t} else {\n\t\t\t\tlet width = visible.width();\n\t\t\t\tthis.scrollTo(offset.left + width, offset.top, true);\n\t\t\t}\n\n\t\t\tif(target) {\n\t\t\t\tlet offset = visible.locationOf(target);\n\t\t\t\tthis.moveTo(offset);\n\t\t\t}\n\n\t\t\tdisplaying.resolve();\n\t\t\treturn displayed;\n\t\t}\n\n\t\t// Hide all current views\n\t\tthis.clear();\n\n\t\tthis.add(section)\n\t\t\t.then(function(view){\n\n\t\t\t\t// Move to correct place within the section, if needed\n\t\t\t\tif(target) {\n\t\t\t\t\tlet offset = view.locationOf(target);\n\t\t\t\t\tthis.moveTo(offset);\n\t\t\t\t}\n\n\t\t\t}.bind(this), (err) => {\n\t\t\t\tdisplaying.reject(err);\n\t\t\t})\n\t\t\t.then(function(){\n\t\t\t\tvar next;\n\t\t\t\tif (this.layout.name === \"pre-paginated\" &&\n\t\t\t\t\t\tthis.layout.divisor > 1) {\n\t\t\t\t\tnext = section.next();\n\t\t\t\t\tif (next) {\n\t\t\t\t\t\treturn this.add(next);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(this))\n\t\t\t.then(function(){\n\n\t\t\t\tthis.views.show();\n\n\t\t\t\tdisplaying.resolve();\n\n\t\t\t}.bind(this));\n\t\t// .then(function(){\n\t\t// \treturn this.hooks.display.trigger(view);\n\t\t// }.bind(this))\n\t\t// .then(function(){\n\t\t// \tthis.views.show();\n\t\t// }.bind(this));\n\t\treturn displayed;\n\t}\n\n\tafterDisplayed(view){\n\t\tthis.emit(EVENTS.MANAGERS.ADDED, view);\n\t}\n\n\tafterResized(view){\n\t\tthis.emit(EVENTS.MANAGERS.RESIZE, view.section);\n\t}\n\n\tmoveTo(offset){\n\t\tvar distX = 0,\n\t\t\t  distY = 0;\n\n\t\tif(!this.isPaginated) {\n\t\t\tdistY = offset.top;\n\t\t} else {\n\t\t\tdistX = Math.floor(offset.left / this.layout.delta) * this.layout.delta;\n\n\t\t\tif (distX + this.layout.delta > this.container.scrollWidth) {\n\t\t\t\tdistX = this.container.scrollWidth - this.layout.delta;\n\t\t\t}\n\t\t}\n\t\tthis.scrollTo(distX, distY, true);\n\t}\n\n\tadd(section){\n\t\tvar view = this.createView(section);\n\n\t\tthis.views.append(view);\n\n\t\t// view.on(EVENTS.VIEWS.SHOWN, this.afterDisplayed.bind(this));\n\t\tview.onDisplayed = this.afterDisplayed.bind(this);\n\t\tview.onResize = this.afterResized.bind(this);\n\n\t\tview.on(EVENTS.VIEWS.AXIS, (axis) => {\n\t\t\tthis.updateAxis(axis);\n\t\t});\n\n\t\treturn view.display(this.request);\n\n\t}\n\n\tappend(section){\n\t\tvar view = this.createView(section);\n\t\tthis.views.append(view);\n\n\t\tview.onDisplayed = this.afterDisplayed.bind(this);\n\t\tview.onResize = this.afterResized.bind(this);\n\n\t\tview.on(EVENTS.VIEWS.AXIS, (axis) => {\n\t\t\tthis.updateAxis(axis);\n\t\t});\n\n\t\treturn view.display(this.request);\n\t}\n\n\tprepend(section){\n\t\tvar view = this.createView(section);\n\n\t\tview.on(EVENTS.VIEWS.RESIZED, (bounds) => {\n\t\t\tthis.counter(bounds);\n\t\t});\n\n\t\tthis.views.prepend(view);\n\n\t\tview.onDisplayed = this.afterDisplayed.bind(this);\n\t\tview.onResize = this.afterResized.bind(this);\n\n\t\tview.on(EVENTS.VIEWS.AXIS, (axis) => {\n\t\t\tthis.updateAxis(axis);\n\t\t});\n\n\t\treturn view.display(this.request);\n\t}\n\n\tcounter(bounds){\n\t\tif(this.settings.axis === \"vertical\") {\n\t\t\tthis.scrollBy(0, bounds.heightDelta, true);\n\t\t} else {\n\t\t\tthis.scrollBy(bounds.widthDelta, 0, true);\n\t\t}\n\n\t}\n\n\t// resizeView(view) {\n\t//\n\t// \tif(this.settings.globalLayoutProperties.layout === \"pre-paginated\") {\n\t// \t\tview.lock(\"both\", this.bounds.width, this.bounds.height);\n\t// \t} else {\n\t// \t\tview.lock(\"width\", this.bounds.width, this.bounds.height);\n\t// \t}\n\t//\n\t// };\n\n\tnext(){\n\t\tvar next;\n\t\tvar left;\n\n\t\tlet dir = this.settings.direction;\n\n\t\tif(!this.views.length) return;\n\n\t\tif(this.isPaginated && this.settings.axis === \"horizontal\" && (!dir || dir === \"ltr\")) {\n\n\t\t\tthis.scrollLeft = this.container.scrollLeft;\n\n\t\t\tleft = this.container.scrollLeft + this.container.offsetWidth + this.layout.delta;\n\n\t\t\tif(left <= this.container.scrollWidth) {\n\t\t\t\tthis.scrollBy(this.layout.delta, 0, true);\n\t\t\t} else {\n\t\t\t\tnext = this.views.last().section.next();\n\t\t\t}\n\t\t} else if (this.isPaginated && this.settings.axis === \"horizontal\" && dir === \"rtl\") {\n\n\t\t\tthis.scrollLeft = this.container.scrollLeft;\n\n\t\t\tleft = this.container.scrollLeft;\n\n\t\t\tif(left > 0) {\n\t\t\t\tthis.scrollBy(this.layout.delta, 0, true);\n\t\t\t} else {\n\t\t\t\tnext = this.views.last().section.next();\n\t\t\t}\n\n\t\t} else if (this.isPaginated && this.settings.axis === \"vertical\") {\n\n\t\t\tthis.scrollTop = this.container.scrollTop;\n\n\t\t\tlet top  = this.container.scrollTop + this.container.offsetHeight;\n\n\t\t\tif(top < this.container.scrollHeight) {\n\t\t\t\tthis.scrollBy(0, this.layout.height, true);\n\t\t\t} else {\n\t\t\t\tnext = this.views.last().section.next();\n\t\t\t}\n\n\t\t} else {\n\t\t\tnext = this.views.last().section.next();\n\t\t}\n\n\t\tif(next) {\n\t\t\tthis.clear();\n\n\t\t\treturn this.append(next)\n\t\t\t\t.then(function(){\n\t\t\t\t\tvar right;\n\t\t\t\t\tif (this.layout.name === \"pre-paginated\" && this.layout.divisor > 1) {\n\t\t\t\t\t\tright = next.next();\n\t\t\t\t\t\tif (right) {\n\t\t\t\t\t\t\treturn this.append(right);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}.bind(this), (err) => {\n\t\t\t\t\tdisplaying.reject(err);\n\t\t\t\t})\n\t\t\t\t.then(function(){\n\t\t\t\t\tthis.views.show();\n\t\t\t\t}.bind(this));\n\t\t}\n\n\n\t}\n\n\tprev(){\n\t\tvar prev;\n\t\tvar left;\n\t\tlet dir = this.settings.direction;\n\n\t\tif(!this.views.length) return;\n\n\t\tif(this.isPaginated && this.settings.axis === \"horizontal\" && (!dir || dir === \"ltr\")) {\n\n\t\t\tthis.scrollLeft = this.container.scrollLeft;\n\n\t\t\tleft = this.container.scrollLeft;\n\n\t\t\tif(left > 0) {\n\t\t\t\tthis.scrollBy(-this.layout.delta, 0, true);\n\t\t\t} else {\n\t\t\t\tprev = this.views.first().section.prev();\n\t\t\t}\n\n\t\t} else if (this.isPaginated && this.settings.axis === \"horizontal\" && dir === \"rtl\") {\n\n\t\t\tthis.scrollLeft = this.container.scrollLeft;\n\n\t\t\tleft = this.container.scrollLeft + this.container.offsetWidth + this.layout.delta;\n\n\t\t\tif(left <= this.container.scrollWidth) {\n\t\t\t\tthis.scrollBy(-this.layout.delta, 0, true);\n\t\t\t} else {\n\t\t\t\tprev = this.views.first().section.prev();\n\t\t\t}\n\n\t\t} else if (this.isPaginated && this.settings.axis === \"vertical\") {\n\n\t\t\tthis.scrollTop = this.container.scrollTop;\n\n\t\t\tlet top = this.container.scrollTop;\n\n\t\t\tif(top > 0) {\n\t\t\t\tthis.scrollBy(0, -(this.layout.height), true);\n\t\t\t} else {\n\t\t\t\tprev = this.views.first().section.prev();\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tprev = this.views.first().section.prev();\n\n\t\t}\n\n\t\tif(prev) {\n\t\t\tthis.clear();\n\n\t\t\treturn this.prepend(prev)\n\t\t\t\t.then(function(){\n\t\t\t\t\tvar left;\n\t\t\t\t\tif (this.layout.name === \"pre-paginated\" && this.layout.divisor > 1) {\n\t\t\t\t\t\tleft = prev.prev();\n\t\t\t\t\t\tif (left) {\n\t\t\t\t\t\t\treturn this.prepend(left);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}.bind(this), (err) => {\n\t\t\t\t\tdisplaying.reject(err);\n\t\t\t\t})\n\t\t\t\t.then(function(){\n\t\t\t\t\tif(this.isPaginated && this.settings.axis === \"horizontal\") {\n\t\t\t\t\t\tif (this.settings.direction === \"rtl\") {\n\t\t\t\t\t\t\tthis.scrollTo(0, 0, true);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.scrollTo(this.container.scrollWidth - this.layout.delta, 0, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.views.show();\n\t\t\t\t}.bind(this));\n\t\t}\n\t}\n\n\tcurrent(){\n\t\tvar visible = this.visible();\n\t\tif(visible.length){\n\t\t\t// Current is the last visible view\n\t\t\treturn visible[visible.length-1];\n\t\t}\n\t\treturn null;\n\t}\n\n\tclear () {\n\n\t\t// this.q.clear();\n\n\t\tif (this.views) {\n\t\t\tthis.views.hide();\n\t\t\tthis.scrollTo(0,0, true);\n\t\t\tthis.views.clear();\n\t\t}\n\t}\n\n\tcurrentLocation(){\n\n\t\tif (this.settings.axis === \"vertical\") {\n\t\t\tthis.location = this.scrolledLocation();\n\t\t} else {\n\t\t\tthis.location = this.paginatedLocation();\n\t\t}\n\t\treturn this.location;\n\t}\n\n\tscrolledLocation() {\n\t\tlet visible = this.visible();\n\t\tlet container = this.container.getBoundingClientRect();\n\t\tlet pageHeight = (container.height < window.innerHeight) ? container.height : window.innerHeight;\n\n\t\tlet offset = 0;\n\t\tlet used = 0;\n\n\t\tif(this.settings.fullsize) {\n\t\t\toffset = window.scrollY;\n\t\t}\n\n\t\tlet sections = visible.map((view) => {\n\t\t\tlet {index, href} = view.section;\n\t\t\tlet position = view.position();\n\t\t\tlet height = view.height();\n\n\t\t\tlet startPos = offset + container.top - position.top + used;\n\t\t\tlet endPos = startPos + pageHeight - used;\n\t\t\tif (endPos > height) {\n\t\t\t\tendPos = height;\n\t\t\t\tused = (endPos - startPos);\n\t\t\t}\n\n\t\t\tlet totalPages = this.layout.count(height, pageHeight).pages;\n\n\t\t\tlet currPage = Math.ceil(startPos / pageHeight);\n\t\t\tlet pages = [];\n\t\t\tlet endPage = Math.ceil(endPos / pageHeight);\n\n\t\t\tpages = [];\n\t\t\tfor (var i = currPage; i <= endPage; i++) {\n\t\t\t\tlet pg = i + 1;\n\t\t\t\tpages.push(pg);\n\t\t\t}\n\n\t\t\tlet mapping = this.mapping.page(view.contents, view.section.cfiBase, startPos, endPos);\n\n\t\t\treturn {\n\t\t\t\tindex,\n\t\t\t\thref,\n\t\t\t\tpages,\n\t\t\t\ttotalPages,\n\t\t\t\tmapping\n\t\t\t};\n\t\t});\n\n\t\treturn sections;\n\t}\n\n\tpaginatedLocation(){\n\t\tlet visible = this.visible();\n\t\tlet container = this.container.getBoundingClientRect();\n\n\t\tlet left = 0;\n\t\tlet used = 0;\n\n\t\tif(this.settings.fullsize) {\n\t\t\tleft = window.scrollX;\n\t\t}\n\n\t\tlet sections = visible.map((view) => {\n\t\t\tlet {index, href} = view.section;\n\t\t\tlet offset = view.offset().left;\n\t\t\tlet position = view.position().left;\n\t\t\tlet width = view.width();\n\n\t\t\t// Find mapping\n\t\t\tlet start = left + container.left - position + used;\n\t\t\tlet end = start + this.layout.width - used;\n\n\t\t\tlet mapping = this.mapping.page(view.contents, view.section.cfiBase, start, end);\n\n\t\t\t// Find displayed pages\n\t\t\t//console.log(\"pre\", end, offset + width);\n\t\t\t// if (end > offset + width) {\n\t\t\t// \tend = offset + width;\n\t\t\t// \tused = this.layout.pageWidth;\n\t\t\t// }\n\t\t\t// console.log(\"post\", end);\n\n\t\t\tlet totalPages = this.layout.count(width).pages;\n\t\t\tlet startPage = Math.floor(start / this.layout.pageWidth);\n\t\t\tlet pages = [];\n\t\t\tlet endPage = Math.floor(end / this.layout.pageWidth);\n\n\t\t\t// start page should not be negative\n\t\t\tif (startPage < 0) {\n\t\t\t\tstartPage = 0;\n\t\t\t\tendPage = endPage + 1;\n\t\t\t}\n\n\t\t\t// Reverse page counts for rtl\n\t\t\tif (this.settings.direction === \"rtl\") {\n\t\t\t\tlet tempStartPage = startPage;\n\t\t\t\tstartPage = totalPages - endPage;\n\t\t\t\tendPage = totalPages - tempStartPage;\n\t\t\t}\n\n\n\t\t\tfor (var i = startPage + 1; i <= endPage; i++) {\n\t\t\t\tlet pg = i;\n\t\t\t\tpages.push(pg);\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tindex,\n\t\t\t\thref,\n\t\t\t\tpages,\n\t\t\t\ttotalPages,\n\t\t\t\tmapping\n\t\t\t};\n\t\t});\n\n\t\treturn sections;\n\t}\n\n\tisVisible(view, offsetPrev, offsetNext, _container){\n\t\tvar position = view.position();\n\t\tvar container = _container || this.bounds();\n\n\t\tif(this.settings.axis === \"horizontal\" &&\n\t\t\tposition.right > container.left - offsetPrev &&\n\t\t\tposition.left < container.right + offsetNext) {\n\n\t\t\treturn true;\n\n\t\t} else if(this.settings.axis === \"vertical\" &&\n\t\t\tposition.bottom > container.top - offsetPrev &&\n\t\t\tposition.top < container.bottom + offsetNext) {\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tvisible(){\n\t\tvar container = this.bounds();\n\t\tvar views = this.views.displayed();\n\t\tvar viewsLength = views.length;\n\t\tvar visible = [];\n\t\tvar isVisible;\n\t\tvar view;\n\n\t\tfor (var i = 0; i < viewsLength; i++) {\n\t\t\tview = views[i];\n\t\t\tisVisible = this.isVisible(view, 0, 0, container);\n\n\t\t\tif(isVisible === true) {\n\t\t\t\tvisible.push(view);\n\t\t\t}\n\n\t\t}\n\t\treturn visible;\n\t}\n\n\tscrollBy(x, y, silent){\n\t\tlet dir = this.settings.direction === \"rtl\" ? -1 : 1;\n\n\t\tif(silent) {\n\t\t\tthis.ignore = true;\n\t\t}\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tif(x) this.container.scrollLeft += x * dir;\n\t\t\tif(y) this.container.scrollTop += y;\n\t\t} else {\n\t\t\twindow.scrollBy(x * dir, y * dir);\n\t\t}\n\t\tthis.scrolled = true;\n\t}\n\n\tscrollTo(x, y, silent){\n\t\tif(silent) {\n\t\t\tthis.ignore = true;\n\t\t}\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tthis.container.scrollLeft = x;\n\t\t\tthis.container.scrollTop = y;\n\t\t} else {\n\t\t\twindow.scrollTo(x,y);\n\t\t}\n\t\tthis.scrolled = true;\n\t}\n\n\tonScroll(){\n\t\tlet scrollTop;\n\t\tlet scrollLeft;\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tscrollTop = this.container.scrollTop;\n\t\t\tscrollLeft = this.container.scrollLeft;\n\t\t} else {\n\t\t\tscrollTop = window.scrollY;\n\t\t\tscrollLeft = window.scrollX;\n\t\t}\n\n\t\tthis.scrollTop = scrollTop;\n\t\tthis.scrollLeft = scrollLeft;\n\n\t\tif(!this.ignore) {\n\t\t\tthis.emit(EVENTS.MANAGERS.SCROLL, {\n\t\t\t\ttop: scrollTop,\n\t\t\t\tleft: scrollLeft\n\t\t\t});\n\n\t\t\tclearTimeout(this.afterScrolled);\n\t\t\tthis.afterScrolled = setTimeout(function () {\n\t\t\t\tthis.emit(EVENTS.MANAGERS.SCROLLED, {\n\t\t\t\t\ttop: this.scrollTop,\n\t\t\t\t\tleft: this.scrollLeft\n\t\t\t\t});\n\t\t\t}.bind(this), 20);\n\n\n\n\t\t} else {\n\t\t\tthis.ignore = false;\n\t\t}\n\n\t}\n\n\tbounds() {\n\t\tvar bounds;\n\n\t\tbounds = this.stage.bounds();\n\n\t\treturn bounds;\n\t}\n\n\tapplyLayout(layout) {\n\n\t\tthis.layout = layout;\n\t\tthis.updateLayout();\n\t\t // this.manager.layout(this.layout.format);\n\t}\n\n\tupdateLayout() {\n\n\t\tif (!this.stage) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._stageSize = this.stage.size();\n\n\t\tif(!this.isPaginated) {\n\t\t\tthis.layout.calculate(this._stageSize.width, this._stageSize.height);\n\t\t} else {\n\t\t\tthis.layout.calculate(\n\t\t\t\tthis._stageSize.width,\n\t\t\t\tthis._stageSize.height,\n\t\t\t\tthis.settings.gap\n\t\t\t);\n\n\t\t\t// Set the look ahead offset for what is visible\n\t\t\tthis.settings.offset = this.layout.delta;\n\n\t\t\t// this.stage.addStyleRules(\"iframe\", [{\"margin-right\" : this.layout.gap + \"px\"}]);\n\n\t\t}\n\n\t\t// Set the dimensions for views\n\t\tthis.viewSettings.width = this.layout.width;\n\t\tthis.viewSettings.height = this.layout.height;\n\n\t\tthis.setLayout(this.layout);\n\t}\n\n\tsetLayout(layout){\n\n\t\tthis.viewSettings.layout = layout;\n\n\t\tthis.mapping = new Mapping(layout.props, this.settings.direction, this.settings.axis);\n\n\t\tif(this.views) {\n\n\t\t\tthis.views.forEach(function(view){\n\t\t\t\tif (view) {\n\t\t\t\t\tview.setLayout(layout);\n\t\t\t\t}\n\t\t\t});\n\n\t\t}\n\n\t}\n\n\tupdateAxis(axis, forceUpdate){\n\n\t\tif (!this.isPaginated) {\n\t\t\taxis = \"vertical\";\n\t\t}\n\n\t\tif (!forceUpdate && axis === this.settings.axis) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.settings.axis = axis;\n\n\t\tthis.stage && this.stage.axis(axis);\n\n\t\tthis.viewSettings.axis = axis;\n\n\t\tif (this.mapping) {\n\t\t\tthis.mapping = new Mapping(this.layout.props, this.settings.direction, this.settings.axis);\n\t\t}\n\n\t\tif (this.layout) {\n\t\t\tif (axis === \"vertical\") {\n\t\t\t\tthis.layout.spread(\"none\");\n\t\t\t} else {\n\t\t\t\tthis.layout.spread(this.layout.settings.spread);\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateFlow(flow){\n\t\tlet isPaginated = (flow === \"paginated\" || flow === \"auto\");\n\n\t\tthis.isPaginated = isPaginated;\n\n\t\tif (flow === \"scrolled-doc\" ||\n\t\t\t\tflow === \"scrolled-continuous\" ||\n\t\t\t\tflow === \"scrolled\") {\n\t\t\tthis.updateAxis(\"vertical\");\n\t\t}\n\n\t\tthis.viewSettings.flow = flow;\n\n\t\tif (!this.settings.overflow) {\n\t\t\tthis.overflow = isPaginated ? \"hidden\" : \"auto\";\n\t\t} else {\n\t\t\tthis.overflow = this.settings.overflow;\n\t\t}\n\t\t// this.views.forEach(function(view){\n\t\t// \tview.setAxis(axis);\n\t\t// });\n\n\t\tthis.updateLayout();\n\n\t}\n\n\tgetContents(){\n\t\tvar contents = [];\n\t\tif (!this.views) {\n\t\t\treturn contents;\n\t\t}\n\t\tthis.views.forEach(function(view){\n\t\t\tconst viewContents = view && view.contents;\n\t\t\tif (viewContents) {\n\t\t\t\tcontents.push(viewContents);\n\t\t\t}\n\t\t});\n\t\treturn contents;\n\t}\n\n\tdirection(dir=\"ltr\") {\n\t\tthis.settings.direction = dir;\n\n\t\tthis.stage && this.stage.direction(dir);\n\n\t\tthis.viewSettings.direction = dir;\n\n\t\tthis.updateLayout();\n\t}\n\n\tisRendered() {\n\t\treturn this.rendered;\n\t}\n}\n\n//-- Enable binding events to Manager\nEventEmitter(DefaultViewManager.prototype);\n\nexport default DefaultViewManager;\n","\"use strict\";\n\n// eslint-disable-next-line no-empty-function\nmodule.exports = function () {};\n","\"use strict\";\n\nmodule.exports = function () {\n\ttry {\n\t\tObject.keys(\"primitive\");\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nvar forEach = Array.prototype.forEach, create = Object.create;\n\nvar process = function (src, obj) {\n\tvar key;\n\tfor (key in src) obj[key] = src[key];\n};\n\n// eslint-disable-next-line no-unused-vars\nmodule.exports = function (opts1/*, options*/) {\n\tvar result = create(null);\n\tforEach.call(arguments, function (options) {\n\t\tif (!isValue(options)) return;\n\t\tprocess(Object(options), result);\n\t});\n\treturn result;\n};\n","\"use strict\";\n\nvar isValue         = require(\"type/value/is\")\n  , isPlainFunction = require(\"type/plain-function/is\")\n  , assign          = require(\"es5-ext/object/assign\")\n  , normalizeOpts   = require(\"es5-ext/object/normalize-options\")\n  , contains        = require(\"es5-ext/string/#/contains\");\n\nvar d = (module.exports = function (dscr, value/*, options*/) {\n\tvar c, e, w, options, desc;\n\tif (arguments.length < 2 || typeof dscr !== \"string\") {\n\t\toptions = value;\n\t\tvalue = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[2];\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t\tw = contains.call(dscr, \"w\");\n\t} else {\n\t\tc = w = true;\n\t\te = false;\n\t}\n\n\tdesc = { value: value, configurable: c, enumerable: e, writable: w };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n});\n\nd.gs = function (dscr, get, set/*, options*/) {\n\tvar c, e, options, desc;\n\tif (typeof dscr !== \"string\") {\n\t\toptions = set;\n\t\tset = get;\n\t\tget = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[3];\n\t}\n\tif (!isValue(get)) {\n\t\tget = undefined;\n\t} else if (!isPlainFunction(get)) {\n\t\toptions = get;\n\t\tget = set = undefined;\n\t} else if (!isValue(set)) {\n\t\tset = undefined;\n\t} else if (!isPlainFunction(set)) {\n\t\toptions = set;\n\t\tset = undefined;\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t} else {\n\t\tc = true;\n\t\te = false;\n\t}\n\n\tdesc = { get: get, set: set, configurable: c, enumerable: e };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n","\"use strict\";\n\nvar keys  = require(\"../keys\")\n  , value = require(\"../valid-value\")\n  , max   = Math.max;\n\nmodule.exports = function (dest, src/*, srcn*/) {\n\tvar error, i, length = max(arguments.length, 2), assign;\n\tdest = Object(value(dest));\n\tassign = function (key) {\n\t\ttry {\n\t\t\tdest[key] = src[key];\n\t\t} catch (e) {\n\t\t\tif (!error) error = e;\n\t\t}\n\t};\n\tfor (i = 1; i < length; ++i) {\n\t\tsrc = arguments[i];\n\t\tkeys(src).forEach(assign);\n\t}\n\tif (error !== undefined) throw error;\n\treturn dest;\n};\n","\"use strict\";\n\nvar indexOf = String.prototype.indexOf;\n\nmodule.exports = function (searchString/*, position*/) {\n\treturn indexOf.call(this, searchString, arguments[1]) > -1;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? String.prototype.contains : require(\"./shim\");\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n"],"sourceRoot":""}