{"version":3,"sources":["webpack:///./src/components/detail/footer.vue?6aeb","webpack:///./src/components/detail/detailTitle.vue?5df1","webpack:///./src/components/common/Tick.vue?7df8","webpack:///./src/components/common/lineProgress.vue?754c","webpack:///./src/components/common/Toast.vue","webpack:///./src/components/common/Toast.vue?6320","webpack:///./src/views/store/storeDetail.vue?b90b","webpack:///./src/views/store/storeDetail.vue","webpack:///./src/components/detail/detailTitle.vue","webpack:///./src/components/detail/detailTitle.vue?9bfa","webpack:///./src/components/detail/footer.vue","webpack:///./src/components/common/lineProgress.vue","webpack:///./src/components/common/lineProgress.vue?21da","webpack:///./src/components/detail/footer.vue?02ca","webpack:///./src/components/common/Tick.vue","webpack:///./src/components/common/Tick.vue?9fa5","webpack:///./src/views/store/storeDetail.vue?4c2b","webpack:///./src/components/common/Toast.vue?783a"],"names":["ifShowToast","class","toastOn","toastOff","text","data","animationTime","task","props","type","String","default","MouseEnterFocus","Boolean","MouseLeaveOff","ifPersistence","methods","this","clearTimeout","setTimeout","mounted","reminder","console","log","render","__scopeId","src","bkdetail","cover","title","author","readTimes","shrink","publisher","lang","language","categoryToChinese","category","dialog","back","showBookShelf","$router","push","path","ifDownloadProgress","read","ifCache","delCache","saveCache","ifBookAddToShelf","remove","add","width","percent","color2","name","ifToast","style","color1","Number","animateTime","flatBookIndex","computed","refreshBookShelf","i","shelfList","length","bookId","setShelfBkIndex","shelfBkIndex","cache","e","components","LineProgress","Toast","book","JSON","parse","stringify","addToBookShelf","bookTitle","removeFromBookShelf","$route","query","filename","showEbook","res","refreshLocalStorage","setIfTickVisible","pgs","Math","ceil","loaded","total","err","fileName","created","info","height","fill","stroke","stroke-width","cx","cy","r","stroke-linecap","transform","points","stroke-linejoin","ifTickVisible","detailTitle","detailFooter","Tick","fileUrl","readTime","getData","then","txt","substring","init"],"mappings":"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","file":"js/chunk-a84e6e0e.7b051c48.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./footer.vue?vue&type=style&index=0&id=2703e3e6&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./detailTitle.vue?vue&type=style&index=0&id=62f21ed9&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Tick.vue?vue&type=style&index=0&id=2c1bb299&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./lineProgress.vue?vue&type=style&index=0&id=2cf1cdfa&lang=scss&scoped=true\"","<template>\r\n  <div\r\n    class=\"toast-wrapper\"\r\n    v-if=\"ifShowToast\"\r\n    @mouseenter=\"toastOn\"\r\n    @mouseleave=\"toastOff\"\r\n  >\r\n    <div class=\"toast-text\" v-html=\"text\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getReminder, saveReminder } from \"@/utils/localStorage\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      ifShowToast: false,\r\n      animationTime: 1000,\r\n      task: -1,\r\n    };\r\n  },\r\n  props: {\r\n    text: {\r\n      type: String,\r\n      default: \"温馨提示\",\r\n    },\r\n    // 鼠标进入\r\n    MouseEnterFocus: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    // 鼠标离开\r\n    MouseLeaveOff: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    // 是否开启持久化，存储到localStorage\r\n    ifPersistence: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n  },\r\n  methods: {\r\n    toastOn() {\r\n      if (this.MouseEnterFocus) {\r\n        this.ifShowToast = true;\r\n        clearTimeout(this.task);\r\n        this.ifShowToast = true;\r\n      }\r\n    },\r\n    toastOff() {\r\n      if (this.MouseLeaveOff) {\r\n        this.task = setTimeout(() => {\r\n          this.ifShowToast = false;\r\n        }, this.animationTime / 6);\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    // 如果没有展示，则展示,并将其置为true\r\n    // 如果已经展示过了，则不做\r\n    let reminder = getReminder();\r\n    console.log(this.ifPersistence);\r\n    if (this.ifPersistence && !reminder) {\r\n      this.ifShowToast = true;\r\n      this.task = setTimeout(() => {\r\n        this.ifShowToast = false;\r\n        saveReminder(true);\r\n      }, this.animationTime);\r\n    } else if (!this.ifPersistence) {\r\n      this.ifShowToast = true;\r\n      this.task = setTimeout(() => {\r\n        this.ifShowToast = false;\r\n      }, this.animationTime);\r\n    }\r\n  },\r\n};\r\n</script>\r\n<style lang='scss' scoped>\r\n@import \"@/assets/styles/global.scss\";\r\n.toast-wrapper {\r\n  width: 16rem;\r\n  height: 4rem;\r\n  \r\n  line-height: 1.5rem;\r\n  font-size: 1rem;\r\n\r\n  border-radius: 0.3rem;\r\n  box-sizing: border-box;\r\n  box-shadow: 0.3rem 0.2rem 0.3rem 0.2rem rgba(0, 0, 0, 0.3);\r\n\r\n  color: $color-white;\r\n  background-color: rgba(#000000, 0.7);\r\n\r\n  @include absCenter; \r\n  @include center;\r\n  .toast-text {\r\n    padding: 0.4rem 1rem;\r\n  }\r\n}\r\n</style>","import { render } from \"./Toast.vue?vue&type=template&id=129ab776&scoped=true\"\nimport script from \"./Toast.vue?vue&type=script&lang=js\"\nexport * from \"./Toast.vue?vue&type=script&lang=js\"\n\nimport \"./Toast.vue?vue&type=style&index=0&id=129ab776&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-129ab776\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./storeDetail.vue?vue&type=style&index=0&id=9bccea32&lang=scss&scoped=true\"","<template>\r\n  <div class=\"store-detail\">\r\n    <detail-title></detail-title>\r\n\r\n    <div class=\"book-info\">\r\n      <div class=\"book-info-left\">\r\n        <div class=\"book-cover\">\r\n          <img :src=\"bkdetail.cover\" class=\"cover\" />\r\n        </div>\r\n      </div>\r\n      <div class=\"book-info-right\">\r\n        <div class=\"book-name\">\r\n          {{ bkdetail.title }}\r\n        </div>\r\n        <div class=\"book-author\">\r\n          {{ bkdetail.author }}\r\n        </div>\r\n        <div class=\"book-read\">已读：{{ readTimes }} 分钟</div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"line-wrapper\">\r\n      <div class=\"line\"></div>\r\n    </div>\r\n\r\n    <div class=\"publish-info\">\r\n      <div class=\"row\">\r\n        <div class=\"label\">出版社</div>\r\n        <div class=\"publisher\">{{ shrink(bkdetail.publisher) }}</div>\r\n      </div>\r\n      <div class=\"row\">\r\n        <div class=\"label\">语言</div>\r\n        <div class=\"language\">{{ lang(bkdetail.language) }}</div>\r\n      </div>\r\n\r\n      <div class=\"row\">\r\n        <div class=\"label\">分类</div>\r\n        <div class=\"category\">\r\n          {{ categoryToChinese(bkdetail.category) }}\r\n        </div>\r\n      </div>\r\n      <!-- <div class=\"isbn\">ISBN：</div> -->\r\n    </div>\r\n\r\n    <div class=\"line-wrapper\">\r\n      <div class=\"line\"></div>\r\n    </div>\r\n\r\n    <detail-footer :bkdetail=\"bkdetail\"></detail-footer>\r\n\r\n    <tick class=\"tick\" :dialog=\"dialog\"></tick>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { detail } from \"@/api/\";\r\nimport { getReadTime } from \"@/utils/localStorage\";\r\nimport detailTitle from \"@/components/detail/detailTitle\";\r\nimport detailFooter from \"@/components/detail/footer\";\r\nimport Tick from \"@/components/common/Tick.vue\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      bkdetail: -1,\r\n    };\r\n  },\r\n  components: {\r\n    detailTitle,\r\n    detailFooter,\r\n    Tick,\r\n  },\r\n  computed: {\r\n    readTimes() {\r\n      let fileName = this.$route.query.filename;\r\n      let category = this.$route.query.category;\r\n      let fileUrl = `${process.env.VUE_APP_RES_URL}/${category}/${fileName}.epub`;\r\n      let readTime = getReadTime(fileUrl);\r\n      if (!readTime) {\r\n        return 0;\r\n      } else {\r\n        return Math.ceil(readTime / 60);\r\n      }\r\n    },\r\n    dialog() {\r\n      if (this.shelfBkIndex < 0) return \"不在书架当中\";\r\n      try {\r\n        let ifCache = this.shelfList[this.shelfBkIndex].cache;\r\n        if (ifCache === false) {\r\n          return \"删除缓存成功\";\r\n        } else {\r\n          return \"缓存成功\";\r\n        }\r\n      } catch (e) {\r\n        return \"SUCCESS\";\r\n      }\r\n      return \"SUCCESS\";\r\n    },\r\n  },\r\n  methods: {\r\n    getData() {\r\n      // 获取路由中的文件名\r\n      let fileName = this.$route.query.filename;\r\n      detail(fileName).then((res) => {\r\n        this.bkdetail = res.data.data;\r\n      });\r\n    },\r\n    shrink(txt) {\r\n      if (txt && txt.length >= 20) {\r\n        return txt.substring(0, 20);\r\n      } else {\r\n        return txt;\r\n      }\r\n    },\r\n    init() {\r\n      this.getData();\r\n    },\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n};\r\n</script>\r\n<style lang='scss' scoped>\r\n @import \"@/assets/styles/global.scss\";\r\n.store-detail {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: absolute;\r\n  .book-info {\r\n    padding: 3rem 1rem;\r\n    display: flex;\r\n    .book-info-left {\r\n      flex: 1;\r\n      .book-cover {\r\n        .cover {\r\n          height: 9rem;\r\n          width: 6rem;\r\n        }\r\n      }\r\n    }\r\n    .book-info-right {\r\n      flex: 2;\r\n      text-align: left;\r\n      @include columnBetween;\r\n      margin: 1rem 0.5rem;\r\n      .book-name {\r\n        padding: 0 0 0.5rem 0;\r\n        font-weight: bold;\r\n        font-size: 1.2rem;\r\n      }\r\n      .book-author {\r\n        font-size: 0.8rem;\r\n        padding: 0 0 0.4rem 0;\r\n        color: $color-blue;\r\n      }\r\n      .book-read {\r\n        font-size: 0.8rem;\r\n      }\r\n    }\r\n  }\r\n  \r\n  .line-wrapper {\r\n    width: 100%;\r\n    height: 1px;\r\n    @include center;\r\n    .line {\r\n      width: 90%;\r\n      height: 1px;\r\n      background-color: $color-gray2;\r\n    }\r\n  }\r\n\r\n  .publish-info {\r\n    font-size: 1rem;\r\n    margin: 3rem 2rem;\r\n    width: 100%;\r\n    text-align: left;\r\n    font-size: 1.1rem;\r\n    @include vertical;\r\n    .row {\r\n      padding: 0.5rem 0 0 0;\r\n      display: flex;\r\n    }\r\n\r\n    .label {\r\n      width: 5rem;\r\n      height: 2rem;\r\n    }\r\n  }\r\n  .tick {\r\n    position: absolute;\r\n    left: 50%;\r\n    bottom: 10%;\r\n    transform: translateX(-50%);\r\n  }\r\n}\r\n</style>\r\n\r\n","// 详情页标题\r\n<template>\r\n  <div class=\"detail-title\">\r\n    <div class=\"title-left-wrapper\" @click=\"back\">\r\n      <span class=\"icon-back icon\"></span>\r\n    </div>\r\n    <div class=\"title-right-wrapper\">\r\n      <span class=\"icon-shelf icon\" @click=\"showBookShelf\"></span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  methods: {\r\n    \r\n    showBookShelf() {\r\n      this.$router.push({path: '/store/shelf'})\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang='scss' scoped>\r\n@import \"@/assets/styles/global.scss\";\r\n.detail-title {\r\n  height: 3rem;\r\n  width: 100%;\r\n  \r\n  background-color: $color-white;\r\n  \r\n  @include twoSide; \r\n}\r\n\r\n.icon {\r\n  font-size: 1.6rem;\r\n  padding: 1rem 0.5rem;\r\n}\r\n</style>","import { render } from \"./detailTitle.vue?vue&type=template&id=62f21ed9&scoped=true\"\nimport script from \"./detailTitle.vue?vue&type=script&lang=js\"\nexport * from \"./detailTitle.vue?vue&type=script&lang=js\"\n\nimport \"./detailTitle.vue?vue&type=style&index=0&id=62f21ed9&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-62f21ed9\"\n\nexport default script","// 详情页的页脚\r\n<template>\r\n  <div class=\"detail-foot-wrapper\">\r\n    <div class=\"detail-footer\" :class=\"{ 'show-shadow': !ifDownloadProgress }\">\r\n      <div class=\"read\" @click=\"read\">阅读</div>\r\n\r\n      <div class=\"cache\" v-if=\"!ifCache\" @click=\"saveCache\">缓存书籍</div>\r\n      <div class=\"cache\" v-else @click=\"delCache\">删除缓存</div>\r\n\r\n      <div class=\"shelf\" @click=\"remove\" v-if=\"ifBookAddToShelf\">\r\n        已加入书架\r\n      </div>\r\n      <div class=\"shelf\" @click=\"add\" v-else>加入书架</div>\r\n    </div>\r\n    <div class=\"line-progress-wrapper\" v-if=\"ifDownloadProgress\">\r\n      <line-progress :width=\"percent\" :color2=\"color2\"></line-progress>\r\n    </div>\r\n    <transition name=\"toast\">\r\n      <toast :text=\"text\" :ifPersistence=\"false\" v-if=\"ifToast\"></toast>\r\n    </transition>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getBookShelfList } from \"@/utils/localStorage\";\r\nimport LineProgress from \"@/components/common/lineProgress\";\r\nimport { removeLocalForage } from \"@/utils/localForage\";\r\nimport { download } from \"@/api/\";\r\n// import '@/mock'\r\nimport Toast from \"@/components/common/Toast\";\r\nexport default {\r\n  props: [\"bkdetail\"],\r\n  data() {\r\n    return {\r\n      ifDownloadProgress: false,\r\n      percent: 0,\r\n      // shelfBkIndex: -1, // 当前图书在书架中的下标,所有的操作都直接操作vuex中的shelfList\r\n      animateTime: 2500,\r\n      color2: \"#DC1B42\",\r\n      flatBookIndex: -1, // no use\r\n      ifToast: false,\r\n      text: '<p>请先加入到书架</p>'\r\n    };\r\n  },\r\n  computed: {\r\n    ifBookAddToShelf() {\r\n      // 只能判断1级分组\r\n      this.refreshBookShelf(); // 用localStorage刷新vuex\r\n      for (let i = 0; i < this.shelfList.length; i++) {\r\n        if (this.shelfList[i].bookId == this.bkdetail.bookId) {\r\n          this.setShelfBkIndex(i);\r\n          return true; // 已经存在书架中\r\n        }\r\n      }\r\n      return false;\r\n    },\r\n    ifCache() {\r\n      /* \r\n        1. 当前图书必须在书架中\r\n        2. 获取当前图书在书架中的下标\r\n        3. 判断是否缓存过\r\n       */\r\n      // console.log(this.shelfList);\r\n      if (this.shelfBkIndex < 0) return false;\r\n      try {\r\n        let ifCache = this.shelfList[this.shelfBkIndex].cache;\r\n        if (ifCache == true) return true;\r\n        return false;\r\n      } catch (e) {\r\n        return false;\r\n      }\r\n    },\r\n  },\r\n  components: {\r\n    LineProgress,\r\n    Toast\r\n  },\r\n  methods: {\r\n    add() {\r\n      let book = JSON.parse(JSON.stringify(this.bkdetail));\r\n      book.type = 1;\r\n      this.addToBookShelf(book);\r\n    },\r\n    remove() {\r\n      let bookTitle = this.bkdetail.title;\r\n      this.removeFromBookShelf(bookTitle);\r\n    },\r\n    read() {\r\n      // 跳转到阅读器\r\n      let category = this.$route.query.category;\r\n      let filename = this.$route.query.filename;\r\n      this.showEbook(filename, category);\r\n      //\r\n    },\r\n    saveCache() {\r\n      // 如果不再书架中，则不能缓存\r\n      console.log(this.shelfBkIndex);\r\n      if (this.shelfBkIndex < 0){\r\n        this.ifToast = true;\r\n        setTimeout(()=>{\r\n           this.ifToast = false;\r\n        },2000)\r\n        return \r\n      }\r\n      \r\n      this.ifDownloadProgress = true;\r\n      download(\r\n        this.bkdetail,\r\n        (res) => {\r\n          /* 下载blob电子书文件成功\r\n           * 将缓存写入到indexDB\r\n           * 同步数据到vuex和localStorage\r\n           */\r\n          // 1. 关闭进度条效果\r\n          this.ifDownloadProgress = false;\r\n          // 2. 将缓存标志位置为true\r\n          this.shelfList[this.shelfBkIndex].cache = true; // **********\r\n          // 3. 刷新vuex和localStorage\r\n          this.refreshLocalStorage(this.shelfList);\r\n          // 4. 打开动画效果\r\n          this.setIfTickVisible(true);\r\n          // 5. 关闭动画效果\r\n          setTimeout(() => {\r\n            this.setIfTickVisible(false);\r\n            this.percent = 0;\r\n          }, this.animateTime);\r\n        },\r\n        (pgs) => {\r\n          this.percent = Math.ceil((pgs.loaded / pgs.total) * 100);\r\n        },\r\n        (err) => {\r\n          console.log(\"err:\", err);\r\n        }\r\n      );\r\n    },\r\n    delCache() {\r\n      this.ifDownloadProgress = true;\r\n      this.setIfTickVisible(true);\r\n      // 放在外面不做延时，为了之后的dialog里的文本信息是正确的\r\n      this.shelfList[this.shelfBkIndex].cache = false;\r\n\r\n      setTimeout(() => {\r\n        // 1. 进度条动画\r\n        this.ifDownloadProgress = false;\r\n        // 2. 从数据库中删除cache\r\n        removeLocalForage(this.shelfList[this.shelfBkIndex].fileName);\r\n        // 3. 同步到Vuex和localStorage\r\n        this.refreshLocalStorage(this.shelfList);\r\n\r\n        // 4. 关闭打勾的动画效果\r\n        this.setIfTickVisible(false);\r\n      }, this.animateTime);\r\n    },\r\n  },\r\n  created() {\r\n    let info = `ifBookAddToShelf: ${this.ifBookAddToShelf} ; shelfBkIndex : ${this.shelfBkIndex}`;\r\n    console.log(info);\r\n  },\r\n};\r\n</script>\r\n<style lang='scss' scoped>\r\n@import \"@/assets/styles/global.scss\";\r\n.detail-footer {\r\n  position: fixed;\r\n  @include twoSide; \r\n\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 3rem;\r\n  \r\n  font-size: 1rem;\r\n  font-weight: bold;\r\n\r\n  background-color: $color-white;\r\n  color: $color-blue;\r\n\r\n  &.show-shadow {\r\n    box-shadow: 0 -0.1rem 0.3rem rgba(0, 0, 0, 0.3);\r\n  }\r\n  .read {\r\n    flex: 1;\r\n    font-size: 1.1rem;\r\n  }\r\n  .cache {\r\n    flex: 1;\r\n  }\r\n  .shelf {\r\n    flex: 1;\r\n  }\r\n}\r\n.line-progress-wrapper {\r\n  width: 100%;\r\n  height: 0.3rem;\r\n  left: 0;\r\n  bottom: 3rem;\r\n  position: absolute;\r\n}\r\n</style>","<template>\r\n  <div class=\"line-progress\">\r\n    <div class=\"outside-line\" :style=\"{'background-color': color1}\">\r\n      <div class=\"inside-line\" :style=\"{'background-color': color2 , 'width': width+'%'}\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    props:{\r\n        color1:{\r\n            type: String,\r\n            default: 'transparent',\r\n        },\r\n        color2:{\r\n            type: String,\r\n            default: 'red'\r\n        },\r\n        width:{\r\n            type: Number,\r\n            default: 1\r\n        }\r\n    }\r\n};\r\n</script>\r\n<style lang='scss' scoped>\r\n@import \"@/assets/styles/global.scss\";\r\n.line-progress {\r\n  width: 100%;\r\n  height: 100%;\r\n  height: .2rem;\r\n  z-index: 1000;\r\n  .outside-line {\r\n    width: 100%;\r\n    height: 100%;\r\n    .inside-line {\r\n        height: 100%;\r\n    }\r\n  }\r\n}\r\n</style>","import { render } from \"./lineProgress.vue?vue&type=template&id=2cf1cdfa&scoped=true\"\nimport script from \"./lineProgress.vue?vue&type=script&lang=js\"\nexport * from \"./lineProgress.vue?vue&type=script&lang=js\"\n\nimport \"./lineProgress.vue?vue&type=style&index=0&id=2cf1cdfa&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-2cf1cdfa\"\n\nexport default script","import { render } from \"./footer.vue?vue&type=template&id=2703e3e6&scoped=true\"\nimport script from \"./footer.vue?vue&type=script&lang=js\"\nexport * from \"./footer.vue?vue&type=script&lang=js\"\n\nimport \"./footer.vue?vue&type=style&index=0&id=2703e3e6&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-2703e3e6\"\n\nexport default script","<template>\r\n  <div class=\"tick-wrapper\" v-if=\"ifTickVisible\">\r\n    <svg width=\"400\" height=\"400\">\r\n      <circle\r\n        fill=\"none\"\r\n        stroke=\"#68E534\"\r\n        stroke-width=\"20\"\r\n        cx=\"200\"\r\n        cy=\"200\"\r\n        r=\"190\"\r\n        class=\"circle\"\r\n        stroke-linecap=\"round\"\r\n        transform=\"rotate(-90 200 200) \"\r\n      />\r\n      <polyline\r\n        fill=\"none\"\r\n        stroke=\"#68E534\"\r\n        stroke-width=\"24\"\r\n        points=\"88,214 173,284 304,138\"\r\n        stroke-linecap=\"round\"\r\n        stroke-linejoin=\"round\"\r\n        class=\"tick\"\r\n      />\r\n    </svg>\r\n    <h2>{{ dialog }}</h2>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: [\"dialog\"],\r\n};\r\n</script>\r\n<style lang='scss' scoped>\r\n@import \"@/assets/styles/global.scss\";\r\n.tick-wrapper {\r\n  zoom: 0.1;\r\n  @include verticalCenter;\r\n}\r\n\r\n.circle {\r\n  stroke-dasharray: 1194;\r\n  stroke-dashoffset: 1194;\r\n  animation: circle 1s ease-in-out;\r\n  animation-fill-mode: forwards;\r\n}\r\n\r\n.tick {\r\n  stroke-dasharray: 350;\r\n  stroke-dashoffset: 350;\r\n  animation: tick 0.8s ease-out;\r\n  animation-fill-mode: forwards;\r\n  animation-delay: 0.95s;\r\n}\r\n\r\nh2 {\r\n  font-family: Helvetica;\r\n  font-size: 10rem;\r\n  margin-top: 8rem;\r\n  color: $color-gray4;\r\n  opacity: 0;\r\n  animation: 0.6s title ease-in-out;\r\n  animation-delay: 1.2s;\r\n  animation-fill-mode: forwards;\r\n}\r\n\r\n@keyframes circle {\r\n  from {\r\n    stroke-dashoffset: 1194;\r\n  }\r\n\r\n  to {\r\n    stroke-dashoffset: 2388;\r\n  }\r\n}\r\n\r\n@keyframes tick {\r\n  from {\r\n    stroke-dashoffset: 350;\r\n  }\r\n\r\n  to {\r\n    stroke-dashoffset: 0;\r\n  }\r\n}\r\n\r\n@keyframes title {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n</style>","import { render } from \"./Tick.vue?vue&type=template&id=2c1bb299&scoped=true\"\nimport script from \"./Tick.vue?vue&type=script&lang=js\"\nexport * from \"./Tick.vue?vue&type=script&lang=js\"\n\nimport \"./Tick.vue?vue&type=style&index=0&id=2c1bb299&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-2c1bb299\"\n\nexport default script","import { render } from \"./storeDetail.vue?vue&type=template&id=9bccea32&scoped=true\"\nimport script from \"./storeDetail.vue?vue&type=script&lang=js\"\nexport * from \"./storeDetail.vue?vue&type=script&lang=js\"\n\nimport \"./storeDetail.vue?vue&type=style&index=0&id=9bccea32&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-9bccea32\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Toast.vue?vue&type=style&index=0&id=129ab776&lang=scss&scoped=true\""],"sourceRoot":""}