(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-789379ac"],{"0e4b":function(t,e,a){"use strict";a("3fd4")},1798:function(t,e,a){},"2a5e":function(t,e,a){"use strict";a("c942")},"2cf43":function(t,e,a){"use strict";var c=a("7a23"),s=Object(c["J"])("data-v-3dfa55ee"),i=s((function(t,e,a,s,i,n){return Object(c["q"])(),Object(c["e"])("div",{class:["scroll",{noScroll:a.ifNoScroll}],ref:"scrollWrapper",onScrollPassive:e[1]||(e[1]=function(){return n.handleScroll&&n.handleScroll.apply(n,arguments)})},[Object(c["x"])(t.$slots,"default")],34)})),n=(a("a9e3"),{props:{top:{type:Number,default:0},bottom:{type:Number,default:0},ifNoScroll:{type:Boolean,default:!1}},methods:{handleScroll:function(t){var e=t.target.scrollTop||window.pageYOffset||document.body.scrollTop;this.setHomeOffSetY(e)},refresh:function(){if(this.$refs.scrollWrapper){var t=window.innerHeight-(this.top+this.bottom)*parseInt(this.htmlFontSize)+"px";this.$refs.scrollWrapper.style.height=t,this.$refs.scrollWrapper.addEventListener("scroll",this.handleScroll)}}},mounted:function(){this.getHTMLFontSize(),this.refresh()},watch:{top:function(t){this.refresh()}}});a("0e4b");n.render=i,n.__scopeId="data-v-3dfa55ee";e["a"]=n},"2f47":function(t,e,a){"use strict";a("3ba9")},"373d":function(t,e,a){"use strict";a("da23")},"3ba9":function(t,e,a){},"3fd4":function(t,e,a){},"432b":function(t,e,a){},"48e0":function(t,e,a){"use strict";a.r(e);var c=a("7a23"),s=Object(c["J"])("data-v-5132c7fc");Object(c["t"])("data-v-5132c7fc");var i={class:"store-shelf"};Object(c["r"])();var n=s((function(t,e,a,n,r,o){var l=Object(c["y"])("shelf-title"),d=Object(c["y"])("shelf-search"),f=Object(c["y"])("shelf-list"),h=Object(c["y"])("scroll"),u=Object(c["y"])("toast");return Object(c["q"])(),Object(c["e"])("div",i,[Object(c["g"])(l),Object(c["g"])(h,{bottom:7},{default:s((function(){return[Object(c["g"])(d),Object(c["g"])(f,{class:"shelf-list-component"})]})),_:1}),Object(c["g"])(c["b"],{name:"toast"},{default:s((function(){return[Object(c["g"])(u,{text:r.text,ifPersistence:!0},null,8,["text"])]})),_:1})])})),r=Object(c["J"])("data-v-1c509fb4");Object(c["t"])("data-v-1c509fb4");var o={class:"shelf-title"},l={key:"345"},d={key:"123"},f={class:"shelf-title-wrapper"},h=Object(c["g"])("span",{class:"main-title"},"书架",-1),u={key:0,class:"sub-title"};Object(c["r"])();var b=r((function(t,e,a,s,i,n){return Object(c["q"])(),Object(c["e"])("div",o,[Object(c["g"])("div",{class:"clear-cache-btn",onClick:e[1]||(e[1]=function(){return n.clearShelfList&&n.clearShelfList.apply(n,arguments)})},[t.isEditMode?(Object(c["q"])(),Object(c["e"])("span",l,"清除书籍")):t.isEditMode?Object(c["f"])("",!0):(Object(c["q"])(),Object(c["e"])("span",d,"清除缓存"))]),Object(c["g"])("div",f,[h,t.isEditMode?(Object(c["q"])(),Object(c["e"])("span",u,Object(c["B"])(n.subTitle),1)):Object(c["f"])("",!0)]),Object(c["g"])("div",{class:"edit-btn",onClick:e[2]||(e[2]=function(){return n.editClick&&n.editClick.apply(n,arguments)})},Object(c["B"])(n.editText),1)])})),p=(a("45fc"),a("e8ec")),O={computed:{editText:function(){return this.isEditMode?"取消":"编辑"},subTitle:function(){var t=this.shelfSelected.length||0;return 0===t?"添加书籍":"已选择".concat(t,"本")}},methods:{editClick:function(){this.SET_SHELF_SELECTED([]),this.SET_EDIT_MODE()},clearShelfList:function(){var t=this;if(console.log("清除缓存"),this.shelfSelected.length>0){for(var e=[],a=function(a){var c=t.shelfList[a];t.shelfSelected.some((function(t){return t.bookId==c.bookId}))||e.push(c)},c=0;c<this.shelfList.length;c++)a(c);this.SET_SHELF_LIST(e),Object(p["j"])(e),console.log("写入到vuex")}else this.clearBookShelf()}}};a("6e69");O.render=b,O.__scopeId="data-v-1c509fb4";var j=O,v=Object(c["J"])("data-v-020fb492");Object(c["t"])("data-v-020fb492");var g={class:"shelf-search-wrapper"},m={class:"shelf-search"},S={class:"search-wrapper"},y=Object(c["g"])("div",{class:"icon-search-wrapper"},[Object(c["g"])("span",{class:"icon-search icon"})],-1),T={class:"search-input-wrapper"},k=Object(c["g"])("span",{class:"icon-close-circle-fill"},null,-1),w=Object(c["g"])("span",{class:"cancel-text"},"取消",-1);Object(c["r"])();var x=v((function(t,e,a,s,i,n){return Object(c["q"])(),Object(c["e"])("div",g,[Object(c["g"])("div",m,[Object(c["g"])("div",S,[y,Object(c["g"])("div",T,[Object(c["G"])(Object(c["g"])("input",{class:"search-input",type:"text",placeholder:"搜索",onClick:e[1]||(e[1]=function(){return n.onSearchClick&&n.onSearchClick.apply(n,arguments)}),"onUpdate:modelValue":e[2]||(e[2]=function(t){return i.searchText=t})},null,512),[[c["D"],i.searchText]])]),Object(c["G"])(Object(c["g"])("div",{class:"icon-clear-wrapper",onClick:e[3]||(e[3]=function(){return n.clearSearchText&&n.clearSearchText.apply(n,arguments)})},[k],512),[[c["E"],i.searchText.length>0]])]),Object(c["g"])("div",{class:"cancel-btn-wrapper",onClick:e[4]||(e[4]=function(){return n.onCancelClick&&n.onCancelClick.apply(n,arguments)})},[w])])])})),I={data:function(){return{searchText:""}},methods:{onSearchClick:function(){},clearSearchText:function(){this.searchText=""},onCancelClick:function(){}}};a("373d");I.render=x,I.__scopeId="data-v-020fb492";var E=I,C=a("2cf43"),_=Object(c["J"])("data-v-a752f860");Object(c["t"])("data-v-a752f860");var L={class:"shelf-list"},D={class:"shelf-item-wrapper"};Object(c["r"])();var M=_((function(t,e,a,s,i,n){var r=Object(c["y"])("shelf-item");return Object(c["q"])(),Object(c["e"])("div",L,[Object(c["g"])("div",D,[(Object(c["q"])(!0),Object(c["e"])(c["a"],null,Object(c["w"])(t.shelfList,(function(t,e){return Object(c["q"])(),Object(c["e"])("div",{class:"shelf-items",key:e},[Object(c["g"])(r,{data:t,class:"item-instance",style:{height:n.Height}},null,8,["data","style"])])})),128))])])})),q=Object(c["J"])("data-v-39284ebc");Object(c["t"])("data-v-39284ebc");var B={class:"item-title-wrapper"};Object(c["r"])();var H=q((function(t,e,a,s,i,n){return Object(c["q"])(),Object(c["e"])("div",{class:["shelf-item",{"shelf-item-shadow":3!=a.data.type}]},[(Object(c["q"])(),Object(c["e"])(Object(c["z"])(n.item),{data:a.data,onClick:e[1]||(e[1]=function(t){return n.onItemClick(a.data)}),onDragover:n.itemDragOver,onDrop:n.itemDrop,style:{height:t.Height}},null,8,["data","onDragover","onDrop","style"])),Object(c["g"])("div",B,[Object(c["g"])("div",{class:["title",{"category-name":2==a.data.type}]},Object(c["B"])(a.data.title),3)]),Object(c["G"])(Object(c["g"])("div",{class:["icon-selected",{"is-selected":a.data.selected}]},null,2),[[c["E"],t.isEditMode&&1===a.data.type]])],2)})),J=(a("99af"),a("4de4"),a("4160"),a("a434"),a("159b"),a("2909")),F=Object(c["J"])("data-v-581df253");Object(c["t"])("data-v-581df253");var N={class:"shelf-item-book"};Object(c["r"])();var P=F((function(t,e,a,s,i,n){return Object(c["q"])(),Object(c["e"])("div",N,[Object(c["g"])("img",{src:a.data.cover,class:"shelf-item-book-cover",draggable:"true",onDragstart:e[1]||(e[1]=function(){return n.imgDragStart&&n.imgDragStart.apply(n,arguments)})},null,40,["src"])])})),$={props:["data"],methods:{imgDragStart:function(t){var e=this;this.shelfList.forEach((function(t,a){t.bookId==e.data.bookId&&e.setDragSourceIndex(a)}))}}};a("e6a3");$.render=P,$.__scopeId="data-v-581df253";var W=$,z=Object(c["J"])("data-v-124c18c9");Object(c["t"])("data-v-124c18c9");var A={class:"shelf-item-add"},G=Object(c["g"])("span",{class:"icon-add"},null,-1);Object(c["r"])();var V=z((function(t,e,a,s,i,n){return Object(c["q"])(),Object(c["e"])("div",A,[G])})),Y={};a("a0b7");Y.render=V,Y.__scopeId="data-v-124c18c9";var R=Y,U=Object(c["J"])("data-v-5c311b7a");Object(c["t"])("data-v-5c311b7a");var K={class:"shelf-category-wrapper"};Object(c["r"])();var Q=U((function(t,e,a,s,i,n){return Object(c["q"])(),Object(c["e"])("div",{class:"shelf-category",onClick:e[1]||(e[1]=function(){return n.enterCategory&&n.enterCategory.apply(n,arguments)})},[Object(c["g"])("div",K,[(Object(c["q"])(!0),Object(c["e"])(c["a"],null,Object(c["w"])(n.itemList,(function(t,e){return Object(c["q"])(),Object(c["e"])("div",{class:"shelf-category-item",key:e},[Object(c["g"])("img",{src:t.cover,class:"shelf-category-item-cover"},null,8,["src"])])})),128))])])})),X={props:["data"],computed:{itemList:function(){return this.data?this.data.itemList.splice(0,9):[]}},methods:{enterCategory:function(){this.setIfCategoryVisible(!0),this.setCategoryData(this.data),this.$router.push({path:"/store/category"})}}};a("2a5e");X.render=Q,X.__scopeId="data-v-5c311b7a";var Z=X,tt={props:["data"],components:{ShelfItemBook:Object(c["l"])(W),ShelfItemAdd:Object(c["l"])(R),ShelfItemCategory:Object(c["l"])(Z)},data:function(){return{book:W,category:Z,add:R,ifDrag:!1}},computed:{item:function(){return 1===this.data.type?this.book:2===this.data.type?this.category:this.add}},watch:{isEditMode:function(t){this.data.selected=!1}},methods:{onItemClick:function(t){this.isEditMode?1==this.data.type&&("boolean"===typeof this.data.selected?(this.data.selected=!this.data.selected,this.data.selected?this.SET_SHELF_SELECTED([].concat(Object(J["a"])(this.shelfSelected),[t])):this.SET_SHELF_SELECTED(this.shelfSelected.filter((function(e){return e.bookId!==t.bookId})))):this.data.selected=!0):1==this.data.type?this.showBookDetail(t.fileName,t.categoryText):2==this.data.type||this.$router.push({path:"/store/home"})},makeNewCategory:function(){var t=this.shelfList[this.dragSourceIndex],e=this.shelfList[this.dragTargetIndex],a={title:"新建分组",itemList:[t,e],id:e.id,selected:!1,type:2,cache:!1},c=Object(p["a"])();c[this.dragTargetIndex]=a,c.splice(this.dragSourceIndex,1),Object(p["j"])(c),this.refreshBookShelf()},addToOldCategory:function(t){var e=Object(p["a"])();e[this.dragTargetIndex].itemList.push(e[this.dragSourceIndex]),e.splice(this.dragSourceIndex,1),Object(p["j"])(e),this.refreshBookShelf()},itemDragOver:function(t){t.preventDefault()},itemDrop:function(t){var e=this;if(t.preventDefault(),this.shelfList.forEach((function(t,a){t.title&&t.title===e.data.title&&e.setDragTargetIndex(a)})),this.dragTargetIndex!==this.dragSourceIndex)switch(this.shelfList[this.dragTargetIndex].type){case 1:this.makeNewCategory();break;case 2:this.addToOldCategory();break;default:console.log("miss")}else console.log("dragTargetIndex Error")}}};a("2f47");tt.render=H,tt.__scopeId="data-v-39284ebc";var et=tt,at=(a("365c"),{components:{shelfItem:et},computed:{Height:function(){return"".concat(350*(window.innerWidth/3-2*parseFloat(this.htmlFontSize))/250,"px")}},created:function(){var t=Object(p["a"])();t=this.ifAddIsExit(t)}});a("618e");at.render=M,at.__scopeId="data-v-a752f860";var ct=at,st=a("78dc"),it={data:function(){return{text:"<p>建议分辨率：320 x 568 </p> <p> PC模式下拖拽书籍可实现分组</p>"}},components:{shelfTitle:Object(c["l"])(j),shelfSearch:E,scroll:C["a"],ShelfList:ct,Toast:st["a"]}};a("d26f");it.render=n,it.__scopeId="data-v-5132c7fc";e["default"]=it},"618e":function(t,e,a){"use strict";a("432b")},"6e69":function(t,e,a){"use strict";a("ba13")},"78dc":function(t,e,a){"use strict";var c=a("7a23"),s=Object(c["J"])("data-v-129ab776"),i=s((function(t,e,a,s,i,n){return i.ifShowToast?(Object(c["q"])(),Object(c["e"])("div",{key:0,class:"toast-wrapper",onMouseenter:e[1]||(e[1]=function(){return n.toastOn&&n.toastOn.apply(n,arguments)}),onMouseleave:e[2]||(e[2]=function(){return n.toastOff&&n.toastOff.apply(n,arguments)})},[Object(c["g"])("div",{class:"toast-text",innerHTML:a.text},null,8,["innerHTML"])],32)):Object(c["f"])("",!0)})),n=a("e8ec"),r={data:function(){return{ifShowToast:!1,animationTime:1e3,task:-1}},props:{text:{type:String,default:"温馨提示"},MouseEnterFocus:{type:Boolean,default:!0},MouseLeaveOff:{type:Boolean,default:!0},ifPersistence:{type:Boolean,default:!1}},methods:{toastOn:function(){this.MouseEnterFocus&&(this.ifShowToast=!0,clearTimeout(this.task),this.ifShowToast=!0)},toastOff:function(){var t=this;this.MouseLeaveOff&&(this.task=setTimeout((function(){t.ifShowToast=!1}),this.animationTime/6))}},mounted:function(){var t=this,e=Object(n["h"])();console.log(this.ifPersistence),this.ifPersistence&&!e?(this.ifShowToast=!0,this.task=setTimeout((function(){t.ifShowToast=!1,Object(n["q"])(!0)}),this.animationTime)):this.ifPersistence||(this.ifShowToast=!0,this.task=setTimeout((function(){t.ifShowToast=!1}),this.animationTime))}};a("bc19");r.render=i,r.__scopeId="data-v-129ab776";e["a"]=r},8041:function(t,e,a){},a0b7:function(t,e,a){"use strict";a("8041")},a434:function(t,e,a){"use strict";var c=a("23e7"),s=a("23cb"),i=a("a691"),n=a("50c4"),r=a("7b0b"),o=a("65f0"),l=a("8418"),d=a("1dde"),f=a("ae40"),h=d("splice"),u=f("splice",{ACCESSORS:!0,0:0,1:2}),b=Math.max,p=Math.min,O=9007199254740991,j="Maximum allowed length exceeded";c({target:"Array",proto:!0,forced:!h||!u},{splice:function(t,e){var a,c,d,f,h,u,v=r(this),g=n(v.length),m=s(t,g),S=arguments.length;if(0===S?a=c=0:1===S?(a=0,c=g-m):(a=S-2,c=p(b(i(e),0),g-m)),g+a-c>O)throw TypeError(j);for(d=o(v,c),f=0;f<c;f++)h=m+f,h in v&&l(d,f,v[h]);if(d.length=c,a<c){for(f=m;f<g-c;f++)h=f+c,u=f+a,h in v?v[u]=v[h]:delete v[u];for(f=g;f>g-c+a;f--)delete v[f-1]}else if(a>c)for(f=g-c;f>m;f--)h=f+c-1,u=f+a-1,h in v?v[u]=v[h]:delete v[u];for(f=0;f<a;f++)v[f+m]=arguments[f+2];return v.length=g-c+a,d}})},ba13:function(t,e,a){},bac1:function(t,e,a){},bc19:function(t,e,a){"use strict";a("bac1")},c942:function(t,e,a){},d26f:function(t,e,a){"use strict";a("1798")},da23:function(t,e,a){},e4a3:function(t,e,a){},e6a3:function(t,e,a){"use strict";a("e4a3")}}]);
//# sourceMappingURL=chunk-789379ac.a8b129bf.js.map